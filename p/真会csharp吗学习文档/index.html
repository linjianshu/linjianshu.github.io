<!DOCTYPE html>
<html lang="en-us">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='C#5.0&#43;å­¦ä¹ æ–‡æ¡£ ç‰¹ç‚¹ï¼š
é€šç”¨æ€§è¯­è¨€ ç±»å‹å®‰å…¨ é¢å‘å¯¹è±¡ ç›®æ ‡ï¼šç”Ÿäº§åŠ›
ç®€æ´æ€§ è¡¨è¾¾åŠ› é«˜æ€§èƒ½ å¹³å°ä¸­ç«‹ï¼Œä¸å¹³å°æ— å…³
å°è£…ã€ç»§æ‰¿ã€å¤šæ€
ç»Ÿä¸€çš„ç±»å‹ç³»ç»Ÿï¼š
ç±»å‹ å…±åŒçš„åŸºç±» ç±»å’Œæ¥å£
class interface å±æ€§propertyã€æ–¹æ³•methodå’Œäº‹ä»¶event
å”¯ä¸€ä¸€ç§å‡½æ•°æˆå‘˜(Function Member):æ–¹æ³•(method)
æ–¹æ³•è¿˜åŒ…æ‹¬ï¼šå±æ€§(Property)å’Œäº‹ä»¶(Event)è¿˜æœ‰å…¶ä»–çš„
å±æ€§
äº‹ä»¶
C#ä¸»è¦æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œä½†æ˜¯ä¹Ÿå€Ÿç”¨äº†ä¸å°‘å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹æ€§
å‡½æ•°å¯ä»¥å½“åšå€¼æ¥å¯¹å¾…
å§”æ‰˜Delegate æ”¯æŒçº¯(purity)æ¨¡å¼
é¿å…ä½¿ç”¨å€¼å¯å˜çš„å˜é‡ ç±»å‹å®‰å…¨
c#ä¸»è¦æ¥è¯´æ˜¯ç±»å‹å®‰å…¨çš„ é™æ€ç±»å‹ static typing åŠ¨æ€ç±»å‹ dynamic å¼ºç±»å‹ strongly typed language å†…å­˜ç®¡ç†
ä¾èµ–äºè¿è¡Œæ—¶æ¥æ‰§è¡Œè‡ªåŠ¨å†…å­˜ç®¡ç† CLR:Common Language Runtime (å…¬å…±è¯­è¨€è¿è¡Œæ—¶) GCï¼š Garbage Collector (åƒåœ¾æ”¶é›†å™¨) c#æ²¡æœ‰æ¶ˆç­æŒ‡é’ˆ é€šå¸¸æƒ…å†µä¸‹ä¸éœ€è¦ä½¿ç”¨æŒ‡é’ˆ unsafe å¹³å°æ”¯æŒ
åŸæ¥c#ä¸»è¦æ˜¯åœ¨windowä¸Šé¢è¿è¡Œ
ç°åœ¨å¯ä»¥åœ¨æ‰€æœ‰çš„å¹³å°ä¸Šè¿è¡Œ
windows macs linux ios android &amp;hellip; .Net Core
.Net/.Net Core çš„æ ¸å¿ƒå°±æ˜¯CLR: Comman Language Runtime
CLRå’Œè¯­è¨€æ— å…³'><title>çœŸä¼šCSharpå—å­¦ä¹ æ–‡æ¡£</title>

<link rel='canonical' href='https://linjianshu.github.io/p/%E7%9C%9F%E4%BC%9Acsharp%E5%90%97%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3/'>

<link rel="stylesheet" href="/scss/style.min.css">
<style>
     
    body{
        background-repeat: repeat;
        background-attachment: fixed;
        background-size:cover;
         cursor: url(https://files.cnblogs.com/files/monster-jian/cursor.ico),auto;
    }
     
    #div_digg {
      position: fixed;
      bottom: 10px;
      right: 15px;
      border: 2px solid #ECD7B1;
      padding: 10px;
      width: 140px;
      background-color: #fff;
      border-radius: 5px 5px 5px 5px !important;
      box-shadow: 0 0 0 1px #5F5A4B, 1px 1px 6px 1px rgba(10, 10, 0, 0.5);
    }
    </style><script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>

<script src="https://files.cnblogs.com/files/liyhbk/js.js" color="0,0,255" opacity="1" count="119" zindex="-2"></script>
<script src="https://files.cnblogs.com/files/liyhbk/js.js" color="0,0,255" opacity="1" count="119" zindex="-2">
</script>
<script type="text/javascript" color="255,0,0" pointcolor="255,0,0" opacity="0.7" zindex="-2" count="100" src="/dist/canvas-nest.js"></script>
<script type="text/javascript" src="/dist/canvas-nest.umd.js"></script>
<script type="text/javascript">
    var cn = new CanvasNest(document.getElementById('area-render'), {
        color: '255,0,255',
        count: 50,
      });
      
      function asyncLoad() {
        
        var i = document.createElement("iframe");
        i.src = "https://ghbtns.com/github-btn.html?user=hustcc&repo=canvas-nest.js&type=star&count=true";
        i.scrolling = "no";
        i.frameborder = "0";
        i.border = "0";
        i.setAttribute("frameborder", "0", 0);
        i.width = "100px";
        i.height = "20px";
        document.getElementById("github-iframe").appendChild(i);
      }
      function loadGitHubBtn() {
        if (window.addEventListener) {window.addEventListener("load", asyncLoad, false);}
        else if (window.attachEvent) {window.attachEvent("onload", asyncLoad);}
        else {window.onload = asyncLoad;}
      }
      loadGitHubBtn();
</script>
<script src="/canvas-nest.js?version=10"></script><canvas width="1536" height="454" style="display: block; position: absolute; top: 0px; left: 0px; height: 100%; width: 100%; overflow: hidden; pointer-events: none;"></canvas>
<script src="https://files.cnblogs.com/files/monster-jian/mouse-click.js"></script>
<script type="text/javascript">
    
     
    var a_idx = 0;
    jQuery(document).ready(function($) {
        $("body").click(function(e) {
            var a = new Array("â¤ä¸åšå’¸é±¼ï¼â¤","â¤æ‹’ç»æ‡’æƒ°ï¼â¤","â¤æƒ³åšåƒè´§â¤","â¤å‘å¤§ä½¬å­¦ä¹ â¤","â¤æ‰¶æˆ‘èµ·æ¥~â¤","â¤come onâ¤","â¤ä¸€ç›´åœ¨è·¯ä¸Š~â¤","â¤ç´¯äº†~â¤","â¤å†è¶´ä¸€ä¼šâ¤","â¤66666â¤","â¤é«˜å…´çš„é£èµ·*****â¤");
            var $i = $("<span></span>").text(a[a_idx]);
            a_idx = (a_idx + 1) % a.length;
            var x = e.pageX,
            y = e.pageY;
            $i.css({
                "z-index": 999999999999999999999999999999999999999999999999999999999999999999999,
                "top": y - 20,
                "left": x,
                "position": "absolute",
                "font-weight": "bold",
                "color": "rgb("+~~(255*Math.random())+","+~~(255*Math.random())+","+~~(255*Math.random())+")"
            });
            $("body").append($i);
            $i.animate({
                "top": y - 180,
                "opacity": 0
            },
            1500,
            function() {
                $i.remove();
            });
        });
    });
    </script>

    <script src="https://eqcn.ajz.miesnfu.com/wp-content/plugins/wp-3d-pony/live2dw/lib/L2Dwidget.min.js"></script>  

 
   
      
      
          
         <script>         
            L2Dwidget.init({ "model": { jsonPath:          "https://unpkg.com/live2d-widget-model-shizuku@1.0.5/assets/shizuku.model.json",  
                  "scale": 1 }, "display": { "position": "right", "width": 66, "height": 88,        "hOffset": 0, "vOffset": -20 },
                   "mobile": { "show": true, "scale": 0.5 },      "react": { "opacityDefault": 0.8, "opacityOnHover": 0.1 } }); 
                    </script><meta property='og:title' content='çœŸä¼šCSharpå—å­¦ä¹ æ–‡æ¡£'>
<meta property='og:description' content='C#5.0&#43;å­¦ä¹ æ–‡æ¡£ ç‰¹ç‚¹ï¼š
é€šç”¨æ€§è¯­è¨€ ç±»å‹å®‰å…¨ é¢å‘å¯¹è±¡ ç›®æ ‡ï¼šç”Ÿäº§åŠ›
ç®€æ´æ€§ è¡¨è¾¾åŠ› é«˜æ€§èƒ½ å¹³å°ä¸­ç«‹ï¼Œä¸å¹³å°æ— å…³
å°è£…ã€ç»§æ‰¿ã€å¤šæ€
ç»Ÿä¸€çš„ç±»å‹ç³»ç»Ÿï¼š
ç±»å‹ å…±åŒçš„åŸºç±» ç±»å’Œæ¥å£
class interface å±æ€§propertyã€æ–¹æ³•methodå’Œäº‹ä»¶event
å”¯ä¸€ä¸€ç§å‡½æ•°æˆå‘˜(Function Member):æ–¹æ³•(method)
æ–¹æ³•è¿˜åŒ…æ‹¬ï¼šå±æ€§(Property)å’Œäº‹ä»¶(Event)è¿˜æœ‰å…¶ä»–çš„
å±æ€§
äº‹ä»¶
C#ä¸»è¦æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œä½†æ˜¯ä¹Ÿå€Ÿç”¨äº†ä¸å°‘å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹æ€§
å‡½æ•°å¯ä»¥å½“åšå€¼æ¥å¯¹å¾…
å§”æ‰˜Delegate æ”¯æŒçº¯(purity)æ¨¡å¼
é¿å…ä½¿ç”¨å€¼å¯å˜çš„å˜é‡ ç±»å‹å®‰å…¨
c#ä¸»è¦æ¥è¯´æ˜¯ç±»å‹å®‰å…¨çš„ é™æ€ç±»å‹ static typing åŠ¨æ€ç±»å‹ dynamic å¼ºç±»å‹ strongly typed language å†…å­˜ç®¡ç†
ä¾èµ–äºè¿è¡Œæ—¶æ¥æ‰§è¡Œè‡ªåŠ¨å†…å­˜ç®¡ç† CLR:Common Language Runtime (å…¬å…±è¯­è¨€è¿è¡Œæ—¶) GCï¼š Garbage Collector (åƒåœ¾æ”¶é›†å™¨) c#æ²¡æœ‰æ¶ˆç­æŒ‡é’ˆ é€šå¸¸æƒ…å†µä¸‹ä¸éœ€è¦ä½¿ç”¨æŒ‡é’ˆ unsafe å¹³å°æ”¯æŒ
åŸæ¥c#ä¸»è¦æ˜¯åœ¨windowä¸Šé¢è¿è¡Œ
ç°åœ¨å¯ä»¥åœ¨æ‰€æœ‰çš„å¹³å°ä¸Šè¿è¡Œ
windows macs linux ios android &amp;hellip; .Net Core
.Net/.Net Core çš„æ ¸å¿ƒå°±æ˜¯CLR: Comman Language Runtime
CLRå’Œè¯­è¨€æ— å…³'>
<meta property='og:url' content='https://linjianshu.github.io/p/%E7%9C%9F%E4%BC%9Acsharp%E5%90%97%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3/'>
<meta property='og:site_name' content='think hy how to learn'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='.Net' /><meta property='article:published_time' content='2021-01-30T00:17:57&#43;08:00'/><meta property='article:modified_time' content='2021-01-30T00:17:57&#43;08:00'/><meta property='og:image' content='https://linjianshu.github.io/img/avatar.png' />
<meta name="twitter:site" content="@ljsljs56495989">
    <meta name="twitter:creator" content="@ljsljs56495989"><meta name="twitter:title" content="çœŸä¼šCSharpå—å­¦ä¹ æ–‡æ¡£">
<meta name="twitter:description" content="C#5.0&#43;å­¦ä¹ æ–‡æ¡£ ç‰¹ç‚¹ï¼š
é€šç”¨æ€§è¯­è¨€ ç±»å‹å®‰å…¨ é¢å‘å¯¹è±¡ ç›®æ ‡ï¼šç”Ÿäº§åŠ›
ç®€æ´æ€§ è¡¨è¾¾åŠ› é«˜æ€§èƒ½ å¹³å°ä¸­ç«‹ï¼Œä¸å¹³å°æ— å…³
å°è£…ã€ç»§æ‰¿ã€å¤šæ€
ç»Ÿä¸€çš„ç±»å‹ç³»ç»Ÿï¼š
ç±»å‹ å…±åŒçš„åŸºç±» ç±»å’Œæ¥å£
class interface å±æ€§propertyã€æ–¹æ³•methodå’Œäº‹ä»¶event
å”¯ä¸€ä¸€ç§å‡½æ•°æˆå‘˜(Function Member):æ–¹æ³•(method)
æ–¹æ³•è¿˜åŒ…æ‹¬ï¼šå±æ€§(Property)å’Œäº‹ä»¶(Event)è¿˜æœ‰å…¶ä»–çš„
å±æ€§
äº‹ä»¶
C#ä¸»è¦æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œä½†æ˜¯ä¹Ÿå€Ÿç”¨äº†ä¸å°‘å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹æ€§
å‡½æ•°å¯ä»¥å½“åšå€¼æ¥å¯¹å¾…
å§”æ‰˜Delegate æ”¯æŒçº¯(purity)æ¨¡å¼
é¿å…ä½¿ç”¨å€¼å¯å˜çš„å˜é‡ ç±»å‹å®‰å…¨
c#ä¸»è¦æ¥è¯´æ˜¯ç±»å‹å®‰å…¨çš„ é™æ€ç±»å‹ static typing åŠ¨æ€ç±»å‹ dynamic å¼ºç±»å‹ strongly typed language å†…å­˜ç®¡ç†
ä¾èµ–äºè¿è¡Œæ—¶æ¥æ‰§è¡Œè‡ªåŠ¨å†…å­˜ç®¡ç† CLR:Common Language Runtime (å…¬å…±è¯­è¨€è¿è¡Œæ—¶) GCï¼š Garbage Collector (åƒåœ¾æ”¶é›†å™¨) c#æ²¡æœ‰æ¶ˆç­æŒ‡é’ˆ é€šå¸¸æƒ…å†µä¸‹ä¸éœ€è¦ä½¿ç”¨æŒ‡é’ˆ unsafe å¹³å°æ”¯æŒ
åŸæ¥c#ä¸»è¦æ˜¯åœ¨windowä¸Šé¢è¿è¡Œ
ç°åœ¨å¯ä»¥åœ¨æ‰€æœ‰çš„å¹³å°ä¸Šè¿è¡Œ
windows macs linux ios android &amp;hellip; .Net Core
.Net/.Net Core çš„æ ¸å¿ƒå°±æ˜¯CLR: Comman Language Runtime
CLRå’Œè¯­è¨€æ— å…³"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://linjianshu.github.io/img/avatar.png' />
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <style>
            * {
              margin: 0;
              padding: 0;
            }
            html, body {
              height: 100%;
              width: 100%;
            }
            #github-iframe {
              position: fixed;
              left: 32px;
              top: 32px;
            }
             
        </style>
   


<link rel="stylesheet" type="texts" href="https://blog-static.cnblogs.com/files/monster-jian/waifu.css"/>


</head>







<script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1280473365'%3E%3C/span%3E%3Cscript src='https://s9.cnzz.com/z_stat.php%3Fid%3D1280473365%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));</script>

<body size-sensor-id="1" style="position: relative;">
    
    <div id="area-render"></div>
   

</body>

<canvas width="1777" height="841" style="position: fixed; left: 0px; top: 0px; z-index: 2147483647; pointer-events: none;"></canvas>

</html>


    </head>
    <body class="
    article-page 
">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex 
    
        on-phone--column extended
    
">
    
        <aside class="sidebar left-sidebar sticky">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header class="site-info">
        
            
            <figure class="site-avatar">
                
                    
                    
                    
                        
                        <img src="/img/hanbagui_hu1992e2ef3ca17530e3489d97af7cbea6_3164_300x0_resize_box.bmp" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                

                
                    <span class="emoji">ğŸ¥</span>
                
            </figure>
            
        
        <h1 class="site-name"><a href="https://linjianshu.github.io/">think hy how to learn</a></h1>
        <h2 class="site-description">å¥½è¿æš´å¯Œ,å°±åœ¨ä»Šæ—¥.</h2>
    </header>

    <ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/' >
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        

        <li >
            <a href='/about/' >
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives/' >
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        

        <li >
            <a href='/search/' >
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        

        
            <li id="dark-mode-toggle">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                <span>æš—è‰²æ¨¡å¼</span>
            </li>
        
    </ol>
</aside>

    
<main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/-%E5%90%8E%E7%AB%AF%E8%AF%AD%E8%A8%80/" >
                -åç«¯è¯­è¨€
            </a>
        
    </header>
    

    <h2 class="article-title">
        <a href="/p/%E7%9C%9F%E4%BC%9Acsharp%E5%90%97%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3/">çœŸä¼šCSharpå—å­¦ä¹ æ–‡æ¡£</a>
    </h2>

    

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jan 30, 2021</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 28 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    
</div>
</header>

    <section class="article-content">
    <h2 id="c50å­¦ä¹ æ–‡æ¡£">C#5.0+å­¦ä¹ æ–‡æ¡£</h2>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>é€šç”¨æ€§è¯­è¨€</li>
<li>ç±»å‹å®‰å…¨</li>
<li>é¢å‘å¯¹è±¡</li>
</ul>
<p>ç›®æ ‡ï¼šç”Ÿäº§åŠ›</p>
<ul>
<li>ç®€æ´æ€§</li>
<li>è¡¨è¾¾åŠ›</li>
<li>é«˜æ€§èƒ½</li>
</ul>
<p>å¹³å°ä¸­ç«‹ï¼Œä¸å¹³å°æ— å…³</p>
<p>å°è£…ã€ç»§æ‰¿ã€å¤šæ€</p>
<p>ç»Ÿä¸€çš„ç±»å‹ç³»ç»Ÿï¼š</p>
<ul>
<li>ç±»å‹</li>
<li>å…±åŒçš„åŸºç±»</li>
</ul>
<p>ç±»å’Œæ¥å£</p>
<ul>
<li>class</li>
<li>interface</li>
</ul>
<p>å±æ€§propertyã€æ–¹æ³•methodå’Œäº‹ä»¶event</p>
<ul>
<li>
<p>å”¯ä¸€ä¸€ç§å‡½æ•°æˆå‘˜(Function Member):æ–¹æ³•(method)</p>
</li>
<li>
<p>æ–¹æ³•è¿˜åŒ…æ‹¬ï¼šå±æ€§(Property)å’Œäº‹ä»¶(Event)è¿˜æœ‰å…¶ä»–çš„</p>
</li>
<li>
<p>å±æ€§</p>
</li>
<li>
<p>äº‹ä»¶</p>
</li>
<li>
<p>C#ä¸»è¦æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œä½†æ˜¯ä¹Ÿå€Ÿç”¨äº†ä¸å°‘å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹æ€§</p>
</li>
<li>
<p>å‡½æ•°å¯ä»¥å½“åšå€¼æ¥å¯¹å¾…</p>
<ul>
<li>å§”æ‰˜Delegate</li>
</ul>
</li>
<li>
<p>æ”¯æŒçº¯(purity)æ¨¡å¼</p>
<ul>
<li>é¿å…ä½¿ç”¨å€¼å¯å˜çš„å˜é‡</li>
</ul>
</li>
</ul>
<p>ç±»å‹å®‰å…¨</p>
<ul>
<li>c#ä¸»è¦æ¥è¯´æ˜¯ç±»å‹å®‰å…¨çš„</li>
<li>é™æ€ç±»å‹ static typing</li>
<li>åŠ¨æ€ç±»å‹ dynamic</li>
<li>å¼ºç±»å‹ strongly typed language</li>
</ul>
<p>å†…å­˜ç®¡ç†</p>
<ul>
<li>ä¾èµ–äºè¿è¡Œæ—¶æ¥æ‰§è¡Œè‡ªåŠ¨å†…å­˜ç®¡ç†</li>
<li>CLR:Common Language Runtime (å…¬å…±è¯­è¨€è¿è¡Œæ—¶)
<ul>
<li>GCï¼š Garbage Collector (åƒåœ¾æ”¶é›†å™¨)</li>
</ul>
</li>
<li>c#æ²¡æœ‰æ¶ˆç­æŒ‡é’ˆ
<ul>
<li>é€šå¸¸æƒ…å†µä¸‹ä¸éœ€è¦ä½¿ç”¨æŒ‡é’ˆ</li>
<li>unsafe</li>
</ul>
</li>
</ul>
<p>å¹³å°æ”¯æŒ</p>
<ul>
<li>
<p>åŸæ¥c#ä¸»è¦æ˜¯åœ¨windowä¸Šé¢è¿è¡Œ</p>
</li>
<li>
<p>ç°åœ¨å¯ä»¥åœ¨æ‰€æœ‰çš„å¹³å°ä¸Šè¿è¡Œ</p>
<ul>
<li>windows</li>
<li>macs</li>
<li>linux</li>
<li>ios</li>
<li>android</li>
<li>&hellip;</li>
</ul>
</li>
<li>
<p>.Net Core</p>
</li>
<li>
<p>.Net/.Net Core çš„æ ¸å¿ƒå°±æ˜¯CLR: Comman Language Runtime</p>
</li>
<li>
<p>CLRå’Œè¯­è¨€æ— å…³</p>
</li>
<li>
<p>c#æ˜¯ä¸€ç§æ‰˜ç®¡è¯­è¨€</p>
<ul>
<li>ä¼šè¢«ç¼–è¯‘æˆæ‰˜ç®¡ä»£ç (IL : Intermediate Language)</li>
<li>CLRæŠŠILè½¬åŒ–æˆæœºå™¨çš„åŸç”Ÿä»£ç </li>
<li>JIT(Just in time)ç¼–è¯‘</li>
<li>Ahead-of-timeç¼–è¯‘</li>
</ul>
</li>
<li>
<p>æ‰˜ç®¡ä»£ç çš„å®¹å™¨ï¼šAssembly æˆ–portable Executable</p>
<ul>
<li>.exe æˆ–dll</li>
<li>åŒ…å«IL å’Œç±»å‹ä¿¡æ¯(metadata)</li>
</ul>
</li>
<li>
<p>IIdasm</p>
</li>
</ul>
<p>æ”¯æŒc#çš„æ¡†æ¶</p>
<ul>
<li>.net framework</li>
<li>.net core</li>
<li>unity</li>
<li>xamarin</li>
<li>uwp</li>
<li>winrt</li>
<li>windows phone</li>
<li>xna</li>
<li>silverlight</li>
<li>.net micro framework</li>
<li>mono</li>
<li>sql server</li>
</ul>
<p>.net Core</p>
<h4 id="ç¼–è¯‘">ç¼–è¯‘</h4>
<ul>
<li>c#ç¼–è¯‘å™¨æŠŠ.csç»“å°¾çš„æºç æ–‡ä»¶ç¼–è¯‘æˆAssembly</li>
<li>assemblyæ˜¯.net coreé‡ŒåŒ…è£…å’Œéƒ¨ç½²çš„å•å…ƒ</li>
<li>assemblyå¯ä»¥æ˜¯åº”ç”¨ç¨‹åºï¼Œä¹Ÿå¯ä»¥æ˜¯åº“
<ul>
<li>.exe</li>
<li>.dll</li>
</ul>
</li>
</ul>
<h4 id="æ„é€ å‡½æ•°å’Œå®ä¾‹åŒ–">æ„é€ å‡½æ•°å’Œå®ä¾‹åŒ–</h4>
<ul>
<li>æ•°æ®æ˜¯é€šè¿‡å®ä¾‹åŒ–ä¸€ä¸ªç±»å‹æ¥åˆ›å»ºçš„</li>
<li>é¢„å®šä¹‰çš„ç±»å‹ç›´æ¥å†™literalå°±å¯ä»¥è¢«å®ä¾‹åŒ–äº†</li>
<li>è€Œè‡ªå®šä¹‰ç±»å‹åˆ™é€šè¿‡newæ“ä½œç¬¦æ¥åˆ›å»ºå®ä¾‹</li>
</ul>
<h4 id="å®ä¾‹æˆå‘˜vsé™æ€æˆå‘˜">å®ä¾‹æˆå‘˜vsé™æ€æˆå‘˜</h4>
<ul>
<li>æ“ä½œäºå®ä¾‹ç±»å‹çš„æ•°æ®æˆå‘˜å’Œå‡½æ•°æˆå‘˜éƒ½å«åšå®ä¾‹æˆå‘˜</li>
<li>æ“ä½œäºç±»å‹è€Œä¸æ˜¯ç±»å‹å®ä¾‹çš„æ•°æ®æˆå‘˜å’Œå‡½æ•°æˆå‘˜å«åšé™æ€æˆå‘˜
<ul>
<li>static</li>
</ul>
</li>
<li>é™æ€ç±»static class çš„æ‰€æœ‰æˆå‘˜éƒ½æ˜¯é™æ€çš„
<ul>
<li>é™æ€ç±»ä¸å¯ä»¥åˆ›å»ºå®ä¾‹ã€‚ ä¾‹å¦‚console ï¼Œä»–åœ¨æ•´ä¸ªç¨‹åºé‡Œå°±ä¸€ä¸ª</li>
</ul>
</li>
</ul>
<p>public</p>
<ul>
<li>publicå…³é”®å­—å¯ä»¥æŠŠæˆå‘˜æš´éœ²ç»™å…¶ä»–çš„ç±»</li>
<li>å¦‚æœæ²¡æœ‰publicå…³é”®å­—çš„è¯å°±æ˜¯private
<ul>
<li>æ— æ³•æš´éœ²ç»™å…¶ä»–ç±»</li>
</ul>
</li>
</ul>
<h4 id="å€¼ç±»å‹ä¸å¼•ç”¨ç±»å‹">å€¼ç±»å‹ä¸å¼•ç”¨ç±»å‹</h4>
<ul>
<li>
<p>å€¼ç±»å‹åŒ…æ‹¬æ‰€æœ‰çš„å†…ç½®ç±»å‹ï¼ˆæ•°å€¼ã€å­—ç¬¦ã€boolï¼‰å’Œè‡ªå®šä¹‰çš„structå’Œenum</p>
</li>
<li>
<p>å¼•ç”¨ç±»å‹åŒ…å«æ‰€æœ‰çš„classï¼Œæ•°ç»„ï¼Œdelegateï¼Œinterfaceç±»å‹ã€‚åŒ…æ‹¬å­—ç¬¦ä¸²</p>
</li>
<li>
<p>ä»–ä»¬çš„æ ¹æœ¬åŒºåˆ«åœ¨äºå¤„ç†å†…å­˜çš„æ–¹å¼</p>
</li>
</ul>
<h4 id="å€¼ç±»å‹">å€¼ç±»å‹</h4>
<ol>
<li>å€¼ç±»å‹å˜é‡/å¸¸é‡çš„å†…å®¹å°±æ˜¯ä¸€ä¸ªå€¼</li>
<li>ä½¿ç”¨structå…³é”®å­—å°±å¯ä»¥è‡ªå®šä¹‰åˆ›å»ºå€¼ç±»å‹</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">       <span class="n">Point</span> <span class="n">p</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Point</span><span class="p">()</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="n">p</span><span class="p">.</span><span class="n">x</span> <span class="p">=</span> <span class="m">7</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="n">Point</span> <span class="n">p1</span> <span class="p">=</span> <span class="n">p</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="p">.</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="p">.</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">p1</span><span class="p">.</span><span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">p1</span><span class="p">.</span><span class="n">x</span> <span class="p">=</span> <span class="m">9</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="p">.</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">p1</span><span class="p">.</span><span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="p">.</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">struct</span> <span class="nc">Point</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="kt">int</span> <span class="n">x</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="kt">int</span> <span class="n">y</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><p>å€¼ç±»å‹çš„èµ‹å€¼</p>
<ul>
<li>å€¼ç±»å‹å®ä¾‹çš„èµ‹å€¼åŠ¨ä½œæ€»æ˜¯å¤åˆ¶äº†è¯¥å®ä¾‹</li>
</ul>
<h4 id="å¼•ç”¨ç±»å‹">å¼•ç”¨ç±»å‹</h4>
<p>å¼•ç”¨ç±»å‹æ¯”å€¼ç±»å‹å¤æ‚</p>
<p>åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š1.ä¸€ä¸ªå¯¹è±¡2.åˆ°è¯¥å¯¹è±¡çš„å¼•ç”¨</p>
<p>å¼•ç”¨ç±»å‹çš„å˜é‡/å¸¸é‡çš„å†…å®¹å°±æ˜¯åˆ°ä¸€ä¸ªå«æœ‰å€¼çš„å¯¹è±¡çš„å¼•ç”¨</p>
<h5 id="å¼•ç”¨ç±»å‹èµ‹å€¼">å¼•ç”¨ç±»å‹èµ‹å€¼</h5>
<p>ç»™å¼•ç”¨ç±»å‹çš„å˜é‡èµ‹å€¼ï¼šå¤åˆ¶å¼•ç”¨ï¼Œ è€Œä¸æ˜¯å¯¹è±¡å®ä¾‹</p>
<p>å…è®¸å¤šä¸ªå˜é‡å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ï¼ˆå€¼ç±»å‹å°±æ²¡æœ‰è¿™ç§å¯èƒ½ï¼‰</p>
<p>ç›¸å½“äºæŒ‡å‘å†…å­˜é‡Œçš„åŒä¸€ä¸ªåœ°å€å—</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="n">Point1</span> <span class="n">p2</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Point1</span><span class="p">()</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="n">p2</span><span class="p">.</span><span class="n">x</span> <span class="p">=</span> <span class="m">7</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="n">Point1</span> <span class="n">p3</span> <span class="p">=</span> <span class="n">p2</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="p">.</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">p2</span><span class="p">.</span><span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="p">.</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">p3</span><span class="p">.</span><span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">p3</span><span class="p">.</span><span class="n">x</span> <span class="p">=</span> <span class="m">9</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="p">.</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">p3</span><span class="p">.</span><span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="p">.</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">p2</span><span class="p">.</span><span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">class</span> <span class="nc">Point1</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="kt">int</span> <span class="n">x</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="kt">int</span> <span class="n">y</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><h4 id="null">NULL</h4>
<p>nullæ˜¯ä¸€ä¸ªliteral</p>
<p>å¯ä»¥æŠŠnullèµ‹å€¼ç»™å¼•ç”¨ï¼Œ è¡¨ç¤ºè¯¥å¼•ç”¨ä¸æŒ‡å‘ä»»ä½•ä¸€ä¸ªå¯¹è±¡</p>
<p>null.propertyä¼šæŠ›å‡ºnullreferenceExceptionä¹Ÿå°±æ˜¯ç©ºæŒ‡é’ˆå¼‚å¸¸</p>
<p>æ™®é€šçš„å€¼ç±»å‹ä¸å¯ä»¥ä¸ºnull</p>
<p>c#æœ‰ä¸€ç§å¯ç©ºç±»å‹ï¼ˆnullable typesï¼‰æ¥è¡¨ç¤ºå€¼ç±»å‹çš„null</p>
<h4 id="å­˜å‚¨å¼€é”€">å­˜å‚¨å¼€é”€</h4>
<p>å€¼ç±»å‹çš„å®ä¾‹æ‰€å å†…å­˜= ä»–çš„å­—æ®µéœ€è¦å†…å­˜çš„æ€»å’Œ</p>
<p>clrä¼šæŠŠç±»å‹å†…çš„å­—æ®µå¤§å°è®¾ç½®ä¸ºè¯¥å­—æ®µå®é™…å¤§å°çš„æ•´æ•°å€</p>
<p>å¼•ç”¨ç±»å‹éœ€è¦ä¸ºå¼•ç”¨å’Œå¯¹è±¡å•ç‹¬åˆ†é…å†…å­˜</p>
<p>å¯¹è±¡æ‰€å å†…å­˜= å…¶å­—æ®µæ‰€å å†…å­˜æ€»å’Œ+é¢å¤–çš„ç®¡ç†å¼€é”€ï¼ˆæœ€å°‘8å­—èŠ‚ï¼‰</p>
<p>æ¯ä¸ªå¯¹è±¡çš„å¼•ç”¨è¿˜éœ€è¦é¢å¤–çš„4æˆ–8ä¸ªå­—èŠ‚ï¼Œï¼ˆæ ¹æ®å¹³å°æ˜¯32ä½è¿˜æ˜¯64ä½çš„ï¼‰</p>
<h4 id="å†…ç½®ç±»å‹çš„åˆ†ç±»">å†…ç½®ç±»å‹çš„åˆ†ç±»</h4>
<h5 id="å€¼ç±»å‹sybte-short--int--long--byte--ushort--uint--ulong--folat--double--decimal--bool--char">å€¼ç±»å‹ï¼šsybte /short / int / long / byte / ushort / uint / ulong / folat / double / decimal / bool / char</h5>
<h5 id="å¼•ç”¨ç±»å‹string--object-">å¼•ç”¨ç±»å‹ï¼šstring / object /</h5>
<h5 id="c70å¼•å…¥äº†å¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿æ¥å¢åŠ å¯è¯»æ€§"><em>c#7.0å¼•å…¥äº†å¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿æ¥å¢åŠ å¯è¯»æ€§</em></h5>
<p>ä½¿ç”¨äºŒè¿›åˆ¶ã€åè¿›åˆ¶ã€åå…­è¿›åˆ¶ã€æŒ‡æ•°æ¥è¡¨ç¤ºæ•°</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"> <span class="kt">int</span> <span class="n">a</span> <span class="p">=</span> <span class="m">1_000_000</span>  <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">b</span> <span class="p">=</span> <span class="m">0</span><span class="n">b10101_10101</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="kt">double</span> <span class="n">c</span>  <span class="p">=</span> <span class="m">1.5</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="kt">double</span> <span class="n">million</span> <span class="p">=</span> <span class="m">1E06</span> <span class="p">;</span>  
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">a1</span> <span class="p">=</span> <span class="m">0xf00000</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="kt">float</span> <span class="n">e</span> <span class="p">=</span> <span class="m">1.0f</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="kt">decimal</span> <span class="n">d</span><span class="p">=</span> <span class="p">-</span><span class="m">1.23</span><span class="n">m</span> <span class="p">;</span> 
</span></span></code></pre></div><h5 id="æ•°å€¼literalçš„ç±»å‹æ¨æ–­">æ•°å€¼literalçš„ç±»å‹æ¨æ–­</h5>
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨ä¼šæ¨æ–­ä¸€ä¸ªæ•°å€¼literalæ˜¯doubleè¿˜æ˜¯æ•´æ•°ç±»å‹ï¼š
<ul>
<li>å¦‚æœåŒ…å«å°æ•°ç‚¹ï¼Œæˆ–ä»¥æŒ‡æ•°å½¢å¼å±•ç°ï¼Œé‚£ä¹ˆå°±æ˜¯doubleç±»å‹</li>
<li>å¦åˆ™literalçš„ç±»å‹å°±æ˜¯ä¸‹é¢åˆ—è¡¨é‡Œçš„ç¬¬ä¸€ä¸ªèƒ½å®¹çº³è¯¥æ•°å€¼çš„ç±»å‹ï¼šint , uint , long , ulong ,</li>
</ul>
</li>
</ul>
<h5 id="æ•°å€¼çš„åç¼€">æ•°å€¼çš„åç¼€</h5>
<ul>
<li>Få’ŒMæ¯”è¾ƒæœ‰ç”¨ï¼Œå½“æŒ‡å®šfloatæˆ–decimalçš„literalçš„æ—¶å€™ï¼Œåº”è¯¥åŠ ä¸Š</li>
</ul>
<h5 id="æ•°å€¼è½¬æ¢">æ•°å€¼è½¬æ¢</h5>
<ul>
<li>å½“æµ®ç‚¹å‹è½¬ä¸ºæ•´å‹æ—¶ï¼Œå°æ•°éƒ¨åˆ†æ˜¯è¢«æˆªæ–­çš„ï¼Œæ²¡æœ‰èˆå…¥ã€‚</li>
<li>æŠŠä¸€ä¸ªå¾ˆå¤§çš„æ•´æ•°éšå¼çš„è½¬æ¢ä¸ºæµ®ç‚¹ç±»å‹ä¹‹åï¼Œä¼šä¿è¯é‡çº§ä¸å˜ï¼Œä½†æ˜¯å¶å°”ä¼šä¸¢å¤±ç²¾åº¦ã€‚ è¿™æ˜¯å› ä¸ºæµ®ç‚¹ç±»å‹æœ‰å¾ˆæ›´å¤šçš„é‡çº§ï¼Œè€Œç²¾åº¦å¯èƒ½ä¸è¶³ã€‚</li>
</ul>
<h5 id="overflowcheckedæ“ä½œç¬¦"><em>overflowCheckedæ“ä½œç¬¦</em></h5>
<p>æ£€æŸ¥æ˜¯å¦ä¼šè¶…å‡ºç±»å‹æé™ï¼Œè¿›è€ŒæŠ›å‡ºå¼‚å¸¸</p>
<p>å¯¹++ã€&ndash;ã€+ã€-ã€‚*ã€/èµ·ä½œç”¨</p>
<p>å¯ä»¥ç”¨äºè¡¨è¾¾å¼æˆ–è¯­å¥</p>
<p>checkedå¯¹floatã€doubleä¸èµ·ä½œç”¨ï¼Œå› ä¸ºä»–ä»¬æœ‰æ— é™å€¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"> <span class="kt">int</span> <span class="n">a</span> <span class="p">=</span> <span class="m">10000000</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">b</span> <span class="p">=</span> <span class="m">10000000</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">c</span> <span class="p">=</span> <span class="k">checked</span><span class="p">(</span><span class="n">a</span><span class="p">*</span><span class="n">b</span><span class="p">)</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="k">checked</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="kt">int</span> <span class="n">d</span> <span class="p">=</span> <span class="n">a</span><span class="p">*</span><span class="n">b</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="kt">float</span> <span class="n">min</span> <span class="p">=</span> <span class="kt">float</span><span class="p">.</span><span class="n">NegativeInfinity</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="kt">double</span> <span class="n">max</span> <span class="p">=</span> <span class="kt">double</span><span class="p">.</span><span class="n">PositiveInfinity</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">f</span> <span class="p">=</span> <span class="k">unchecked</span><span class="p">(</span><span class="n">a</span><span class="p">*</span><span class="n">b</span><span class="p">)</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="k">unchecked</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="kt">int</span> <span class="n">e</span> <span class="p">=</span> <span class="n">a</span><span class="p">*</span><span class="n">b</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span></code></pre></div><h5 id="æŒ‰ä½æ“ä½œç¬¦">æŒ‰ä½æ“ä½œç¬¦</h5>
<p>~å–å</p>
<p>&amp;ä¸</p>
<p>|æˆ–</p>
<p>^å¼‚æˆ–</p>
<p>&laquo;å·¦ç§»</p>
<p>&lt;      &raquo;å³ç§»</p>
<p>doubleé€‚ç”¨äºç§‘å­¦è®¡ç®—ï¼Œä¾‹å¦‚è®¡ç®—åæ ‡</p>
<p>decimalé€‚ç”¨äºè´¢åŠ¡è®¡ç®—ï¼Œæˆ–è€…æ˜¯äººé€ æ•°æ®</p>
<p>doubleå’Œdecimalä¸èƒ½æ ‡è¯†å¾ªç¯æ•°æ®</p>
<p>boolæ— æ³•å’Œæ•°å€¼ç±»å‹è¿›è¡Œè½¬æ¢</p>
<p>||å’Œ&amp;&amp;æœ‰çŸ­è·¯æœºåˆ¶ï¼Œä¸ºäº†é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸</p>
<p>&amp;å’Œ|æ²¡æœ‰çŸ­è·¯æœºåˆ¶</p>
<p>å½“ä½¿ç”¨äºæ•°å€¼çš„æ—¶å€™ï¼Œ&amp;å’Œ|<strong>æ‰§è¡Œçš„æ˜¯æŒ‰ä½æ“ä½œ</strong></p>
<p>@åšå‰ç¼€ï¼Œåœ¨åŒå¼•å·å¤–è¾¹ï¼Œå°±ä¸æ”¯æŒè½¬ä¹‰å­—ç¬¦äº†ï¼Œä¸”æ”¯æŒå¤šè¡Œè¾“å‡º</p>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120192441256.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120192441256.png"
			
			
			
			loading="lazy"
			alt="image-20210120192441256">
	</a>
	
	<figcaption>image-20210120192441256</figcaption>
	
</figure></p>
<p>å­—ç¬¦ä¸²æ’å€¼ï¼šåŠ ä¸Š${}å°±è¡Œäº†</p>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120192847666.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120192847666.png"
			
			
			
			loading="lazy"
			alt="image-20210120192847666">
	</a>
	
	<figcaption>image-20210120192847666</figcaption>
	
</figure></p>
<p>stringçš„æ¯”è¾ƒï¼Œä¸æ”¯æŒ&gt;&lt;ç­‰ç­‰æ¯”è¾ƒæ“ä½œç¬¦ï¼Œéœ€è¦ä½¿ç”¨comparertoæ–¹æ³•</p>
<p>æ•°ç»„çš„é•¿åº¦å›ºå®šä¸å¯æ”¹å˜ï¼Œä½†æ˜¯system.collectionå’Œå…¶å­å‘½åç©ºé—´æä¾›äº†æ›´é«˜çº§çš„æ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬å¯å˜é•¿åº¦çš„æ•°ç»„å’Œå­—å…¸</p>
<p>åˆ›å»ºæ•°ç»„æ—¶ï¼Œæ‰€æœ‰çš„å…ƒç´ éƒ½ä¼šè¢«åˆå§‹åŒ–ï¼Œå…¶å€¼ä¸ºè¯¥ç±»å‹çš„é»˜è®¤å€¼</p>
<p>ç±»å‹çš„é»˜è®¤å€¼å°±æ˜¯å†…å­˜æŒ‰ä½å½’é›¶çš„ç»“æœ</p>
<p>å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„æ€§èƒ½æœ‰åŒºåˆ«</p>
<p>å€¼ç±»å‹ï¼šæ¯ä¸ªå…ƒç´ éƒ½ä½œä¸ºæ•°ç»„çš„ä¸€éƒ¨åˆ†è¿›è¡Œåˆ†é…å†…å­˜</p>
<p>å¼•ç”¨ç±»å‹ï¼šåˆ›å»ºæ•°ç»„æ—¶å°±æ˜¯åˆ›å»ºäº†ä¸€å †nullå¼•ç”¨ï¼Œå› æ­¤å¦‚æœä¸ºç©ºçš„æ—¶å€™å¯èƒ½ä¼šæŠ›å¼‚å¸¸</p>
<ul>
<li>å»ºè®®å¯¹å…ƒç´ æ˜¯å¼•ç”¨ç±»å‹çš„æ•°ç»„åˆå§‹åŒ–åå¯¹å…ƒç´ éƒ½è¿›è¡Œåˆå§‹åŒ–</li>
</ul>
<h4 id="è¾¹ç•Œæ£€æŸ¥">è¾¹ç•Œæ£€æŸ¥</h4>
<p>æ‰€æœ‰æ•°ç»„çš„ç´¢å¼•éƒ½ä¼šè¢«è¿è¡Œæ—¶æ£€æŸ¥çš„</p>
<p>å¦‚æœä½¿ç”¨äº†ä¸åˆç†çš„ç´¢å¼•ï¼Œä¼šæŠ›å‡ºindexoutofrangeexception ï¼Œ ç´¢å¼•è¶Šç•Œå¼‚å¸¸</p>
<p>é€šå¸¸è¾¹ç•Œæ£€æŸ¥å¯¹æ€§èƒ½çš„å½±å“å¾ˆå°ï¼Œjitç¼–è¯‘å™¨å¯æ‰§è¡Œä¸€äº›ä¼˜åŒ–ï¼Œä¾‹å¦‚åœ¨è¿›å…¥å¾ªç¯å‰é¢„å…ˆå¯¹æ‰€æœ‰çš„ç´¢å¼•è¿›è¡Œå®‰å…¨æ£€æŸ¥ï¼Œé¿å…åœ¨è¿­ä»£ä¸­æ£€æŸ¥</p>
<p>c#è¿˜æä¾›äº†unsafeä»£ç ï¼Œå¯ä»¥ç»•è¿‡è¾¹ç•Œæ£€æŸ¥</p>
<h4 id="stackæ ˆå’Œheapå †">stackæ ˆå’Œheapå †</h4>
<ul>
<li>stackä¸€å—å†…å­˜å­˜å‚¨æœ¬åœ°å˜é‡å’Œå‚æ•°</li>
<li>éšç€å‡½æ•°çš„è¿›å…¥å’Œé€€å‡ºï¼Œstackä¹Ÿä¼šéšä¹‹å¢å¤§å’Œç¼©å°</li>
<li>heapä¸€å—å†…å­˜ï¼Œå¯¹è±¡æ‰€åœ¨çš„åœ°æ–¹ï¼ˆå¼•ç”¨ç±»å‹çš„å®ä¾‹ï¼‰</li>
<li>å½“æ–°çš„å¯¹è±¡è¢«åˆ›å»ºä¹‹åï¼Œä»–å°±ä¼šè¢«åˆ†é…åœ¨heapä¸Šï¼Œåˆ°è¯¥å¯¹è±¡çš„ä¸€ä¸ªå¼•ç”¨è¢«è¿”å›</li>
<li>ç¨‹åºæ‰§è¡Œæ—¶ï¼Œéšç€æ–°å¯¹è±¡çš„ä¸æ–­å»ºç«‹ï¼Œheapä¼šæ…¢æ…¢è¢«å¡«æ»¡ã€‚è¿è¡Œæ—¶çš„gcä¼šå‘¨æœŸæ€§çš„æŠŠå¯¹è±¡ä»heapä¸Šé¢é‡Šæ”¾å‡ºæ¥ï¼Œæ‰€ä»¥ä¸ä¼šå¯¼è‡´å†…å­˜è€—å°½</li>
<li>ä¸€æ—¦ä¸€ä¸ªå¯¹è±¡ä¸å†è¢«ä»»ä½•å­˜æ´»çš„ä¸œè¥¿æ‰€å¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒå°±å¯ä»¥è¢«é‡Šæ”¾äº†</li>
</ul>
<h4 id="staticå­—æ®µ">staticå­—æ®µ</h4>
<p>åœ¨heapä¸Šï¼Œå®ƒä»¬ä¼šå­˜æ´»åˆ°åº”ç”¨ç¨‹åºåŸŸåœæ­¢ä¸ºæ­¢</p>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120195453978.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120195453978.png"
			
			
			
			loading="lazy"
			alt="image-20210120195453978">
	</a>
	
	<figcaption>image-20210120195453978</figcaption>
	
</figure></p>
<p>å‚æ•°ä¼ é€’ï¼šå€¼ä¼ é€’ã€refä¼ é€’ã€outä¼ é€’</p>
<p>å€¼ä¼ é€’ï¼š</p>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120195838267.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120195838267.png"
			
			
			
			loading="lazy"
			alt="image-20210120195838267">
	</a>
	
	<figcaption>image-20210120195838267</figcaption>
	
</figure></p>
<p>refä¼ é€’ï¼šå¤åˆ¶çš„æ˜¯å¼•ç”¨è€Œä¸æ˜¯å€¼</p>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120200027202.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120200027202.png"
			
			
			
			loading="lazy"
			alt="image-20210120200027202">
	</a>
	
	<figcaption>image-20210120200027202</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120201653417.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120201653417.png"
			
			
			
			loading="lazy"
			alt="image-20210120201653417">
	</a>
	
	<figcaption>image-20210120201653417</figcaption>
	
</figure></p>
<h5 id="æŒ‰å¼•ç”¨ä¼ é€’out"><em>æŒ‰å¼•ç”¨ä¼ é€’out</em></h5>
<p>å’Œrefå·®ä¸å¤šï¼Œé™¤äº†</p>
<ul>
<li>è¿›å…¥å‡½æ•°å‰ä¸éœ€è¦è¢«èµ‹å€¼</li>
<li>ç¦»å¼€å‡½æ•°å‰å¿…é¡»è¢«èµ‹å€¼</li>
</ul>
<p><em>é€šå¸¸ç”¨æ¥ä»æ–¹æ³•ä¸­è¿”å›å¤šä¸ªå€¼</em></p>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120203541523.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120203541523.png"
			
			
			
			loading="lazy"
			alt="image-20210120203541523">
	</a>
	
	<figcaption>image-20210120203541523</figcaption>
	
</figure></p>
<p><em><strong>ä»c#7å¼€å§‹ï¼Œè°ƒç”¨æ–¹æ³•é€‚ï¼Œå¯ä»¥ä½¿ç”¨outä¸´æ—¶å£°æ˜å˜é‡</strong></em></p>
<p>å½“è°ƒç”¨çš„æ–¹æ³•æœ‰å¤šä¸ªoutå‚æ•°æ—¶ï¼Œä½ ä¸éœ€è¦å…¶ä¸­ä¸€äº›outå‚æ•°ï¼Œ<em><strong>å¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿_æ¥discardå¼ƒç”¨ä»–ä»¬</strong></em></p>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120203948953.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120203948953.png"
			
			
			
			loading="lazy"
			alt="image-20210120203948953">
	</a>
	
	<figcaption>image-20210120203948953</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120204041448.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120204041448.png"
			
			
			
			loading="lazy"
			alt="image-20210120204041448">
	</a>
	
	<figcaption>image-20210120204041448</figcaption>
	
</figure></p>
<h5 id="paramsä¿®é¥°ç¬¦"><em>paramsä¿®é¥°ç¬¦</em></h5>
<p><em><strong>å¯ä»¥åœ¨æ–¹æ³•çš„æœ€åä¸€ä¸ªå‚æ•°ä½¿ç”¨paramså‚æ•°ä¿®é¥°ç¬¦</strong></em></p>
<p><em><strong>å¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„è¯¥ç±»å‹çš„å‚æ•°</strong></em></p>
<p>å‚æ•°ï¼ˆparametersï¼‰ç±»å‹å¿…é¡»æ˜¯æ•°ç»„</p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨æ•°ç»„ä½œä¸ºarguments</p>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120205539611.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120205539611.png"
			
			
			
			loading="lazy"
			alt="image-20210120205539611">
	</a>
	
	<figcaption>image-20210120205539611</figcaption>
	
</figure></p>
<h5 id="å¯é€‰å‚æ•°"><em>å¯é€‰å‚æ•°</em></h5>
<p>ä»c#4.0å¼€å§‹ï¼Œæ–¹æ³•ã€æ„é€ å‡½æ•°ã€ç´¢å¼•å™¨éƒ½å¯ä»¥å£°æ˜å¯é€‰å‚æ•°</p>
<p><em><strong>å¯é€‰å‚æ•°éœ€è¦åœ¨å£°æ˜çš„æ—¶å€™æä¾›é»˜è®¤å€¼</strong></em></p>
<p>è°ƒç”¨çš„æ—¶å€™ä¸å¯ä»¥å¡«å†™å¯é€‰çš„parameters</p>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120212044993.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120212044993.png"
			
			
			
			loading="lazy"
			alt="image-20210120212044993">
	</a>
	
	<figcaption>image-20210120212044993</figcaption>
	
</figure></p>
<p>å¾€publicæ–¹æ³•é‡Œæ·»åŠ å¯é€‰å‚æ•°ï¼Œè‹¥è¯¥æ–¹æ³•è¢«å…¶ä»–çš„assemblyè°ƒç”¨ï¼Œé‚£ä¹ˆä¸¤ä¸ªassemblieséƒ½éœ€è¦é‡æ–°ç¼–è¯‘ï¼Œå°±å’Œæ·»åŠ äº†ä¸€ä¸ªå¿…å¡«å‚æ•°æ˜¯ä¸€æ ·çš„</p>
<p>å¯é€‰å‚æ•°çš„é»˜è®¤å€¼æ˜¯å¸¸é‡è¡¨è¾¾å¼æˆ–æ‹¥æœ‰æ— å‚æ„é€ å‡½æ•°çš„å€¼ç±»å‹</p>
<p><em><strong>å¯é€‰å‚æ•°ä¸å¯ä»¥ä½¿ç”¨refå’Œout</strong></em></p>
<p><em><strong>å¿…å¡«å‚æ•°å¿…é¡»åœ¨å¯é€‰å‚æ•°å‰é¢ï¼ˆæ–¹æ³•å£°æ˜æ—¶å’Œæ–¹æ³•è°ƒç”¨æ—¶ï¼‰</strong></em></p>
<p>ä¾‹å¤–æ˜¯ï¼šparamsçš„å‚æ•°ä»ç„¶æ”¾åœ¨æœ€åè¾¹</p>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120212612888.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120212612888.png"
			
			
			
			loading="lazy"
			alt="image-20210120212612888">
	</a>
	
	<figcaption>image-20210120212612888</figcaption>
	
</figure></p>
<h5 id="å®šä½å‚æ•°æ ¹æ®ä½ç½®æ¥åˆ¤æ–­ä¸è¦æ±‚è¾“å…¥çš„é¡ºåºå’Œå®šä½çš„é¡ºåºä¿æŒä¸€è‡´"><em>å®šä½å‚æ•°ï¼Œæ ¹æ®ä½ç½®æ¥åˆ¤æ–­ï¼Œä¸è¦æ±‚è¾“å…¥çš„é¡ºåºå’Œå®šä½çš„é¡ºåºä¿æŒä¸€è‡´</em></h5>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120212814635.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120212814635.png"
			
			
			
			loading="lazy"
			alt="image-20210120212814635">
	</a>
	
	<figcaption>image-20210120212814635</figcaption>
	
</figure></p>
<h4 id="var">var</h4>
<p>éšå¼å¼ºç±»å‹æœ¬åœ°å˜é‡</p>
<p>å£°æ˜å’Œåˆå§‹åŒ–å˜é‡é€šå¸¸ä¸€æ­¥å®Œæˆï¼Œå¦‚æœç¼–è¯‘å™¨èƒ½ä»åˆå§‹åŒ–è¡¨è¾¾å¼æ¨æ–­å‡ºç±»å‹ï¼Œå°±å¯ä»¥ä½¿ç”¨var</p>
<p>ä½†æ˜¯ä¼šé™ä½ä»£ç çš„å¯è¯»æ€§</p>
<p>å³ç»“åˆçš„æ“ä½œç¬¦</p>
<p>èµ‹å€¼ã€lambdaã€nullåˆå¹¶å’Œæ¡ä»¶æ“ä½œç¬¦æ˜¯å³ç»“åˆçš„</p>
<p>ä»å³å‘å·¦ä¼°ç®—</p>
<p>x=y=3</p>
<h4 id="nullæ“ä½œç¬¦"><em>nullæ“ä½œç¬¦</em></h4>
<p>c#æä¾›äº†ä¸¤ç§æ“ä½œç¬¦ï¼Œä»–ä»¬å¯ä»¥æ›´å®¹æ˜“çš„å¤„ç†null</p>
<ul>
<li>nullåˆå¹¶æ“ä½œç¬¦ ï¼Ÿï¼Ÿ å¦‚æœæ“ä½œæ•°ä¸æ˜¯nullï¼Œå°±æŠŠå·¦è¾¹çš„ç»™æˆ‘ï¼Œå¦‚æœæ“ä½œæ•°æ˜¯nullï¼Œå°±æŠŠå³è¾¹çš„ç»™æˆ‘</li>
<li>nullæ¡ä»¶æ“ä½œç¬¦ ï¼Ÿ.æ–¹æ³•</li>
</ul>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120214033193.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120214033193.png"
			
			
			
			loading="lazy"
			alt="image-20210120214033193">
	</a>
	
	<figcaption>image-20210120214033193</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120214329392.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120214329392.png"
			
			
			
			loading="lazy"
			alt="image-20210120214329392">
	</a>
	
	<figcaption>image-20210120214329392</figcaption>
	
</figure></p>
<p>åˆåœ¨ä¸€èµ·ç”¨å“¦å“¦å“¦å“¦</p>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120214520840.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120214520840.png"
			
			
			
			loading="lazy"
			alt="image-20210120214520840">
	</a>
	
	<figcaption>image-20210120214520840</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120214741402.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120214741402.png"
			
			
			
			loading="lazy"
			alt="image-20210120214741402">
	</a>
	
	<figcaption>image-20210120214741402</figcaption>
	
</figure></p>
<h4 id="switchè¯­å¥">switchè¯­å¥</h4>
<p>å½“æŒ‡å®šå¸¸é‡çš„æ—¶å€™ï¼Œåªèƒ½ä½¿ç”¨å†…ç½®çš„æ•´æ•°ç±»å‹ã€boolã€charã€enumå’Œstringç±»å‹</p>
<p>æ¯ä¸ªcaseå­å¥çš„ç»“å°¾ï¼Œå¿…é¡»ä½¿ç”¨è·³è½¬è¯­å¥æ¥è¡¨åä¸‹ä¸€æ­¥å¾€å“ªé‡Œæ‰§è¡Œ</p>
<ul>
<li>break è·³è½¬åˆ°switchè¯­å¥çš„ç»“å°¾</li>
<li><strong>goto case x è·³è½¬åˆ°å…¶ä»–çš„case</strong></li>
<li><strong>goto default è·³è½¬åˆ°defaultå­å¥</strong></li>
<li>å…¶ä»–çš„è·³è½¬è¯­å¥ return , throw ,continue , goto label</li>
<li><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120215931777.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120215931777.png"
			
			
			
			loading="lazy"
			alt="image-20210120215931777">
	</a>
	
	<figcaption>image-20210120215931777</figcaption>
	
</figure></li>
</ul>
<h4 id="switch-with-patterns-c7"><em>switch with patterns c#7</em></h4>
<ul>
<li>objectç±»å‹å…è®¸ä»»ä½•ç±»å‹çš„å˜é‡</li>
<li>æ¯ä¸ªcaseå­å¥æŒ‡å®šä¸€ä¸ªç±»å‹ï¼Œå¦‚æœå˜é‡çš„ç±»å‹ä¸è¯¥ç±»å‹ä¸€æ ·ï¼Œé‚£ä¹ˆå°±åŒ¹é…æˆåŠŸ</li>
<li>å¯ä»¥ä½¿ç”¨whenæ¥æ–­è¨€ä¸€ä¸ªcase</li>
<li>caseå­å¥çš„é¡ºåºæ˜¯æœ‰å…³ç³»çš„</li>
<li>å¯ä»¥æ˜¯case null</li>
</ul>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120220321250.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120220321250.png"
			
			
			
			loading="lazy"
			alt="image-20210120220321250">
	</a>
	
	<figcaption>image-20210120220321250</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120220731178.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210120220731178.png"
			
			
			
			loading="lazy"
			alt="image-20210120220731178">
	</a>
	
	<figcaption>image-20210120220731178</figcaption>
	
</figure></p>
<h4 id="å¤ä¹ ä¸€ä¸‹æœ‰ç”¨çš„">å¤ä¹ ä¸€ä¸‹ï¼šæœ‰ç”¨çš„</h4>
<ul>
<li>refå’Œoutå…³é”®å­—ï¼Œä¸€ä¸ªèµ‹å€¼çš„æ˜¯å¼•ç”¨çš„åœ°å€å—ï¼Œä¸€ä¸ªæ˜¯ä½œä¸ºä¸ç”¨ä¼ å…¥çš„å‚æ•°ï¼Œä¼ å‡ºå¤šä¸ªå‚æ•°ä½¿ç”¨ï¼Œåè€…å¯ä»¥ä½¿ç”¨ä¼ å…¥æ—¶å®šä¹‰ä¸´æ—¶å˜é‡æ¥ï¼Œå¹¶ä¸”ä¸éœ€è¦ä¼ å‡ºå‚æ•°çš„æ—¶å€™å¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿æ¥discardä»–ä»¬</li>
<li>æ•°å­—ä¸ºäº†åŒºåˆ†å¯è¯»æ€§ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿1_000_000è¿™æ ·</li>
<li>@â€œ&hellip;&hellip;.â€è¿™æ ·å¯ä»¥ä¸æ‹†è§£è½¬ä¹‰å­—ç¬¦</li>
<li>parameteræ ¼å¼å®šä¹‰çš„æ˜¯æ•°ç»„ï¼Œä¸”æ˜¯æ•°é‡å¯å˜çš„ï¼Œä½†å¿…é¡»ä½œä¸ºæ–¹æ³•çš„æœ€åä¸€ä¸ªå‚æ•°ä¼ å…¥</li>
<li>å¯ä»¥æ„é€ å¯é€‰çš„å‚æ•°æ–¹å¼ï¼Œåœ¨æ„é€ æ–¹æ³•çš„æ—¶å€™é¢„å…ˆä¼ å…¥å‚æ•°é»˜è®¤å€¼ï¼Œä¸”æ”¾åœ¨æ–¹æ³•çš„æœ€åè¾¹ å¦‚int sum (int x =1, int y = 0 ) &hellip;</li>
<li>nullçš„åˆå¹¶æ“ä½œç¬¦å’Œæ¡ä»¶æ“ä½œç¬¦ï¼Œé˜²æ­¢ç©ºæŒ‡é’ˆå¼‚å¸¸</li>
<li>switch caseçš„æ–°æ“ä½œ:åˆ¤æ–­ç±»å‹å’Œä½¿ç”¨whenè¿›ä¸€æ­¥åˆ¤æ–­ ä»¥åŠ goto case , goto default &hellip;</li>
<li>æŒ‰ä½æ“ä½œ ï¼Œ||å’Œ&amp;&amp;çš„çŸ­è·¯æœºåˆ¶ ï¼Œ ${s}æ’å€¼</li>
<li>checked ï¼Œ unchecked ï¼Œ overflowcheckæ“ä½œç¬¦ ï¼Œ defaultï¼ˆintï¼‰</li>
<li><em>paramsä¿®é¥°ç¬¦</em>  ä»¥åŠå®šä½ä¿®é¥°ç¬¦</li>
</ul>
<h5 id="è·³è½¬è¯­å¥">è·³è½¬è¯­å¥</h5>
<p>break ï¼› ç»“æŸè¿­ä»£æˆ–switchè¯­å¥çš„ä»£ç ä½“</p>
<p>continue ;  æ”¾å¼ƒå½“å‰è¿­ä»£ä¸­å‰©ä½™çš„è¯­å¥æ‰§è¡Œï¼Œ ç›´æ¥ä»ä¸‹ä¸€æ¬¡è¿­ä»£å¼€å§‹</p>
<p><em><strong>goto ;  æŠŠæ‰§è¡Œè·³è½¬åˆ°å¦ä¸€ä¸ªlabelçš„è¯­å¥å— ï¼Œ gotoè¯­å¥label</strong></em> ï¼Œ å½“ç”¨äºswitchè¯­å¥å†…æ—¶ï¼Œgoto case</p>
<p>3ï¼ˆåªèƒ½ç”¨äºå¸¸é‡ï¼‰ ï¼Œ labelç›¸å½“äºæ˜¯ä¸€ä¸ªä»£ç å—çš„å ä½ç¬¦ï¼Œ <em><strong>æ”¾åœ¨è¯­å¥å‰è¾¹ï¼Œä½¿ç”¨å†’å·ï¼šåšåç¼€</strong></em></p>
<p>return ; é€€å‡ºæ–¹æ³•ï¼Œå¹¶è¿”å›ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œç±»å‹å’Œæ–¹æ³•çš„è¿”å›ç±»å‹ä¸€è‡´ï¼Œå¦‚æœæ˜¯voidå°±returnï¼› returnå¯ä»¥æ”¾åœ¨ä»»ä½•åœ°æ–¹ï¼Œé™¤äº†finallyé‡Œ</p>
<p>throw ; æŠ›å‡ºå¼‚å¸¸ ï¼Œ ç›¸å½“äºè¾“å‡ºäº†é”™è¯¯</p>
<p>tyr catch finally</p>
<p>ä¸å¯ä»¥ä»finallyå—é‡Œé¢è·³è½¬åˆ°å¤–è¾¹ï¼Œé™¤äº†throw</p>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210121093843103.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210121093843103.png"
			
			
			
			loading="lazy"
			alt="image-20210121093843103">
	</a>
	
	<figcaption>image-20210121093843103</figcaption>
	
</figure></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"> <span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">1</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">           <span class="n">gotoloop</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">           <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="p">&lt;=</span><span class="m">5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">           <span class="n">System</span><span class="p">.</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">           <span class="n">i</span><span class="p">++</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">           <span class="k">goto</span> <span class="n">gotoloop</span> <span class="p">;</span>
</span></span></code></pre></div><h4 id="using-static"><em>using static</em></h4>
<p>ä»c# 6å¼€å§‹ï¼Œ ä¸ä»…å¯ä»¥å¼•å…¥å‘½åç©ºé—´ï¼Œè¿˜å¯ä»¥å¼•å…¥å…·ä½“çš„ç±»å‹ï¼Œè¿™å°±éœ€è¦ä½¿ç”¨using static</p>
<p><em><strong>è¢«å¼•å…¥ç±»å‹çš„æ‰€æœ‰é™æ€æˆå‘˜å¯è¢«ç›´æ¥ä½¿ç”¨ï¼Œ æ— éœ€ä½¿ç”¨ç±»å</strong></em></p>
<p>æ‰€æœ‰å¯è®¿é—®çš„é™æ€æˆå‘˜éƒ½ä¼šè¢«å¼•å…¥ï¼Œå­—æ®µã€å±æ€§ã€åµŒå¥—ç±»å‹</p>
<p>ä¹Ÿå¯ç”¨äºenum ï¼Œ è¿™æ ·çš„è¯å®ƒçš„æˆå‘˜å°±è¢«å¼•å…¥äº†</p>
<p>å¦‚æœå¤šä¸ªstaticå¼•å…¥å­˜åœ¨æ­§ä¹‰çš„è¯ï¼Œå°†ä¼šå‘ç”Ÿé”™è¯¯</p>
<h4 id="å‘½åç©ºé—´">å‘½åç©ºé—´</h4>
<p>å¯ä»¥ä½¿ç”¨é‡å¤çš„å‘½åç©ºé—´ï¼Œåªè¦ç±»å‹ä¸ç›¸äº’å¹²æ‰°</p>
<p><em><strong>ç»™å‘½åç©ºé—´èµ·åˆ«åï¼Œé˜²æ­¢ä»–å’Œå…¶ä»–å‘½åç©ºé—´ä¸‹çš„å…¶ä»–ç±»å‹ç›¸äº’å¹²æ‰°</strong></em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="nn">static</span> <span class="n">System</span><span class="p">.</span><span class="n">Console</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="k">using</span>  <span class="nn">P</span> <span class="p">=</span> <span class="n">System</span><span class="p">.</span><span class="n">Reflection</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nn">FirstCSharp</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Program</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;ä½ æç¬‘å‘¢&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">class</span> <span class="nc">a</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">private</span> <span class="n">P</span><span class="p">.</span><span class="n">PropertyInfo</span> <span class="n">p</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><p><em><strong>extern alias å‘½åç©ºé—´ï¼Œè§£å†³ä¸¤ä¸ªç¨‹åºé›†å†…éƒ¨å‘½åç©ºé—´å’Œç±»å‹å®Œå…¨ä¸€è‡´çš„é—®é¢˜ï¼Œ å®é™…ä¸Šå°±æ˜¯ç»™ä»–ä»¬åœ¨æ·»åŠ ä¸€å±‚æœ€å¤–å±‚çš„ç”¨äºåŒºåˆ†</strong></em></p>
<p>å‘½åç©ºé—´åˆ«åé™å®šç¬¦</p>
<p>å†…å±‚å‘½åç©ºé—´çš„ç±»å‹åä¼šæŠŠå¤–å±‚å‘½åç©ºé—´ä¸‹çš„ç±»å‹åéšè—ï¼Œ æœ‰æ—¶å³ä½¿ä½¿ç”¨å…¨åä¹Ÿæ— æ³•è§£å†³å†²çª</p>
<p><em><strong>1.ä½¿ç”¨globalå‘½åç©ºé—´ï¼šä¹Ÿå°±æ˜¯   ::</strong></em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nn">FirstCSharp</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Program</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">class</span> <span class="nc">A</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="k">class</span> <span class="nc">B</span> <span class="p">{</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">private</span> <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">new</span> <span class="k">global</span><span class="p">::</span><span class="n">A</span><span class="p">.</span><span class="n">B</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nn">A</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">B</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h4 id="å¯ç©ºå€¼nullç±»å‹"><em>å¯ç©ºå€¼nullç±»å‹</em></h4>
<p>nullable<!-- raw HTML omitted --></p>
<p>ä¾‹å¦‚ nullable<!-- raw HTML omitted --> ä¸ä»…å¯ä»¥è¡¨ç¤º trueï¼› falseï¼› è¿˜å¯ä»¥è¡¨ç¤ºnull ï¼›</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">  <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">                     <span class="kt">string</span> <span class="n">str</span> <span class="p">=</span> <span class="s">&#34;sdfhasdfkjsaf&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">Nullable</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">indexOf</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//æˆ–è€…ç”¨è¿™ç§æ¥è¡¨è¾¾</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int?</span> <span class="n">lalala</span> <span class="p">=</span> <span class="n">str</span><span class="p">.</span><span class="n">IndexOf</span><span class="p">(</span><span class="sc">&#39;m&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Nullable</span><span class="p">&lt;</span><span class="n">DateTime</span><span class="p">&gt;</span> <span class="n">lastLogDateTime</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">DateTime</span><span class="p">?</span> <span class="n">lasTime</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">indexOf</span><span class="p">?.</span><span class="n">ToString</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">ReadKey</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><h4 id="null-å’Œ-ç©º-ç©ºç™½-string">null å’Œ ç©ºï¼Œ ç©ºç™½ string</h4>
<ul>
<li>string name = &ldquo;Nick&rdquo;</li>
<li>string name = null</li>
<li>string name =&quot;&quot;</li>
<li>string name = &quot;     &quot;</li>
</ul>
<h5 id="åˆ¤æ–­">åˆ¤æ–­</h5>
<ul>
<li>if(name == null )  &hellip;</li>
<li>if(string.isNullOrEmpty(name))  &hellip;</li>
<li><em><strong>if(string.isNullOrWhiteSpace(name))  &hellip;</strong></em></li>
</ul>
<h4 id="nullabletçš„å¸¸ç”¨å±æ€§å’Œæ–¹æ³•">nullable<!-- raw HTML omitted -->çš„å¸¸ç”¨å±æ€§å’Œæ–¹æ³•</h4>
<ul>
<li>hasvalue</li>
<li>.value</li>
<li><em><strong>.getvalueordefaultï¼ˆï¼‰</strong></em></li>
<li><em><strong>.getvalueordefault(é»˜è®¤å€¼)</strong></em></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="kt">int?</span> <span class="n">num</span> <span class="p">=</span> <span class="m">3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">num</span><span class="p">.</span><span class="n">HasValue</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">num</span><span class="p">.</span><span class="n">Value</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="kt">int?</span> <span class="n">number</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">number</span><span class="p">.</span><span class="n">HasValue</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">number</span><span class="p">.</span><span class="n">GetValueOrDefault</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">number</span><span class="p">.</span><span class="n">GetValueOrDefault</span><span class="p">(</span><span class="m">1997</span><span class="p">));</span>
</span></span></code></pre></div><h4 id="nullabletå’Œtçš„è½¬æ¢">nullable<!-- raw HTML omitted -->å’ŒTçš„è½¬æ¢</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"> <span class="kt">int?</span> <span class="n">i</span> <span class="p">=</span> <span class="m">3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">j</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">j</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">j</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">m</span> <span class="p">=</span> <span class="m">3</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="kt">int?</span> <span class="n">k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">k</span> <span class="p">=</span> <span class="n">m</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">k</span><span class="p">);</span>
</span></span></code></pre></div><h5 id="é˜²æ­¢å¯ç©ºç´¢å¼•åº”è¯¥æœ‰çš„åšæ³•"><em><strong>é˜²æ­¢å¯ç©ºç´¢å¼•åº”è¯¥æœ‰çš„åšæ³•</strong></em></h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">  			<span class="kt">string</span><span class="p">[]</span> <span class="n">a</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kt">string</span> <span class="n">b</span> <span class="p">=</span> <span class="n">a</span><span class="p">?[</span><span class="m">0</span><span class="p">].</span><span class="n">Trim</span><span class="p">();</span> 
</span></span></code></pre></div><h3 id="ç¬¬ä¸‰ç« ">ç¬¬ä¸‰ç« </h3>
<h4 id="class">class</h4>
<h4 id="fieldæ˜¯classå’Œstructçš„æˆå‘˜ä»–æ˜¯ä¸€ä¸ªå˜é‡">fieldï¼šæ˜¯classå’Œstructçš„æˆå‘˜ï¼Œä»–æ˜¯ä¸€ä¸ªå˜é‡</h4>
<h4 id="readonlyä¿®é¥°ç¬¦">readonlyä¿®é¥°ç¬¦</h4>
<ul>
<li>readonlyä¿®é¥°ç¬¦é˜²æ­¢å­—æ®µåœ¨æ„é€ ä¹‹åè¢«æ”¹å˜</li>
<li><em><strong>readonlyå­—æ®µåªèƒ½åœ¨å£°æ˜çš„æ—¶å€™è¢«èµ‹å€¼ï¼Œæˆ–åœ¨æ„é€ å‡½æ•°é‡Œè¢«èµ‹å€¼</strong></em></li>
</ul>
<h4 id="å­—æ®µåˆå§‹åŒ–">å­—æ®µåˆå§‹åŒ–</h4>
<ul>
<li>
<p>å­—æ®µå¯ä»¥å¯é€‰åˆå§‹åŒ–</p>
</li>
<li>
<p>æœªåˆå§‹åŒ–çš„å­—æ®µæœ‰ä¸€ä¸ªé»˜è®¤å€¼</p>
</li>
<li>
<p>å­—æ®µçš„åˆå§‹åŒ–åœ¨æ„é€ å‡½æ•°ä¹‹å‰è¿è¡Œ</p>
</li>
<li>
<p>åŒæ—¶å£°æ˜å¤šä¸ªå­—æ®µï¼Œç”¨é€—å·éš”å¼€</p>
</li>
</ul>
<h4 id="æ–¹æ³•">æ–¹æ³•</h4>
<ul>
<li>æ‰§è¡ŒæŸä¸ªåŠ¨ä½œ</li>
<li>å‚æ•°</li>
<li>è¿”å›ç±»å‹</li>
<li>void</li>
<li>ref/outä½œä¸ºæ•°æ®çš„è¿”å›æ ¼å¼</li>
</ul>
<h4 id="æ–¹æ³•çš„ç­¾å">æ–¹æ³•çš„ç­¾å</h4>
<ul>
<li>ç±»å‹å†…æ–¹æ³•çš„ç­¾åå¿…é¡»å”¯ä¸€</li>
<li>ç­¾åï¼šæ–¹æ³•åã€å‚æ•°ç±»å‹ï¼ˆå«é¡ºåºï¼Œä½†ä¸å‚æ•°åç§°å’Œè¿”å›ç±»å‹æ— å…³ï¼‰</li>
</ul>
<h4 id="expression-bodiedæ–¹æ³•ä»…é€‚ç”¨äºå•è¡¨è¾¾å¼çš„æ–¹æ³•">Expression-bodiedæ–¹æ³•:ä»…é€‚ç”¨äºå•è¡¨è¾¾å¼çš„æ–¹æ³•</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">        <span class="k">void</span> <span class="n">foo</span><span class="p">()</span> <span class="p">=&gt;</span> <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;hello world&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">foo</span><span class="p">();</span>
</span></span></code></pre></div><h4 id="æ–¹æ³•çš„é‡è½½">æ–¹æ³•çš„é‡è½½</h4>
<ul>
<li>
<p>ç±»å‹é‡Œçš„æ–¹æ³•å¯ä»¥è¿›è¡Œé‡è½½ï¼ˆå…è®¸å¤šä¸ªåŒåçš„æ–¹æ³•åŒæ—¶å­˜åœ¨ï¼‰ï¼Œåªè¦è¿™äº›æ–¹æ³•çš„ç­¾åä¸åŒå°±è¡Œ</p>
</li>
<li>
<p>å‚æ•°æŒ‰å€¼ä¼ é€’å’ŒæŒ‰å¼•ç”¨ä¼ é€’ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œæ–¹æ³•é‡è½½</p>
</li>
</ul>
<h4 id="æœ¬åœ°æ–¹æ³•--c7">æœ¬åœ°æ–¹æ³•  C#7</h4>
<ul>
<li>æ–¹æ³•é‡Œæœ‰æ–¹æ³•</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">   <span class="k">void</span> <span class="n">zhendeyoufooma</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">void</span> <span class="n">foo</span><span class="p">()</span> <span class="p">=&gt;</span> <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;hello world&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">foo</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">zhendeyoufooma</span><span class="p">();</span>
</span></span></code></pre></div><p><em><strong>æœ¬åœ°æ–¹æ³•é€‚ç”¨äºå…¶ä»–ç±»å‘€æ–¹æ³•é‡Œä¸éœ€è¦ä½¿ç”¨çš„ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªæ–¹æ³•åªä¸ºè¿™ä¸ªç±»æœåŠ¡çš„ï¼Œå¦å¤–å¯ä»¥åœ¨æ„é€ å‡½æ•°é‡Œå†™ï¼Œ å¯ä»¥åœ¨å±æ€§çš„é€‰æ‹©å™¨é‡Œå†™</strong></em></p>
<ul>
<li><em><strong>ä¸éœ€è¦å†™staticå…³é”®å­—</strong></em></li>
</ul>
<h4 id="æ„é€ å‡½æ•°">æ„é€ å‡½æ•°</h4>
<ul>
<li>
<p>è¿è¡Œclassæˆ–structçš„åˆå§‹åŒ–ä»£ç </p>
</li>
<li>
<p>å’Œæ–¹æ³•å·®ä¸å¤šï¼Œæ–¹æ³•åå’Œç±»å‹ä¸€è‡´ï¼Œè¿”å›ç±»å‹ä¹Ÿå’Œç±»å‹ä¸€è‡´ï¼Œä½†ä¸å†™äº†</p>
</li>
<li>
<p>c# 7 ï¼Œå…è®¸å•è¯­å¥çš„æ„é€ å‡½æ•°å†™æˆ expression-bodiedæˆå‘˜çš„å½¢å¼</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">class</span> <span class="nc">panda</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="n">panda</span><span class="p">(</span><span class="kt">string</span> <span class="n">n</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">name</span> <span class="p">=</span> <span class="n">n</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">private</span> <span class="kt">string</span> <span class="n">name</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><h4 id="æ„é€ å‡½æ•°é‡è½½">æ„é€ å‡½æ•°é‡è½½</h4>
<ul>
<li>åœ¨classå’Œstructé‡Œå¯ä»¥é‡è½½æ„é€ å‡½æ•°</li>
<li>è°ƒç”¨é‡è½½æ„é€ å‡½æ•°æ—¶ä½¿ç”¨this</li>
<li>å½“åŒä¸€ä¸ªç±»å‹ä¸‹çš„æ„é€ å‡½æ•°Aè°ƒç”¨æ„é€ å‡½æ•°Bçš„æ—¶å€™ï¼ŒBå…ˆæ‰§è¡Œ</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"> <span class="k">public</span> <span class="k">class</span> <span class="nc">panda</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="n">panda</span><span class="p">(</span><span class="kt">string</span> <span class="n">n</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">name</span> <span class="p">=</span> <span class="n">n</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="n">panda</span><span class="p">(</span><span class="kt">string</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">age</span><span class="p">):</span><span class="k">this</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="n">age</span> <span class="p">=</span> <span class="n">age</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">private</span> <span class="kt">string</span> <span class="n">name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">private</span> <span class="kt">int</span> <span class="n">age</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><h4 id="æ„é€ å‡½æ•°å’Œå­—æ®µçš„åˆå§‹åŒ–é¡ºåº">æ„é€ å‡½æ•°å’Œå­—æ®µçš„åˆå§‹åŒ–é¡ºåº</h4>
<ul>
<li>å­—æ®µçš„åˆå§‹åŒ–å‘ç”Ÿåœ¨æ„é€ å‡½æ•°æ‰§è¡Œä¹‹å‰</li>
<li>å­—æ®µæŒ‰ç…§å£°æ˜çš„å…ˆåé¡ºåºè¿›è¡Œåˆå§‹åŒ–</li>
</ul>
<p>æ„é€ ç±»ä¼¼å•ä¾‹æ¨¡å¼:è®©ç±»è¿”å›æœ€å¤šä¸€ä¸ªå®ä¾‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="kt">var</span> <span class="n">instance</span> <span class="p">=</span> <span class="n">Wine</span><span class="p">.</span><span class="n">CreateInstance</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">       
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">class</span> <span class="nc">Wine</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">             <span class="n">Wine</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">             <span class="k">public</span> <span class="k">static</span> <span class="n">Wine</span> <span class="n">CreateInstance</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">             <span class="p">{</span>
</span></span><span class="line"><span class="cl">                 <span class="k">return</span> <span class="k">new</span> <span class="n">Wine</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">             <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><h4 id="ææ„å‡½æ•°-c-7-deconstructor">ææ„å‡½æ•° c# 7 deconstructor</h4>
<ul>
<li>
<p>c# 7 å¼•å…¥äº†deconstructoræ¨¡å¼</p>
</li>
<li>
<p>ä½œç”¨åŸºæœ¬å’Œæ„é€ å‡½æ•°ç›¸åï¼Œ ä»–ä¼šæŠŠå­—æ®µåèµ‹ç»™ä¸€å †å˜é‡</p>
</li>
<li>
<p>æ–¹æ³•åå¿…é¡»æ˜¯deconstructor ï¼Œæœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªoutå‚æ•°</p>
</li>
<li>
<p>deconstructorå¯ä»¥è¢«é‡è½½</p>
</li>
<li>
<p><em><strong>deconstructorè¿™ä¸ªæ–¹æ³•å¯ä»¥æ˜¯æ‰©å±•æ–¹æ³•</strong></em></p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">    <span class="kt">var</span> <span class="n">rectangle</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Rectangle</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="m">4</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">rectangle</span><span class="p">.</span><span class="n">Deconstruct</span><span class="p">(</span><span class="k">out</span> <span class="kt">var</span> <span class="n">a</span> <span class="p">,</span> <span class="k">out</span> <span class="kt">var</span> <span class="n">b</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span> <span class="p">=</span> <span class="n">rectangle</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="n">rectangle</span><span class="p">.</span><span class="n">Deconstruct</span><span class="p">(</span><span class="k">out</span> <span class="kt">var</span> <span class="n">e</span><span class="p">,</span><span class="k">out</span> <span class="kt">var</span> <span class="n">f</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Extensions</span><span class="p">.</span><span class="n">Deconstruct</span><span class="p">(</span><span class="n">rectangle</span><span class="p">,</span><span class="k">out</span> <span class="kt">var</span> <span class="n">k</span> <span class="p">,</span> <span class="k">out</span> <span class="kt">var</span> <span class="n">m</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">d</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">public</span> <span class="n">Rectangle</span><span class="p">(</span><span class="kt">int</span> <span class="n">W</span><span class="p">,</span> <span class="kt">int</span> <span class="n">H</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">width</span> <span class="p">=</span> <span class="n">W</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">height</span> <span class="p">=</span> <span class="n">H</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">void</span> <span class="n">Deconstruct</span><span class="p">(</span><span class="k">out</span> <span class="kt">int</span> <span class="n">outWidth</span><span class="p">,</span> <span class="k">out</span> <span class="kt">int</span> <span class="n">outHeight</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">outWidth</span> <span class="p">=</span> <span class="n">width</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">outHeight</span> <span class="p">=</span> <span class="n">height</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">void</span> <span class="n">Deconstruct</span><span class="p">(</span><span class="k">out</span> <span class="kt">int</span> <span class="n">outWidth</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">outWidth</span> <span class="p">=</span> <span class="n">width</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">Extensions</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="n">Deconstruct</span><span class="p">(</span><span class="k">this</span> <span class="n">Rectangle</span> <span class="n">rect</span><span class="p">,</span> <span class="k">out</span> <span class="kt">int</span> <span class="n">width</span><span class="p">,</span> <span class="k">out</span> <span class="kt">int</span> <span class="n">height</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">width</span> <span class="p">=</span> <span class="n">rect</span><span class="p">.</span><span class="n">width</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">height</span> <span class="p">=</span> <span class="n">rect</span><span class="p">.</span><span class="n">height</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><h4 id="å±æ€§">å±æ€§</h4>
<ul>
<li>å±æ€§çš„å£°æ˜å’Œå­—æ®µçš„å£°æ˜å¾ˆåƒï¼Œä½†å¤šäº†ä¸€ä¸ªget setå¿«</li>
</ul>
<h5 id="åªè¯»å’Œè®¡ç®—çš„å±æ€§">åªè¯»å’Œè®¡ç®—çš„å±æ€§</h5>
<ul>
<li>å¦‚æœå±æ€§åªæœ‰getè®¿é—®å™¨ï¼Œé‚£ä¹ˆä»–å°±æ˜¯åªè¯»çš„</li>
<li>å¦‚æœåªæœ‰setè®¿é—®å™¨ï¼Œé‚£ä¹ˆä»–å°±æ˜¯åªå†™çš„</li>
<li>å±æ€§é€šå¸¸æ‹¥æœ‰ä¸€ä¸ªä¸“ç”¨çš„å¹•åå­—æ®µ ï¼Œ è¿™ä¸ªå¹•åå­—æ®µç”¨æ¥å­˜å‚¨æ•°æ®</li>
</ul>
<h5 id="å±æ€§åˆå§‹åŒ–å™¨">å±æ€§åˆå§‹åŒ–å™¨</h5>
<ul>
<li><em><strong>ä»c#6å¼€å§‹ï¼Œä½ å¯ä»¥ä¸ºè‡ªåŠ¨å±æ€§æ·»åŠ å±æ€§åˆå§‹åŒ–å™¨</strong></em></li>
<li>åªè¯»çš„è‡ªåŠ¨å±æ€§ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼ˆä¹Ÿå¯ä»¥åœ¨æ„é€ å‡½æ•°é‡Œè¢«èµ‹å€¼ï¼‰</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">  <span class="k">public</span> <span class="k">class</span> <span class="nc">panda</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="n">panda</span><span class="p">(</span><span class="kt">string</span> <span class="n">n</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">name</span> <span class="p">=</span> <span class="n">n</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="kt">string</span> <span class="n">sex</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">get</span> <span class="p">=&gt;</span> <span class="n">sex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">set</span> <span class="p">=&gt;</span> <span class="n">sex</span><span class="p">=</span><span class="k">value</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//ç›¸å½“äº</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="kt">string</span> <span class="n">sex1</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="kt">string</span> <span class="n">sex2</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="s">&#34;linjianshu&#34;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="n">panda</span><span class="p">(</span><span class="kt">string</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">age</span><span class="p">):</span><span class="k">this</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="n">age</span> <span class="p">=</span> <span class="n">age</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="m">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">private</span> <span class="kt">string</span> <span class="n">name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">private</span> <span class="kt">int</span> <span class="n">age</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><h4 id="é™æ€æ„é€ å‡½æ•°">é™æ€æ„é€ å‡½æ•°</h4>
<ul>
<li><em><strong>é™æ€æ„é€ å‡½æ•°ï¼Œæ¯ä¸ªç±»å‹æ‰§è¡Œä¸€æ¬¡</strong></em></li>
<li><em><strong>éé™æ€æ„é€ å‡½æ•°ï¼Œæ¯ä¸ªå®ä¾‹æ‰§è¡Œä¸€æ¬¡</strong></em></li>
<li>ä¸€ä¸ªç±»å‹åªèƒ½å®šä¹‰ä¸€ä¸ªé™æ€æ„é€ å‡½æ•°
<ul>
<li>å¿…é¡»æ— å‚</li>
<li>æ–¹æ³•åä¸ç±»å‹ä¸€è‡´</li>
</ul>
</li>
</ul>
<h5 id="åˆå§‹åŒ–é¡ºåº">åˆå§‹åŒ–é¡ºåº</h5>
<p>â€‹	é™æ€å­—æ®µçš„åˆå§‹åŒ–å™¨åœ¨é™æ€éƒ½æ—©å‡½æ•°è¢«è°ƒç”¨ä¹‹å‰çš„ä¸€ç¬é—´è¿è¡Œ</p>
<h4 id="é™æ€ç±»">é™æ€ç±»</h4>
<ul>
<li>ç±»ä¹Ÿå¯ä»¥æ˜¯é™æ€çš„</li>
<li>å…¶æˆå‘˜å¿…é¡»å…¨æ˜¯é™æ€çš„</li>
<li>ä¸å¯ä»¥æœ‰å­ç±»</li>
</ul>
<h4 id="finalizerç»ˆç»“å™¨">finalizerç»ˆç»“å™¨</h4>
<ul>
<li>finalizeræ˜¯classä¸“æœ‰çš„ä¸€ç§æ–¹æ³•</li>
<li>åœ¨gcå›æ”¶æœªå¼•ç”¨å¯¹è±¡çš„å†…å­˜ä¹‹å‰è¿è¡Œ</li>
<li>å…¶å®å°±æ˜¯å¯¹objectçš„finalizeï¼ˆï¼‰æ–¹æ³•é‡å†™çš„ä¸€ç§è¯­æ³•</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">a</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">~</span><span class="k">class</span> <span class="nc">a</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h4 id="partial-type"><em><strong>partial type</strong></em></h4>
<ul>
<li>
<p>æ¯ä¸ªåˆ†å¸ƒçš„ç±»éƒ½å¿…é¡»ä½¿ç”¨partialæ¥å£°æ˜</p>
</li>
<li>
<p>æ¯ä¸ªåˆ†å¸ƒç±»çš„æˆå‘˜ä¸èƒ½å†²çªï¼Œä¸èƒ½æœ‰åŒæ ·å‚æ•°çš„æ„é€ å‡½æ•°</p>
</li>
<li>
<p>å„åˆ†å¸ƒç±»å®Œå…¨é ç¼–è¯‘å™¨æ¥è¿›è¡Œè§£æï¼šæ¯ä¸ªåˆ†å¸ƒç±»åœ¨ç¼–è¯‘æ—¶å¿…é¡»å¯ç”¨ï¼Œä¸”åœ¨åŒä¸€ä¸ªassemblyé‡Œ</p>
</li>
<li>
<p>å¦‚æœæœ‰çˆ¶ç±»ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªåˆ†å¸ƒç±»ä¸ŠæŒ‡æ˜ï¼Œä½†å¿…é¡»ä¸€è‡´</p>
</li>
</ul>
<h4 id="partial-method"><em>partial method</em></h4>
<ul>
<li>ç”±ä¸¤éƒ¨åˆ†æ„æˆï¼šå®šä¹‰å’Œå®ç°</li>
<li>å®šä¹‰éƒ¨åˆ†é€šå¸¸æ˜¯ç”Ÿæˆçš„</li>
<li>å®ç°éƒ¨åˆ†é€šå¸¸æ˜¯æ‰‹åŠ¨ç¼–å†™çš„</li>
<li><em><strong>å¦‚æœpartial method åªæœ‰å®šä¹‰ï¼Œæ²¡æœ‰å®ç°ï¼Œé‚£ä¹ˆç¼–è¯‘çš„æ—¶å€™è¯¥æ–¹æ³•å®šä¹‰å°±æ²¡æœ‰äº†ï¼Œè°ƒç”¨è¯¥æ–¹æ³•çš„ä»£ç ä¹Ÿæ²¡æœ‰äº†ã€‚è¿™å°±å…è®¸è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç å¯ä»¥è‡ªç”±çš„æä¾›é’©å­ï¼Œä¸ç”¨æ‹…å¿ƒä»£ç è†¨èƒ€</strong></em></li>
<li>partial method å¿…é¡»æ˜¯voidï¼Œå¹¶ä¸”éšå¼privateçš„</li>
</ul>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210124193847516.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210124193847516.png"
			
			
			
			loading="lazy"
			alt="image-20210124193847516">
	</a>
	
	<figcaption>image-20210124193847516</figcaption>
	
</figure></p>
<h4 id="nameof-æ“ä½œç¬¦">nameof æ“ä½œç¬¦</h4>
<p>string name = nameof (count)</p>
<h4 id="ç»§æ‰¿">ç»§æ‰¿</h4>
<h5 id="å¤šæ€">å¤šæ€</h5>
<ul>
<li>å¼•ç”¨æ˜¯å¤šæ€çš„ï¼Œç±»å‹ä¸ºxçš„å˜é‡å¯ä»¥å¼•ç”¨å­ç±»çš„å¯¹è±¡</li>
<li>å› ä¸ºå­ç±»å…·æœ‰çˆ¶ç±»çš„å…¨éƒ¨åŠŸèƒ½ç‰¹æ€§ï¼Œæ‰€ä»¥å‚æ•°å¯ä»¥æ˜¯å­ç±»</li>
<li>åè¿‡æ¥åˆ™ä¸è¡Œ</li>
</ul>
<h5 id="å¼•ç”¨è½¬æ¢">å¼•ç”¨è½¬æ¢</h5>
<ul>
<li>ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨å¯ä»¥éšå¼çš„è½¬æ¢åˆ°å…¶çˆ¶ç±»çš„å¼•ç”¨ï¼ˆå‘ä¸Šè½¬æ¢ï¼‰</li>
<li>æƒ³è½¬æ¢åˆ°å­ç±»çš„å¼•ç”¨åˆ™éœ€è¦æ˜¾ç¤ºè½¬æ¢ï¼ˆå‘ä¸‹è½¬æ¢ï¼‰</li>
<li>å¼•ç”¨è½¬æ¢ï¼š åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¼•ç”¨ï¼Œä»–ä¹ŸæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡</li>
<li>å‘ä¸‹è½¬æ¢å¯èƒ½ä¼šå¤±è´¥ï¼Œå¦‚æœå¤±è´¥äº†å°±ä¼šæŠ›å‡ºinvalidCastExceptionå¼‚å¸¸</li>
</ul>
<h5 id="asæ“ä½œç¬¦"><em>Asæ“ä½œç¬¦</em></h5>
<ul>
<li>
<p><em><strong>asæ“ä½œç¬¦ä¼šæ‰§è¡Œå‘ä¸‹è½¬æ¢ï¼Œå¦‚æœè½¬æ¢å¤±è´¥ï¼Œä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå€¼ä¼šå˜ä¸ºnull</strong></em></p>
</li>
<li>
<p>asæ“ä½œç¬¦æ— æ³•åšè‡ªå®šä¹‰è½¬æ¢</p>
</li>
</ul>
<h5 id="isæ“ä½œç¬¦"><em><strong>isæ“ä½œç¬¦</strong></em></h5>
<ul>
<li><em><strong>isæ“ä½œç¬¦ä¼šæ£€éªŒå¼•ç”¨çš„è½¬æ¢æ˜¯å¦æˆåŠŸã€‚æ¢å¥è¯è¯´ï¼Œåˆ¤æ–­å¯¹è±¡æ˜¯å¦æ´¾ç”ŸäºæŸä¸ªç±»ï¼ˆæˆ–è€…å®ç°äº†æŸä¸ªæ¥å£ï¼‰</strong></em></li>
<li>é€šå¸¸ç”¨äºå‘ä¸‹è½¬æ¢å‰çš„éªŒè¯</li>
<li>å¦‚æœæ‹†ç®±è½¬æ¢å¯ä»¥æˆåŠŸçš„è¯ï¼Œé‚£ä¹ˆä½¿ç”¨isæ“ä½œç¬¦çš„ç»“æœä¼šæ˜¯true</li>
</ul>
<h5 id="isæ“ä½œç¬¦åˆæ¨¡å¼å˜é‡"><em><strong>isæ“ä½œç¬¦åˆæ¨¡å¼å˜é‡</strong></em></h5>
<ul>
<li><em><strong>åœ¨c#7 é‡Œï¼Œ ä½¿ç”¨isæ“ä½œç¬¦çš„æ—¶å€™ï¼Œå¯ä»¥å¼•å…¥ä¸€ä¸ªå˜é‡</strong></em></li>
<li>å¼•å…¥çš„å˜é‡å¯ä»¥ç«‹å³æ¶ˆè´¹</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">  <span class="kt">var</span> <span class="n">person</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Person</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">student</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Student</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//éšå¼è½¬æ¢</span>
</span></span><span class="line"><span class="cl">            <span class="n">Person</span> <span class="n">p</span> <span class="p">=</span> <span class="n">student</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//æ˜¾ç¤ºè½¬æ¢ å¯èƒ½ä¼šå‘ç”Ÿç±»å‹è½¬æ¢é”™è¯¯</span>
</span></span><span class="line"><span class="cl">            <span class="n">Student</span> <span class="n">s</span> <span class="p">=</span> <span class="p">(</span><span class="n">Student</span><span class="p">)</span><span class="n">p</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//å¦‚æœå¼‚å¸¸s1å°±æ˜¯null</span>
</span></span><span class="line"><span class="cl">            <span class="n">Student</span> <span class="n">s1</span> <span class="p">=</span> <span class="n">p</span> <span class="k">as</span> <span class="n">Student</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">s1</span> <span class="k">is</span> <span class="n">Student</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//åˆ¤æ–­</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">//åˆ¤æ–­å¹¶å¼•å…¥å˜é‡</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">s1</span> <span class="k">is</span> <span class="n">Student</span> <span class="n">s2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">s2</span><span class="p">.</span><span class="n">StuId</span> <span class="p">=</span> <span class="s">&#34;2020170281&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span></code></pre></div><h4 id="virtualå‡½æ•°æˆå‘˜"><em>virtualå‡½æ•°æˆå‘˜</em></h4>
<ul>
<li>æ ‡è®°ä¸ºvirtualçš„å‡½æ•°å¯ä»¥è¢«å­ç±»é‡å†™ï¼ŒåŒ…æ‹¬å±æ€§ã€æ–¹æ³•ã€ç´¢å¼•å™¨ã€äº‹ä»¶ç­‰ç­‰</li>
<li>ä½¿ç”¨overrideä¿®é¥°ç¬¦ï¼Œå­ç±»å¯ä»¥é‡å†™çˆ¶ç±»çš„å‡½æ•°</li>
</ul>
<h5 id="override"><em>override</em></h5>
<ul>
<li>virtualæ–¹æ³•å’Œé‡å†™æ–¹æ³•çš„ç­¾åã€è¿”å›ç±»å‹ã€å¯è®¿é—®ç¨‹åº¦å¿…é¡»æ˜¯ä¸€æ ·çš„</li>
<li><em><strong>é‡å†™æ–¹æ³•é‡Œä½¿ç”¨baseå…³é”®å­—å¯ä»¥è°ƒç”¨çˆ¶ç±»çš„å®ç°</strong></em></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="kt">var</span> <span class="n">person</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Person</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">student</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Student</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">student</span><span class="p">.</span><span class="n">jobbb</span> <span class="p">=</span> <span class="s">&#34;student&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">person</span><span class="p">.</span><span class="n">job</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">student</span><span class="p">.</span><span class="n">job</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Person</span> <span class="n">p</span> <span class="p">=</span> <span class="n">student</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">job</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">class</span> <span class="nc">Person</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="kt">string</span> <span class="n">Name</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="k">virtual</span> <span class="kt">string</span> <span class="n">job</span> <span class="p">=&gt;</span> <span class="s">&#34;person&#34;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">class</span> <span class="nc">Student</span> <span class="p">:</span> <span class="n">Person</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="kt">string</span> <span class="n">StuId</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="k">override</span> <span class="kt">string</span> <span class="n">job</span> <span class="p">=&gt;</span> <span class="n">jobbb</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="kt">string</span> <span class="n">jobbb</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><h4 id="æŠ½è±¡ç±»å’ŒæŠ½è±¡æˆå‘˜">æŠ½è±¡ç±»å’ŒæŠ½è±¡æˆå‘˜</h4>
<ul>
<li>ä½¿ç”¨abstractå£°æ˜çš„ç±»æ˜¯æŠ½è±¡ç±»</li>
<li>æŠ½è±¡ç±»ä¸å¯ä»¥è¢«å®ä¾‹åŒ–ï¼Œåªæœ‰å…¶å…·ä½“çš„å­ç±»æ‰å¯ä»¥è¢«å®ä¾‹åŒ–</li>
<li>æŠ½è±¡ç±»å¯ä»¥å®šä¹‰æŠ½è±¡æˆå‘˜</li>
<li><em><strong>æŠ½è±¡æˆå‘˜å’Œvirtualæˆå‘˜å¾ˆåƒï¼Œä½†æ˜¯ä¸æä¾›å…·ä½“çš„å®ç°ã€‚å­ç±»å¿…é¡»æä¾›å®ç°ï¼Œé™¤éå­ç±»ä¹Ÿæ˜¯æŠ½è±¡çš„</strong></em></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">   <span class="k">public</span> <span class="k">abstract</span>  <span class="k">class</span> <span class="nc">Person1</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="k">abstract</span> <span class="kt">string</span> <span class="n">Name</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span>  <span class="p">}</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">class</span> <span class="nc">Student1</span><span class="p">:</span><span class="n">Person1</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span>  <span class="k">override</span>  <span class="kt">string</span> <span class="n">Name</span> <span class="p">=&gt;</span> <span class="n">job</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="kt">string</span> <span class="n">job</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><h5 id="new-å’Œ-overrideçš„åŒºåˆ«"><em>new å’Œ overrideçš„åŒºåˆ«</em></h5>
<ul>
<li><em><strong>ç”¨newçš„è¯ï¼Œ ç¼–è¯‘æ—¶å¯¹Açš„å¼•ç”¨å°±ä¼šç»‘å®šåˆ°Açš„å­—æ®µä¸Š</strong></em></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="c1">//new å’Œ override çš„åŒºåˆ«</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">b</span> <span class="p">=</span> <span class="k">new</span> <span class="n">B</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">A</span> <span class="n">a1</span> <span class="p">=</span> <span class="n">b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">b</span><span class="p">.</span><span class="n">lalala</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">            <span class="n">a1</span><span class="p">.</span><span class="n">lalala</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">c</span> <span class="p">=</span> <span class="k">new</span> <span class="n">C</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">A</span> <span class="n">a2</span> <span class="p">=</span> <span class="n">c</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="n">c</span><span class="p">.</span><span class="n">lalala</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">a2</span><span class="p">.</span><span class="n">lalala</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">class</span> <span class="nc">A</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="k">virtual</span> <span class="k">void</span> <span class="n">lalala</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;AAAAAA&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">class</span> <span class="nc">B</span> <span class="p">:</span> <span class="n">A</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="n">lalala</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;BBBBBB&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">class</span> <span class="nc">C</span><span class="p">:</span><span class="n">A</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="k">new</span> <span class="k">void</span> <span class="n">lalala</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;CCCCC&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><h4 id="sealed"><em>sealed</em></h4>
<ul>
<li><em><strong>é’ˆå¯¹é‡å†™çš„æˆå‘˜ï¼Œå¯ä»¥ä½¿ç”¨sealedå…³é”®å­—æŠŠå®ƒå¯†å°èµ·æ¥ï¼Œ é˜²æ­¢å®ƒè¢«å…¶ä»–å­ç±»é‡å†™</strong></em></li>
<li><em><strong>ä¹Ÿå¯ä»¥sealedç±»æœ¬èº«ï¼Œå°±éšå¼çš„sealedæ‰€æœ‰çš„virtualå‡½æ•°äº†</strong></em></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">class</span> <span class="nc">Student1</span> <span class="p">:</span> <span class="n">Person1</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//ä½¿ç”¨sealedçš„è¯ï¼Œå°±æ— æ³•åœ¨å…¶ä»–å­ç±»é‡å†™äº†</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="k">sealed</span> <span class="k">override</span> <span class="kt">string</span> <span class="n">Name</span> <span class="p">=&gt;</span> <span class="n">job</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="kt">string</span> <span class="n">job</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><h4 id="baseå…³é”®å­—"><em>baseå…³é”®å­—</em></h4>
<ul>
<li><em><strong>baseå’Œthiså¾ˆåƒï¼Œbaseä¸»è¦ç”¨äº</strong></em>
<ul>
<li><em><strong>ä»å­ç±»è®¿é—®çˆ¶ç±»é‡Œè¢«é‡å†™çš„å‡½æ•°</strong></em></li>
<li><em><strong>è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°</strong></em></li>
</ul>
</li>
<li>è¿™ç§å†™æ³•å¯ä»¥ä¿è¯ï¼Œè®¿é—®çš„ä¸€å®šæ˜¯assetçš„liabilityå±æ€§ï¼Œæ— è®ºè¯¥å±æ€§æ˜¯å‘—é‡å†™äº†è¿˜æ˜¯è¢«éšè—äº†</li>
</ul>
<h4 id="æ„é€ å‡½æ•°å’Œç»§æ‰¿"><em>æ„é€ å‡½æ•°å’Œç»§æ‰¿</em></h4>
<ul>
<li>
<p>å­ç±»å¿…é¡»å£°æ˜è‡ªå·±çš„æ„é€ å‡½æ•°</p>
</li>
<li>
<p><em><strong>ä»å­ç±»å¯è®¿é—®çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œä½†ä¸æ˜¯è‡ªåŠ¨ç»§æ‰¿çš„</strong></em></p>
</li>
<li>
<p>å­ç±»å¿…é¡»é‡æ–°å®šä¹‰ä»–æƒ³è¦æš´éœ²çš„æ„é€ å‡½æ•°</p>
</li>
<li>
<p><em><strong>è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°éœ€è¦ä½¿ç”¨baseå…³é”®å­—</strong></em></p>
</li>
<li>
<p>çˆ¶ç±»çš„æ„é€ å‡½æ•°è‚¯å®šä¼šå…ˆæ‰§è¡Œ</p>
</li>
<li>
<p><em><strong>å¦‚æœå­ç±»çš„æ„é€ å‡½æ•°é‡Œæ²¡æœ‰ä½¿ç”¨baseå…³é”®å­—ï¼Œé‚£ä¹ˆçˆ¶ç±»çš„æ— å‚æ„é€ å‡½æ•°å°±ä¼šè¢«éšå¼çš„è°ƒç”¨</strong></em></p>
</li>
<li>
<p>å¦‚æœçˆ¶ç±»æ²¡æœ‰æ— å‚æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆå­ç±»å°±å¿…é¡»åœ¨æ„é€ å‡½æ•°é‡Œä½¿ç”¨baseå…³é”®å­—</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">Tiget</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="s">&#34;lalala&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">Tiget</span><span class="p">(</span><span class="s">&#34;lalala&#34;</span><span class="p">,</span> <span class="s">&#34;lulullu&#34;</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">class</span> <span class="nc">Animial</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="n">Animial</span><span class="p">(</span><span class="kt">string</span> <span class="n">@class</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">@class</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">class</span> <span class="nc">Tiget</span> <span class="p">:</span> <span class="n">Animial</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="n">Tiget</span><span class="p">(</span><span class="kt">string</span> <span class="n">@class</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">@class</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;tiger&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="n">Tiget</span><span class="p">(</span><span class="kt">string</span> <span class="n">@class</span> <span class="p">,</span><span class="kt">string</span> <span class="n">b</span><span class="p">):</span><span class="k">base</span><span class="p">(</span><span class="n">@class</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><h4 id="object">object</h4>
<ul>
<li>objectæ˜¯å¼•ç”¨ç±»å‹</li>
<li>ä½†å€¼ç±»å‹å¯ä»¥è½¬åŒ–ä¸ºobjectï¼Œåä¹‹äº¦ç„¶ï¼ˆç±»å‹ç»Ÿä¸€ï¼‰</li>
<li>åœ¨å€¼ç±»å‹å’Œobjectä¹‹é—´è½¬æ¢çš„æ—¶å€™ï¼Œclrå¿…é¡»æ‰§è¡Œä¸€äº›ç‰¹æ®Šçš„å·¥ä½œï¼Œä»¥å¼¥è¡¥å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹ä¹‹é—´è¯­ä¹‰ä¸Šçš„ä¸€äº›å·®å¼‚ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«åšè£…ç®±å’Œæ‹†ç®±</li>
</ul>
<h5 id="è£…ç®±">è£…ç®±</h5>
<ul>
<li><em><strong>è£…ç®±å°±æ˜¯æŠŠå€¼ç±»å‹çš„å®ä¾‹è½¬æ¢ä¸ºå¼•ç”¨ç±»å‹çš„å®ä¾‹çš„åŠ¨ä½œ</strong></em></li>
<li>ç›®æ ‡å¼•ç”¨ç±»å‹å¯ä»¥æ˜¯objectï¼Œä¹Ÿå¯ä»¥æ˜¯æŸä¸ªæ¥å£</li>
</ul>
<h5 id="æ‹†ç®±">æ‹†ç®±</h5>
<ul>
<li>
<p><em><strong>æ‹†ç®±æ­£å¥½ç›¸åï¼ŒæŠŠé‚£ä¸ªå¯¹è±¡è½¬æ¢æˆåŸæ¥çš„å€¼ç±»å‹</strong></em></p>
</li>
<li>
<p>æ‹†ç®±éœ€è¦æ˜¾ç¤ºçš„è½¬æ¢</p>
</li>
<li>
<p>æ•°ç»„å’Œæ³›å‹åªæ”¯æŒå¼•ç”¨è½¬æ¢ï¼Œä¸æ”¯æŒè£…ç®±</p>
</li>
</ul>
<h5 id="è£…ç®±å’Œæ‹†ç®±çš„å¤åˆ¶"><em><strong>è£…ç®±å’Œæ‹†ç®±çš„å¤åˆ¶</strong></em></h5>
<ul>
<li><em><strong>è£…ç®±ä¼šæŠŠå€¼ç±»å‹çš„å®ä¾‹å¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„å¯¹è±¡</strong></em></li>
<li><em><strong>æ‹†ç®±ä¼šæŠŠè¿™ä¸ªå¯¹è±¡çš„å†…å®¹å†èµ‹å€¼ç»™ä¸€ä¸ªå€¼ç±»å‹çš„å®ä¾‹</strong></em></li>
</ul>
<h4 id="é™æ€å’Œè¿è¡Œæ—¶ç±»å‹æ£€æŸ¥">é™æ€å’Œè¿è¡Œæ—¶ç±»å‹æ£€æŸ¥</h4>
<ul>
<li>C#çš„ç¨‹åºæ—¢ä¼šåšé™æ€çš„ç±»å‹æ£€æŸ¥ï¼ˆç¼–è¯‘æ—¶ï¼‰ï¼Œä¹Ÿä¼šåšè¿è¡Œæ—¶çš„ç±»å‹æ£€æŸ¥ï¼ˆCLRï¼‰</li>
<li>é™æ€æ£€æŸ¥ï¼šä¸è¿è¡Œç¨‹åºçš„æƒ…å†µä¸‹ï¼Œè®©ç¼–è¯‘å™¨ä¿è¯ç¨‹åºçš„æ­£ç¡®æ€§</li>
<li>è¿è¡Œæ—¶çš„ç±»å‹æ£€æŸ¥ï¼Œæ˜¯ç”±CLRæ‰§è¡Œï¼Œå‘ç”Ÿåœ¨å‘ä¸‹çš„å¼•ç”¨è½¬æ¢æˆ–æ‹†ç®±çš„æ—¶å€™</li>
<li>è¿è¡Œæ—¶æ£€æŸ¥ä¹‹æ‰€ä»¥å¯è¡Œæ˜¯å› ä¸ºï¼šæ¯ä¸ªåœ¨heapä¸Šçš„å¯¹è±¡å†…éƒ¨éƒ½å­˜å‚¨äº†ä¸€ä¸ªç±»å‹token ã€‚ è¿™ä¸ªtokenå¯ä»¥é€šè¿‡è°ƒç”¨objectçš„gettypeï¼ˆï¼‰æ–¹æ³•æ¥è·å–</li>
</ul>
<h4 id="tostringæ–¹æ³•"><em>tostringæ–¹æ³•</em></h4>
<ul>
<li><em><strong>å¯ä»¥åœ¨è‡ªå®šä¹‰çš„ç±»å‹ä¸Šé‡å†™tostringæ–¹æ³•</strong></em></li>
<li><em><strong>å¦‚æœä½ ä¸é‡å†™è¯¥æ–¹æ³•ï¼Œé‚£å°±ä¼šè¿”å›è¯¥ç±»å‹çš„åç§°</strong></em></li>
</ul>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210124214053490.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210124214053490.png"
			
			
			
			loading="lazy"
			alt="image-20210124214053490">
	</a>
	
	<figcaption>image-20210124214053490</figcaption>
	
</figure></p>
<h4 id="struct">struct</h4>
<ul>
<li>structå’Œclasså·®ä¸å¤šï¼Œä½†æ˜¯æœ‰ä¸€äº›ä¸åŒ
<ul>
<li>structæ˜¯å€¼ç±»å‹ï¼Œclassæ˜¯å¼•ç”¨ç±»å‹</li>
<li><em><strong>structä¸æ”¯æŒç»§æ‰¿ï¼ˆé™¤äº†éšå¼çš„ç»§æ‰¿äº†objectï¼‰</strong></em></li>
</ul>
</li>
<li><em><strong>classèƒ½æœ‰çš„æˆå‘˜ï¼Œstructä¹Ÿå¯ä»¥æœ‰ï¼Œ ä½†æ˜¯ä¸€ä¸‹å‡ ä¸ªä¸è¡Œ</strong></em>
<ul>
<li>æ— å‚æ„é€ å‡½æ•°ä¸è¡Œ</li>
<li>å­—æ®µåˆå§‹åŒ–å™¨ä¸è¡Œ</li>
<li>ç»ˆç»“å™¨ä¸è¡Œ</li>
<li>virtualå’Œprotectedæˆå‘˜ä¸å¯ä»¥</li>
</ul>
</li>
<li>structçš„æ„å»º
<ul>
<li>æœ‰ä¸€ä¸ªæ— å‚æ„é€ å‡½æ•°ï¼Œä½†æ˜¯ä¸èƒ½å¯¹å…¶è¿›è¡Œé‡å†™ï¼Œä»–ä¼šå¯¹å­—æ®µè¿›è¡ŒæŒ‰ä½å½’é›¶æ“ä½œ</li>
<li>å½“å®šä¹‰structæ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œå¿…é¡»æ˜¾å¼çš„ä¸ºæ¯ä¸ªå­—æ®µèµ‹å€¼</li>
<li>ä¸å¯ä»¥æœ‰å­—æ®µåˆå§‹åŒ–å™¨</li>
</ul>
</li>
</ul>
<h4 id="è®¿é—®ä¿®é¥°ç¬¦">è®¿é—®ä¿®é¥°ç¬¦</h4>
<ul>
<li>public ï¼Œå®Œå…¨å¯è®¿é—®ï¼Œenumå’Œinterfaceçš„æˆå‘˜é»˜è®¤éƒ½æ˜¯è¿™ä¸ªçº§åˆ«</li>
<li>internal ï¼Œ å½“å‰assemblyæˆ–è€…æœ‹å‹assemblyå¯è®¿é—®ï¼Œ éåµŒå¥—ç±»çš„é»˜è®¤è®¿é—®çº§åˆ«</li>
<li>privateï¼Œ æœ¬ç±»å¯ä»¥è®¿é—®ï¼Œ class å’Œstruct çš„æˆå‘˜çš„é»˜è®¤è®¿é—®çº§åˆ«</li>
<li>protected ï¼Œ æœ¬ç±»æˆ–å…¶å­ç±»å¯ä»¥è®¿é—®</li>
<li>protected internal ï¼Œ è”åˆäº†protected å’Œinternal çš„è®¿é—®çº§åˆ«</li>
</ul>
<h4 id="æœ‹å‹ç¨‹åºé›†assembly">æœ‹å‹ç¨‹åºé›†assembly</h4>
<ul>
<li>é€šè¿‡æ·»åŠ system.runtime.compilerservices.internalsvisibletoè¿™ä¸ªassemblyçš„å±æ€§ ï¼Œ å¹¶æŒ‡å®šæœ‹å‹assemblyçš„åå­—ï¼Œå°±å¯ä»¥æŠŠinternalçš„æˆå‘˜æš´éœ²ç»™æœ‹å‹assembly</li>
</ul>
<p>[assembyy:internalsvisibleto(&ldquo;friend&rdquo;)]</p>
<ul>
<li>å¦‚æœæœ‹å‹assembly æœ‰strong name ï¼Œ é‚£ä¹ˆå°±å¿…é¡»æŒ‡å®šå…¶å®Œæ•´çš„160å­—èŠ‚çš„public key</li>
</ul>
<p>[assembyy :internalsvisibleto(&ldquo;strongfriend,publickey=0024f0000448c&hellip;&rdquo;)]</p>
<h4 id="è®¿é—®ä¿®é¥°ç¬¦çš„é™åˆ¶">è®¿é—®ä¿®é¥°ç¬¦çš„é™åˆ¶</h4>
<ul>
<li>å½“é‡å†™çˆ¶ç±»çš„å‡½æ•°æ—¶ï¼Œé‡å†™åçš„å‡½æ•°å’Œè¢«é‡å†™çš„å‡½æ•°çš„è®¿é—®çº§åˆ«å¿…é¡»ä¸€è‡´</li>
<li>æœ‰ä¸€ä¸ªä¾‹å¤–ï¼šå½“åœ¨å…¶ä»–çš„assemblyé‡å†™protected internalçš„æ–¹æ³•æ—¶ï¼Œ é‡å†™åçš„æ–¹æ³•å¿…é¡»æ˜¯protected</li>
</ul>
<h4 id="æ¥å£ç®€ä»‹">æ¥å£ç®€ä»‹</h4>
<ul>
<li>æ¥å£åªä¸ºæˆå‘˜æä¾›è§„æ ¼ï¼Œæ²¡æœ‰å®ç°</li>
<li>æ¥å£æˆå‘˜éƒ½æ˜¯éšå¼æŠ½è±¡çš„</li>
<li>ä¸€ä¸ªclassæˆ–è€…structéƒ½å¯ä»¥å®ç°å¤šä¸ªæ¥å£</li>
</ul>
<h5 id="æ¥å£çš„å®ç°">æ¥å£çš„å®ç°</h5>
<ul>
<li>æ¥å£çš„æˆå‘˜éƒ½æ˜¯éšå¼publicçš„ï¼Œä¸å¯ä»¥å£°æ˜è®¿é—®ä¿®é¥°ç¬¦</li>
<li>å®ç°æ¥å£å¯¹å¥¹çš„æ‰€æœ‰æˆå‘˜è¿›è¡Œpublicçš„å®ç°</li>
</ul>
<h5 id="æ¥å£å’Œå¯¹è±¡çš„ç›¸äº’è½¬æ¢">æ¥å£å’Œå¯¹è±¡çš„ç›¸äº’è½¬æ¢</h5>
<h5 id="æ¥å£çš„æ‰©å±•">æ¥å£çš„æ‰©å±•</h5>
<ul>
<li>æ¥å£å¯ä»¥ç»§æ‰¿å…¶ä»–æ¥å£</li>
</ul>
<h5 id="æ˜¾ç¤ºçš„æ¥å£å®ç°">æ˜¾ç¤ºçš„æ¥å£å®ç°</h5>
<ul>
<li>å®ç°å¤šä¸ªæ¥å£çš„æ—¶å€™å¯èƒ½ä¼šé€ æˆå„æˆå‘˜ç­¾åçš„å†²çªã€‚é€šè¿‡æ˜¾å¼å®ç°æ¥å£æˆå‘˜å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜</li>
</ul>
<h4 id="æšä¸¾">æšä¸¾</h4>
<ul>
<li>æšä¸¾æ—¶ä¸€ä¸ªç‰¹æ®Šçš„å€¼ç±»å‹ï¼Œå®ƒå¯ä»¥è®©ä½ æŒ‡å®šä¸€ç»„å‘½åçš„æ•°å€¼å¸¸é‡</li>
<li>æ¯ä¸ªæšä¸¾éƒ½å¯¹åº”ä¸€ä¸ªåº•å±‚çš„æ•´å‹æ•°å€¼ï¼Œé»˜è®¤æ˜¯intç±»å‹</li>
<li><em><strong>ä¹Ÿå¯ä»¥æŒ‡å®šå…¶ä»–çš„ç±»å‹ä½œä¸ºæšä¸¾çš„æ•´æ•°ç±»å‹ï¼Œä¾‹å¦‚byte</strong></em></li>
<li>å¯ä»¥å•ç‹¬æŒ‡å®šæšä¸¾æˆå‘˜çš„æ•´æ•°å€¼</li>
<li>ä¹Ÿå¯ä»¥æŒ‡å®šå…¶ä¸­æŸäº›æˆå‘˜çš„æ•°å€¼ï¼Œæœªè¢«èµ‹å€¼çš„æˆå‘˜å°†æ¥ç€ä»–å‰é¢çš„å·²èµ‹å€¼æˆå‘˜çš„å€¼é€’å¢</li>
</ul>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210124221533924.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210124221533924.png"
			
			
			
			loading="lazy"
			alt="image-20210124221533924">
	</a>
	
	<figcaption>image-20210124221533924</figcaption>
	
</figure></p>
<ul>
<li>æšä¸¾å¯ä»¥æ˜¾å¼çš„å’Œå…¶åº•å±‚çš„æ•°å€¼ç›¸äº’è½¬æ¢</li>
</ul>
<h4 id="flags-enum">flags enum</h4>
<ul>
<li>å¯ä»¥å¯¹æšä¸¾çš„æˆå‘˜è¿›è¡Œç»„åˆ</li>
<li>ä¸ºäº†é¿å…æ­§ä¹‰ï¼Œæšä¸¾æˆå‘˜çš„éœ€è¦æ˜¾ç¤ºçš„èµ‹å€¼ï¼Œå…¸å‹çš„ä½¿ç”¨2çš„ä¹˜å¹‚</li>
<li>æŒ‰çº¦å®šï¼Œå¦‚æœæšä¸¾æˆå‘˜å¯ä»¥ç»„åˆçš„è¯ï¼Œflagså±æ€§å°±åº”è¯¥å¼•ç”¨åœ¨æšä¸¾ç±»å‹ä¸Š
<ul>
<li>å¦‚æœå£°æ˜äº†è¿™æ ·çš„æšä¸¾å´æ²¡æœ‰ä½¿ç”¨flagså±æ€§ï¼Œä½ ä»ç„¶å¯ä»¥ç»„åˆæšä¸¾çš„æˆå‘˜ï¼Œä½†æ˜¯è°ƒç”¨æšä¸¾å®ä¾‹çš„tostringï¼ˆï¼‰æ–¹æ³•æ—¶ï¼Œè¾“å‡ºçš„å°†æ˜¯ä¸€ä¸ªæ•°å€¼è€Œä¸æ˜¯ä¸€ç»„åç§°</li>
</ul>
</li>
<li>æŒ‰çº¦å®šï¼Œå¯ä»¥ç»„åˆæšä¸¾çš„åç§°åº”è¯¥æ˜¯å¤æ•°çš„</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">      <span class="kt">var</span> <span class="n">b</span> <span class="p">=</span> <span class="n">sex</span><span class="p">.</span><span class="n">top</span> <span class="p">|</span> <span class="n">sex</span><span class="p">.</span><span class="n">bottom</span> <span class="p">|</span> <span class="n">sex</span><span class="p">.</span><span class="n">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="na">
</span></span></span><span class="line"><span class="cl"><span class="na">        [Flags]</span>
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">enum</span>  <span class="n">sex</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">top</span> <span class="p">=</span> <span class="m">1</span> <span class="p">,</span> 
</span></span><span class="line"><span class="cl">            <span class="n">right</span> <span class="p">=</span> <span class="m">2</span> <span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">bottom</span> <span class="p">=</span> <span class="m">4</span> <span class="p">,</span> 
</span></span><span class="line"><span class="cl">            <span class="n">left</span>  <span class="p">=</span> <span class="m">8</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><h4 id="æšä¸¾æ”¯æŒçš„æ“ä½œç¬¦">æšä¸¾æ”¯æŒçš„æ“ä½œç¬¦</h4>
<p>= == != &lt; &gt; &lt;= &gt;= + - ^ &amp; | - += -= &ndash; sizeof</p>
<ul>
<li>å…¶ä¸­æŒ‰ä½çš„ã€æ¯”è¾ƒçš„ã€ç®—æœ¯çš„æ“ä½œç¬¦è¿”å›çš„éƒ½æ˜¯å¤„ç†åº•å±‚å€¼åå¾—åˆ°çš„ç»“æœ</li>
<li>åŠ æ³•æ“ä½œç¬¦åªå…è®¸ä¸€ä¸ªæšä¸¾å’Œä¸€ä¸ªæ•´å‹æ•°å€¼ç›¸åŠ ï¼Œä¸¤ä¸ªæšä¸¾ç›¸åŠ æ˜¯ä¸å¯ä»¥çš„</li>
</ul>
<h4 id="åµŒå¥—ç±»å‹çš„ç‰¹æ€§">åµŒå¥—ç±»å‹çš„ç‰¹æ€§</h4>
<ul>
<li>å¯è®¿é—®å°é—­ç±»å‹çš„ç§æœ‰æˆå‘˜ï¼Œä»¥åŠä»»ä½•å°é—­ç±»å‹èƒ½è®¿é—®çš„ä¸œè¥¿</li>
<li>å¯ä»¥ä½¿ç”¨æ‰€æœ‰çš„è®¿é—®ä¿®é¥°ç¬¦æ¥å£°æ˜ï¼Œä¸ä»…ä»…æ˜¯publicå’Œinternal</li>
<li>åµŒå¥—ç±»å‹çš„é»˜è®¤è®¿é—®çº§åˆ«æ˜¯privateè€Œä¸æ˜¯internal</li>
<li>ä»å°é—­ç±»å‹å¤–è¾¹è®¿é—®åµŒå¥—ç±»å‹éœ€è¦ä½¿ç”¨åˆ°å°é—­ç±»å‹çš„åç§°</li>
</ul>
<h3 id="å¤ä¹ ä¸€ä¸‹">å¤ä¹ ä¸€ä¸‹</h3>
<ul>
<li><em><strong>åˆ†éƒ¨ç±»ã€å‘½åç©ºé—´global::ã€external aliasã€virtualã€overrideå’Œnewçš„åŒºåˆ«ã€abstractã€ç»§æ‰¿æ„é€ å‡½æ•°çš„baseå…³é”®å­—ã€</strong></em></li>
<li><em><strong>goto label  ã€ using static ã€ string.isnullorwhitespaceã€getvalueordefaultã€isä¿®é¥°ç¬¦ã€asä¿®é¥°ç¬¦ã€æœ¬åœ°æ–¹æ³•ã€deconstructorã€ å±æ€§è‡ªåŠ¨åˆå§‹åŒ–å™¨ã€æ„é€ å‡½æ•°æ”¯æŒexpression bodyå½¢å¼ã€nameofä¿®é¥°ç¬¦ã€åˆ†å¸ƒæ–¹æ³•æä¾›é’©å­ã€isä¿®é¥°ç¬¦æä¾›å˜é‡ã€sealedã€å­ç±»ç»§æ‰¿çˆ¶ç±»æ„é€ å‡½æ•°é—®é¢˜ã€</strong></em></li>
<li><em><strong>è£…ç®±æ‹†ç®±æ˜¯å¤åˆ¶ã€tostringè‡ªå®šä¹‰ç±»å‹å¾—é‡å†™ä¸ç„¶ã€deconstructoræ”¯æŒæ‰©å±•æ–¹æ³•</strong></em></li>
</ul>
<h3 id="ç¬¬ä¸‰ç« -æ³›å‹éƒ¨åˆ†">ç¬¬ä¸‰ç«  æ³›å‹éƒ¨åˆ†</h3>
<h4 id="æ³›å‹çš„ä½œç”¨">æ³›å‹çš„ä½œç”¨</h4>
<ul>
<li>è·¨ç±»å‹å¯å¤ç”¨çš„ä»£ç ï¼šç»§æ‰¿å’Œæ³›å‹</li>
<li>ç»§æ‰¿=&gt;åŸºç±»</li>
<li>æ³›å‹=&gt;å¸¦æœ‰ç±»å‹å ä½ç¬¦çš„æ¨¡æ¿</li>
</ul>
<h4 id="æ³›å‹ç±»å‹--generic-types">æ³›å‹ç±»å‹  generic types</h4>
<ul>
<li>æ³›å‹ä¼šå£°æ˜ç±»å‹å‚æ•°&mdash;æ³›å‹çš„æ¶ˆè´¹è€…éœ€è¦æä¾›ç±»å‹å‚æ•°ï¼ˆargumentï¼‰æ¥å§å ä½ç¬¦ç±»å‹å¡«å……ä¸Š</li>
</ul>
<h5 id="open-type--closed-type">open type &amp; closed type</h5>
<ul>
<li>stack<!-- raw HTML omitted --> open type å¼€æ”¾ç±»å‹</li>
<li>stack<!-- raw HTML omitted --> closed type å°é—­ç±»å‹</li>
<li>åœ¨è¿è¡Œæ—¶ï¼Œæ‰€æœ‰çš„æ³›å‹ç±»å‹å®ä¾‹éƒ½æ˜¯å°é—­çš„ï¼ˆå ä½ç¬¦ç±»å‹å·²ç»è¢«å¡«å……äº†ï¼‰</li>
</ul>
<h5 id="æ³›å‹æ–¹æ³•">æ³›å‹æ–¹æ³•</h5>
<ul>
<li>æ³›å‹æ–¹æ³•åœ¨æ–¹æ³•çš„ç­¾åå†…ä¹Ÿå¯ä»¥å£°æ˜ç±»å‹å‚æ•°</li>
<li>åœ¨æ³›å‹ç±»å‹é‡Œé¢çš„æ–¹æ³•ï¼Œé™¤éä¹Ÿå¼•å…¥äº†ç±»å‹å‚æ•°ï¼Œå¦åˆ™æ˜¯ä¸ä¼šå½’ä¸ºæ³›å‹æ–¹æ³•çš„</li>
<li>åªæœ‰ç±»å‹å’Œæ–¹æ³•å¯ä»¥å¼•å…¥ç±»å‹å‚æ•°ï¼Œå±æ€§ã€ç´¢å¼•å™¨ã€äº‹ä»¶ã€å­—æ®µã€æ„é€ å‡½æ•°ã€æ“ä½œç¬¦ç­‰éƒ½ä¸å¯ä»¥å£°æ˜ç±»å‹å‚æ•°ã€ä½†æ˜¯ä»–ä»¬å¯ä»¥ä½¿ç”¨ä»–ä»¬æ‰€åœ¨çš„æ³›å‹ç±»å‹çš„å‚æ•°</li>
</ul>
<h5 id="å£°æ˜ç±»å‹å‚æ•°">å£°æ˜ç±»å‹å‚æ•°</h5>
<ul>
<li>åœ¨å£°æ˜class / struct / interface / delegate çš„æ—¶å€™å¯ä»¥å¼•å…¥ç±»å‹å‚æ•°(type parameters)</li>
<li>å…¶ä»–çš„ä¾‹å¦‚å±æ€§ï¼Œ å°±ä¸å¯ä»¥å¼•å…¥ç±»å‹å‚æ•°ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ç±»å‹å‚æ•°</li>
<li>å¼•å…¥å°±æ˜¯ä½¿ç”¨<!-- raw HTML omitted -->å½¢å¼ï¼Œ ä½¿ç”¨å°±æ˜¯ç›´æ¥ä½¿ç”¨Tçš„å½¢å¼</li>
<li>æ³›å‹ç±»å‹/æ³›å‹æ–¹æ³•çš„åç§°å¯ä»¥è¢«é‡è½½ï¼Œæ¡ä»¶æ˜¯å‚æ•°ç±»å‹çš„ä¸ªæ•°ä¸åŒ</li>
</ul>
<h5 id="typeof-ä¸-æœªç»‘å®šçš„æ³›å‹ç±»å‹">typeof ä¸ æœªç»‘å®šçš„æ³›å‹ç±»å‹</h5>
<ul>
<li>å¼€æ–¹çš„æ³›å‹ç±»å‹åœ¨ç¼–è¯‘åå°±å˜æˆäº†å°é—­çš„æ³›å‹ç±»å‹</li>
<li>ä½†æ˜¯å¦‚æœä½œä¸ºtypeå¯¹è±¡ï¼Œ é‚£ä¹ˆæœªç»‘å®šçš„æ³›å‹ç±»å‹åœ¨è¿è¡Œæ—¶æ˜¯å¯ä»¥å­˜åœ¨çš„ï¼Œ åªèƒ½é€šè¿‡typeofæ“ä½œç¬¦æ¥å®ç°</li>
<li>ä½¿ç”¨defaultå…³é”®å­—æ¥è·å–æ³›å‹çš„é»˜è®¤å€¼</li>
</ul>
<h4 id="æ³›å‹çš„çº¦æŸ">æ³›å‹çš„çº¦æŸ</h4>
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ³›å‹çš„ç±»å‹å‚æ•°(parameter)å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„</li>
<li>å¦‚æœåªå…è®¸ä½¿ç”¨ç‰¹å®šçš„ç±»å‹å‚æ•°(argument) ï¼Œ å°±å¯ä»¥æŒ‡å®šçº¦æŸ</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="k">where</span> <span class="n">T</span><span class="p">:</span><span class="k">base</span><span class="p">-</span><span class="k">class</span>
</span></span><span class="line"><span class="cl">	<span class="nc">where</span> <span class="n">T</span><span class="p">:</span><span class="k">class</span>
</span></span><span class="line"><span class="cl">		<span class="nc">where</span> <span class="n">T</span><span class="p">:</span><span class="k">interface</span>
</span></span><span class="line"><span class="cl">    		<span class="nc">where</span> <span class="n">T</span><span class="p">:</span><span class="k">struct</span>
</span></span><span class="line"><span class="cl">        		<span class="nc">where</span> <span class="n">U</span><span class="p">:</span><span class="n">T</span> 
</span></span><span class="line"><span class="cl">            		<span class="k">where</span> <span class="n">T</span><span class="p">:</span><span class="k">new</span> <span class="p">()</span>   <span class="c1">//ä¿è¯æ— å‚æ„é€ å‡½æ•°</span>
</span></span></code></pre></div><ul>
<li>æ³›å‹çš„çº¦æŸå¯ä»¥ä½œç”¨äºç±»å‹æˆ–æ–¹æ³•çš„å®šä¹‰</li>
</ul>
<h5 id="æ³›å‹ç±»å‹çš„å­ç±»">æ³›å‹ç±»å‹çš„å­ç±»</h5>
<ul>
<li>æ³›å‹classå¯ä»¥æœ‰å­ç±»ï¼Œ åœ¨å­ç±»é‡Œï¼Œå¯ä»¥ç»§ç»­è®©çˆ¶ç±»çš„ç±»å‹å‚æ•°ä¿æŒå¼€æ”¾</li>
<li>åœ¨å­ç±»é‡Œï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…·ä½“çš„ç±»å‹æ¥å…³é—­ï¼ˆå°é—­ï¼‰çˆ¶ç±»çš„ç±»å‹å‚æ•°</li>
<li>å­ç±»å‹ä¹Ÿå¯ä»¥å¼•å…¥æ–°çš„ç±»å‹å‚æ•°</li>
</ul>
<h5 id="é™æ€æ•°æ®">é™æ€æ•°æ®</h5>
<ul>
<li>é’ˆå¯¹æ¯ä¸€ä¸ªå°é—­ç±»å‹ï¼Œ é™æ€æ•°æ®éƒ½æ˜¯å”¯ä¸€çš„</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">     <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">Bob</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;.</span><span class="n">Count</span><span class="p">++);</span>        <span class="c1">//0</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">Bob</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;.</span><span class="n">Count</span><span class="p">++);</span>   <span class="c1">//1</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">Bob</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">&gt;.</span><span class="n">Count</span><span class="p">++);</span>  <span class="c1">//0</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">class</span>  <span class="nc">Bob</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="k">static</span> <span class="kt">int</span> <span class="n">Count</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><h5 id="å‚æ•°ç±»å‹å’Œè½¬æ¢">å‚æ•°ç±»å‹å’Œè½¬æ¢</h5>
<ul>
<li>ä½¿ç”¨ arg as intè¿™æ ·çš„æ“ä½œç¬¦</li>
<li>æˆ–è€…ä½¿ç”¨ (int)(object) x æ“ä½œç¬¦</li>
</ul>
<h3 id="ç¬¬å››ç« -å§”æ‰˜äº‹ä»¶lambdaè¡¨è¾¾å¼">ç¬¬å››ç«  å§”æ‰˜ã€äº‹ä»¶ã€lambdaè¡¨è¾¾å¼</h3>
<h4 id="delegateå§”æ‰˜">delegateå§”æ‰˜</h4>
<ul>
<li>å§”æ‰˜æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»–çŸ¥é“å¦‚ä½•è°ƒç”¨ä¸€ä¸ªæ–¹æ³•</li>
<li>å§”æ‰˜ç±»å‹å®šä¹‰äº†å§”æ‰˜å®ä¾‹å¯ä»¥è°ƒç”¨çš„é‚£ç±»æ–¹æ³•ï¼Œå…·ä½“æ¥è¯´ï¼Œå§”æ‰˜ç±»å‹å®šä¹‰äº†æ–¹æ³•çš„è¿”å›ç±»å‹å’Œå‚æ•°</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Program</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//ç¬¬ä¸€ç§æ¨è</span>
</span></span><span class="line"><span class="cl">            <span class="n">Transformer</span> <span class="n">transformer1</span> <span class="p">=</span> <span class="n">Square</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">i</span> <span class="p">=</span> <span class="n">transformer1</span><span class="p">(</span><span class="m">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">//ç¬¬äºŒç§ï¼Œè‡ªå·±ç¢ç£¨å‡ºæ¥çš„ä¸æ¨è</span>
</span></span><span class="line"><span class="cl">            <span class="n">Transformer</span> <span class="n">transformer</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Transformer</span><span class="p">(</span><span class="n">Square</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">invoke</span> <span class="p">=</span> <span class="n">transformer</span><span class="p">.</span><span class="n">Invoke</span><span class="p">(</span><span class="m">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">invoke</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">delegate</span> <span class="kt">int</span> <span class="n">Transformer</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="kt">int</span> <span class="n">Square</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">x</span> <span class="p">*</span> <span class="n">x</span><span class="p">;</span> 
</span></span></code></pre></div><h4 id="å§”æ‰˜å®ä¾‹">å§”æ‰˜å®ä¾‹</h4>
<ul>
<li>å§”æ‰˜çš„å®ä¾‹å…¶å®å°±æ˜¯è°ƒç”¨è€…çš„å§”æ‰˜ï¼šè°ƒç”¨è€…è°ƒç”¨å§”æ‰˜ï¼Œç„¶åå§”æ‰˜è°ƒç”¨ç›®æ ‡æ–¹æ³•</li>
<li>é—´æ¥çš„å§è°ƒç”¨è€…å’Œç›®æ ‡æ–¹æ³•è§£è€¦äº†</li>
</ul>
<h4 id="ç¼–å†™æ’ä»¶å¼çš„æ–¹æ³•">ç¼–å†™æ’ä»¶å¼çš„æ–¹æ³•</h4>
<ul>
<li>æ–¹æ³•æ˜¯åœ¨è¿è¡Œæ—¶æ‰èµ‹å€¼ç»™å§”æ‰˜å˜é‡çš„</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">           <span class="kt">var</span> <span class="n">transformer</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Transformer</span><span class="p">(</span><span class="n">Square</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">ints</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[]{</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">            <span class="n">Util</span><span class="p">.</span><span class="n">Transform</span><span class="p">(</span><span class="n">ints</span><span class="p">,</span> <span class="n">transformer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">i</span> <span class="k">in</span> <span class="n">ints</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">delegate</span> <span class="kt">int</span> <span class="n">Transformer</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">class</span> <span class="nc">Util</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="n">Transform</span><span class="p">(</span><span class="kt">int</span><span class="p">[]</span> <span class="n">values</span><span class="p">,</span> <span class="n">Transformer</span> <span class="n">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">values</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">=</span> <span class="n">t</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span> 
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="kt">int</span> <span class="n">Square</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">x</span> <span class="p">*</span> <span class="n">x</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p><em><strong>å®ç°è§£ç»‘ï¼Œæ˜¯åœ¨ç¼–å†™ç¨‹åºçš„æ—¶å€™ï¼Œæ‰å†³å®šæˆ‘è¦ç»™è¿™ä¸ªå§”æ‰˜å®ä¾‹ä¸€ä¸ªå¯ä¾›è°ƒç”¨çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥æ˜¯squareå¹³æ–¹ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸‰æ¬¡æ–¹ï¼Œè¿™å–å†³äºéœ€æ±‚æ–¹ï¼Œå› æ­¤è§£è€¦ä¹‹åä½ å¯ä»¥ç¼–å†™æ’ä»¶å¼çš„æ–¹æ³•ï¼Œæœ€åè®©éœ€æ±‚å®ç°è€…è‡ªå·±æ¥å†³å®šè¦å®ä¾‹åŒ–ä½•ç§æ–¹æ³•å§”æ‰˜</strong></em></p>
<h4 id="å¤šæ’­å§”æ‰˜">å¤šæ’­å§”æ‰˜</h4>
<ul>
<li>æ‰€æœ‰çš„å§”æ‰˜å®ä¾‹éƒ½å…·æœ‰å¤šæ’­çš„èƒ½åŠ›ã€‚ä¸€ä¸ªå§”æ‰˜å®ä¾‹å¯ä»¥å¼•ç”¨ä¸€ç»„ç›®æ ‡æ–¹æ³•ã€‚</li>
<li>ä½¿ç”¨+å’Œ+=æ“ä½œç¬¦å¯ä»¥åˆå¹¶å§”æ‰˜å®ä¾‹</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="n">delegateDemo1</span> <span class="n">delegateDemo</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">delegateDemo</span> <span class="p">+=</span> <span class="n">Square1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">delegateDemo</span> <span class="p">+=</span> <span class="n">Cube1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">delegateDemo</span><span class="p">(</span><span class="m">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">delegateDemo</span> <span class="p">-=</span> <span class="n">Cube1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">delegateDemo</span><span class="p">(</span><span class="m">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="k">static</span> <span class="k">void</span> <span class="n">Square1</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">x</span> <span class="p">*</span> <span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">Cube1</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">x</span> <span class="p">*</span><span class="n">x</span><span class="p">*</span> <span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">delegate</span> <span class="k">void</span> <span class="n">delegateDemo1</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">);</span> 
</span></span></code></pre></div><ul>
<li>
<p>è°ƒç”¨då°±ä¼šè°ƒç”¨ä½ æ·»åŠ è¿›å»çš„1å’Œ2æ–¹æ³•ï¼Œå§”æ‰˜çš„è°ƒç”¨é¡ºåºä¸ä»–ä»¬å®šä¹‰çš„é¡ºåºæ˜¯ä¸€è‡´çš„</p>
</li>
<li>
<p>ç”¨-å’Œ-=ä¼šæŠŠå³è¾¹çš„å§”æ‰˜ä»å·¦è¾¹çš„å§”æ‰˜é‡Œç§»é™¤</p>
</li>
<li>
<p>å§”æ‰˜å˜é‡ä½¿ç”¨+æˆ–+=æ“ä½œç¬¦æ—¶ï¼Œå…¶æ“ä½œæ•°å¯ä»¥æ˜¯nullã€‚å°±ç›¸å½“äºæŠŠä¸€ä¸ªæ–°çš„å€¼èµ‹ç»™äº†å§”æ‰˜å˜é‡ã€‚</p>
</li>
<li>
<p>å¯¹äºå•ä¸ªç›®æ ‡æ–¹æ³•çš„å§”æ‰˜å˜é‡ä½¿ç”¨-=æ“ä½œç¬¦æ—¶ï¼Œå°±ç›¸å½“äºæŠŠnullå€¼èµ‹ç»™äº†å§”æ‰˜å˜é‡</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"> <span class="kt">var</span> <span class="n">transformer</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Transformer</span><span class="p">(</span><span class="n">Square</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">transformer</span> <span class="p">+=</span> <span class="n">Cube</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">ints</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[]{</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">            <span class="n">Util</span><span class="p">.</span><span class="n">Transform</span><span class="p">(</span><span class="n">ints</span><span class="p">,</span> <span class="n">transformer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">i</span> <span class="k">in</span> <span class="n">ints</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">delegate</span> <span class="kt">int</span> <span class="n">Transformer</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">class</span> <span class="nc">Util</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="n">Transform</span><span class="p">(</span><span class="kt">int</span><span class="p">[]</span> <span class="n">values</span><span class="p">,</span> <span class="n">Transformer</span> <span class="n">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">values</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">=</span> <span class="n">t</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span> 
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="kt">int</span> <span class="n">Square</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">x</span> <span class="p">*</span> <span class="n">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="kt">int</span> <span class="n">Cube</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">x</span> <span class="p">*</span> <span class="n">x</span> <span class="p">*</span> <span class="n">x</span><span class="p">;</span> 
</span></span></code></pre></div><ul>
<li>å§”æ‰˜æ˜¯ä¸å¯å˜çš„</li>
<li>ä½¿ç”¨+=æˆ–-=æ“ä½œç¬¦æ—¶ï¼Œå®é™…ä¸Šæ˜¯åˆ›å»ºäº†æ–°çš„å§”æ‰˜å®ä¾‹ï¼Œå¹¶æŠŠå®ƒèµ‹ç»™å½“å‰çš„å§”æ‰˜å˜é‡</li>
<li>å¦‚æœå¤šæ’­å§”æ‰˜çš„è¿”å›å€¼ç±»å‹ä¸æ˜¯voidï¼Œé‚£ä¹ˆè°ƒç”¨è€…ä»æœ€åä¸€ä¸ªè¢«è°ƒç”¨çš„æ–¹æ³•æ¥æ¥æ”¶è¿”å›å€¼ã€‚å‰é¢çš„æ–¹æ³•ä»ç„¶ä¼šè¢«è°ƒç”¨ï¼Œä½†æ˜¯å…¶è¿”å›å€¼å°±è¢«å¼ƒç”¨äº†ã€‚</li>
</ul>
<h4 id="å§”æ‰˜">å§”æ‰˜</h4>
<ul>
<li>æ‰€æœ‰çš„å§”æ‰˜ç±»å‹éƒ½æ´¾ç”Ÿäºsystem.multicastdelegateï¼Œè€Œå®ƒåˆæ´¾ç”Ÿäºsystem.delegate</li>
<li>c#ä¼šæŠŠä½œç”¨äºå§”æ‰˜çš„+ã€-ã€+=ã€-+æ“ä½œç¼–è¯‘æˆä½¿ç”¨system.delegateçš„combineå’Œremoveä¸¤ä¸ªé™æ€æ–¹æ³•</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="n">HardWork</span><span class="p">(</span><span class="n">A</span> <span class="n">a</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="m">10</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">a</span><span class="p">(</span><span class="n">i</span><span class="p">*</span><span class="m">10</span><span class="p">+</span><span class="m">10</span><span class="p">+</span><span class="s">&#34;%&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="n">WriteFile</span><span class="p">(</span><span class="kt">string</span> <span class="n">b</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="p">.</span><span class="n">IO</span><span class="p">.</span><span class="n">File</span><span class="p">.</span><span class="n">WriteAllText</span><span class="p">(</span><span class="s">&#34;progress.txt&#34;</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="n">console</span><span class="p">(</span><span class="kt">string</span> <span class="n">b</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">public</span>   <span class="k">delegate</span> <span class="k">void</span> <span class="n">A</span><span class="p">(</span><span class="kt">string</span> <span class="n">b</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">A</span> <span class="n">a</span> <span class="p">=</span> <span class="n">Class1</span><span class="p">.</span><span class="n">console</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">a</span> <span class="p">+=</span> <span class="n">Class1</span><span class="p">.</span><span class="n">WriteFile</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">Class1</span><span class="p">.</span><span class="n">HardWork</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
</span></span></code></pre></div><h4 id="å®ä¾‹æ–¹æ³•ç›®æ ‡å’Œé™æ€æ–¹æ³•ç›®æ ‡-target">å®ä¾‹æ–¹æ³•ç›®æ ‡å’Œé™æ€æ–¹æ³•ç›®æ ‡ target</h4>
<ul>
<li>å½“ä¸€ä¸ªå®ä¾‹æ–¹æ³•è¢«èµ‹å€¼ç»™å§”æ‰˜å¯¹è±¡çš„æ—¶å€™ï¼Œè¿™ä¸ªå§”æ‰˜å¯¹è±¡ä¸ä»…è¦ä¿ç•™ç€å¯¹æ–¹æ³•çš„å¼•ç”¨ï¼Œè¿˜è¦ä¿ç•™ç€å¯¹æ–¹æ³•æ‰€å±å®ä¾‹çš„å¼•ç”¨</li>
<li>system.delegateçš„targetå±æ€§å°±ä»£è¡¨ç€è¿™ä¸ªå®ä¾‹</li>
<li>å¦‚æœå¼•ç”¨çš„æ˜¯é™æ€æ–¹æ³•ï¼Œé‚£ä¹ˆtargetå±æ€§å°±æ˜¯null</li>
</ul>
<h4 id="æ³›å‹å§”æ‰˜ç±»å‹">æ³›å‹å§”æ‰˜ç±»å‹</h4>
<ul>
<li>å§”æ‰˜ç±»å‹å¯ä»¥åŒ…å«æ³›å‹ç±»å‹å‚æ•°
<ul>
<li>public delegate T transformer<!-- raw HTML omitted --> (T arg)</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"> <span class="k">class</span> <span class="nc">Program</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Transformer</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">transformer</span> <span class="p">=</span> <span class="n">Square</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span><span class="p">[]</span> <span class="n">a</span> <span class="p">=</span>  <span class="p">{</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">};</span> 
</span></span><span class="line"><span class="cl">            <span class="n">Transform</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">transformer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">i</span> <span class="k">in</span> <span class="n">a</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">Transformer</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">transformer1</span> <span class="p">=</span> <span class="n">Cw</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kt">string</span><span class="p">[]</span> <span class="n">b</span> <span class="p">=</span> <span class="p">{</span><span class="s">&#34;1&#34;</span><span class="p">,</span> <span class="s">&#34;2&#34;</span><span class="p">,</span> <span class="s">&#34;3&#34;</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">            <span class="n">Transform</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">transformer1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">s</span> <span class="k">in</span> <span class="n">b</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">delegate</span> <span class="n">T</span> <span class="n">Transformer</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;(</span><span class="n">T</span> <span class="n">t</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="n">Transform</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;(</span><span class="n">T</span><span class="p">[]</span> <span class="n">values</span><span class="p">,</span> <span class="n">Transformer</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">values</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]=</span><span class="n">t</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="kt">int</span> <span class="n">Square</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">a</span> <span class="p">*</span> <span class="n">a</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="kt">string</span> <span class="n">Cw</span><span class="p">(</span><span class="kt">string</span> <span class="n">a</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">(</span><span class="n">a</span><span class="p">+</span><span class="s">&#34;CW&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"> 
</span></span></code></pre></div><h4 id="funcå’Œactionå§”æ‰˜"><em>Funcå’ŒActionå§”æ‰˜</em></h4>
<ul>
<li>ä½¿ç”¨æ³›å‹å§”æ‰˜ï¼Œå°±å¯ä»¥å†™å‡ºè¿™æ ·ä¸€ç»„å§”æ‰˜ç±»å‹ï¼Œä»–ä»¬å¯ä»¥è°ƒç”¨çš„æ–¹æ³•å¯ä»¥æ‹¥æœ‰ä»»æ„çš„è¿”å›ç±»å‹å’Œä»»æ„ï¼ˆåˆç†ï¼‰æ•°é‡çš„å‚æ•°</li>
<li>Systemå‘½åç©ºé—´</li>
</ul>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210127163836922.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210127163836922.png"
			
			
			
			loading="lazy"
			alt="image-20210127163836922">
	</a>
	
	<figcaption>image-20210127163836922</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210127163930536.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210127163930536.png"
			
			
			
			loading="lazy"
			alt="image-20210127163930536">
	</a>
	
	<figcaption>image-20210127163930536</figcaption>
	
</figure></p>
<p><em><strong>Func&lt;&gt;å¯ä»¥æœ‰å¤šä¸ªè¾“å…¥å‚æ•°ï¼Œ0ä¸ªä¹Ÿè¡Œï¼Œä¸€ä¸ªè¾“å‡ºå‚æ•°</strong></em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Program</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Transformer&lt;int&gt; transformer = Square;</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span><span class="p">[]</span> <span class="n">a</span> <span class="p">=</span> <span class="p">{</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">            <span class="n">Transform</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">Square</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">i</span> <span class="k">in</span> <span class="n">a</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">// Transformer&lt;string&gt; transformer1 = Cw;</span>
</span></span><span class="line"><span class="cl">            <span class="kt">string</span><span class="p">[]</span> <span class="n">b</span> <span class="p">=</span> <span class="p">{</span><span class="s">&#34;1&#34;</span><span class="p">,</span> <span class="s">&#34;2&#34;</span><span class="p">,</span> <span class="s">&#34;3&#34;</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">            <span class="n">Transform</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">Cw</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">s</span> <span class="k">in</span> <span class="n">b</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// public delegate T Transformer&lt;T&gt;(T t);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="n">Transform</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;(</span><span class="n">T</span><span class="p">[]</span> <span class="n">values</span><span class="p">,</span> <span class="n">Func</span><span class="p">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">values</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">=</span> <span class="n">t</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="kt">int</span> <span class="n">Square</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">a</span> <span class="p">*</span> <span class="n">a</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="kt">string</span> <span class="n">Cw</span><span class="p">(</span><span class="kt">string</span> <span class="n">a</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">(</span><span class="n">a</span> <span class="p">+</span> <span class="s">&#34;CW&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p><em><strong>ä¸ªäººç†è§£ï¼šå§”æ‰˜å°±æ˜¯æŠŠæ–¹æ³•ä½œä¸ºå‚æ•°æ¥è°ƒç”¨ï¼Œä¼ æ¥ä¼ å»å‘€ä»€ä¹ˆçš„æ€å¯†è¾¾</strong></em></p>
<p><em><strong>Action&lt;&gt;å¯ä»¥æœ‰å¤šä¸ªè¾“å…¥å‚æ•°ï¼Œ0ä¸ªä¹Ÿè¡Œï¼Œä½†æ˜¯æ²¡æœ‰è¾“å‡ºå‚æ•°</strong></em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Program</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span><span class="p">[]</span> <span class="n">a</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[]</span> <span class="p">{</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">            <span class="n">Transform</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">Square</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="kt">string</span><span class="p">[]</span> <span class="n">b</span> <span class="p">=</span> <span class="p">{</span> <span class="s">&#34;1&#34;</span><span class="p">,</span> <span class="s">&#34;2&#34;</span> <span class="p">,</span> <span class="s">&#34;3&#34;</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">            <span class="n">Transform</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">Cw</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">Transform</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;(</span><span class="n">T</span><span class="p">[]</span> <span class="n">values</span><span class="p">,</span> <span class="n">Action</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">tAction</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">values</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">tAction</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span> 
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">Square</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">a</span><span class="p">*</span><span class="n">a</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">Cw</span><span class="p">(</span><span class="kt">string</span> <span class="n">b</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">b</span> <span class="p">+</span> <span class="s">&#34;CW&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><h4 id="å§”æ‰˜vsæ¥å£">å§”æ‰˜Vsæ¥å£</h4>
<ul>
<li>å§”æ‰˜å¯ä»¥è§£å†³çš„é—®é¢˜ï¼Œæ¥å£éƒ½å¯ä»¥è§£å†³</li>
<li>ä»€ä¹ˆæƒ…å†µä¸‹æ›´é€‚åˆç”¨å§”æ‰˜è€Œä¸æ˜¯æ¥å£å‘¢ï¼Ÿå½“ä¸‹åˆ—æ¡ä»¶ä¹‹ä¸€æ»¡è¶³æ—¶ï¼š
<ul>
<li>æ¥å£åªèƒ½å®šä¹‰ä¸€ä¸ªæ–¹æ³•</li>
<li>éœ€è¦å¤šæ’­èƒ½åŠ›</li>
<li>è®¢é˜…è€…éœ€è¦å¤šæ¬¡å®ç°æ¥å£</li>
</ul>
</li>
</ul>
<p><em><strong>æ²¡æƒ³åˆ°æ¥å£å±…ç„¶èƒ½ä½œä¸ºä¸€ä¸ªæ–¹æ³•çš„ä¼ å…¥å‚æ•°ï¼Œæˆ‘éœ‡æƒŠ</strong></em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">    <span class="k">class</span>  <span class="nc">Util</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">       <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="n">TransformAll</span><span class="p">(</span><span class="kt">int</span><span class="p">[]</span> <span class="n">values</span><span class="p">,</span> <span class="n">Interface1</span> <span class="n">a</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">values</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">=</span> <span class="n">a</span><span class="p">.</span><span class="n">Transform</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">class</span>  <span class="nc">Cube</span><span class="p">:</span><span class="n">Interface1</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="kt">int</span> <span class="n">Transform</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">x</span> <span class="p">*</span> <span class="n">x</span> <span class="p">*</span> <span class="n">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">public</span> <span class="k">interface</span> <span class="nc">Interface1</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">Transform</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">Util</span><span class="p">.</span><span class="n">TransformAll</span><span class="p">(</span><span class="k">new</span> <span class="p">[]{</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">},</span><span class="k">new</span> <span class="n">Cube</span><span class="p">());</span>
</span></span></code></pre></div><h4 id="å§”æ‰˜çš„å…¼å®¹æ€§å§”æ‰˜ç±»å‹">å§”æ‰˜çš„å…¼å®¹æ€§â€“å§”æ‰˜ç±»å‹</h4>
<ul>
<li>å§”æ‰˜ç±»å‹ä¹‹é—´äº’ä¸ç›¸å®¹ï¼Œå³ä½¿æ–¹æ³•ç­¾åä¸€æ ·</li>
</ul>
<h4 id="å§”æ‰˜çš„å…¼å®¹æ€§å§”æ‰˜å®ä¾‹">å§”æ‰˜çš„å…¼å®¹æ€§â€“å§”æ‰˜å®ä¾‹</h4>
<ul>
<li>å¦‚æœå§”æ‰˜å®ä¾‹æ‹¥æœ‰ç›¸åŒçš„æ–¹æ³•ç›®æ ‡ï¼Œé‚£ä¹ˆå§”æ‰˜å®ä¾‹å°±è®¤ä¸ºæ˜¯ç›¸ç­‰çš„</li>
</ul>
<h4 id="å§”æ‰˜çš„å…¼å®¹æ€§å‚æ•°">å§”æ‰˜çš„å…¼å®¹æ€§â€“å‚æ•°</h4>
<ul>
<li>å½“ä½ è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œä½ æä¾›çš„å‚æ•°argumentå¯ä»¥æ¯”é˜²èŒƒçš„å‚æ•°parameterå®šä¹‰æ›´å…·ä½“</li>
<li>å§”æ‰˜å¯ä»¥æ¥å—æ¯”ä»–çš„æ–¹æ³•ç›®æ ‡æ›´å…·ä½“çš„å‚æ•°ç±»å‹ï¼Œè¿™ä¸ªå«contravariance</li>
</ul>
<h4 id="å§”æ‰˜çš„å…¼å®¹æ€§è¿”å›ç±»å‹">å§”æ‰˜çš„å…¼å®¹æ€§â€“è¿”å›ç±»å‹</h4>
<ul>
<li>è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä½ å¯ä»¥å¾—åˆ°ä¸€ä¸ªæ¯”è¯·æ±‚çš„ç±»å‹æ›´å…·ä½“çš„ç±»å‹çš„è¿”å›ç»“æœ</li>
<li>å§”æ‰˜çš„ç›®æ ‡æ–¹æ³•å¯ä»¥è¿”å›æ¯”å§”æ‰˜æè¿°é‡Œæ›´å…·ä½“çš„ç±»å‹çš„è¿”å›ç»“æœcovariance</li>
</ul>
<h4 id="eventäº‹ä»¶">Eventäº‹ä»¶</h4>
<ul>
<li>ä½¿ç”¨å§”æ‰˜çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šå‡ºç°ä¸¤ä¸ªè§’è‰²ï¼Œä¸€ä¸ªå¹¿æ’­è€…ï¼Œä¸€ä¸ªè®¢é˜…è€…</li>
</ul>
<h4 id="å¹¿æ’­å’Œè®¢é˜…">å¹¿æ’­å’Œè®¢é˜…</h4>
<ul>
<li>ä½¿ç”¨å§”æ‰˜çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šå‡ºç°ä¸¤ä¸ªè§’è‰²ï¼Œä¸€ä¸ªå¹¿æ’­è€…ï¼Œä¸€ä¸ªè®¢é˜…è€…</li>
<li><em><strong>å¹¿æ’­è€…è¿™ä¸ªç±»å‹åŒ…å«ä¸€ä¸ªå§”æ‰˜å­—æ®µï¼Œå¹¿æ’­è€…é€šè¿‡è°ƒç”¨å§”æ‰˜æ¥å†³å®šä»€ä¹ˆæ—¶å€™è¿›è¡Œå¹¿æ’­</strong></em></li>
<li>è®¢é˜…è€…æ˜¯è¿™ä¸ªæ–¹æ³•ç›®æ ‡çš„æ¥æ”¶è€…ï¼Œè®¢é˜…è€…å¯ä»¥å†³å®šä½•æ—¶å¼€å§‹æˆ–ç»“æŸç›‘å¬</li>
<li>ä¸€ä¸ªè®¢é˜…è€…ä¸çŸ¥é“å’Œä¸å¹²æ‰°å…¶ä»–çš„è®¢é˜…è€…</li>
</ul>
<h4 id="eventäº‹ä»¶-1">Eventäº‹ä»¶</h4>
<ul>
<li>äº‹ä»¶å°±æ˜¯å°†ä¸Šè¿°æ¨¡å¼æ­£å¼åŒ–çš„ä¸€ä¸ªè¯­è¨€ç‰¹æ€§</li>
<li>äº‹ä»¶æ˜¯ä¸€ç§ç»“æ„ï¼Œä¸ºäº†å®ç°å¹¿æ’­è€…/è®¢é˜…è€…æ¨¡å‹ï¼Œä»–åªæš´éœ²äº†æ‰€éœ€çš„å§”æ‰˜ç‰¹æ€§çš„éƒ¨åˆ†å­é›†</li>
<li>äº‹ä»¶çš„ä¸»è¦ç›®çš„å°±æ˜¯é˜²æ­¢è®¢é˜…è€…ä¹‹é—´ç›¸äº’å¹²æ‰°</li>
</ul>
<h4 id="å£°æ˜äº‹ä»¶">å£°æ˜äº‹ä»¶</h4>
<ul>
<li><em><strong>æœ€ç®€å•çš„å£°æ˜äº‹ä»¶çš„æ–¹å¼å°±æ˜¯åœ¨å§”æ‰˜å‰é¢åŠ ä¸Ševentå…³é”®å­—</strong></em></li>
</ul>
<h4 id="æ ‡å‡†çš„äº‹ä»¶æ¨¡å¼">æ ‡å‡†çš„äº‹ä»¶æ¨¡å¼</h4>
<ul>
<li>ä¸ºç¼–å†™äº‹ä»¶ï¼Œ.netå®šä¹‰äº†ä¸€ä¸ªæ ‡å‡†çš„æ¨¡å¼</li>
<li>system.eventargsï¼Œ ä¸€ä¸ªé¢„å®šä¹‰çš„æ¡†æ¶ç±»ï¼Œé™¤äº†é™æ€çš„emptyå±æ€§ä¹‹å¤–ï¼Œä»–æ²¡æœ‰å…¶ä»–æˆå‘˜</li>
<li>eventargsæ˜¯ä¸ºäº‹ä»¶ä¼ é€’ä¿¡æ¯çš„ç±»çš„åŸºç±»</li>
</ul>
<h4 id="ä¸ºäº‹ä»¶é€‰æ‹©æˆ–å®šä¹‰å§”æ‰˜">ä¸ºäº‹ä»¶é€‰æ‹©æˆ–å®šä¹‰å§”æ‰˜</h4>
<ul>
<li>è¿”å›ç±»å‹æ˜¯void</li>
<li><em><strong>æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹æ˜¯objectï¼Œç¬¬äºŒä¸ªå‚æ•°ç±»å‹æ˜¯eventagrsçš„å­ç±»ã€‚ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºäº‹ä»¶çš„å¹¿æ’­è€…ï¼Œç¬¬äºŒä¸ªå‚æ•°åŒ…å«éœ€è¦ä¼ é€’çš„ä¿¡æ¯</strong></em></li>
<li>åç§°å¿…é¡»ä»¥eventhandlerç»“å°¾</li>
</ul>
<h4 id="å¤ä¹ ">å¤ä¹ </h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">  <span class="k">delegate</span> <span class="kt">int</span> <span class="n">D1</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">D1</span> <span class="n">x</span> <span class="p">=</span> <span class="n">Sum</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">i</span> <span class="p">=</span> <span class="n">x</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">operation</span> <span class="p">=</span> <span class="n">Operation</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="n">Sum</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">operation</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">operation1</span> <span class="p">=</span> <span class="n">Operation</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="k">new</span> <span class="n">Func</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;((</span><span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">i1</span> <span class="p">+</span> <span class="n">i2</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">operation1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="kt">int</span> <span class="n">Sum</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">x</span> <span class="p">+</span> <span class="n">y</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="kt">int</span> <span class="n">Multiply</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">x</span> <span class="p">*</span> <span class="n">y</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="kt">int</span> <span class="n">Operation</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">,</span> <span class="n">Func</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;</span> <span class="n">aFunc</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">func</span> <span class="p">=</span> <span class="n">aFunc</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">func</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><h4 id="é’ˆå¯¹é€‰æ‹©çš„å§”æ‰˜å®šä¹‰äº‹ä»¶">é’ˆå¯¹é€‰æ‹©çš„å§”æ‰˜å®šä¹‰äº‹ä»¶</h4>
<ul>
<li>åœ¨å¤šçº¿ç¨‹åœºæ™¯ä¸‹ï¼Œä½ éœ€è¦åœ¨æµ‹è¯•æˆ–è°ƒç”¨å‰ï¼ŒæŠŠå§”æ‰˜èµ‹ç»™ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼Œæ¥é¿å…çº¿ç¨‹å®‰å…¨ç›¸å…³çš„é”™è¯¯
<ul>
<li>var temp = pricechanged ;</li>
<li>if(temp!=null)   temp (this , e)</li>
</ul>
</li>
<li>åœ¨c# 6.0ä¹‹åï¼Œå¯ä»¥è¿™æ ·å†™ï¼š
<ul>
<li>priceChanged?.Invoke(this,e)</li>
</ul>
</li>
</ul>
<h4 id="éæ³›å‹çš„eventhandler">éæ³›å‹çš„eventhandler</h4>
<ul>
<li>å½“äº‹ä»¶ä¸æºå¸¦å¤šä½™ä¿¡æ¯çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨éæ³›å‹çš„eventhandlerå§”æ‰˜</li>
<li>eventargs.emptyå±æ€§</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Program</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">class</span> <span class="nc">PriceChangedEventArgs</span> <span class="p">:</span> <span class="n">EventArgs</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="k">readonly</span> <span class="kt">decimal</span> <span class="n">LastPrice</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="k">readonly</span> <span class="kt">decimal</span> <span class="n">NewPrice</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="n">PriceChangedEventArgs</span><span class="p">(</span><span class="kt">decimal</span> <span class="n">lastPrice</span><span class="p">,</span> <span class="kt">decimal</span> <span class="n">newPrice</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="n">LastPrice</span> <span class="p">=</span> <span class="n">lastPrice</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="n">NewPrice</span> <span class="p">=</span> <span class="n">newPrice</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">class</span> <span class="nc">Stock</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">private</span> <span class="kt">string</span> <span class="n">symbol</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">private</span> <span class="kt">decimal</span> <span class="n">price</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="n">Stock</span><span class="p">(</span><span class="kt">string</span> <span class="n">symbol</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="n">symbol</span> <span class="p">=</span> <span class="n">symbol</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="k">event</span> <span class="n">EventHandler</span><span class="p">&lt;</span><span class="n">PriceChangedEventArgs</span><span class="p">&gt;</span> <span class="n">PriceChanged</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">protected</span> <span class="k">virtual</span> <span class="k">void</span> <span class="n">OnPriceChanged</span><span class="p">(</span><span class="n">PriceChangedEventArgs</span> <span class="n">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">PriceChanged</span><span class="p">?.</span><span class="n">Invoke</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="n">e</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="kt">decimal</span> <span class="n">Price</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">get</span> <span class="p">=&gt;</span> <span class="n">price</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">set</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="p">(</span><span class="n">price</span><span class="p">==</span><span class="k">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="k">return</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="kt">decimal</span> <span class="n">oldPrice</span> <span class="p">=</span> <span class="n">price</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="n">price</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">                    <span class="n">OnPriceChanged</span><span class="p">(</span><span class="k">new</span> <span class="n">PriceChangedEventArgs</span><span class="p">(</span><span class="n">oldPrice</span> <span class="p">,</span> <span class="n">price</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">stock</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Stock</span><span class="p">(</span><span class="s">&#34;microsoft&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">stock</span><span class="p">.</span><span class="n">Price</span> <span class="p">=</span> <span class="m">120</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">stock</span><span class="p">.</span><span class="n">PriceChanged</span> <span class="p">+=</span> <span class="n">stock_PriceChanged</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">stock</span><span class="p">.</span><span class="n">Price</span> <span class="p">=</span> <span class="m">135</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">stock_PriceChanged</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">PriceChangedEventArgs</span> <span class="n">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">((</span><span class="n">e</span><span class="p">.</span><span class="n">NewPrice</span><span class="p">-</span><span class="n">e</span><span class="p">.</span><span class="n">LastPrice</span><span class="p">)/</span><span class="n">e</span><span class="p">.</span><span class="n">LastPrice</span><span class="p">&gt;</span><span class="m">0.1</span><span class="n">M</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;Alert , 10% stock price increase ! &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><h4 id="lambdaè¡¨è¾¾å¼">lambdaè¡¨è¾¾å¼</h4>
<ul>
<li>lambdaè¡¨è¾¾å¼å…¶å®å°±æ˜¯ä¸€ä¸ªç”¨æ¥ä»£æ›¿å§”æ‰˜å®ä¾‹çš„æœªå‘½åçš„æ–¹æ³•</li>
<li>ç¼–è¯‘å™¨ä¼šæŠŠlambdaè¡¨è¾¾å¼è½¬åŒ–ä¸ºä»¥ä¸‹äºŒè€…ä¹‹ä¸€ï¼š
<ul>
<li>ä¸€ä¸ªå§”æ‰˜å®ä¾‹</li>
<li>ä¸€ä¸ªè¡¨è¾¾å¼æ ‘ï¼ˆexpression treeï¼‰ ï¼Œ ç±»å‹æ˜¯expression<!-- raw HTML omitted -->ï¼Œä»–è¡¨ç¤ºäº†å¯éå†çš„å¯¹è±¡æ¨¡å‹ä¸­lambdaè¡¨è¾¾å¼é‡Œé¢çš„ä»£ç ã€‚ä»–å…è®¸lambdaè¡¨è¾¾å¼å»¶è¿Ÿåˆ°è¿è¡Œæ—¶å†è¢«è§£é‡Š</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"> <span class="k">class</span> <span class="nc">Program</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">D1</span> <span class="n">d1</span> <span class="p">=</span> <span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">*</span><span class="n">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">i</span> <span class="p">=</span> <span class="n">d1</span><span class="p">(</span><span class="m">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">operation</span> <span class="p">=</span> <span class="n">Operation</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="n">Multiply</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">operation</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">ReadKey</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="kt">int</span> <span class="n">Operation</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">Func</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;</span> <span class="n">func</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">func</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">delegate</span> <span class="kt">int</span> <span class="n">D1</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="kt">int</span> <span class="n">Multiply</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">x</span> <span class="p">*</span> <span class="n">x</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><h4 id="lambdaè¡¨è¾¾å¼çš„å½¢å¼">lambdaè¡¨è¾¾å¼çš„å½¢å¼</h4>
<ul>
<li>(parameters)=&gt;expression -or- statement -block</li>
<li><em><strong>ï¼ˆå‚æ•°ï¼‰=&gt;è¡¨è¾¾å¼æˆ–è¯­å¥å—</strong></em></li>
<li>å…¶ä¸­å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°å¹¶ä¸”ç±»å‹å¯ä»¥æ¨æ–­çš„è¯ï¼Œé‚£ä¹ˆå‚æ•°çš„å°æ‹¬å·å¯ä»¥çœç•¥</li>
</ul>
<h4 id="lambdaè¡¨è¾¾å¼ä¸å§”æ‰˜">lambdaè¡¨è¾¾å¼ä¸å§”æ‰˜</h4>
<ul>
<li>æ¯ä¸ªlambdaè¡¨è¾¾å¼çš„å‚æ•°å¯¹åº”å§”æ‰˜çš„å‚æ•°</li>
<li>è¡¨è¾¾å¼çš„ç±»å‹å¯¹åº”å§”æ‰˜çš„è¿”å›ç±»å‹</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"> <span class="k">class</span> <span class="nc">Program</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">D1</span> <span class="n">d1</span> <span class="p">=</span> <span class="n">x</span><span class="p">=&gt;</span><span class="n">x</span><span class="p">*</span><span class="n">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">i</span> <span class="p">=</span> <span class="n">d1</span><span class="p">(</span><span class="m">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">operation</span> <span class="p">=</span> <span class="n">Operation</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="n">Multiply</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">operation</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">Func</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;</span> <span class="n">func</span> <span class="p">=</span> <span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">a</span> <span class="p">*</span> <span class="n">a</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">func</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">Func</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;</span> <span class="n">function</span> <span class="p">=</span> <span class="p">(</span><span class="n">str1</span><span class="p">,</span> <span class="n">str2</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="n">str1</span><span class="p">.</span><span class="n">Length</span> <span class="p">+</span> <span class="n">str2</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">            <span class="n">Func</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;</span> <span class="n">function1</span> <span class="p">=</span> <span class="p">(</span><span class="n">str1</span><span class="p">,</span> <span class="n">str2</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">str1</span><span class="p">.</span><span class="n">Length</span> <span class="p">+</span> <span class="n">str2</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">           
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span> <span class="n">function</span><span class="p">(</span><span class="s">&#34;hello&#34;</span><span class="p">,</span> <span class="s">&#34;world&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span> <span class="n">function1</span><span class="p">(</span><span class="s">&#34;hello&#34;</span><span class="p">,</span> <span class="s">&#34;world&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="kt">int</span> <span class="n">Operation</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">Func</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;</span> <span class="n">func</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">func</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">delegate</span> <span class="kt">int</span> <span class="n">D1</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="kt">int</span> <span class="n">Multiply</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">x</span> <span class="p">*</span> <span class="n">x</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><p><em><strong>å¦‚æœä¸ç”¨{}é‚£ä¹ˆå°±ä¸éœ€è¦returnå…³é”®å­— ï¼Œå¦‚æœç”¨äº†{}é‚£ä¹ˆå°±è¦ä½¿ç”¨returnå…³é”®å­—ï¼Œä¸”å†…éƒ¨è¿˜è¦åŠ å°å·ï¼›</strong></em></p>
<h4 id="æ˜¾å¼æŒ‡å®šlambdaè¡¨è¾¾å¼çš„å‚æ•°ç±»å‹">æ˜¾å¼æŒ‡å®šlambdaè¡¨è¾¾å¼çš„å‚æ•°ç±»å‹</h4>
<h4 id="æ•è·å¤–éƒ¨å˜é‡">æ•è·å¤–éƒ¨å˜é‡</h4>
<ul>
<li>lambdaè¡¨è¾¾å¼å¯ä»¥å¼•ç”¨æœ¬åœ°çš„å˜é‡å’Œæ‰€åœ¨æ–¹æ³•çš„å‚æ•°</li>
<li>è¢«lambdaè¡¨è¾¾å¼å¼•ç”¨çš„å¤–éƒ¨å˜é‡å«åšè¢«æ•è·çš„å˜é‡ï¼ˆcaptured variablesï¼‰</li>
<li>æ•è·äº†å¤–éƒ¨å˜é‡çš„lambdaè¡¨è¾¾å¼å«åšé—­åŒ…</li>
<li>è¢«æ•è·çš„å˜é‡æ˜¯åœ¨å§”æ‰˜è¢«å®é™…è°ƒç”¨çš„æ—¶å€™æ‰è¢«è®¡ç®—ï¼Œè€Œä¸æ˜¯åœ¨æ•è·çš„æ—¶å€™</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"> <span class="kt">int</span> <span class="n">factor</span> <span class="p">=</span> <span class="m">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">Func</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;</span> <span class="n">func</span> <span class="p">=</span> <span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span> <span class="p">*</span> <span class="n">factor</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">factor</span> <span class="p">=</span> <span class="m">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">var</span> <span class="n">i</span> <span class="p">=</span> <span class="n">func</span><span class="p">(</span><span class="m">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</span></span></code></pre></div><ul>
<li>è¢«æ•è·çš„å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¼šè¢«å»¶é•¿åˆ°å’Œå§”æ‰˜ä¸€æ ·</li>
</ul>
<h4 id="lambdaè¡¨è¾¾å¼å†…çš„æœ¬åœ°å˜é‡">lambdaè¡¨è¾¾å¼å†…çš„æœ¬åœ°å˜é‡</h4>
<ul>
<li>åœ¨lambdaè¡¨è¾¾å¼å†…å®ä¾‹åŒ–çš„æœ¬åœ°å˜é‡å¯¹äºå§”æ‰˜å®ä¾‹çš„æ¯æ¬¡è°ƒç”¨æ¥è¯´éƒ½æ˜¯å”¯ä¸€çš„</li>
</ul>
<h4 id="lambdaè¡¨è¾¾å¼vsæœ¬åœ°æ–¹æ³•">lambdaè¡¨è¾¾å¼vsæœ¬åœ°æ–¹æ³•</h4>
<ul>
<li>æœ¬åœ°æ–¹å¼æ˜¯c#7çš„æ–°ç‰¹æ€§ ã€‚ ä»–å’Œlambdaè¡¨è¾¾å¼åœ¨åŠŸèƒ½ä¸Šæœ‰å¾ˆå¤šé‡å¤ä¹‹å¤„ï¼Œä½†ä»–åˆä¸‰ä¸ªä¼˜ç‚¹ï¼š
<ul>
<li>ç®€å•æ˜äº†è¿›è¡Œé€’å½’</li>
<li>æ— éœ€æŒ‡å®šå§”æ‰˜ç±»å‹</li>
<li>æ€§èƒ½å¼€é”€ç•¥ä½ä¸€ç‚¹</li>
</ul>
</li>
<li>æœ¬åœ°æ–¹æ³•æ•ˆç‡æ›´é«˜æ˜¯å› ä¸ºå®ƒé¿å…äº†å§”æ‰˜çš„é—´æ¥è°ƒç”¨ã€‚æœ¬åœ°æ–¹æ³•ä¹Ÿå¯ä»¥è®¿é—®æ‰€åœ¨æ–¹æ³•çš„æœ¬åœ°å˜é‡ï¼Œè€Œä¸”æ— éœ€ç¼–è¯‘å™¨æŠŠè¢«æ•è·çš„å˜é‡hoiståˆ°éšè—çš„ç±»</li>
</ul>
<h4 id="åŒ¿åæ–¹æ³•vslambdaè¡¨è¾¾å¼">åŒ¿åæ–¹æ³•vslambdaè¡¨è¾¾å¼</h4>
<ul>
<li>åŒ¿åæ–¹æ³•å’Œlambdaè¡¨è¾¾å¼å¾ˆåƒï¼Œä½†æ˜¯ç¼ºå°‘ä»¥ä¸‹ä¸‰ä¸ªç‰¹æ€§
<ul>
<li>éšå¼ç±»å‹å‚æ•°</li>
<li>è¡¨è¾¾å¼è¯­æ³•ï¼ˆåªèƒ½æ˜¯è¯­å¥å—ï¼‰</li>
<li>ç¼–è¯‘è¡¨è¾¾å¼æ ‘çš„èƒ½åŠ›ï¼Œé€šè¿‡èµ‹å€¼ç»™expression<!-- raw HTML omitted --></li>
</ul>
</li>
</ul>
<h3 id="ç¬¬äº”ç« -è¿›é˜¶ç‰¹æ€§">ç¬¬äº”ç«  è¿›é˜¶ç‰¹æ€§</h3>
<h4 id="try-catch-finnally">try-catch-finnally</h4>
<ul>
<li>catchå¯ä»¥è®¾ç½®æ•è·ä¸åŒç±»å‹çš„å¼‚å¸¸ï¼Œå¦‚æœæ²¡æœ‰å¼‚å¸¸ç±»å‹åŒ¹é…çš„ï¼Œå¯èƒ½å°±ç¨‹åºæŠ¥é”™äº†</li>
<li>å¦‚æœä½ å¸Œæœ›æœ‰ä¸€ä¸ªå…œåº•çš„catchå¯ä»¥æ•è·ä»»ä½•ç±»å‹çš„å¼‚å¸¸ï¼Œé‚£ä¹ˆä½ éœ€è¦æŠŠå¾…å®šç±»å‹çš„å¼‚å¸¸æ•è·æ”¾åœ¨é å‰çš„ä½ç½®</li>
<li>ä»c#6 å¼€å§‹ï¼Œä½ å¯ä»¥åœ¨catchå­å¥ä¸­æ·»åŠ ä¸€ä¸ªwhenå­å¥æ¥æŒ‡å®šä¸€ä¸ªå¼‚å¸¸è¿‡æ»¤å™¨</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"> <span class="k">try</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span><span class="n">when</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">StackTrace</span><span class="p">==</span><span class="s">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">throw</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span></code></pre></div><h4 id="finallyå—">finallyå—</h4>
<ul>
<li>finallyå—æ°¸è¿œéƒ½ä¼šè¢«æ‰§è¡Œï¼Œæ— è®ºæ˜¯å¦è·‘å‡ºå¼‚å¸¸</li>
<li>å”¯ä¸€å¯ä»¥è®©ä»–ä¸æ‰§è¡Œå°±æ˜¯æ— é™æ‰§è¡Œï¼Œæˆ–è€…ä¸­æ–­</li>
</ul>
<h4 id="usingè¯­å¥">usingè¯­å¥</h4>
<ul>
<li>å¾ˆå¤šç±»éƒ½å°è£…äº†éæ‰˜ç®¡èµ„æºï¼Œéƒ½å®ç°äº†disposableæ¥å£ï¼Œè¿™ä¸ªæ¥å£å®šä¹‰äº†ä¸€ä¸ªæ— å‚çš„disposeæ–¹æ³•æ¥æ¸…ç†è¿™äº›èµ„æº</li>
<li>usingè¯­å¥æä¾›äº†ä¸€ä¸ªä¼˜é›…çš„è¯­æ³•æ¥åœ¨finallyå—é‡Œè°ƒç”¨å®ç°äº†idisposableæ¥å£å¯¹è±¡ä¸Šçš„disposeæ–¹æ³•</li>
</ul>
<h4 id="æŠ›å‡ºå¼‚å¸¸">æŠ›å‡ºå¼‚å¸¸</h4>
<ul>
<li>c# 7 ä¸­ï¼Œthrow new Exception å¯ä»¥ä½œä¸ºexpression-bodied functionsé‡Œçš„ä¸€ä¸ªè¡¨è¾¾å¼å‡ºç°</li>
<li>ä¹Ÿå¯ä»¥å‡ºç°åœ¨ä¸‰å…ƒæ¡ä»¶è¡¨è¾¾å¼é‡Œ</li>
</ul>
<h4 id="é‡æ–°æŠ›å‡ºå¼‚å¸¸">é‡æ–°æŠ›å‡ºå¼‚å¸¸</h4>
<ul>
<li>å¦‚æœä½¿ç”¨rhrow exä»£æ›¿throwçš„è¯ï¼Œç¨‹åºä»ç„¶å¯ä»¥è¿è¡Œ</li>
<li>å…¶ä»–å¸¸è§çš„æƒ…æ™¯æ˜¯æŠ›å‡ºä¸€ä¸ªæ›´ä¸ºå…·ä½“çš„å¼‚å¸¸ç±»å‹</li>
<li>å¦‚æœæŠŠåŸå¼‚å¸¸çš„exä¼ å…¥ç¬¬äºŒä¸ªå¼‚å¸¸ç±»å‹ä½œä¸ºå‚æ•°ï¼Œåˆ©äºè°ƒè¯•ï¼Œä½†å¯èƒ½å‡ºç°ä¿¡æ¯æ³„éœ²</li>
</ul>
<h4 id="systemexception-çš„å…³é”®å±æ€§">System.exception çš„å…³é”®å±æ€§</h4>
<ul>
<li>stacktrace
<ul>
<li>ä»–æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå±•ç°äº†ä»å¼‚å¸¸å‘ç”Ÿåœ°åˆ°catchå—æ‰€æœ‰çš„è¢«è°ƒç”¨çš„æ–¹æ³•</li>
</ul>
</li>
<li>message
<ul>
<li>å…³äºé”™è¯¯çš„æè¿°ä¿¡æ¯</li>
</ul>
</li>
<li>innerexception
<ul>
<li>å¼•èµ·å¤–å±‚å¼‚å¸¸çš„å†…å±‚å¼‚å¸¸ï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰è€Œä¸”innerExceptionæœ¬èº«è¿˜æœ‰å¯èƒ½å«æœ‰innerexception</li>
</ul>
</li>
</ul>
<h4 id="å¸¸è§çš„å¼‚å¸¸ç±»å‹">å¸¸è§çš„å¼‚å¸¸ç±»å‹</h4>
<ul>
<li>system.argumentexception</li>
<li>system.argumentnullexception</li>
<li>system.argumentoutofrangeexception</li>
<li>system.invalidoperationexception</li>
<li>system.notsuppostedexception</li>
<li>system.notimplementedexception</li>
<li>system.oubjecdisposedexception</li>
<li>nullreferenceexception
<ul>
<li>ä½ ä¹Ÿå¯ä»¥ç›´æ¥throw null ï¼Œæ¥æŠ›å‡ºæ­¤ç±»å‹å¼‚å¸¸</li>
</ul>
</li>
</ul>
<h4 id="try-xxxæ¨¡å¼">try xxxæ¨¡å¼</h4>
<ul>
<li>å¦‚æœè§£æå¤±è´¥ ï¼Œ parseæ–¹æ³•ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œtryparseæ–¹æ³•ä¼šè¿”å›false</li>
</ul>
<h4 id="æšä¸¾å™¨">æšä¸¾å™¨</h4>
<ul>
<li>æšä¸¾å™¨æ˜¯ä¸€ä¸ªåªè¯»çš„ï¼Œä½œç”¨äºä¸€åºåˆ—å€¼çš„ã€åªèƒ½å‘å‰çš„æ¸¸æ ‡</li>
<li>æšä¸¾å™¨æ˜¯ä¸€ä¸ªå®ç°äº†ä¸‹åˆ—ä»»æ„ä¸€ä¸ªæ¥å£çš„å¯¹è±¡ï¼š
<ul>
<li>system.collections.ienumrator</li>
<li>system.collections.generic.IEnumerator<!-- raw HTML omitted --></li>
</ul>
</li>
<li>æŠ€æœ¯ä¸Šæ¥è¯´ï¼Œä»»ä½•ä¸€ä¸ªå«æœ‰åä¸ºmovenextæ–¹æ³•å’Œåä¸ºcurrentçš„å±æ€§çš„å¯¹è±¡ï¼Œéƒ½ä¼šè¢«å½“åšæšä¸¾å™¨æ¥å¯¹å¾…</li>
<li>foreachè¯­å¥ä¼šè¿­ä»£å¯æšä¸¾çš„å¯¹è±¡enumerable object ã€‚å¯æšä¸¾çš„å¯¹è±¡æ˜¯ä¸€åºåˆ—å€¼çš„é€»è¾‘æ ‡è¯†ã€‚å®ƒæœ¬èº«ä¸æ˜¯æ¸¸æ ‡ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯ä»¥åŸºäºæœ¬èº«äº§ç”Ÿçš„æ¸¸æ ‡çš„å¯¹è±¡ã€‚</li>
</ul>
<h4 id="å¯æšä¸¾å¯¹è±¡-enumerable-object">å¯æšä¸¾å¯¹è±¡ enumerable object</h4>
<ul>
<li>ä¸€ä¸ªå¯æšä¸¾å¯¹è±¡å¯ä»¥æ˜¯ï¼ˆä¸‹åˆ—ä»»æ„ä¸€ä¸ªï¼‰
<ul>
<li>å®ç°äº†ienumerableæˆ–è€…ienumerable<!-- raw HTML omitted -->çš„å¯¹è±¡</li>
<li>æœ‰ä¸€ä¸ªåä¸ºgetenumeratorçš„æ–¹æ³•ï¼Œå¹¶ä¸”è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæšä¸¾å™¨emunerator</li>
</ul>
</li>
<li>IEumratorå’ŒIEnumerableæ˜¯å®šä¹‰åœ¨system.collectionså‘½åç©ºé—´ä¸‹çš„</li>
<li>IEnumerator<!-- raw HTML omitted -->å’ŒIEnumerable<!-- raw HTML omitted -->æ˜¯å®šä¹‰åœ¨system.collections.genericå‘½åç©ºé—´ä¸‹çš„</li>
</ul>
<h4 id="é›†åˆåˆå§‹åŒ–å™¨">é›†åˆåˆå§‹åŒ–å™¨</h4>
<ul>
<li>è¦æ±‚å¯æšä¸¾å¯¹è±¡å®ç°äº†system.collections.ienumerableæ¥å£ï¼Œå¹¶ä¸”ä»–è¿˜æœ‰ä¸€ä¸ªå¯æ¥å—é€‚å½“å‚æ•°çš„addæ–¹æ³•</li>
</ul>
<h4 id="è¿­ä»£å™¨iterators">è¿­ä»£å™¨iterators</h4>
<ul>
<li>foreachæ˜¯æšä¸¾å™¨ï¼ˆenumeratorï¼‰çš„æ¶ˆè´¹è€…ï¼Œè€Œè¿­ä»£å™¨ï¼ˆiteratorsï¼‰æ˜¯æšä¸¾å™¨çš„ç”Ÿäº§è€…</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">  <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">VARIABLE</span> <span class="k">in</span> <span class="n">Foo</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">VARIABLE</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">static</span> <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">Foo</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">yield</span> <span class="k">return</span> <span class="s">&#34;one&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">yield</span> <span class="k">return</span> <span class="s">&#34;two&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">yield</span> <span class="k">return</span> <span class="s">&#34;Three&#34;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span></code></pre></div><h4 id="yield-break">yield break</h4>
<ul>
<li>yield break è¯­å¥è¡¨ç¤ºè¿­ä»£å™¨å—ä¼šæå‰é€€å‡ºï¼Œä¸åœ¨è¿”å›æ›´å¤šçš„å…ƒç´ </li>
<li>returnè¯­å¥åœ¨è¿­ä»£å™¨å—é‡Œé¢æ˜¯éæ³•çš„ï¼Œä½ å¿…é¡»ä½¿ç”¨yield breakä»£æ›¿</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="kt">var</span> <span class="n">enumerable</span> <span class="p">=</span> <span class="n">Foo</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">VARIABLE</span> <span class="k">in</span> <span class="n">enumerable</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">VARIABLE</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">static</span> <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">Foo</span><span class="p">(</span><span class="kt">bool</span> <span class="n">breakEarly</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">yield</span> <span class="k">return</span> <span class="s">&#34;one&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">yield</span> <span class="k">return</span> <span class="s">&#34;two&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">breakEarly</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">yield</span> <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="k">yield</span> <span class="k">return</span> <span class="s">&#34;Three&#34;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span></code></pre></div><h4 id="è¿­ä»£å™¨å’Œtrycatchfinallyå—">è¿­ä»£å™¨å’Œtry/catch/finallyå—</h4>
<ul>
<li>yield return è¯­å¥ä¸å¯ä»¥å‡ºç°åœ¨å«æœ‰catchå­å¥çš„tryé‡Œé¢</li>
<li>yield return ä¹Ÿä¸èƒ½å‡ºç°åœ¨catchæˆ–è€…finallyå—é‡Œé¢</li>
<li>ä½†æ˜¯yield return å¯ä»¥å‡ºç°åœ¨åªå«æœ‰finallyå—çš„tryå—é‡Œé¢</li>
<li>å½“æ¶ˆè´¹è€…çš„æšä¸¾å™¨åˆ°è¾¾åºåˆ—ç»ˆç‚¹æˆ–è¢«disposedçš„æ—¶å€™ï¼Œfinallyå—é‡Œé¢çš„ä»£ç ä¼šè¢«æ‰§è¡Œ</li>
<li>å¦‚æœä½ æå‰è¿›è¡Œäº†breakï¼Œé‚£ä¹ˆforeachè¯­å¥ä¹Ÿä¼šdisposeæ‰æšä¸¾å™¨ï¼Œæ‰€ä»¥ç”¨èµ·æ¥å¾ˆå®‰å…¨</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="kt">var</span> <span class="n">enumerator</span> <span class="p">=</span> <span class="n">Foo</span><span class="p">(</span><span class="k">false</span><span class="p">).</span><span class="n">GetEnumerator</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">enumerator</span><span class="p">.</span><span class="n">MoveNext</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">enumeratorCurrent</span> <span class="p">=</span> <span class="n">enumerator</span><span class="p">.</span><span class="n">Current</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">while</span> <span class="p">(</span><span class="n">enumerator</span><span class="p">.</span><span class="n">MoveNext</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">enumerator</span><span class="p">.</span><span class="n">Current</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">static</span> <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">Foo</span><span class="p">(</span><span class="kt">bool</span> <span class="n">breakEarly</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">yield</span> <span class="k">return</span> <span class="s">&#34;one&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">yield</span> <span class="k">return</span> <span class="s">&#34;two&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">breakEarly</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">yield</span> <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="k">yield</span> <span class="k">return</span> <span class="s">&#34;Three&#34;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span></code></pre></div><p>é€šè¿‡movenextçš„trueæˆ–falseç¡®å®šæ˜¯å¦å¯ä»¥æšä¸¾åˆ°ä¸‹ä¸€ä¸ªï¼Œå¦‚æœå¯ä»¥ï¼Œé€šè¿‡æ‹¿åˆ°currentï¼Œè¿›è€Œæ‹¿åˆ°é‡Œé¢çš„å€¼ï¼Œå¦‚æœç”¨foreachå°±å¯ä»¥å¿½ç•¥ä»€ä¹ˆcurrentï¼Œmovenextæ“ä½œï¼Œå› ä¸ºä»–æ˜¯ä¸€ç§é«˜é˜¶çš„å†™æ³•</p>
<h4 id="å¯ç©ºå€¼ç±»å‹-nullable">å¯ç©ºå€¼ç±»å‹ nullable</h4>
<h4 id="å¯ç©ºç»“æ„ä½“t-struct">å¯ç©ºç»“æ„ä½“<!-- raw HTML omitted --> struct</h4>
<ul>
<li>hasvalue</li>
<li>getvalueordefault() å’Œ getvalueordefault(T defaultvalue)</li>
<li>objecté‡Œé¢å®šä¹‰çš„equalï¼ˆobjectï¼‰å’Œgethashcodeï¼ˆï¼‰è¿™ä¸¤ä¸ªæ–¹æ³•ä¹Ÿè¢«å“åº”çš„é‡å†™äº†ï¼Œé¦–å…ˆä¼šæ¯”è¾ƒhasvalueå±æ€§çš„å€¼ï¼Œå¦‚æœä¸¤ä¸ªè¢«æ¯”è¾ƒå¯¹è±¡çš„hasvalueå±æ€§éƒ½æ˜¯true ï¼Œ é‚£ä¹ˆç„¶åå°±ä¼šæ¯”è¾ƒvalueå±æ€§çš„ç›¸ç­‰æ€§</li>
</ul>
<h4 id="å¯ç©ºç±»å‹çš„è£…ç®±å’Œæ‹†ç®±boxing-and-unboxing-nullable-values">å¯ç©ºç±»å‹çš„è£…ç®±å’Œæ‹†ç®±boxing and unboxing nullable values</h4>
<ul>
<li>å½“Tï¼Ÿè¢«è£…ç®±åï¼Œåœ¨å †å†…å­˜ä¸Šè¢«è£…ç®±çš„å€¼ä¼šåŒ…å«Tï¼Œè€Œä¸æ˜¯Tï¼Ÿ å› ä¸ºè¢«è£…ç®±ä¹‹åçš„å€¼æœ¬èº«å°±æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œè€Œå¼•ç”¨ ç±»å‹æ˜¯å¯ä»¥è¡¨ç¤ºnullå€¼çš„</li>
<li>c#ä¹Ÿå…è®¸å¯¹å¯ç©ºç±»å‹è¿›è¡Œæ‹†ç®±æ“ä½œï¼Œè¿™é‡Œå°±éœ€è¦ä½¿ç”¨asè¿ç®—ç¬¦ã€‚å¦‚æœæ‹†ç®±è½¬æ¢å¤±è´¥ï¼Œé‚£ä¹ˆå¾—åˆ°çš„ç»“æœå°±æ˜¯nullï¼Œä¸ä¼šæŠ›å‡ºå¼‚å¸¸</li>
</ul>
<h4 id="nullå¯¹äºå¯ç©ºå€¼ç±»å‹çš„å®šä¹‰">nullå¯¹äºå¯ç©ºå€¼ç±»å‹çš„å®šä¹‰</h4>
<ul>
<li>nullæœ‰ä¸¤ç§å«ä¹‰
<ul>
<li>nullå¼•ç”¨</li>
<li>å¯ç©ºå€¼ç±»å‹hasvalueä¸ºfalseæ—¶çš„å€¼</li>
</ul>
</li>
<li>ä¸‹é¢è¿™ä¸¤ç§å†™æ³•æ˜¯ç­‰ä»·çš„</li>
</ul>
<h4 id="è¿ç®—ç¬¦æå‡">è¿ç®—ç¬¦æå‡</h4>
<ul>
<li>å°±æ˜¯å¯ä»¥æ¯”è¾ƒä¸¤ä¸ªå¯ç©ºå€¼ç±»å‹çš„&gt;&lt;==</li>
<li>å‰æéƒ½æ˜¯hasvalueä¸ºtrueæ—¶æ‰å¼€å§‹åˆ¤æ–­ï¼Œå¦åˆ™è¿”å›çš„ç»“æœè¦ä¸æ˜¯nullå°±æ˜¯false</li>
</ul>
<h4 id="heading">ï¼Ÿï¼Ÿ</h4>
<p>åœ¨å¯ç©ºå€¼ç±»å‹ä¸Šä½¿ç”¨ï¼Ÿï¼Ÿè¿ç®—ç¬¦ï¼Œå°±ç›¸å½“äºè°ƒç”¨äº†getvalueordefaultæ–¹æ³•ï¼Œå¹¶ä¸”ä¸ºè¿™ä¸ªæ–¹æ³•æä¾›äº†æ˜¾å¼çš„é»˜è®¤å€¼ä½œä¸ºå‚æ•°ã€‚å½“ç„¶ï¼Œæœ‰ä¸€ç‚¹ä¸åŒæ˜¯ï¼šå¦‚æœå˜é‡ä¸æ˜¯nullï¼Œé‚£ä¹ˆé»˜è®¤å€¼é‚£éƒ¨åˆ†çš„è¡¨è¾¾å¼å°±ä¸ä¼šè¢«æ‰§è¡Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"> <span class="kt">int?</span> <span class="n">b</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">a</span> <span class="p">=</span> <span class="n">b</span> <span class="p">??</span> <span class="m">4</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
</span></span></code></pre></div><h4 id="å¯ç©ºç±»å‹å’Œasè¿ç®—ç¬¦">å¯ç©ºç±»å‹å’Œasè¿ç®—ç¬¦</h4>
<p>asè½¬åŒ–ä¸äº†çš„è¯è¿”å›null</p>
<h4 id="æ‰©å±•æ–¹æ³•">æ‰©å±•æ–¹æ³•</h4>
<ul>
<li>æ‰©å±•æ–¹æ³•å…è®¸æˆ‘ä»¬ä½¿ç”¨æ–°çš„æ–¹æ³•æ¥æ‰©å±•ç°æœ‰çš„ç±»å‹ï¼Œè€Œä¸”æ— éœ€ä¿®æ”¹åŸæœ‰çš„ç±»å‹çš„å®šä¹‰</li>
<li>æ‰©å±•æ–¹æ³•æ˜¯é™æ€ç±»çš„ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œåœ¨é™æ€æ–¹æ³•é‡Œçš„ç¬¬ä¸€ä¸ªå‚æ•°ä½¿ç”¨thisä¿®é¥°ç¬¦ï¼Œç¬¬ä¸€ä¸ªå‚æ•°çš„ç±»å‹å°±æ˜¯è¦è¢«æ‰©å±•çš„ç±»å‹</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"> <span class="k">static</span> <span class="k">class</span> <span class="nc">StringHelper</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="n">IsCapitalized</span><span class="p">(</span><span class="k">this</span> <span class="kt">string</span> <span class="n">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="kt">string</span><span class="p">.</span><span class="n">IsNullOrEmpty</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kt">char</span><span class="p">.</span><span class="n">IsUpper</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="m">0</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="kt">string</span> <span class="n">stra</span> <span class="p">=</span> <span class="s">&#34;Ok&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">isCapitalized</span> <span class="p">=</span> <span class="n">stra</span><span class="p">.</span><span class="n">IsCapitalized</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">isCapitalized</span><span class="p">);</span>
</span></span></code></pre></div><h4 id="æ¥å£ä¹Ÿå¯ä»¥è¢«æ‰©å±•">æ¥å£ä¹Ÿå¯ä»¥è¢«æ‰©å±•</h4>
<h4 id="æ‰©å±•æ–¹æ³•é“¾">æ‰©å±•æ–¹æ³•é“¾</h4>
<ul>
<li>æ‰©å±•æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•ä¸€æ ·ï¼Œä¹Ÿæä¾›äº†ä¸€ç§æ•´æ´çš„æ–¹å¼æ¥è¿›è¡Œé“¾å¼è°ƒç”¨
<ul>
<li>å‰ææ˜¯ä»–ä»¬è¿”å›å€¼ç±»å‹å’Œå¦ä¸€ä¸ªçš„ä¼ å…¥å‚æ•°çš„ç±»å‹æ˜¯ä¸€è‡´çš„</li>
</ul>
</li>
</ul>
<h4 id="æ­§ä¹‰å’Œè§£æ--å‘½åç©ºé—´">æ­§ä¹‰å’Œè§£æ  å‘½åç©ºé—´</h4>
<ul>
<li>åªæœ‰æ‰€åœ¨ç±»å¤„äºä½œç”¨èŒƒå›´å†…çš„æ‰©å±•æ–¹æ³•æ‰å¯ä»¥è¢«è®¿é—®ï¼Œ å…¸å‹çš„åšæ³•æ˜¯å¼•å…¥å‘½åç©ºé—´</li>
<li>å¦‚æœè¿™é‡Œä¸å¼•å…¥ï¼Œç¼–è¯‘æ—¶å°±ä¼šæŠ¥é”™</li>
</ul>
<h4 id="æ­§ä¹‰å’Œè§£æ--æ‰©å±•æ–¹æ³•vså®ä¾‹æ–¹æ³•">æ­§ä¹‰å’Œè§£æ  æ‰©å±•æ–¹æ³•vså®ä¾‹æ–¹æ³•</h4>
<ul>
<li>å…¼å®¹çš„å®ä¾‹æ–¹æ³•çš„ä¼˜å…ˆçº§æ€»æ˜¯é«˜äºæ‰©å±•æ–¹æ³•çš„</li>
<li>è¿™ç§æƒ…å†µä¸‹ï¼Œå”¯ä¸€èƒ½è°ƒç”¨æ‰©å±•æ–¹æ³•çš„å¿ƒäº‹å°±æ˜¯ä½¿ç”¨é™æ€è°ƒç”¨çš„è¯­æ³•ï¼Œä¹Ÿå°±æ˜¯ç±»å.æ–¹æ³•</li>
</ul>
<h4 id="æ­§ä¹‰å’Œè§£æ--æ‰©å±•æ–¹æ³•vsæ‰©å±•æ–¹æ³•">æ­§ä¹‰å’Œè§£æ  æ‰©å±•æ–¹æ³•vsæ‰©å±•æ–¹æ³•</h4>
<ul>
<li>å¦‚æœä¸¤ä¸ªæ‰©å±•æ–¹æ³•æ‹¥æœ‰ç›¸åŒçš„ç­¾åï¼Œé‚£ä¹ˆæ‰©å±•æ–¹æ³•å¿…é¡»åƒå¸¸è§„é™æ€æ–¹æ³•é‚£æ ·è°ƒç”¨ä»¥é¿å…æ­§ä¹‰ï¼Œè€Œå¦‚æœå…¶ä¸­ä¸€ä¸ªæ‰©å±•æ–¹æ³•çš„å‚æ•°ç±»å‹æ›´å…·ä½“ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•çš„ä¼˜å…ˆçº§å°±ä¼šæ›´é«˜</li>
<li>æ³¨æ„ï¼šç±»å’Œç»“æ„ä½“è¢«è®¤ä¸ºæ¯”æ¥å£æ›´åŠ å…·ä½“</li>
</ul>
<h4 id="ä»€ä¹ˆæ˜¯åŒ¿åç±»å‹">ä»€ä¹ˆæ˜¯åŒ¿åç±»å‹</h4>
<ul>
<li>åŒ¿åç±»å‹å°±æ˜¯ç”±ç¼–è¯‘å™¨åŠæ—¶åˆ›å»ºçš„ä¸€ä¸ªclass ï¼Œ å®ƒç”¨æ¥å­˜å‚¨ä¸€ç»„æ•°æ®</li>
<li>åˆ›å»ºåŒ¿åç±»å‹ï¼šnew + object åˆå§‹åŒ–å™¨ï¼Œå¹¶æŒ‡å®šå±æ€§åŠå…¶å€¼</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">      <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">string</span> <span class="n">name</span> <span class="p">=</span> <span class="s">&#34;ljs&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">age</span> <span class="p">=</span> <span class="m">23</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kt">string</span> <span class="n">school</span> <span class="p">=</span> <span class="s">&#34;hfut&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">foo</span> <span class="p">=</span> <span class="k">new</span> <span class="p">{</span><span class="n">name</span> <span class="p">,</span> <span class="n">age</span> <span class="p">,</span> <span class="n">school</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">foo</span><span class="p">.</span><span class="n">name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><ul>
<li>ä½¿ç”¨varå…³é”®å­—æ¥å¼•ç”¨åŒ¿åç±»ï¼Œå› ä¸ºåŒ¿åç±»å‹æ²¡æœ‰åå­—</li>
<li>åŒ¿åç±»å‹çš„åç§°å¯ä»¥é€šè¿‡æœ¬èº«å°±æ˜¯æ ‡è¯†ç¬¦/ä»¥æ ‡è¯†ç¬¦ç»“å°¾çš„è¡¨è¾¾å¼æ¨æ–­å‡ºæ¥</li>
<li>åœ¨åŒä¸€ä¸ªassemblyä¸‹å£°æ˜çš„ä¸¤ä¸ªåŒ¿åç±»å®ä¾‹ï¼Œå¦‚æœä»–ä»¬çš„å…ƒç´ åå’Œç±»å‹éƒ½å®Œå…¨ä¸€è‡´ï¼Œé‚£ä¹ˆä»–ä»¬çš„åŸºç¡€ç±»å‹underlying type å°±æ˜¯ä¸€æ ·çš„</li>
<li>equalsæ–¹æ³•è¢«é‡å†™æ¥è¿›è¡Œç›¸ç­‰æ€§æ¯”è¾ƒ  æ¯”è¾ƒå€¼æ˜¯å¦ç›¸ç­‰</li>
<li>å¯ä»¥åˆ›å»ºåŒ¿åç±»å‹æ•°ç»„</li>
<li>æ–¹æ³•ä¸å¯ä»¥è¿”å›åŒ¿åç±»å‹çš„å¯¹è±¡ï¼Œå¿…é¡»ä½¿ç”¨dynamicæˆ–è€…object ï¼Œè°ƒç”¨æ—¶ä¾èµ–åŠ¨æ€ç»‘å®šï¼Œå¹¶ä¸”ä¼šæŸå¤±é™æ€ç±»å‹çš„å®‰å…¨æ€§</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">         <span class="kt">dynamic</span> <span class="n">foo1</span> <span class="p">=</span> <span class="k">new</span><span class="p">[]</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">new</span> <span class="p">{</span><span class="n">Name</span> <span class="p">=</span> <span class="s">&#34;ljs&#34;</span> <span class="p">,</span> <span class="n">Age</span> <span class="p">=</span> <span class="m">23</span>  <span class="p">}</span> <span class="p">,</span> 
</span></span><span class="line"><span class="cl">                <span class="k">new</span> <span class="p">{</span><span class="n">Name</span> <span class="p">=</span> <span class="s">&#34;jwt&#34;</span> <span class="p">,</span> <span class="n">Age</span> <span class="p">=</span> <span class="m">23</span><span class="p">}</span> <span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">};</span>
</span></span></code></pre></div><ul>
<li>åŒ¿åç±»å‹ä¸»è¦ç”¨æ¥å†™linqæŸ¥è¯¢</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">foo1</span> <span class="p">=</span> <span class="k">new</span><span class="p">[]</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">new</span> <span class="p">{</span><span class="n">Name</span> <span class="p">=</span> <span class="s">&#34;ljs&#34;</span> <span class="p">,</span> <span class="n">Age</span> <span class="p">=</span> <span class="m">23</span>  <span class="p">}</span> <span class="p">,</span> 
</span></span><span class="line"><span class="cl">                <span class="k">new</span> <span class="p">{</span><span class="n">Name</span> <span class="p">=</span> <span class="s">&#34;jwt&#34;</span> <span class="p">,</span> <span class="n">Age</span> <span class="p">=</span> <span class="m">23</span><span class="p">}</span> <span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">};</span>
</span></span><span class="line"><span class="cl">            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">VARIABLE</span> <span class="k">in</span> <span class="n">foo1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">VARIABLE</span><span class="p">.</span><span class="n">Name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span></code></pre></div><h4 id="tupleçš„æ„ä¹‰">Tupleçš„æ„ä¹‰</h4>
<ul>
<li>tupleæä¾›äº†ç®€å•çš„æ–¹å¼æ¥å­˜å‚¨ä¸€ç»„æ•°æ®</li>
<li>ä½¿ç”¨tupleçš„ä¸»è¦ç›®çš„æ˜¯ä»æ–¹æ³•å®‰å…¨çš„è¿”å›å¤šä¸ªå€¼ï¼Œè€Œä¸”æ— åºä½¿ç”¨outå‚æ•°</li>
<li>c# 7 çš„tupleä¸»è¦ä¾èµ–äºä¸€ç»„æ”¯æ’‘ä»–çš„struct</li>
</ul>
<h4 id="åˆ›å»ºtuple">åˆ›å»ºtuple</h4>
<ul>
<li>åˆ›å»ºtupleå­—é¢å€¼æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯åœ¨å°æ‹¬å·é‡Œåˆ—å‡ºæ‰€æœ‰çš„å€¼</li>
<li>é€šè¿‡xx.item1å’Œxx.item2æ¥å¼•ç”¨tupleé‡Œé¢çš„æœªå‘½åå…ƒç´ </li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">tuple</span> <span class="p">=</span> <span class="p">(</span><span class="s">&#34;ljs&#34;</span><span class="p">,</span> <span class="m">20</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">tuple</span><span class="p">.</span><span class="n">Item1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">tuple1</span> <span class="p">=</span> <span class="n">tuple</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">tuple1</span><span class="p">.</span><span class="n">Item1</span> <span class="p">=</span> <span class="s">&#34;sbjwt&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">tuple</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">tuple1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><ul>
<li>tupleæ˜¯å€¼ç±»å‹ï¼Œ å…¶å…ƒç´ æ˜¯å¯å˜çš„å¯è¯»å†™</li>
<li>ä½ å¯ä»¥æ˜ç¡®çš„æŒ‡å®štupleçš„ç±»å‹
<ul>
<li>åªéœ€è¦åœ¨å°æ‹¬å·é‡Œé¢åˆ—å‡ºæ¯ä¸ªå…ƒç´ çš„ç±»å‹å³å¯</li>
</ul>
</li>
<li>å¯ä»¥ä»æ–¹æ³•é‡Œè¿”å›tupleç±»å‹</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">tuple</span> <span class="p">=</span> <span class="p">(</span><span class="s">&#34;ljs&#34;</span><span class="p">,</span> <span class="m">20</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">tuple</span><span class="p">.</span><span class="n">Item1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">tuple1</span> <span class="p">=</span> <span class="n">tuple</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">tuple1</span><span class="p">.</span><span class="n">Item1</span> <span class="p">=</span> <span class="s">&#34;sbjwt&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">tuple</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">tuple1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">string</span><span class="p">)</span> <span class="n">tuple2</span> <span class="p">=</span> <span class="p">(</span><span class="m">23</span><span class="p">,</span> <span class="s">&#34;hfut&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">CWtupleByDelegate</span><span class="p">(</span><span class="m">23</span><span class="p">,</span><span class="s">&#34;hfut&#34;</span><span class="p">,</span><span class="n">sum</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">void</span> <span class="n">CWtupleByDelegate</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span> <span class="p">,</span> <span class="kt">string</span> <span class="n">b</span> <span class="p">,</span> <span class="n">Action</span><span class="p">&lt;</span><span class="kt">int</span> <span class="p">,</span><span class="kt">string</span> <span class="p">&gt;</span> <span class="n">func</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">func</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">CWtupleByDelegate1</span><span class="p">(</span><span class="k">new</span> <span class="n">Tuple</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;(</span><span class="m">23</span><span class="p">,</span><span class="s">&#34;htuf&#34;</span><span class="p">),</span> <span class="n">sumTuple</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">void</span> <span class="n">CWtupleByDelegate1</span><span class="p">(</span><span class="n">Tuple</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">aTuple</span> <span class="p">,</span> <span class="n">Action</span><span class="p">&lt;</span><span class="n">Tuple</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="kt">string</span><span class="p">&gt;&gt;</span> <span class="n">func</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">func</span><span class="p">(</span><span class="n">aTuple</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">sum</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">string</span> <span class="n">b</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">a</span> <span class="p">+</span> <span class="n">b</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">sumTuple</span><span class="p">(</span><span class="n">Tuple</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;</span> <span class="n">tuple</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">tuple</span><span class="p">.</span><span class="n">Item1</span><span class="p">+</span><span class="n">tuple</span><span class="p">.</span><span class="n">Item2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><ul>
<li>
<p>tupleå¯ä»¥å’Œæ³›å‹å¾ˆå¥½çš„å…±å­˜</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">        <span class="n">Task</span><span class="p">&lt;(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">int</span><span class="p">)&gt;</span> <span class="n">a</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">Dictionary</span><span class="p">&lt;(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">int</span><span class="p">),</span><span class="kt">bool</span><span class="p">&gt;</span> <span class="n">b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">IEnumerable</span><span class="p">&lt;(</span><span class="kt">int</span> <span class="n">id</span><span class="p">,</span> <span class="kt">string</span> <span class="n">name</span><span class="p">)&gt;</span> <span class="n">c</span><span class="p">;</span> 
</span></span></code></pre></div></li>
</ul>
<h4 id="ç»™tupleå…ƒç´ å‘½å">ç»™tupleå…ƒç´ å‘½å</h4>
<ul>
<li>åœ¨åˆ›å»ºtupleå­—é¢å€¼çš„æ—¶å€™ï¼Œä½ å¯ä»¥ç»™å…ƒç´ èµ·ä¸€ä¸ªæœ‰æ„ä¹‰çš„åå­—</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">t1</span> <span class="p">=</span> <span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="s">&#34;ljs&#34;</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="m">23</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">t1</span><span class="p">.</span><span class="n">name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">t1</span><span class="p">.</span><span class="n">age</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="kt">string</span> <span class="n">Name</span><span class="p">,</span> <span class="kt">int</span> <span class="n">Age</span><span class="p">)</span> <span class="n">t2</span> <span class="p">=</span> <span class="p">(</span><span class="s">&#34;jwt&#34;</span><span class="p">,</span> <span class="m">12</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">t2</span><span class="p">.</span><span class="n">Name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">t2</span><span class="p">.</span><span class="n">Age</span><span class="p">);</span>
</span></span></code></pre></div><ul>
<li>åœ¨æŒ‡å®štupleç±»å‹çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥ç»™å…ƒç´ èµ·å</li>
<li>ä»ç„¶å¯ä»¥é€šè¿‡item1ï¼Œitemæ¥å¼•ç”¨å…ƒç´ </li>
<li>å¦‚æœä¸¤ä¸ªtupleå…ƒç´ ç±»å‹ã€é¡ºåºéƒ½ä¸€ç›´ï¼Œé‚£ä¹ˆä¸¤ä¸ªtupleçš„ç±»å‹å°±æ˜¯å…¼å®¹çš„</li>
</ul>
<h4 id="valuetuplecreate">valuetuple.create</h4>
<ul>
<li>å¯ä»¥ä½¿ç”¨valueTuple(éæ³›å‹)ç±»å‹ä¸Šçš„å·¥å‚æ–¹æ³•æ¥åˆ›å»ºtuple</li>
<li>å‘½åå…ƒç´ ä¸å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼åˆ›å»ºï¼Œå› ä¸ºå…ƒç´ å‘½åä¾èµ–äºç¼–è¯‘å™¨çš„ä¸€äº›éªšæ“ä½œ</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">valueTuple</span> <span class="p">=</span> <span class="n">ValueTuple</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="s">&#34;Bob&#34;</span><span class="p">,</span><span class="m">23</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="kt">string</span><span class="p">,</span><span class="kt">int</span><span class="p">)</span> <span class="n">bobTuple</span> <span class="p">=</span> <span class="n">ValueTuple</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="s">&#34;Bob&#34;</span><span class="p">,</span><span class="m">23</span><span class="p">);</span>
</span></span></code></pre></div><h4 id="deconstructing-tuples">Deconstructing Tuples</h4>
<ul>
<li>tupleéšå¼çš„æ”¯æŒdeconstructingæ¨¡å¼ï¼Œä½ å¯ä»¥å¾ˆç®€å•çš„å°†tuple deconstructä¸ºå¤šä¸ªå˜é‡</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="kt">var</span> <span class="n">valueTuple</span> <span class="p">=</span> <span class="n">ValueTuple</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="s">&#34;Bob&#34;</span><span class="p">,</span><span class="m">23</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">int</span><span class="p">)</span> <span class="n">bobTuple</span> <span class="p">=</span> <span class="n">ValueTuple</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="s">&#34;Bob&#34;</span><span class="p">,</span> <span class="m">23</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="kt">string</span> <span class="n">name</span><span class="p">,</span> <span class="kt">int</span> <span class="n">age</span><span class="p">)</span> <span class="p">=</span> <span class="n">valueTuple</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="kt">string</span> <span class="n">name1</span><span class="p">,</span> <span class="kt">int</span> <span class="n">age1</span><span class="p">)</span> <span class="p">=</span> <span class="p">(</span><span class="s">&#34;Bob&#34;</span><span class="p">,</span> <span class="m">23</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">age</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">name1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">age1</span><span class="p">);</span>
</span></span></code></pre></div><h4 id="ç›¸ç­‰æ€§æ¯”è¾ƒ">ç›¸ç­‰æ€§æ¯”è¾ƒ</h4>
<ul>
<li>valuetuple&lt;&gt;ä¹Ÿé‡å†™äº†equalsæ–¹æ³•ï¼Œè®©æ¯”è¾ƒæ›´æœ‰æ„ä¹‰</li>
<li>é€šè¿‡ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œtupleå¯ä»¥ä½œä¸ºdictionaryçš„key</li>
<li>tupleä¹Ÿå®ç°äº†icomparableæ¥å£ï¼Œæ‰€ä»¥tupleä¹Ÿå¯ä»¥ä½œä¸ºæ’åºçš„key</li>
</ul>
<h4 id="attribute">Attribute</h4>
<ul>
<li>attributeæ˜¯ä¸€ç§æ‰©å±•æœºåˆ¶ï¼Œä»–å¯ä»¥ä¸ºä»£ç å…ƒç´ æ·»åŠ è‡ªå®šä¹‰çš„ä¿¡æ¯
<ul>
<li>assembly ï¼Œç±»å‹ã€æˆå‘˜ã€è¿”å›å€¼ã€å‚æ•°ã€æ³›å‹å‚æ•°</li>
</ul>
</li>
<li>ä¸€ä¸ªå¾ˆå¥½çš„åº”ç”¨åœºæ™¯å°±æ˜¯åºåˆ—åŒ–
<ul>
<li>æŠŠä»»æ„ä¸€ä¸ªå¯¹è±¡è½¬åŒ–ä¸ºç‰¹å®šæ ¼å¼/ä»ç‰¹å®šæ ¼å¼è½¬åŒ–è¿‡æ¥</li>
</ul>
</li>
</ul>
<h4 id="attribute-class">Attribute Class</h4>
<ul>
<li>ä¸€ä¸ªattributeæ˜¯é€šè¿‡ä¸€ä¸ªç»§æ‰¿äº†system.attributeçš„ç±»æ¥å®šä¹‰çš„</li>
<li>å¥½åƒå°±æ˜¯æ³¨è§£ ï¼Œåº”ç”¨äºä»£ç å…ƒç´ </li>
<li>æŒ‰çº¦å®šï¼Œæ‰€æœ‰çš„attributeéƒ½åº”è¯¥ä»¥attributeéƒ½åº”è¯¥ä»¥attributeè¿™ä¸ªå•è¯ç»“å°¾ï¼Œä½†æ˜¯c#ä¼šè¯†åˆ«è¿™ä¸ªåç¼€ï¼Œå¹¶ä¸”å…è®¸ä½ é™„åŠ attributeçš„æ—¶å€™å¿½ç•¥è¿™ä¸ªåç¼€</li>
</ul>
<h4 id="å‘½åå’Œä½ç½®attributeå‚æ•°">å‘½åå’Œä½ç½®attributeå‚æ•°</h4>
<ul>
<li>attrubuteå¯ä»¥æœ‰å‚æ•°</li>
<li>attributeçš„å‚æ•°å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šä½ç½®çš„å’Œå‘½åçš„
<ul>
<li>ä½ç½®å‚æ•°å¯¹åº”attributeç±»å‹çš„å…¬å…±æ„é€ å‡½æ•°çš„å‚æ•°</li>
<li>å‘½åå‚æ•°å¯¹åº”attributeç±»å‹çš„å…¬å…±å­—æ®µæˆ–å…¬å…±å±æ€§</li>
</ul>
</li>
<li>å½“æŒ‡å®šattributeçš„æ—¶å€™ï¼Œå¿…é¡»åŒ…å«ä¸attributeç›¸åº”æ„é€ å‡½æ•°æ‰€å¯¹åº”çš„ä½ç½®å‚æ•°ï¼Œè€Œå‘½åå‚æ•°æ˜¯å¯é€‰çš„</li>
</ul>
<h4 id="attributeçš„ç›®æ ‡">Attributeçš„ç›®æ ‡</h4>
<ul>
<li>æ²¡æœ‰æ˜ç¡®æŒ‡å®šçš„æƒ…å†µä¸‹ï¼Œattributeçš„ç›®æ ‡å°±æ˜¯ç´§éšä»–çš„ä»£ç å…ƒç´ ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªç±»å‹æˆ–ç±»å‹çš„æˆå‘˜</li>
<li>ä¹Ÿå¯ä»¥æŠŠattributeé™„åŠ åˆ°ä¸€ä¸ªassemblyï¼Œè¿™å°±éœ€è¦æ˜¾å¼æŒ‡å®šattributeçš„ç›®æ ‡</li>
</ul>
<h4 id="æŒ‡å®šå¤šä¸ªattribute">æŒ‡å®šå¤šä¸ªattribute</h4>
<ul>
<li>å¯¹ä¸€ä¸ªä»£ç å…ƒç´ å¯ä»¥æŒ‡å®šå¤šä¸ªattributeã€‚æ¯ä¸ªattributeå¯ä»¥åˆ—åœ¨åŒä¸€ä¸ªä¸­æ‹¬å·å†…ï¼ˆä½¿ç”¨é€—å·åˆ†å¼€ï¼‰ ï¼Œ ä¹Ÿå¯ä»¥ç‹¬å ä¸€ä¸ªä¸­æ‹¬å·</li>
</ul>
<h4 id="caller-info-attribute">Caller Info Attribute</h4>
<ul>
<li>ä»c# 5.0å¼€å§‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹åˆ—ä¸‰ä¸ªcaller info attributes ä¹‹ä¸€å¯¹å¯é€‰å‚æ•°è¿›è¡Œæ ‡è®°
<ul>
<li>[callermembername] æ ‡è¯†è°ƒç”¨è€…æˆå‘˜çš„åç§°</li>
<li>[callerfilepath] è¡¨ç¤ºè°ƒç”¨è€…æºä»£ç çš„è·¯å¾„</li>
<li>[callerLineNumber] è¡¨ç¤ºè°ƒç”¨è€…åœ¨æºç æ–‡ä»¶é‡Œé¢çš„è¡Œå·</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Program</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">Foo</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">Foo</span><span class="p">(</span>
</span></span><span class="line"><span class="cl"><span class="na">            [CallerMemberName]</span> <span class="kt">string</span> <span class="n">memberName</span> <span class="p">=</span> <span class="k">null</span> <span class="p">,</span> 
</span></span><span class="line"><span class="cl"><span class="na">            [CallerFilePath]</span> <span class="kt">string</span> <span class="n">filePath</span> <span class="p">=</span> <span class="k">null</span> <span class="p">,</span> 
</span></span><span class="line"><span class="cl"><span class="na">            [CallerLineNumber]</span> <span class="kt">int</span> <span class="n">lineNumber</span> <span class="p">=</span> <span class="m">0</span>  
</span></span><span class="line"><span class="cl">            <span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">memberName</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">filePath</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">lineNumber</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><h4 id="åŠ¨æ€ç»‘å®š-dynamic-binding">åŠ¨æ€ç»‘å®š dynamic binding</h4>
<h4 id="é™æ€ç»‘å®švsåŠ¨æ€ç»‘å®š">é™æ€ç»‘å®švsåŠ¨æ€ç»‘å®š</h4>
<ul>
<li>é™æ€ç»‘å®šï¼šé€šå¸¸æ¥è®²ï¼Œå¼•ç”¨åœ¨ç¼–è¯‘æ—¶å°±å¯ä»¥è§£æå‡ºæ¥</li>
<li>åŠ¨æ€ç»‘å®šï¼šæŠŠè§£æç±»å‹ã€æˆå‘˜ã€æ“ä½œçš„è¿‡ç¨‹ä»ç¼–è¯‘æ—¶å»¶è¿Ÿåˆ°è¿è¡Œæ—¶
<ul>
<li>é€šå¸¸ç”¨äºï¼šä½ çŸ¥é“æŸä¸ªå‡½æ•°ã€æˆå‘˜ã€æ“ä½œå­˜åœ¨ï¼Œä½†æ˜¯ç¼–è¯‘å™¨ä¸çŸ¥é“</li>
</ul>
</li>
</ul>
<h4 id="dynamicç±»å‹">dynamicç±»å‹</h4>
<ul>
<li>dynamicç±»å‹ä½¿ç”¨ä¸Šä¸‹æ–‡å…³é”®å­—dynamicæ¥å£°æ˜</li>
<li>å› ä¸ºdæ˜¯dynamicçš„ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠŠquackæ–¹æ³•ç»‘å®šåˆ°dçš„è¿™ä¸ªåŠ¨ä½œå»¶è¿Ÿåˆ°è¿è¡Œæ—¶</li>
</ul>
<h4 id="é™æ€ç»‘å®š">é™æ€ç»‘å®š</h4>
<ul>
<li>ç¼–è¯‘å™¨åœ¨duckä¸Šå¯»æ‰¾ä¸€ä¸ªåå«quackçš„æ— å‚æ–¹æ³•</li>
<li>å¦åˆ™å°±æ‰©å¤§æœç´¢èŒƒå›´ï¼Œå«æœ‰å¯é€‰å‚æ•°çš„quackæ–¹æ³•</li>
<li>çˆ¶ç±»ä¸Šçš„æ–¹æ³•</li>
<li>æ‰©å±•æ–¹æ³•</li>
</ul>
<h4 id="dynamic">dynamic</h4>
<ul>
<li>dynamicç±»å‹å’Œobjectç±»å‹å¾ˆåƒï¼Œä½†æ˜¯å®ƒå…è®¸ä½ ä½¿ç”¨åœ¨ç¼–è¯‘æ—¶è¿˜ä¸çŸ¥é“çš„æ–¹å¼æ¥æ“ä½œ</li>
<li>dynamicç±»å‹åœ¨è¿è¡Œæ—¶åŸºäºè¿è¡Œæ—¶çš„ç±»å‹è¿›è¡Œç»‘å®šï¼Œè€Œä¸æ˜¯ç¼–è¯‘æ—¶çš„ç±»å‹</li>
<li>åœ¨è¿è¡Œæ—¶ï¼š
<ul>
<li>å¦‚æœdynamicå¯¹è±¡å®ç°äº†idynamicmetaobjectprovider,é‚£ä¹ˆè¯¥æ¥å£å°±ç”¨æ¥æ‰§è¡Œç»‘å®šã€‚è¿™å«åšè‡ªå®šä¹‰ç»‘å®š</li>
<li>å¦åˆ™ï¼Œç»‘å®šå‘ç”Ÿçš„æ–¹å¼å’Œç¼–è¯‘å™¨å·²ç»çŸ¥é“dynamicå¯¹è±¡è¿è¡Œæ—¶ç±»å‹ä¸€æ ·ï¼Œè¿™å«åšè¯­è¨€ç»‘å®š</li>
</ul>
</li>
</ul>
<h4 id="åŠ¨æ€ç»‘å®š">åŠ¨æ€ç»‘å®š</h4>
<ul>
<li>åŠ¨æ€ç»‘å®šç¡®å®è§„é¿äº†é™æ€çš„ç±»å‹æ£€æŸ¥ï¼Œä½†æ˜¯æ²¡æœ‰è§„é¿è¿è¡Œæ—¶çš„ç±»å‹æ£€æŸ¥</li>
<li>ä¸åå°„ä¸ä¸€æ ·ï¼Œä½¿ç”¨åŠ¨æ€ç»‘å®šï¼Œä½ æ— æ³•è§„é¿æˆå‘˜çš„è®¿é—®è§„åˆ™</li>
<li>åŠ¨æ€ç»‘å®šä¹Ÿä¼šå¼•èµ·å¿ƒæ›´èƒ½é—®é¢˜
<ul>
<li>ä½†æ˜¯é‡å¤è°ƒç”¨åŒæ ·çš„åŠ¨æ€è¡¨è¾¾å¼æ˜¯æœ‰ä¼˜åŒ–çš„</li>
</ul>
</li>
</ul>
<h4 id="runtimebinderexception">RunTimeBinderException</h4>
<ul>
<li>å¦‚æœæˆå‘˜æ— æ³•è¿›è¡Œç»‘å®šï¼Œé‚£ä¹ˆå°±ä¼šæŠ›å‡ºruntimebinderException</li>
</ul>
<h4 id="åŠ¨æ€è½¬æ¢">åŠ¨æ€è½¬æ¢</h4>
<ul>
<li>dynamicç±»å‹å¯ä»¥éšå¼çš„ä»å…¶ä»–ç±»å‹è½¬æ¢è¿‡æ¥ï¼Œä¹Ÿå¯ä»¥éšå¼çš„è½¬æ¢åˆ°å…¶ä»–ç±»å‹</li>
</ul>
<h4 id="var--vs--dynamic">var  vs  dynamic</h4>
<ul>
<li>varï¼šè®©ç¼–è¯‘å™¨ç¼–è¯‘æ—¶æ¨æ–­å‡ºç±»å‹</li>
<li>dynamicï¼šè®©è¿è¡Œæ—¶æ¨æ–­å‡ºç±»å‹</li>
</ul>
<h4 id="åŠ¨æ€è¡¨è¾¾å¼">åŠ¨æ€è¡¨è¾¾å¼</h4>
<ul>
<li>å­—æ®µã€å±æ€§ã€æ–¹æ³•ã€äº‹ä»¶ã€æ„é€ å‡½æ•°ã€ç´¢å¼•å™¨ã€è¿ç®—ç¬¦å’Œè½¬æ¢éƒ½å¯ä»¥åŠ¨æ€çš„è°ƒç”¨</li>
<li>ä½¿ç”¨voidè¿”å›ç±»å‹æ¥æ¶ˆè´¹åŠ¨æ€è¡¨è¾¾å¼çš„ç»“æœæ˜¯ä¸å¯ä»¥çš„ï¼Œè¿™ç‚¹å’Œé™æ€çš„è¡¨è¾¾å¼ä¸€æ ·
<ul>
<li>åŒºåˆ«æ˜¯ï¼Œè¿™ä¸ªé”™è¯¯ä¼šå‘ç”Ÿåœ¨è¿è¡Œæ—¶</li>
</ul>
</li>
<li>æ¶‰åŠåŠ¨æ€è¿ç®—å¯¹è±¡çš„è¡¨è¾¾å¼å°±æ˜¯åŠ¨æ€è¡¨è¾¾å¼ï¼Œç¼ºå¤±ç±»å‹ä¿¡æ¯æ˜¯æœ‰çº§è”æ•ˆæœçš„</li>
</ul>
<h4 id="æ— æ³•åŠ¨æ€è°ƒç”¨çš„å‡½æ•°">æ— æ³•åŠ¨æ€è°ƒç”¨çš„å‡½æ•°</h4>
<ul>
<li>æœ‰ä¸€äº›å‡½æ•°ä¸å¯ä»¥è¢«åŠ¨æ€è°ƒç”¨
<ul>
<li>æ‰©å±•æ–¹æ³•</li>
<li>æ¥å£çš„æˆå‘˜</li>
<li>è¢«å­ç±»éšè—çš„åŸºç±»æˆå‘˜</li>
</ul>
</li>
<li>å› ä¸ºåŠ¨æ€ç»‘å®šéœ€è¦ä¸¤æ–¹é¢çš„ä¿¡æ¯
<ul>
<li>è¢«è°ƒç”¨å‡½æ•°çš„åå­—</li>
<li>è°ƒç”¨å‡½æ•°çš„å¯¹è±¡</li>
</ul>
</li>
<li>è¿™ä¸‰ç§æƒ…å†µï¼Œéƒ½éœ€è¦é¢å¤–çš„ç±»å‹ï¼Œå¹¶ä¸”ä»–åªæ˜¯åœ¨ç¼–è¯‘æ—¶çŸ¥æ™“äº†ï¼Œè¿è¡Œæ—¶å°±ä¸¢å¤±äº†</li>
</ul>
<h4 id="è¿ç®—ç¬¦é‡è½½">è¿ç®—ç¬¦é‡è½½</h4>
<ul>
<li>è¿ç®—ç¬¦å¯ä»¥è¢«é‡è½½ï¼Œå¯ä»¥ä¸ºè‡ªå®šä¹‰ç±»å‹æä¾›æ›´è‡ªç„¶çš„è¯­æ³•</li>
<li>ä½¿ç”¨implict explicit å…³é”®å­— éšå¼/æ˜¾å¼è½¬æ¢</li>
</ul>
<h4 id="è¿ç®—ç¬¦å‡½æ•°">è¿ç®—ç¬¦å‡½æ•°</h4>
<ul>
<li>é€šè¿‡å£°æ˜è¿ç®—ç¬¦å‡½æ•°ï¼Œå°±å¯ä»¥å¯¹è¿ç®—ç¬¦è¿›è¡Œé‡è½½</li>
<li>è¿ç®—ç¬¦å‡½æ•°æœ‰ä¸€ä¸‹è§„åˆ™
<ul>
<li>å‡½æ•°åï¼šä½¿ç”¨operatorå…³é”®å­—ï¼Œåè¾¹è·Ÿç€è¿ç®—ç¬¦çš„ç¬¦å·</li>
<li>å¿…é¡»æ˜¯staticå’Œpublic</li>
<li>å‡½æ•°çš„å‚æ•°ä»£è¡¨ç€è¿ç®—ç¬¦çš„è¿ç®—æ•°</li>
<li>å‡½æ•°çš„ç»“æœä»£è¡¨è¡¨è¾¾å¼çš„ç»“æœ</li>
<li>è‡³å°‘æœ‰ä¸€ä¸ªè¿ç®—æ•°çš„ç±»å‹å¿…é¡»æ˜¯å‡½æ•°æ‰€å£°æ˜çš„ç±»å‹</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Program</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">var</span> <span class="n">B</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Note</span><span class="p">(</span><span class="m">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="kt">var</span> <span class="n">CShrap</span> <span class="p">=</span> <span class="n">B</span> <span class="p">+</span> <span class="m">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">CShrap</span><span class="p">.</span><span class="k">value</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">struct</span> <span class="nc">Note</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="kt">int</span> <span class="k">value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="n">Note</span><span class="p">(</span><span class="kt">int</span> <span class="n">semitonesFormA</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">value</span> <span class="p">=</span> <span class="n">semitonesFormA</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="k">static</span> <span class="n">Note</span> <span class="k">operator</span> <span class="p">+(</span><span class="n">Note</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">semitones</span><span class="p">)=&gt;</span><span class="k">new</span> <span class="n">Note</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="k">value</span><span class="p">+</span><span class="n">semitones</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h4 id="é‡è½½ç›¸ç­‰æ€§å’Œæ¯”è¾ƒè¿ç®—ç¬¦">é‡è½½ç›¸ç­‰æ€§å’Œæ¯”è¾ƒè¿ç®—ç¬¦</h4>
<ul>
<li>é‡è½½ç›¸ç­‰æ€§å’Œæ¯”è¾ƒè¿ç®—ç¬¦çš„æ—¶å€™æœ‰ä¸€äº›è§„åˆ™
<ul>
<li>æˆå¯¹é‡è½½</li>
<li>equalså’Œgethashcode
<ul>
<li>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¦‚æœä½ é‡è½½äº†ï¼=å’Œ== ï¼Œ ä½ é€šå¸¸éœ€è¦é‡è½½equalså’Œgethashcodeè¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œè¿™æ ·æ‰èƒ½å¾—åˆ°æ¯”è¾ƒæœ‰æ„ä¹‰çš„è¡Œä¸º</li>
<li>å¦‚æœä½ ä¸è¿™æ ·åšï¼Œä¼šç»™ä¸€ä¸ªè­¦å‘Š</li>
</ul>
</li>
<li>icomparableå’Œicomparable<!-- raw HTML omitted -->
<ul>
<li>å¦‚æœä½ é‡è½½äº†&lt;&gt;å’Œ&lt;= &gt;=è¿ç®—ç¬¦ï¼Œé‚£ä¹ˆä½ å°±åº”è¯¥äº‹å…ˆicomparableå’Œicomparable<!-- raw HTML omitted -->è¿™ä¸¤ä¸ªæ¥å£</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="è‡ªå®šä¹‰éšå¼å’Œæ˜¾å¼è½¬æ¢">è‡ªå®šä¹‰éšå¼å’Œæ˜¾å¼è½¬æ¢</h4>
<ul>
<li>éšå¼å’Œæ˜¾ç¤ºè½¬æ¢æ˜¯å¯é‡è½½çš„è¿ç®—ç¬¦</li>
<li>è‡ªå®šä¹‰è½¬æ¢ä¼šè¢«aså’Œisè¿ç®—ç¬¦å¿½ç•¥</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Program</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">var</span> <span class="n">B</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Note</span><span class="p">(</span><span class="m">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="kt">var</span> <span class="n">CShrap</span> <span class="p">=</span> <span class="n">B</span> <span class="p">+</span> <span class="m">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">CShrap</span><span class="p">.</span><span class="k">value</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kt">var</span> <span class="n">cShrap</span> <span class="p">=</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="n">CShrap</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">cShrap</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">a</span> <span class="p">=</span> <span class="m">4</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">note</span> <span class="p">=</span> <span class="p">(</span><span class="n">Note</span><span class="p">)</span><span class="n">a</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">note</span><span class="p">.</span><span class="k">value</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">struct</span> <span class="nc">Note</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="kt">int</span> <span class="k">value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="n">Note</span><span class="p">(</span><span class="kt">int</span> <span class="n">semitonesFormA</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">value</span> <span class="p">=</span> <span class="n">semitonesFormA</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="k">static</span> <span class="n">Note</span> <span class="k">operator</span> <span class="p">+(</span><span class="n">Note</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">semitones</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="n">Note</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="k">value</span> <span class="p">+</span> <span class="n">semitones</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="k">static</span> <span class="k">implicit</span> <span class="k">operator</span> <span class="kt">double</span><span class="p">(</span><span class="n">Note</span> <span class="n">x</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="k">value</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="k">static</span> <span class="k">explicit</span> <span class="k">operator</span> <span class="n">Note</span> <span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">)=&gt;</span><span class="k">new</span> <span class="n">Note</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h4 id="é‡è½½trueå’Œfalse">é‡è½½trueå’Œfalse</h4>
<p>ä¸å®‰å…¨ä»£ç </p>
<p>fixedè¯­å¥</p>
<h3 id="ç¬¬å…­ç« -å¼‚æ­¥ç¼–ç¨‹">ç¬¬å…­ç«  å¼‚æ­¥ç¼–ç¨‹</h3>
<h4 id="ä»€ä¹ˆæ˜¯çº¿ç¨‹-thread">ä»€ä¹ˆæ˜¯çº¿ç¨‹ thread</h4>
<ul>
<li>çº¿ç¨‹æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œè·¯å¾„ï¼Œä»–å¯ä»¥ç‹¬ç«‹äºå…¶ä»–çº¿ç¨‹æ‰§è¡Œ</li>
<li>æ¯ä¸ªçº¿ç¨‹éƒ½åœ¨æ“ä½œç³»ç»Ÿçš„è¿›ç¨‹processå†…æ‰§è¡Œï¼Œè€Œæ“ä½œç³»ç»Ÿè¿›ç¨‹æä¾›äº†ç¨‹åºè¿è¡Œçš„ç‹¬ç«‹ç¯å¢ƒ</li>
<li>å•çº¿ç¨‹åº”ç”¨ï¼Œåœ¨è¿›ç¨‹çš„ç‹¬ç«‹ç¯å¢ƒé‡Œåªè·‘ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€ä»¥è¯¥çº¿ç¨‹æ‹¥æœ‰ç‹¬å æƒ</li>
<li>å¤šçº¿ç¨‹åº”ç”¨ï¼Œ å•ä¸ªè¿›ç¨‹ä¸­ä¼šè·‘å¤šä¸ªçº¿ç¨‹ï¼Œå®ƒä»¬ä¼šå…±äº«å½“å‰çš„æ‰§è¡Œç¯å¢ƒï¼ˆå°¤å…¶æ˜¯å†…å­˜ï¼‰
<ul>
<li>ä¾‹å¦‚ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨åå°è¯»å–æ•°æ®ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹åœ¨æ•°æ®åˆ°è¾¾åè¿›è¡Œå±•ç¤º</li>
<li>è¿™ä¸ªæ•°æ®å°±è¢«ç§°ä½œå…±äº«çš„çŠ¶æ€</li>
</ul>
</li>
</ul>
<p>ä¾‹å­</p>
<ul>
<li>åœ¨å•æ ¸è®¡ç®—æœºä¸­ ï¼Œ æ“ä½œç³»ç»Ÿå¿…é¡»ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…â€œæ—¶é—´ç‰‡â€ï¼ˆåœ¨windowsä¸­é€šå¸¸ä¸º20msï¼‰æ¥æ¨¡æ‹Ÿå¹¶å‘ï¼Œä»è€Œå¯¼è‡´é‡å¤çš„xå—å’Œyå—</li>
<li>åœ¨å¤šæ ¸æˆ–å¤šå¤„ç†å™¨è®¡ç®—æœºä¸Šï¼Œè¿™ä¸¤ä¸ªçº¿ç¨‹å¯ä»¥çœŸæ­£åœ°å¹¶è¡Œæ‰§è¡Œï¼ˆå¯èƒ½å—åˆ°è®¡ç®—æœºä¸Šå…¶ä»–æ´»åŠ¨è¿›ç¨‹çš„ç«äº‰ï¼‰
<ul>
<li>åœ¨æœ¬ä¾‹ä¸­ï¼Œç”±äºæ§åˆ¶å°å¤„ç†å¹¶å‘è¯·æ±‚çš„æœºåˆ¶çš„å¾®å¦™æ€§ï¼Œä»ç„¶ä¼šå¾—åˆ°é‡å¤çš„xå—å’Œyå—</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">    <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Thread</span> <span class="n">t</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="p">(</span><span class="n">WriteY</span><span class="p">);</span>      <span class="c1">//å¼€è¾Ÿäº†ä¸€ä¸ªæ–°çš„çº¿ç¨‹ thread</span>
</span></span><span class="line"><span class="cl">        <span class="n">t</span><span class="p">.</span><span class="n">Name</span> <span class="p">=</span> <span class="s">&#34;Y Thread ...&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">t</span><span class="p">.</span><span class="n">Start</span><span class="p">();</span>        <span class="c1">//è¿è¡Œ writeY</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">        <span class="c1">//åŒæ—¶ä¸»çº¿ç¨‹ä¹Ÿåšä¸€äº›å·¥ä½œ</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="m">1000</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&#34;x&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="k">void</span> <span class="n">WriteY</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="m">1000</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&#34;y&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h5 id="æœ¯è¯­çº¿ç¨‹è¢«æŠ¢å äº†">æœ¯è¯­ï¼šçº¿ç¨‹è¢«æŠ¢å äº†</h5>
<ul>
<li>çº¿ç¨‹åœ¨è¿™ä¸ªæ—¶å€™å°±å¯ä»¥ç§°ä¹‹ä¸ºè¢«æŠ¢å äº†ï¼š
<ul>
<li>ä»–çš„æ‰§è¡Œä¸å¦ä¸€ä¸ªçº¿ç¨‹ä¸Šä»£ç çš„æ‰§è¡Œäº¤ç»‡çš„é‚£ä¸€ç‚¹</li>
</ul>
</li>
</ul>
<h5 id="çº¿ç¨‹çš„ä¸€äº›å±æ€§">çº¿ç¨‹çš„ä¸€äº›å±æ€§</h5>
<ul>
<li>ä¸€æ—¦å¼€å§‹æ‰§è¡Œï¼Œisaliveå°±æ˜¯trueï¼Œçº¿ç¨‹ç»“æŸå°±æ˜¯false</li>
<li>çº¿ç¨‹ç»“æŸçš„æ¡ä»¶å°±æ˜¯ï¼šçº¿ç¨‹æ„é€ å‡½æ•°ä¼ å…¥çš„å§”æ‰˜ç»“æŸäº†æ‰§è¡Œ</li>
<li>çº¿ç¨‹ä¸€æ—¦ç»“æŸï¼Œå°±æ— æ³•å†é‡å¯äº†</li>
<li>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸ªnameå±æ€§ï¼Œé€šå¸¸ç”¨äºè°ƒè¯•
<ul>
<li>çº¿ç¨‹nameåªèƒ½è®¾ç½®ä¸€æ¬¡ï¼Œä»¥åæ›´æ”¹å°±ä¼šæŠ›å‡ºå¼‚å¸¸</li>
</ul>
</li>
<li>é™æ€çš„thread.currentthreadå±æ€§ï¼Œä¼šè¿”å›å½“å‰æ‰§è¡Œçš„çº¿ç¨‹</li>
</ul>
<h4 id="join-and-sleep">join and sleep</h4>
<ul>
<li>è°ƒç”¨joinæ–¹æ³•ï¼Œå°±å¯ä»¥ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹ç»“æŸ</li>
<li>ä¾‹å­</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="k">private</span> <span class="k">static</span> <span class="n">Thread</span> <span class="n">thread1</span><span class="p">,</span> <span class="n">thread2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">thread1</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="p">(</span><span class="n">ThreadProc</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">thread1</span><span class="p">.</span><span class="n">Name</span> <span class="p">=</span> <span class="s">&#34;Thread1&#34;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="n">thread1</span><span class="p">.</span><span class="n">Start</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">thread2</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="p">(</span><span class="n">ThreadProc</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">thread2</span><span class="p">.</span><span class="n">Name</span> <span class="p">=</span> <span class="s">&#34;Thread2&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">thread2</span><span class="p">.</span><span class="n">Start</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">private</span> <span class="k">static</span> <span class="k">void</span> <span class="n">ThreadProc</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;\n Current thread :{0}&#34;</span> <span class="p">,</span> <span class="n">Thread</span><span class="p">.</span><span class="n">CurrentThread</span><span class="p">.</span><span class="n">Name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">Thread</span><span class="p">.</span><span class="n">CurrentThread</span><span class="p">.</span><span class="n">Name</span><span class="p">==</span><span class="s">&#34;Thread1&#34;</span><span class="p">&amp;&amp;</span><span class="n">thread2</span><span class="p">.</span><span class="n">ThreadState</span><span class="p">!=</span><span class="n">ThreadState</span><span class="p">.</span><span class="n">Unstarted</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">thread2</span><span class="p">.</span><span class="n">Join</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">4000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;\n current Thread :{0}&#34;</span><span class="p">,</span> <span class="n">Thread</span><span class="p">.</span><span class="n">CurrentThread</span><span class="p">.</span><span class="n">Name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;Thread1: {0}&#34;</span><span class="p">,</span><span class="n">thread1</span><span class="p">.</span><span class="n">ThreadState</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;Thread2: {0}\n&#34;</span><span class="p">,</span><span class="n">thread2</span><span class="p">.</span><span class="n">ThreadState</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><h4 id="æ·»åŠ è¶…æ—¶">æ·»åŠ è¶…æ—¶</h4>
<ul>
<li>è°ƒç”¨joinçš„æ—¶å€™ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªè¶…æ—¶ï¼Œç”¨æ¯«ç§’æˆ–è€…timespanéƒ½å¯ä»¥
<ul>
<li>å¦‚æœè¿”å›trueå°±æ˜¯okäº†ï¼Œå¦‚æœfalseå°±æ˜¯è¶…æ—¶äº†</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="k">static</span> <span class="n">TimeSpan</span> <span class="n">waitTime</span> <span class="p">=</span> <span class="k">new</span> <span class="n">TimeSpan</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">,</span><span class="m">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">newThread</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="p">(</span><span class="n">Work</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">newThread</span><span class="p">.</span><span class="n">Start</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">newThread</span><span class="p">.</span><span class="n">Join</span><span class="p">(</span><span class="n">waitTime</span><span class="p">/</span><span class="m">2</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;New Thread terminated&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;Join timed out&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">Work</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">waitTime</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><ul>
<li>thread.sleep()æ–¹æ³•ä¼šæš‚åœå½“å‰çš„çº¿ç¨‹ï¼Œå¹¶ç­‰å¾…ä¸€æ®µæ—¶é—´</li>
</ul>
<h4 id="æ³¨æ„">æ³¨æ„</h4>
<ul>
<li>thread.sleep(0)è¿™æ ·è°ƒç”¨ä¼šå¯¼è‡´çº¿ç¨‹ç«‹å³æ”¾å¼ƒæœ¬èº«å½“å‰çš„æ—¶é—´ç‰‡ï¼Œè‡ªåŠ¨å°†cupç§»äº¤ç»™å…¶ä»–çº¿ç¨‹</li>
<li>thread.yield()åšåŒæ ·çš„äº‹æƒ…ï¼Œä½†æ˜¯å®ƒåªä¼šæŠŠæ‰§è¡Œäº¤ç»™åŒä¸€ä¸ªå¤„ç†å™¨ä¸Šçš„å…¶ä»–çº¿ç¨‹</li>
<li>å½“ç­‰å¾…sleepæˆ–joinçš„æ—¶å€™ï¼Œçº¿ç¨‹å¤„äºé˜»å¡çŠ¶æ€</li>
</ul>
<h4 id="é˜»å¡">é˜»å¡</h4>
<ul>
<li>å¦‚æœçº¿ç¨‹çš„æ‰§è¡Œç”±äºæŸç§åŸå› å¯¼è‡´æš‚åœï¼Œé‚£ä¹ˆå°±è®¤ä¸ºè¯¥çº¿ç¨‹è¢«é˜»å¡äº†ã€‚
<ul>
<li>ä¾‹å¦‚åœ¨sleepæˆ–è€…é€šè¿‡joinç­‰å¾…å…¶ä»–çº¿ç¨‹ç»“æŸ</li>
</ul>
</li>
<li>è¢«é˜»å¡çš„çº¿ç¨‹ä¼šç«‹å³å°†å…¶å¤„ç†å™¨çš„æ—¶é—´ç‰‡ç”Ÿæˆç»™å…¶ä»–çº¿ç¨‹ ï¼Œä»æ­¤å°±ä¸åœ¨æ¶ˆè€—å¤„ç†å™¨æ—¶é—´ï¼Œç›´åˆ°æ»¡è¶³å…¶é˜»å¡çº¿ç¨‹æ¡ä»¶ä¸ºæ­¢</li>
<li>å¯ä»¥é€šè¿‡threadstateè¿™ä¸ªå±æ€§æ¥åˆ¤æ–­çº¿ç¨‹æ˜¯å¦å¤„äºè¢«é˜»å¡çš„çŠ¶æ€</li>
</ul>
<h4 id="threadstate">threadstate</h4>
<ul>
<li>ä½†æ˜¯å®ƒå¤§éƒ¨åˆ†çš„æšä¸¾å€¼éƒ½æ²¡ä»€ä¹ˆç”¨ï¼Œä¸‹é¢çš„ä»£ç å°†threadstateå‰¥ç¦»æˆå››ä¸ªæœ€æœ‰ç”¨çš„å€¼ä¹‹ä¸€ï¼šunstarted / running / waitsleepingjoin / stopped</li>
</ul>
<h4 id="è§£é™¤é˜»å¡-unblocking">è§£é™¤é˜»å¡ unblocking</h4>
<ul>
<li>å½“é‡åˆ°ä¸‹åˆ—å››ç§æƒ…å†µçš„æ—¶å€™ï¼Œå°±ä¼šè§£é™¤é˜»å¡
<ul>
<li>é˜»å¡æ¡ä»¶è¢«æ»¡è¶³</li>
<li>æ“ä½œè¶…æ—¶ï¼ˆå¦‚æœè®¾ç½®è¶…æ—¶çš„è¯ï¼‰</li>
<li>é€šè¿‡thread.Interrupt()è¿›è¡Œæ‰“æ–­</li>
<li>é€šè¿‡thread.abort()è¿›è¡Œä¸­æ­¢</li>
</ul>
</li>
</ul>
<h4 id="ä¸Šä¸‹æ–‡åˆ‡æ¢">ä¸Šä¸‹æ–‡åˆ‡æ¢</h4>
<ul>
<li>å½“çº¿ç¨‹é˜»å¡æˆ–è§£é™¤é˜»å¡çš„æ—¶ï¼Œæ“ä½œç³»ç»Ÿå°†æ‰§è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚è¿™ä¼šäº§ç”Ÿå°‘é‡å¼€é”€ï¼Œé€šå¸¸ä¸º1-2å¾®å¦™</li>
</ul>
<h4 id="io-bound-å’Œ-compute-bound">i/o-bound å’Œ compute-bound</h4>
<ul>
<li>ä¸€ä¸ªèŠ±è´¹å¤§éƒ¨åˆ†æ—¶é—´ç­‰å¾…æŸäº‹å‘ç”Ÿçš„æ“ä½œæˆä¸ºi/o bound
<ul>
<li>i/oç»‘å®šæ“ä½œé€šå¸¸æ¶‰åŠè¾“å…¥æˆ–è¾“å‡ºï¼Œ ä½†è¿™ä¸æ˜¯ç¡¬æ€§è¦æ±‚ï¼šthread.sleep()ä¹Ÿè¢«è§†ä¸º i /o -bound</li>
</ul>
</li>
<li>ç›¸åï¼Œä¸€ä¸ªèŠ±è´¹å¤§éƒ¨åˆ†æ—¶é—´æ‰§è¡Œcpuå¯†é›†å‹å·¥ä½œçš„æ“ä½œç§°ä¸ºcompute-bound</li>
</ul>
<h4 id="é˜»å¡-vs-å¿™ç­‰å¾…è‡ªæ—‹--blocking-vs-spinning">é˜»å¡ vs å¿™ç­‰å¾…ï¼ˆè‡ªæ—‹ï¼‰  blocking vs spinning</h4>
<ul>
<li>i/o - bound æ“ä½œçš„å·¥ä½œæ–¹å¼æœ‰ä¸¤ç§
<ul>
<li>åœ¨å½“å‰çº¿ç¨‹ä¸ŠåŒæ­¥çš„ç­‰å¾…
<ul>
<li>console.readline() , thread.sleep() , thread.join()</li>
</ul>
</li>
<li>å¼‚æ­¥çš„æ“ä½œï¼Œ åœ¨ç¨åæ“ä½œå®Œæˆæ—¶è§¦å‘ä¸€ä¸ªå›è°ƒåŠ¨ä½œ</li>
</ul>
</li>
<li>åŒæ­¥ç­‰å¾…çš„i/o-bound æ“ä½œå°†å¤§éƒ¨åˆ†æ—¶é—´èŠ±åœ¨é˜»å¡çº¿ç¨‹ä¸Š</li>
</ul>
<h4 id="æœ¬åœ°å’Œå…±äº«çš„çŠ¶æ€">æœ¬åœ°å’Œå…±äº«çš„çŠ¶æ€</h4>
<ul>
<li>localæœ¬åœ°ç‹¬ç«‹
<ul>
<li>clrä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…è‡ªå·±çš„å†…å­˜æ ˆï¼Œä»¥ä¾¿ä½¿æœ¬åœ°å˜é‡ä¿æŒç‹¬ç«‹</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">  <span class="k">new</span> <span class="n">Thread</span><span class="p">(</span><span class="n">Go1</span><span class="p">).</span><span class="n">Start</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">Go1</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">private</span> <span class="k">static</span> <span class="k">void</span> <span class="n">Go1</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">cycle</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">cycle</span> <span class="p">&lt;</span> <span class="m">5</span><span class="p">;</span> <span class="n">cycle</span><span class="p">++)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;?&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><ul>
<li>
<p>shared å…±äº«</p>
<ul>
<li>å¦‚æœå¤šä¸ªçº¿ç¨‹éƒ½å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹ï¼Œé‚£ä¹ˆä»–ä»¬å°±å…±äº«äº†æ•°æ®</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="kt">var</span> <span class="n">threadTest</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ThreadTest</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">var</span> <span class="n">thread</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="p">(</span><span class="n">threadTest</span><span class="p">.</span><span class="n">Go</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">thread</span><span class="p">.</span><span class="n">Name</span> <span class="p">=</span> <span class="s">&#34;new thread&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">thread</span><span class="p">.</span><span class="n">Start</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">Thread</span><span class="p">.</span><span class="n">CurrentThread</span><span class="p">.</span><span class="n">Name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">threadTest</span><span class="p">.</span><span class="n">Go</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">Thread</span><span class="p">.</span><span class="n">CurrentThread</span><span class="p">.</span><span class="n">Name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">public</span> <span class="k">class</span> <span class="nc">ThreadTest</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="kt">bool</span> <span class="n">_done</span><span class="p">=</span><span class="k">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">public</span> <span class="k">void</span> <span class="n">Go</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(!</span><span class="n">_done</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">_done</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;Done&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><ul>
<li>è¢«lambdaè¡¨è¾¾å¼æˆ–åŒ¿åå§”æ‰˜æ‰€æ•è·çš„æœ¬åœ°å˜é‡ï¼Œ ä¼šè¢«ç¼–è¯‘å™¨è½¬åŒ–æˆå­—æ®µfieldï¼Œ æ‰€ä»¥ä¹Ÿä¼šè¢«å…±äº«.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">  <span class="kt">bool</span> <span class="n">done</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//è¿™é‡Œæ˜¯å£°æ˜äº†æ–¹æ³•</span>
</span></span><span class="line"><span class="cl">        <span class="n">ThreadStart</span> <span class="n">action</span> <span class="p">=</span> <span class="p">()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(!</span><span class="n">done</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">done</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;Done&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">};</span>
</span></span><span class="line"><span class="cl">        <span class="k">new</span> <span class="n">Thread</span><span class="p">(</span><span class="n">action</span><span class="p">).</span><span class="n">Start</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">action</span><span class="p">();</span> 
</span></span></code></pre></div><ul>
<li>é™æ€å­—æ®µä¹Ÿä¼šåœ¨çº¿ç¨‹é—´å…±äº«æ•°æ®field</li>
</ul>
</li>
<li>
<p>ä¸Šè¿°æƒ…å†µå°±å¯èƒ½å¯¼è‡´çº¿ç¨‹çš„ä¸å®‰å…¨ï¼šå³å¯èƒ½ç›¸åŒçš„æ“ä½œè¢«æ‰§è¡Œäº†å¤šæ¬¡</p>
</li>
</ul>
<h4 id="çº¿ç¨‹å®‰å…¨-thread-safety">çº¿ç¨‹å®‰å…¨ thread safety</h4>
<ul>
<li>å°½å¯èƒ½é¿å…ä½¿ç”¨å…±äº«çŠ¶æ€</li>
</ul>
<h4 id="é”å®šä¸çº¿ç¨‹å®‰å…¨-ç®€ä»‹-locking--thread-safety">é”å®šä¸çº¿ç¨‹å®‰å…¨ ç®€ä»‹ locking &amp; thread safety</h4>
<ul>
<li>åœ¨è¯»å–å’Œå†™å…¥å…±äº«æ•°æ®çš„æ—¶å€™ï¼Œé€šè¿‡ä½¿ç”¨ä¸€ä¸ªäº’æ–¥é”exclusive lockï¼Œå°±å¯ä»¥ä¿®å¤å‰é¢çš„é—®é¢˜</li>
<li>c# ä½¿ç”¨lockè¯­å¥æ¥åŠ é”</li>
<li>å½“ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶ç«äº‰ä¸€ä¸ªé”çš„æ—¶å€™ï¼ˆé”å¯ä»¥åŸºäºä»»ä½•å¼•ç”¨ç±»å‹å¯¹è±¡ï¼‰ï¼Œä¸€ä¸ªçº¿ç¨‹ä¼šç­‰å¾…æˆ–é˜»å¡ï¼Œç›´åˆ°é”å˜æˆå¯ç”¨çŠ¶æ€</li>
<li>lockä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„é“¶å¼¹ï¼Œ å¾ˆå®¹æ˜“å¿˜è®°å¯¹å­—æ®µåŠ é”ï¼Œlockä¹Ÿä¼šå¼•èµ·ä¸€äº›é—®é¢˜ï¼ˆæ­»é”ï¼‰</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"> <span class="k">class</span> <span class="nc">ThreadSafe</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">private</span> <span class="k">static</span> <span class="kt">bool</span> <span class="n">_done</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">readonly</span>  <span class="kt">object</span> <span class="n">_locker</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">object</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">Thread</span><span class="p">(</span><span class="n">Go</span><span class="p">).</span><span class="n">Start</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">Go</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">Go</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">lock</span> <span class="p">(</span><span class="n">_locker</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(!</span><span class="n">_done</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;done&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">_done</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><h4 id="å‘çº¿ç¨‹ä¼ é€’æ•°æ®">å‘çº¿ç¨‹ä¼ é€’æ•°æ®</h4>
<ul>
<li>å¦‚æœä½ æƒ³å¾€çº¿ç¨‹çš„å¯åŠ¨æ–¹æ³•é‡Œä¼ é€’æ•°æ®ï¼Œæœ€ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨lambdaè¡¨è¾¾å¼ï¼Œåœ¨é‡Œé¢ä½¿ç”¨å‚æ•°è°ƒç”¨æ–¹æ³•</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">   <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">new</span> <span class="n">Thread</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="n">Print</span><span class="p">(</span><span class="s">&#34;hello asyncprogramming&#34;</span><span class="p">)).</span><span class="n">Start</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">Print</span><span class="p">(</span><span class="s">&#34;hello ljs&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="k">void</span> <span class="n">Print</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><ul>
<li>ç”šè‡³å¯ä»¥æŠŠæ•´ä¸ªé€»è¾‘éƒ½æ”¾åœ¨lambdaé‡Œ</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// new Thread(() =&gt; Print(&#34;hello asyncprogramming&#34;)).Start();</span>
</span></span><span class="line"><span class="cl">            <span class="p">//</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Print(&#34;hello ljs&#34;);</span>
</span></span><span class="line"><span class="cl"><span class="k">new</span> <span class="n">Thread</span><span class="p">(()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;i am a good man&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">o</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">object</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">o</span> <span class="p">=</span> <span class="s">&#34;i am a good man&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">switch</span> <span class="p">(</span><span class="n">o</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">case</span> <span class="kt">string</span> <span class="n">s</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;yoo this is a string&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">case</span> <span class="kt">int</span> <span class="n">i</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;yoo ! this is an int&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;yoo i don&#39;t know &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}).</span><span class="n">Start</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;this is main thread&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><h4 id="å¼‚å¸¸å¤„ç†">å¼‚å¸¸å¤„ç†</h4>
<ul>
<li>åˆ›å»ºçº¿ç¨‹æ—¶åœ¨ä½œç”¨èŒƒå›´å†…çš„try/catch/finallyå—ï¼Œåœ¨çº¿ç¨‹å¼€å§‹æ‰§è¡Œåå°±ä¸çº¿ç¨‹æ— å…³äº†
<ul>
<li>è§£å†³æ–¹æ¡ˆï¼Œåœ¨æ–¹æ³•å†…éƒ¨è®¾ç½®å¼‚å¸¸æ•è·ç­–ç•¥</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"> <span class="k">new</span> <span class="n">Thread</span><span class="p">(()=&gt;</span><span class="n">Go</span><span class="p">()).</span><span class="n">Start</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">static</span> <span class="k">void</span> <span class="n">Go</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">try</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">throw</span> <span class="k">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">throw</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span></code></pre></div><ul>
<li>åœ¨wpfã€winformé‡Œï¼Œå¯ä»¥è®¢é˜…å…¨å±€å¼‚å¸¸å¤„ç†äº‹ä»¶
<ul>
<li>application.dispatcherunhandledException</li>
<li>application.threadexception</li>
<li>åœ¨é€šè¿‡æ¶ˆæ¯å¾ªç¯è°ƒç”¨çš„ç¨‹åºçš„ä»»ä½•éƒ¨åˆ†å‘ç”Ÿæœªå¤„ç†çš„å¼‚å¸¸ï¼ˆè¿™ç›¸å½“äºåº”ç”¨ç¨‹åºå¤„äºæ´»åŠ¨çŠ¶æ€æ—¶åœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œçš„æ‰€æœ‰ä»£ç ï¼‰åï¼Œå°†è§¦å‘è¿™äº›å¼‚å¸¸</li>
<li>ä½†æ˜¯éuiçº¿ç¨‹ä¸Šçš„æœªå¤„ç†å¼‚å¸¸ï¼Œå¹¶ä¸ä¼šè§¦å‘å®ƒ</li>
</ul>
</li>
<li>ä»»ä½•çº¿ç¨‹æœ‰ä»»ä½•æœªå¤„ç†çš„å¼‚å¸¸éƒ½ä¼šè§¦å‘
<ul>
<li>appdomain.currentdomain.unhandledexception</li>
</ul>
</li>
</ul>
<h4 id="å‰å°çº¿ç¨‹å’Œåå°çº¿ç¨‹-foreground-vs-vackground-threads">å‰å°çº¿ç¨‹å’Œåå°çº¿ç¨‹ foreground vs vackground threads</h4>
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œä½ æ‰‹åŠ¨åˆ›å»ºçš„çº¿ç¨‹å°±æ˜¯å‰å°çº¿ç¨‹</li>
<li>åªè¦æœ‰å‰å°çº¿ç¨‹åœ¨è¿è¡Œï¼Œé‚£ä¹ˆåº”ç”¨ç¨‹åºå°±ä¼šä¸€ç›´å¤„äºæ´»åŠ¨çŠ¶æ€
<ul>
<li>ä½†æ˜¯åå°çº¿ç¨‹å´ä¸è¡Œ</li>
<li>ä¸€æ—¦æ‰€æœ‰çš„å‰å°çº¿ç¨‹åœæ­¢ï¼Œé‚£ä¹ˆåº”ç”¨ç¨‹åºå°±åœæ­¢äº†</li>
<li>ä»»ä½•çš„åå°çº¿ç¨‹ä¹Ÿä¼šçªç„¶åœæ­¢</li>
<li>æ³¨æ„ï¼šçº¿ç¨‹çš„å‰å°ã€åå°çŠ¶æ€ä¸ä»–çš„ä¼˜å…ˆçº§æ— å…³ï¼ˆæ‰€åˆ†é…çš„æ‰§è¡Œæ—¶é—´ï¼‰</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">  <span class="kt">var</span> <span class="n">thread</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="p">(()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="p">});</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">Length</span><span class="p">&gt;</span><span class="m">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">thread</span><span class="p">.</span><span class="n">IsBackground</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">thread</span><span class="p">.</span><span class="n">Start</span><span class="p">();</span>
</span></span></code></pre></div><ul>
<li>è¿›ç¨‹ä»¥è¿™ç§å½¢å¼ç»ˆæ­¢çš„æ—¶å€™ï¼Œåå°çº¿ç¨‹æ‰§è¡Œæ ˆä¸­çš„finallyå—å°±ä¸ä¼šè¢«æ‰§è¡Œäº†
<ul>
<li>å¦‚æœæƒ³è®©å¥¹æ‰§è¡Œï¼Œå¯ä»¥åœ¨é€€å‡ºç¨‹åºæ—¶ä½¿ç”¨joinæ¥ç­‰å¾…åå°çº¿ç¨‹ï¼Œå¦‚æœæ˜¯ä½ è‡ªå·±åˆ›å»ºçš„çº¿ç¨‹çš„è¯ï¼Œæˆ–è€…ä½¿ç”¨signal construct ï¼Œ å¦‚æœæ˜¯çº¿ç¨‹æ± çš„è¯</li>
</ul>
</li>
<li>åº”ç”¨ç¨‹åºæ— æ³•æ­£å¸¸é€€å‡ºçš„ä¸€ä¸ªå¸¸è§åŸå› æ˜¯è¿˜æœ‰æ´»è·ƒçš„å‰å°çº¿ç¨‹</li>
</ul>
<h4 id="çº¿ç¨‹ä¼˜å…ˆçº§">çº¿ç¨‹ä¼˜å…ˆçº§</h4>
<ul>
<li>çº¿ç¨‹çš„ä¼˜å…ˆçº§Threadçš„priorityå±æ€§ï¼Œä»–å†³å®šäº†ç›¸å¯¹äºæ“ä½œç³»ç»Ÿä¸­å…¶ä»–æ´»è·ƒçº¿ç¨‹æ‰€å çš„æ‰§è¡Œæ—¶é—´</li>
<li>ä¼˜å…ˆçº§åˆ†ä¸º
<ul>
<li>enum threadpriority {lowest , belownormal , normal , abovenormal , highest}</li>
</ul>
</li>
</ul>
<h4 id="æå‡çº¿ç¨‹ä¼˜å…ˆçº§">æå‡çº¿ç¨‹ä¼˜å…ˆçº§</h4>
<ul>
<li>
<p>æå‡çº¿ç¨‹ä¼˜å…ˆçº§çš„æ—¶å€™éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œå› ä¸ºå®ƒå¯èƒ½â€œé¥¿æ­»â€å…¶ä»–çº¿ç¨‹</p>
</li>
<li>
<p>å¦‚æœæƒ³è®©æŸçº¿ç¨‹threadçš„ä¼˜å…ˆçº§æ¯”å…¶ä»–è¿›ç¨‹processä¸­çš„çº¿ç¨‹threadé«˜çš„è¯ï¼Œé‚£å°±å¿…é¡»æå‡è¿›ç¨‹processçš„ä¼˜å…ˆçº§</p>
<ul>
<li>
<p>ä½¿ç”¨system.diagnosticsä¸‹çš„processç±»</p>
</li>
<li>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="n">using</span><span class="p">(</span><span class="n">process</span> <span class="n">p</span> <span class="p">=</span> <span class="n">process</span><span class="p">.</span><span class="n">getcurrentprocess</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="p">.</span><span class="n">priorityclass</span> <span class="p">=</span> <span class="n">processpriorityclass</span><span class="p">.</span><span class="n">high</span> <span class="p">;</span>
</span></span></code></pre></div></li>
</ul>
</li>
<li>
<p>è¿™å¯ä»¥å¾ˆå¥½çš„ç”¨äºåªåšå°‘é‡å·¥ä½œä¸”éœ€è¦è¾ƒä½å»¶è¿Ÿçš„éuiçº¿ç¨‹</p>
</li>
<li>
<p>å¯¹äºéœ€è¦å¤§é‡è®¡ç®—çš„åº”ç”¨ç¨‹åºï¼Œå°¤å…¶æ˜¯æœ‰uiçš„åº”ç”¨ç¨‹åºï¼Œæé«˜è¿›ç¨‹ä¼˜å…ˆçº§å¯èƒ½ä¼šä½¿å…¶ä»–è¿›ç¨‹é¥¿æ­»ï¼Œä»è€Œé™ä½æ•´ä¸ªè®¡ç®—æœºçš„é€Ÿåº¦</p>
</li>
</ul>
<h4 id="ä¿¡å·--sinaling">ä¿¡å·  sinaling</h4>
<ul>
<li>æœ‰æ—¶å€™ï¼Œä½ éœ€è¦è®©æŸçº¿ç¨‹ä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€ï¼Œç›´è‡³æ¥æ”¶åˆ°å…¶ä»–çº¿ç¨‹å‘æ¥çš„é€šçŸ¥ã€‚è¿™å°±å«åšsignalingå‘é€ä¿¡å·</li>
<li>æœ€ç®€å•çš„ä¿¡å·ç»“æ„å°±æ˜¯manualresetevent
<ul>
<li>è°ƒç”¨å®ƒä¸Šé¢çš„waitoneæ–¹æ³•ä¼šé˜»å¡å½“å‰çš„çº¿ç¨‹ï¼Œç›´åˆ°å¦ä¸€ä¸ªçº¿ç¨‹é€šè¿‡è°ƒç”¨setæ–¹æ³•å¼€å¯ä¿¡å·</li>
<li>æˆ‘ä»¬å¯ä»¥è°ƒç”¨resetæ–¹æ³•å°†å…¶å†æ¬¡å…³é—­</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="kt">var</span> <span class="n">signal</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ManualResetEvent</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">Thread</span><span class="p">(()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;waiting for signal ...&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">signal</span><span class="p">.</span><span class="n">WaitOne</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">               
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;got sinal &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;wo zai xie le&#34;</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">                <span class="n">signal</span><span class="p">.</span><span class="n">Dispose</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="p">}).</span><span class="n">Start</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">3000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;å‡†å¤‡æ‰“å¼€ä¿¡å·äº†å“¦&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">signal</span><span class="p">.</span><span class="n">Set</span><span class="p">();</span><span class="c1">//æ‰“å¼€äº†ä¿¡å·</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">500</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">signal</span><span class="p">.</span><span class="n">Reset</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;æˆ‘æœ‰å‡†å¤‡æ‰“å¼€äº†&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">1000</span><span class="p">);</span>
</span></span></code></pre></div><h4 id="å¯Œå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºçš„çº¿ç¨‹">å¯Œå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºçš„çº¿ç¨‹</h4>
<ul>
<li>åœ¨wpfã€uwpã€winformç­‰ç±»å‹çš„ç¨‹åºä¸­ï¼Œå¦‚æœåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œè€—æ—¶çš„æ“ä½œï¼Œå°±ä¼šå¯¼è‡´æ•´ä¸ªç¨‹åºæ— å“åº”ã€‚å› ä¸ºä¸»çº¿ç¨‹åŒæ—¶è¿˜è¦å¤„ç†æ¶ˆæ¯å¾ªç¯ï¼Œè€Œæ¸²æŸ“å’Œé¼ æ ‡é”®ç›˜äº‹ä»¶å¤„ç†ç­‰å·¥ä½œéƒ½æ˜¯æ¶ˆæ¯å¾ªç¯æ¥æ‰§è¡Œçš„</li>
<li>é’ˆå¯¹è¿™ç§è€—æ—¶çš„æ“ä½œï¼Œä¸€ç§æµè¡Œçš„åšæ³•æ˜¯å¯ç”¨ä¸€ä¸ªworkerçº¿ç¨‹
<ul>
<li>æ‰§è¡Œå®Œæ“ä½œåï¼Œå†æ›´æ–°åˆ°UI</li>
</ul>
</li>
<li>å¯Œå®¢æˆ·ç«¯åº”ç”¨çš„çº¿ç¨‹æ¨¡å‹é€šå¸¸æ˜¯ï¼š
<ul>
<li><em><strong>uiå…ƒç´ å’Œæ§ä»¶åªèƒ½ä»åˆ›å»ºå®ƒä»¬çš„çº¿ç¨‹æ¥è¿›è¡Œè®¿é—®ï¼ˆé€šå¸¸æ˜¯ä¸»uiçº¿ç¨‹ï¼‰</strong></em></li>
<li>å½“æƒ³ä»workerçº¿ç¨‹æ›´æ–°åˆ°uiçš„æ—¶å€™ï¼Œä½ å¿…é¡»æŠŠè¯·æ±‚äº¤ç»™uiçº¿ç¨‹</li>
</ul>
</li>
<li>æ¯”è¾ƒåº•å±‚çš„å®ç°æ˜¯ï¼š
<ul>
<li>åœ¨wpfï¼Œåœ¨å…ƒç´ çš„dispatcherå¯¹è±¡ä¸Šè°ƒç”¨begininvokeæˆ–invoke</li>
<li>åœ¨winformï¼Œè°ƒç”¨æ§ä»¶çš„begininvokeæˆ–invoke</li>
<li>åœ¨uwpä¸­ï¼Œ è°ƒç”¨dispatcherå¯¹è±¡ä¸Šçš„runasyncæˆ–invoke</li>
</ul>
</li>
<li>æ‰€æœ‰è¿™äº›æ–¹æ³•éƒ½æ¥æ”¶ä¸€ä¸ªå§”æ‰˜</li>
<li>begininvokeæˆ–runasyncé€šè¿‡å°†å§”æ‰˜æ’é˜Ÿåˆ°uiçº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—åœ¨æ‰§è¡Œå·¥ä½œ</li>
<li>invokeæ‰§è¡Œç›¸åŒçš„æ“ä½œï¼Œä½†éšåä¼šè¿›è¡Œé˜»å¡ï¼Œç›´åˆ°uiçº¿ç¨‹è¯»å–å¹¶å¤„ç†æ¶ˆæ¯ã€‚
<ul>
<li>å› æ­¤ï¼Œinvokeå…è®¸æ‚¨ä»æ–¹æ³•ä¸­è·å–è¿”å›å€¼</li>
<li>å¦‚æœä¸éœ€è¦è¿”å›å€¼ï¼Œbegininvoke/runasyncæ›´å¯å–ï¼Œå› ä¸ºä»–ä»¬ä¸ä¼šé˜»å¡è°ƒç”¨æ–¹ï¼Œä¹Ÿä¸ä¼šå¼•å…¥æ­»é”çš„å¯èƒ½æ€§</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">   <span class="k">private</span> <span class="k">void</span> <span class="n">Button_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">RoutedEventArgs</span> <span class="n">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Work</span><span class="p">();</span><span class="c1">//è¿™æ ·ç”¨ç›´æ¥å¡äº†5sæ•´ä¸ªç•Œé¢</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// new Thread(Work).Start();//è¿™æ ·ç”¨åˆä¼šç›´æ¥æŠ¥é”™å‘œå‘œå‘œ</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">void</span> <span class="n">Work</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">5000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">textbox</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="s">&#34;The answer&#34;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><p>demo wpf</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">        <span class="k">private</span> <span class="k">void</span> <span class="n">Button_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">RoutedEventArgs</span> <span class="n">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Work();//è¿™æ ·ç”¨ç›´æ¥å¡äº†5sæ•´ä¸ªç•Œé¢</span>
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">Thread</span><span class="p">(</span><span class="n">Work</span><span class="p">).</span><span class="n">Start</span><span class="p">();</span><span class="c1">//è¿™æ ·ç”¨åˆä¼šç›´æ¥æŠ¥é”™å‘œå‘œå‘œ</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">void</span> <span class="n">Work</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">5000</span><span class="p">);</span><span class="c1">//å®é™…ä¸Šæ˜¯ä¸ºäº†æ¨¡æ‹Ÿå¥½å¤šå¥½å¤šå¥‡å¥‡æ€ªæ€ªå ç”¨æ—¶é—´çš„é€»è¾‘æ“ä½œ</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// textbox.Text = &#34;The answer&#34;; </span>
</span></span><span class="line"><span class="cl">            <span class="n">UpdateMessage</span><span class="p">(</span><span class="s">&#34;The Answer is me...&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">void</span> <span class="n">UpdateMessage</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Action</span> <span class="n">action</span> <span class="p">=</span> <span class="p">()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">textbox</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="n">message</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">Dispatcher</span><span class="p">.</span><span class="n">BeginInvoke</span><span class="p">(</span><span class="n">action</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><p>winform demo</p>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210126105507084.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210126105507084.png"
			
			
			
			loading="lazy"
			alt="image-20210126105507084">
	</a>
	
	<figcaption>image-20210126105507084</figcaption>
	
</figure></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">   <span class="k">private</span> <span class="k">void</span> <span class="n">button1_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Work();  //æ˜¾ç„¶ï¼Œè¿™æ ·åšå¡æ­»ç•Œé¢äº†å—·å—·å—·å‘œå‘œå‘œ</span>
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">Thread</span><span class="p">(</span><span class="n">Work</span><span class="p">).</span><span class="n">Start</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">void</span> <span class="n">Work</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">5000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">UpdateUIMessage</span><span class="p">(</span><span class="s">&#34;ljs is shuaibi ...&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">void</span> <span class="n">UpdateUIMessage</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Action</span> <span class="n">action</span> <span class="p">=</span> <span class="p">()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">textBox1</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="n">message</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">};</span> 
</span></span><span class="line"><span class="cl">            <span class="n">BeginInvoke</span><span class="p">(</span><span class="n">action</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><h4 id="åŒæ­¥ä¸Šä¸‹æ–‡-synchronization-contexts">åŒæ­¥ä¸Šä¸‹æ–‡ synchronization contexts</h4>
<ul>
<li>
<p>åœ¨system.componentmodel ä¸‹æœ‰ä¸€ä¸ªæŠ½è±¡ç±»ï¼šsynchronizationcontext ï¼Œå®ƒä½¿å¾—thread marshaling çš„å¾—åˆ°æ³›åŒ–  å•¥æ„æ€å˜ å°±æ˜¯å°†ä¸€ä¸ªçº¿ç¨‹é‡Œæ•°æ®çš„æ‰€æœ‰æƒäº¤ç»™å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œå°±æ˜¯æŠŠæ•°æ®ç§»äº¤è¿‡å»å‘—è¿˜èƒ½æœ‰å•¥æ„æ€å•Š</p>
</li>
<li>
<p>é’ˆå¯¹ç§»åŠ¨ã€æ¡Œé¢ï¼ˆwpfã€uwpã€winformsï¼‰ç­‰å¯Œå®¢æˆ·ç«¯åº”ç”¨çš„apiï¼Œä»–ä»¬éƒ½å®šä¹‰å’Œå®ä¾‹åŒ–äº†synchronizationcontextçš„å­ç±»</p>
<ul>
<li>å¯ä»¥é€šè¿‡é™æ€å±æ€§synchronizationcontext.currentæ¥è·å¾—ï¼ˆå½“è¿è¡Œåœ¨uiçº¿ç¨‹æ—¶ï¼‰</li>
<li>æ•è·è¯¥å±æ€§è®©ä½ å¯ä»¥åœ¨ç¨åçš„æ—¶å€™ä»workerçº¿ç¨‹å‘uiçº¿ç¨‹å‘é€æ•°æ®</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"> <span class="k">public</span> <span class="n">SynchronizationContext</span> <span class="n">_SynchronizationContext</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">private</span> <span class="k">void</span> <span class="n">button1_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//ä¸ºå½“å‰uiçº¿ç¨‹æ•è· synchronization context</span>
</span></span><span class="line"><span class="cl">            <span class="n">_SynchronizationContext</span> <span class="p">=</span><span class="n">SynchronizationContext</span><span class="p">.</span><span class="n">Current</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// Work();  //æ˜¾ç„¶ï¼Œè¿™æ ·åšå¡æ­»ç•Œé¢äº†å—·å—·å—·å‘œå‘œå‘œ</span>
</span></span><span class="line"><span class="cl">                <span class="k">new</span> <span class="n">Thread</span><span class="p">(</span><span class="n">Work</span><span class="p">).</span><span class="n">Start</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">void</span> <span class="n">Work</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">5000</span><span class="p">);</span><span class="c1">//æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span>
</span></span><span class="line"><span class="cl">            <span class="n">UpdateUIMessageMethod1</span><span class="p">(</span><span class="s">&#34;ljs is a shuaibi &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// UpdateUIMessage(&#34;ljs is shuaibi ...&#34;);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">void</span> <span class="n">UpdateUIMessageMethod1</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//æŠŠå§”æ‰˜ marshal ç»™ ui çº¿ç¨‹</span>
</span></span><span class="line"><span class="cl">            <span class="n">_SynchronizationContext</span><span class="p">.</span><span class="n">Post</span><span class="p">(</span><span class="n">s</span> <span class="p">=&gt;</span> <span class="n">textBox1</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="n">message</span><span class="p">,</span> <span class="k">null</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">//è°ƒç”¨post å°±ç›¸å½“äº dispatcheræˆ– control ä¸Šçš„ begininvoke æ–¹æ³•</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><ul>
<li>è°ƒç”¨postæ–¹æ³•å°±ç›¸å½“äºè°ƒç”¨dispatchæˆ–controlä¸Šé¢çš„begininvokeæ–¹æ³•</li>
<li>è¿˜æœ‰ä¸€ä¸ªsendæ–¹æ³•ï¼Œå°±ç­‰ä»·äºinvokeæ–¹æ³•</li>
</ul>
<h4 id="çº¿ç¨‹æ± -thread-pool">çº¿ç¨‹æ±  thread pool</h4>
<ul>
<li>å½“å¼€å§‹ä¸€ä¸ªçº¿ç¨‹çš„æ—¶å€™ï¼Œå°†èŠ±è´¹å‡ ç™¾å¾®å¦™æ¥ç»„ç»‡ç±»ä¼¼ä»¥ä¸‹å†…å®¹
<ul>
<li>ä¸€ä¸ªæ–°çš„å±€éƒ¨å˜é‡æ ˆstack</li>
</ul>
</li>
<li>çº¿ç¨‹æ± å°±å¯ä»¥èŠ‚çœè¿™ç§å¼€é”€
<ul>
<li>é€šè¿‡é¢„å…ˆåˆ›å»ºä¸€ä¸ªå¯å¾ªç¯ä½¿ç”¨çº¿ç¨‹çš„æ± æ¥å‡å°‘è¿™ä¸€å¼€é”€</li>
</ul>
</li>
<li>çº¿ç¨‹æ± å¯¹äºé«˜æ•ˆçš„å¹¶è¡Œç¼–ç¨‹å’Œç»†ç²’åº¦å¹¶å‘æ˜¯å¿…ä¸å¯å°‘çš„</li>
<li>ä»–å…è®¸åœ¨ä¸è¢«çº¿ç¨‹å¯åŠ¨çš„å¼€é”€æ·¹æ²¡çš„æƒ…å†µä¸‹è¿è¡ŒçŸ­æœŸæ“ä½œ</li>
</ul>
<h4 id="ä½¿ç”¨çº¿ç¨‹æ± çº¿ç¨‹éœ€è¦æ³¨æ„ä¸€ä¸‹å‡ ç‚¹">ä½¿ç”¨çº¿ç¨‹æ± çº¿ç¨‹éœ€è¦æ³¨æ„ä¸€ä¸‹å‡ ç‚¹</h4>
<ul>
<li>ä¸å¯ä»¥è®¾ç½®æ± çº¿ç¨‹çš„åç§°name</li>
<li><em><strong>æ± çº¿ç¨‹éƒ½æ˜¯åå°çº¿ç¨‹</strong></em></li>
<li>é˜»å¡æ± çº¿ç¨‹å¯ä½¿æ€§èƒ½é™çº§</li>
<li>ä½ å¯ä»¥è‡ªç”±çš„æ›´æ”¹æ± çº¿ç¨‹çš„ä¼˜å…ˆçº§
<ul>
<li>å½“ä»–é‡Šæ”¾å›æ± çš„æ—¶å€™ä¼˜å…ˆçº§å°†è¿˜åŸä¸ºæ­£å¸¸çŠ¶æ€</li>
</ul>
</li>
<li>å¯ä»¥é€šè¿‡thread.currentthread.isthreadpoolthreadå±æ€§æ¥åˆ¤æ–­æ˜¯å¦æ‰§è¡Œåœ¨æ± çº¿ç¨‹ä¸Š</li>
</ul>
<h4 id="è¿›å…¥çº¿ç¨‹æ± ">è¿›å…¥çº¿ç¨‹æ± </h4>
<ul>
<li>æœ€ç®€å•çš„ã€æ˜¾å¼çš„åœ¨æ± çº¿ç¨‹è¿è¡Œä»£ç çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨task.run</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">        <span class="n">Task</span><span class="p">.</span><span class="n">Run</span><span class="p">(()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;this is a threadpool ...&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">});</span>
</span></span><span class="line"><span class="cl">        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;hey boy! i am a cowboy !&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Console.ReadKey(); </span>
</span></span><span class="line"><span class="cl">        <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">1000</span><span class="p">);</span>
</span></span></code></pre></div></li>
</ul>
<h4 id="è°ä½¿ç”¨äº†çº¿ç¨‹æ± ">è°ä½¿ç”¨äº†çº¿ç¨‹æ± </h4>
<ul>
<li>wcf/remoting / asp.net / asmx web services åº”ç”¨æœåŠ¡å™¨</li>
<li>system.timers.times  /  system.threading .timer</li>
<li>å¹¶è¡Œç¼–ç¨‹ç»“æ„</li>
<li>backgroundworkderç±» (ç°åœ¨å¾ˆå¤šä½™)</li>
<li>å¼‚æ­¥å§”æ‰˜(ç°åœ¨å¾ˆå¤šä½™)</li>
</ul>
<h4 id="çº¿ç¨‹æ± ä¸­çš„æ•´æ´">çº¿ç¨‹æ± ä¸­çš„æ•´æ´</h4>
<ul>
<li>çº¿ç¨‹æ± æä¾›äº†å¦ä¸€ä¸ªåŠŸèƒ½ï¼Œå³ç¡®ä¿ä¸´æ—¶è¶…å‡º è®¡ç®—-bound çš„å·¥ä½œä¸ä¼šå¯¼è‡´cpuè¶…é¢è®¢é˜…</li>
<li>cpuè¶…é¢è®¢é˜…ï¼šæ´»è·ƒçš„çº¿ç¨‹è¶…è¿‡cpuçš„æ ¸æ•°ï¼Œæ“ä½œç³»ç»Ÿå°±éœ€è¦å¯¹çº¿ç¨‹è¿›è¡Œæ—¶é—´åˆ‡ç‰‡</li>
<li>è¶…é¢è®¢é˜…å¯¹æ€§èƒ½çš„å½±å“å¾ˆå¤§ï¼Œæ—¶é—´åˆ‡ç‰‡éœ€è¦æ˜‚è´µçš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå¹¶ä¸”å¯èƒ½ä½¿cpuç¼“å­˜å¤±æ•ˆï¼Œè€Œcpuç¼“å­˜å¯¹äºç°ä»£å¤„ç†å™¨çš„æ€§èƒ½è‡³å…³é‡è¦</li>
</ul>
<h4 id="clrçš„ç­–ç•¥">clrçš„ç­–ç•¥</h4>
<ul>
<li>clré€šè¿‡å¯¹ä»»åŠ¡æ’é˜Ÿå¹¶å¯¹å…¶å¯åŠ¨è¿›è¡ŒèŠ‚æµé™åˆ¶æ¥é¿å…çº¿ç¨‹æ± ä¸­çš„è¶…é¢è®¢é˜…</li>
<li>ä»–é¦–å…ˆè¿è¡Œå°½å¯èƒ½å¤šçš„å¹¶å‘ä»»åŠ¡ï¼ˆåªè¦è¿˜æœ‰cpuæ ¸ï¼‰ï¼Œç„¶åé€šè¿‡çˆ¬å±±ç®—æ³•è°ƒæ•´å¹¶å‘çº§åˆ«ï¼Œå¹¶åœ¨ç‰¹å®šæ–¹å‘ä¸Šä¸æ–­è°ƒæ•´å·¥ä½œè´Ÿè½½
<ul>
<li>å¦‚æœååé‡æé«˜ï¼Œå®ƒå°†ç»§ç»­æœåŒä¸€ä¸ªæ–¹å‘ï¼ˆå¦åˆ™å°†åè½¬ï¼‰</li>
</ul>
</li>
<li>è¿™ç¡®ä¿ä»–å§‹ç»ˆè¿½éšæœ€ä½³æ€§èƒ½æ›²çº¿ï¼Œå³æ—¶é¢å¯¹è®¡ç®—æœºä¸Šç«äº‰çš„è¿›ç¨‹æ´»åŠ¨æ—¶ä¹Ÿæ˜¯å¦‚æ­¤</li>
<li>å¦‚æœä¸‹é¢ä¸¤ç‚¹èƒ½å¤Ÿæ»¡è¶³ï¼Œé‚£ä¹ˆclrçš„ç­–ç•¥å°†å‘æŒ¥å‡ºæœ€ä½³æ•ˆæœ
<ul>
<li>å·¥ä½œé¡¹å¤§å¤šæ˜¯çŸ­æ—¶é—´è¿è¡Œçš„ï¼Œï¼ˆ&lt;250msï¼Œæˆ–è€…ç†æƒ³æƒ…å†µä¸‹&lt;100msï¼‰å› æ­¤clræœ‰å¾ˆå¤šæœºä¼šå¯è¿›è¡Œæµ‹é‡å’Œè°ƒæ•´</li>
<li>å¤§éƒ¨åˆ†æ—¶é—´éƒ½è¢«é˜»å¡çš„å·¥ä½œé¡¹ä¸ä¼šä¸»å®°çº¿ç¨‹æ± </li>
</ul>
</li>
</ul>
<h4 id="threadçš„é—®é¢˜">threadçš„é—®é¢˜</h4>
<ul>
<li>çº¿ç¨‹threadæ˜¯ç”¨æ¥åˆ›å»ºå¹¶å‘concurrencyçš„ä¸€ç§ä½çº§åˆ«å·¥å…·ï¼Œä»–æœ‰ä¸€äº›é™åˆ¶ï¼Œå°¤å…¶æ˜¯
<ul>
<li>è™½ç„¶å¼€å§‹çº¿ç¨‹çš„æ—¶å€™å¯ä»¥æ–¹ä¾¿çš„ä¼ å…¥æ•°æ®ï¼Œä½†æ˜¯å½“joinçš„æ—¶å€™ï¼Œå¾ˆéš¾ä»çº¿ç¨‹è·å¾—è¿”å›å€¼ã€‚
<ul>
<li>å¯èƒ½éœ€è¦è®¾ç½®ä¸€äº›å…±äº«å­—æ®µ</li>
<li>å¦‚æœæ“ä½œæŠ›å‡ºå¼‚å¸¸ï¼Œæ•è·å’Œä¼ æ’­æ”¹å¼‚å¸¸éƒ½å¾ˆéº»çƒ¦</li>
</ul>
</li>
<li>æ— æ³•å‘Šè¯‰çº¿ç¨‹åœ¨ç»“æŸæ—¶å¼€å§‹åšå¦å¤–çš„å·¥ä½œï¼Œä½ å¿…é¡»è¿›è¡Œjoinæ“ä½œï¼ˆåœ¨è¿›ç¨‹ä¸­é˜»å¡å½“å‰çš„çº¿ç¨‹ï¼‰</li>
</ul>
</li>
<li>å¾ˆéš¾ä½¿ç”¨è¾ƒå°çš„å¹¶å‘concurrentæ¥ç»„å»ºå¤§å‹çš„å¹¶å‘</li>
<li>å¯¼è‡´äº†å¯¹æ‰‹åŠ¨åŒæ­¥çš„æ›´å¤§ä¾èµ–ä»¥åŠéšä¹‹è€Œæ¥çš„é—®é¢˜</li>
</ul>
<h4 id="task-class">Task class</h4>
<ul>
<li>taskå¯ä»¥å¾ˆå¥½çš„è§£å†³ä¸Šè¿°çš„é—®é¢˜</li>
<li>taskæ˜¯ä¸€ä¸ªç›¸å¯¹é«˜çº§çš„æŠ½è±¡ï¼Œä»–ä»£è¡¨äº†ä¸€ä¸ªå¹¶å‘çš„æ“ä½œconcurrent
<ul>
<li>è¯¥æ“ä½œå¯èƒ½æœ‰threadæ”¯æŒï¼Œå¯èƒ½ä¸ç”±threadæ”¯æŒ</li>
</ul>
</li>
<li>taskæ˜¯å¯ç»„åˆçš„ï¼ˆå¯ä½¿ç”¨continuationæŠŠä»–ä»¬ä¸²æˆé“¾ï¼‰
<ul>
<li>taskå¯ä»¥ä½¿ç”¨çº¿ç¨‹æ± æ¥å‡å°‘å¯åŠ¨å»¶è¿Ÿ</li>
<li>ä½¿ç”¨taskcompletionsourceï¼Œtaskså¯ä»¥åˆ©ç”¨å›è°ƒçš„æ–¹å¼ï¼Œåœ¨ç­‰å¾…I/Oç»‘å®šæ“ä½œæ—¶å®Œå…¨é¿å…çº¿ç¨‹</li>
</ul>
</li>
</ul>
<h4 id="å¼€å§‹ä¸€ä¸ªtask-taskrun">å¼€å§‹ä¸€ä¸ªtask task.run</h4>
<ul>
<li>å¼€å¯ä¸€ä¸ªtaskæœ€ç®€å•çš„åŠæ³•å°±æ˜¯ä½¿ç”¨task.runè¿™ä¸ªé™æ€æ–¹æ³•
<ul>
<li>ä¼ å…¥ä¸€ä¸ªactionå§”æ‰˜å³å¯</li>
</ul>
</li>
<li><em><strong>taské»˜è®¤ä½¿ç”¨çº¿ç¨‹æ± ï¼Œä¹Ÿå°±æ˜¯åå°çº¿ç¨‹</strong></em>
<ul>
<li>å½“ä¸»çº¿ç¨‹ç»“æŸçš„æ—¶å€™ï¼Œä½ åˆ›å»ºçš„æ‰€æœ‰çš„taskséƒ½ä¼šç»“æŸ</li>
</ul>
</li>
<li>task.runè¿”å›ä¸€ä¸ªtaskå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ä»–æ¥ç›‘è§†å…¶è¿‡ç¨‹
<ul>
<li><em><strong>åœ¨task.runä¹‹åï¼Œæˆ‘ä»¬æ²¡æœ‰è°ƒç”¨startï¼Œå› ä¸ºè¯¥æ–¹æ³•åˆ›å»ºçš„æ˜¯çƒ­ä»»åŠ¡ hot task</strong></em>
<ul>
<li>å¯ä»¥é€šè¿‡taskçš„æ„é€ å‡½æ•°åˆ›å»ºå†·ä»»åŠ¡ cold task ï¼Œ ä½†æ˜¯å¾ˆå°‘è¿™ä¹ˆåš</li>
</ul>
</li>
</ul>
</li>
<li>å¯ä»¥é€šè¿‡taskçš„statuså±æ€§æ¥è·Ÿè¸ªtaskçš„æ‰§è¡ŒçŠ¶æ€</li>
</ul>
<h4 id="wait-ç­‰å¾…">Wait ç­‰å¾…</h4>
<ul>
<li>
<p><em><strong>è°ƒç”¨taskçš„waitæ–¹æ³•ä¼šè¿›è¡Œé˜»å¡ç›´åˆ°æ“ä½œå®Œæˆ</strong></em></p>
<ul>
<li>ç›¸å½“äºè°ƒç”¨threadä¸Šçš„joinæ–¹æ³•</li>
</ul>
</li>
<li>
<p><em><strong>å®é™…ä¸Šï¼Œtask.waitæˆ‘è§‰å¾—å°±æ˜¯è®©ä¸»çº¿ç¨‹ï¼Œæˆ–è€…å‰å°çº¿ç¨‹ç­‰å¾…æˆ‘ä»¬åˆ›å»ºå‡ºæ¥çš„è¿™ä¸ªtaskåå°çº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œé˜»å¡äº†çº¿ç¨‹ï¼Œç›´è‡³taskå®Œæˆä»»åŠ¡</strong></em></p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">        <span class="n">Action</span> <span class="n">action</span> <span class="p">=</span> <span class="p">()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">3000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;Foo&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">};</span>
</span></span><span class="line"><span class="cl">        <span class="kt">var</span> <span class="n">task</span> <span class="p">=</span> <span class="n">Task</span><span class="p">.</span><span class="n">Run</span><span class="p">(</span><span class="n">action</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">task</span><span class="p">.</span><span class="n">IsCompleted</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">task</span><span class="p">.</span><span class="n">Wait</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">task</span><span class="p">.</span><span class="n">IsCompleted</span><span class="p">);</span>
</span></span></code></pre></div><ul>
<li>waitä¹Ÿå¯ä»¥è®©ä½ æŒ‡å®šä¸€ä¸ªè¶…æ—¶æ—¶é—´å’Œä¸€ä¸ªå–æ¶ˆä»¤ç‰Œæ¥æå‰ç»“æŸç­‰å¾…</li>
</ul>
<h4 id="long-running-tasks-é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡">long-running tasks é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡</h4>
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œclråœ¨çº¿ç¨‹æ± ä¸­è¿è¡Œtaskï¼Œè¿™éå¸¸é€‚åˆçŸ­æ—¶é—´è¿è¡Œçš„compute-boundç±»å·¥ä½œ</li>
<li><em><strong>é’ˆå¯¹é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡æˆ–è€…é˜»å¡æ“ä½œï¼Œä½ å¯ä»¥ä¸é‡‡ç”¨çº¿ç¨‹æ± </strong></em></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"> <span class="kt">var</span> <span class="n">startNew</span> <span class="p">=</span> <span class="n">Task</span><span class="p">.</span><span class="n">Factory</span><span class="p">.</span><span class="n">StartNew</span><span class="p">(()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">3000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;Foo&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span><span class="n">TaskCreationOptions</span><span class="p">.</span><span class="n">LongRunning</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">ReadKey</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">startNew</span><span class="p">.</span><span class="n">Status</span><span class="p">);</span>
</span></span></code></pre></div><ul>
<li><em><strong>å¦‚æœåŒæ—¶è¿è¡Œå¤šä¸ªlong-running tasks å°¤å…¶æ˜¯å…¶ä¸­æœ‰å¤„äºé˜»å¡çŠ¶æ€çš„ï¼Œé‚£ä¹ˆæ€§èƒ½å°†ä¼šå—åˆ°å¾ˆå¤§çš„å½±å“ï¼Œè¿™æ—¶æœ‰æ¯”taskcreationoptions.longrunningæ›´å¥½çš„æ–¹æ³•</strong></em>
<ul>
<li><em><strong>å¦‚æœä»»åŠ¡æ˜¯io-bound ï¼Œtaskcompletionsourceå’Œå¼‚æ­¥å‡½æ•°å¯ä»¥è®©ä½ ç”¨æ¯æ‰coninuationsä»£æ›¿çº¿ç¨‹æ¥å®ç°å¹¶å‘</strong></em></li>
<li><em><strong>å¦‚æœä»»åŠ¡æ˜¯compute-bound,ç”Ÿäº§è€…/æ¶ˆè´¹è€…é˜Ÿåˆ—å…è®¸ä½ å¯¹ä»»åŠ¡çš„å¹¶å‘æ€§è¿›è¡Œé™æµï¼Œé¿å…æŠŠå…¶ä»–çº¿ç¨‹å’Œè¿›ç¨‹é¥¿æ­»</strong></em></li>
</ul>
</li>
</ul>
<h4 id="taskçš„è¿”å›å€¼">taskçš„è¿”å›å€¼</h4>
<ul>
<li>
<p>taskæœ‰ä¸€ä¸ªæ³›å‹å­ç±»å«åštask<!-- raw HTML omitted -->ï¼Œä»–å…è®¸å‘å‡ºä¸€ä¸ªè¿”å›å€¼</p>
</li>
<li>
<p>ä½¿ç”¨func<!-- raw HTML omitted -->å§”æ‰˜æˆ–å…¼å®¹çš„lambdaè¡¨è¾¾å¼æ¥è°ƒç”¨task.runå°±å¯ä»¥å¾—åˆ°task<!-- raw HTML omitted --></p>
</li>
<li>
<p><em><strong>éšåï¼Œå¯ä»¥é€šè¿‡resultå±æ€§æ¥è·å¾—è¿”å›çš„ç»“æœ</strong></em></p>
<ul>
<li>å¦‚æœè¿™ä¸ªtaskè¿˜æ²¡æœ‰å®Œæˆæ“ä½œï¼Œè®¿é—®resultå±æ€§ä¼šé˜»å¡è¯¥çº¿ç¨‹ç›´åˆ°è¯¥taskå®Œæˆæ“ä½œ</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">  <span class="kt">var</span> <span class="n">task</span> <span class="p">=</span> <span class="n">Task</span><span class="p">.</span><span class="n">Run</span><span class="p">(()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;Foo&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="m">3</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="p">});</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">result</span> <span class="p">=</span> <span class="n">task</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
</span></span></code></pre></div></li>
<li>
<p>task<!-- raw HTML omitted -->å¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§æ‰€è°“çš„â€œæœªæ¥/è®¸è¯ºâ€ future ã€promise ï¼Œåœ¨å®ƒé‡Œé¢åŒ…è£¹ç€ä¸€ä¸ªresult ï¼Œ åœ¨ç¨åçš„æ—¶å€™å°±ä¼šå˜å¾—å¯ç”¨</p>
</li>
<li>
<p>åœ¨ctpç‰ˆæœ¬ï¼Œtask<!-- raw HTML omitted -->å®é™…ä¸Šå«åšfuture<!-- raw HTML omitted --></p>
</li>
</ul>
<h4 id="taskçš„å¼‚å¸¸">taskçš„å¼‚å¸¸</h4>
<ul>
<li>ä¸threadä¸ä¸€æ ·ï¼Œtaskå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¼ æ’­å¼‚å¸¸
<ul>
<li>å¦‚æœä½ çš„taské‡Œé¢æŠ›å‡ºäº†ä¸€ä¸ªæœªå¤„ç†çš„å¼‚å¸¸ï¼ˆæ•…éšœï¼‰ï¼Œ é‚£ä¹ˆè¯¥å¼‚å¸¸å°±ä¼šé‡æ–°è¢«æŠ›å‡ºç»™
<ul>
<li>è°ƒç”¨äº†waitçš„åœ°æ–¹</li>
<li>è®¿é—®äº†task<!-- raw HTML omitted -->çš„resultå±æ€§çš„åœ°æ–¹</li>
</ul>
</li>
</ul>
</li>
<li>CLRå°†å¼‚å¸¸åŒ…è£¹åœ¨aggregateExceptioné‡Œï¼Œä»¥ä¾¿åœ¨å¹¶è¡Œç¼–ç¨‹åœºæ™¯ä¸­å‘æŒ¥å¾ˆå¥½çš„ä½œç”¨</li>
<li>æ— éœ€é‡æ–°æŠ›å‡ºå¼‚å¸¸ï¼Œé€šè¿‡taskçš„isfaultedå’Œiscancledå±æ€§ä¹Ÿå¯ä»¥æ£€æµ‹å‡ºtaskæ˜¯å¦å‘ç”Ÿäº†æ•…éšœ
<ul>
<li>å¦‚æœä¸¤ä¸ªå±æ€§éƒ½è¿”å›äº†falseï¼Œé‚£ä¹ˆå°±æ˜¯æ²¡æœ‰é”™è¯¯å‘ç”Ÿ</li>
<li>å¦‚æœiscancledä¸ºtrueï¼Œé‚£å°±è¯´æ˜ä¸€ä¸ªoperationCanceledExceptionä¸ºè¯¥taskæŠ›å‡ºäº†</li>
<li>å¦‚æœisfaultedä¸ºtrueï¼Œé‚£å°±è¯´æ˜å¦ä¸€ä¸ªç±»å‹çš„å¼‚å¸¸è¢«æŠ›å‡ºäº†ï¼Œè€ŒExceptionå±æ€§ä¹Ÿå°†æŒ‡æ˜é”™è¯¯</li>
</ul>
</li>
</ul>
<h4 id="å¼‚å¸¸ä¸è‡ªæ²»çš„task">å¼‚å¸¸ä¸è‡ªæ²»çš„task</h4>
<ul>
<li>è‡ªæ²»çš„ï¼Œè®¾ç½®å®Œå°±ä¸ç®¡äº†çš„taskã€‚å°±æ˜¯æŒ‡ä¸é€šè¿‡è°ƒç”¨waitï¼ˆï¼‰æ–¹æ³•ã€resultå±æ€§æˆ–è€…continuationè¿›è¡Œä¼šåˆçš„ä»»åŠ¡</li>
<li>é’ˆå¯¹è‡ªæ²»çš„taskï¼Œéœ€è¦åƒthreadä¸€æ ·ï¼Œæ˜¾å¼çš„å¤„ç†å¼‚å¸¸ï¼Œé¿å…å‘ç”Ÿâ€œæ‚„æ— å£°æ¯â€çš„æ•…éšœ</li>
<li>è‡ªæ²»taskä¸Šæœªå¤„ç†çš„å¼‚å¸¸ç§°ä¸ºæœªè§‚å¯Ÿåˆ°çš„å¼‚å¸¸</li>
</ul>
<h4 id="æœªè§‚å¯Ÿåˆ°çš„å¼‚å¸¸">æœªè§‚å¯Ÿåˆ°çš„å¼‚å¸¸</h4>
<ul>
<li>å¯ä»¥é€šè¿‡å…¨å±€çš„taskscheduler.unobservedtaskexceptionæ¥è®¢é˜…æœªè§‚å¯Ÿåˆ°çš„å¼‚å¸¸</li>
<li>å…³äºä»€ä¹ˆæ˜¯æœªè§‚å¯Ÿåˆ°çš„å¼‚å¸¸ï¼Œæœ‰ä¸€äº›ç»†å¾®çš„å·®åˆ«</li>
</ul>
<h4 id="continuation">Continuation</h4>
<ul>
<li>
<p><em><strong>ä¸€ä¸ªcontinuationä¼šå¯¹taskè¯´  ï¼š å½“ä½ ç»“æŸçš„æ—¶å€™ï¼Œç»§ç»­å†åšç‚¹å…¶ä»–çš„äº‹</strong></em></p>
</li>
<li>
<p><em><strong>continuationé€šå¸¸æ˜¯é€šè¿‡å›è°ƒçš„æ–¹å¼å®ç°çš„</strong></em></p>
<ul>
<li><em><strong>å½“æ“ä½œä¸€ç»“æŸï¼Œå°±å¼€å§‹æ‰§è¡Œ</strong></em></li>
</ul>
</li>
<li>
<p><em><strong>åœ¨taskä¸Šè°ƒç”¨getawaiterä¼šè¿”å›ä¸€ä¸ªawaiterå¯¹è±¡</strong></em></p>
<ul>
<li>ä»–çš„oncompletedæ–¹æ³•ä¼šå‘Šè¯‰ä¹‹å‰çš„taskï¼šå½“ä½ ç»“æŸ/å‘ç”Ÿæ•…éšœçš„æ—¶å€™è¦æ‰§è¡Œå§”æ‰˜</li>
</ul>
</li>
<li>
<p>å¯ä»¥å°†continuationé™„åŠ åˆ°å·²ç»ç»“æŸçš„taskä¸Šé¢ï¼Œæ­¤æ—¶continuationå°†ä¼šè¢«å®‰æ’ç«‹å³æ‰§è¡Œ</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Task</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">task</span> <span class="p">=</span> <span class="n">Task</span><span class="p">.</span><span class="n">Run</span><span class="p">(()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="n">Enumerable</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">3000000</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="p">.</span><span class="n">Count</span><span class="p">(</span><span class="n">n</span> <span class="p">=&gt;</span> <span class="n">Enumerable</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">Math</span><span class="p">.</span><span class="n">Sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">-</span> <span class="m">1</span><span class="p">).</span><span class="n">All</span><span class="p">(</span><span class="n">i</span> <span class="p">=&gt;</span> <span class="n">n</span> <span class="p">%</span> <span class="n">i</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">awaiter</span> <span class="p">=</span> <span class="n">task</span><span class="p">.</span><span class="n">GetAwaiter</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">awaiter</span><span class="p">.</span><span class="n">OnCompleted</span><span class="p">(()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">awaiter</span><span class="p">.</span><span class="n">GetResult</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">            <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">ReadKey</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><p><em><strong>å®é™…ä¸Šï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹å¼ä½œä¸ºä¸é˜»å¡ä¸»çº¿ç¨‹å¹¶æœ€åä¸ºuiæ›´æ–°æ•°æ®çš„æ–¹å¼å‘¢</strong></em></p>
<h4 id="awaiter">awaiter</h4>
<ul>
<li>ä»»ä½•å¯ä»¥æš´éœ²ä¸‹åˆ—ä¸¤ä¸ªæ–¹æ³•å’Œä¸€ä¸ªå±æ€§çš„å¯¹è±¡å°±æ˜¯awaiter
<ul>
<li>oncompleted</li>
<li>getresult</li>
<li>iscompleted çš„boolå±æ€§</li>
</ul>
</li>
<li>æ²¡æœ‰æ¥å£æˆ–è€…çˆ¶ç±»æ¥ç»Ÿä¸€è¿™äº›æˆå‘˜</li>
<li>å…¶ä¸­oncompletedæ˜¯inotifycompletionçš„ä¸€éƒ¨åˆ†</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">    <span class="k">private</span> <span class="k">void</span> <span class="n">button1_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Task</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">task</span> <span class="p">=</span> <span class="n">Task</span><span class="p">.</span><span class="n">Run</span><span class="p">(()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="n">Enumerable</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">3000000</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="p">.</span><span class="n">Count</span><span class="p">(</span><span class="n">n</span> <span class="p">=&gt;</span> <span class="n">Enumerable</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">Math</span><span class="p">.</span><span class="n">Sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">-</span> <span class="m">1</span><span class="p">).</span><span class="n">All</span><span class="p">(</span><span class="n">i</span> <span class="p">=&gt;</span> <span class="n">n</span> <span class="p">%</span> <span class="n">i</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">awaiter</span> <span class="p">=</span> <span class="n">task</span><span class="p">.</span><span class="n">GetAwaiter</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">awaiter</span><span class="p">.</span><span class="n">OnCompleted</span><span class="p">(()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">textBox1</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="n">awaiter</span><span class="p">.</span><span class="n">GetResult</span><span class="p">().</span><span class="n">ToString</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">            <span class="p">});</span>
</span></span></code></pre></div><h4 id="å¦‚æœå‘ç”Ÿæ•…éšœ">å¦‚æœå‘ç”Ÿæ•…éšœ</h4>
<ul>
<li>å¦‚æœä¹‹å‰çš„ä»»åŠ¡å‘ç”Ÿæ•…éšœï¼Œé‚£ä¹ˆå½“continuationä»£ç è°ƒç”¨awaiter.getresultçš„æ—¶å€™ï¼Œå¼‚å¸¸å°±ä¼šè¢«é‡æ–°æŠ›å‡º</li>
<li>æ— éœ€è°ƒç”¨getresultï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è®¿é—®taskçš„resultå±æ€§</li>
<li>ä½†è°ƒç”¨getresultçš„å¥½å¤„æ˜¯ï¼Œå¦‚æœtaskæ˜¯å‘ç”Ÿæ•…éšœäº†ï¼Œé‚£ä¹ˆå¼‚å¸¸ä¼šè¢«ç›´æ¥æŠ›å‡ºï¼Œè€Œä¸æ˜¯åŒ…è£¹åœ¨aggregateexceptioné‡Œé¢ï¼Œè¿™æ ·çš„è¯catchå—å°±ç®€æ´å¾ˆå¤šäº†</li>
</ul>
<h4 id="éæ³›å‹-task">éæ³›å‹ task</h4>
<ul>
<li>é’ˆå¯¹éæ³›å‹çš„taskï¼Œgetresultæ–¹æ³•æœ‰ä¸€ä¸ªvoidè¿”å›å€¼ï¼Œä»–å°±æ˜¯ç”¨æ¥é‡æ–°æŠ›å‡ºå¼‚å¸¸çš„</li>
</ul>
<h4 id="åŒæ­¥ä¸Šä¸‹æ–‡">åŒæ­¥ä¸Šä¸‹æ–‡</h4>
<ul>
<li><em><strong>å¦‚æœåŒæ­¥ä¸Šä¸‹æ–‡å‡ºç°äº†ï¼Œé‚£ä¹ˆoncompletedä¼šè‡ªåŠ¨æ•è·å®ƒï¼Œå¹¶å°†continuationæäº¤åˆ°è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­ã€‚è¿™ä¸€ç‚¹åœ¨å¯Œå®¢æˆ·ç«¯åº”ç”¨ä¸­éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºä»–ä¼šæŠŠcontinuationæ”¾å›åˆ°uiçº¿ç¨‹ä¸­</strong></em></li>
<li>å¦‚æœç¼–å†™çš„æ˜¯ä¸€ä¸ªåº“ï¼Œåˆ™ä¸å¸Œæœ›å‡ºç°ä¸Šè¿°è¡Œä¸ºï¼Œå› ä¸ºå¼€é”€è¾ƒå¤§çš„uiçº¿ç¨‹åˆ‡æ¢åº”è¯¥åœ¨ç¨‹åºè¿è¡Œç¦»å¼€åº“çš„æ—¶å€™åªå‘ç”Ÿä¸€æ¬¡ï¼Œè€Œä¸æ˜¯å‡ºç°åœ¨æ–¹æ³•è°ƒç”¨ä¹‹é—´ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨configureawaitæ–¹æ³•æ¥é¿å…è¿™ç§è¡Œä¸º</li>
</ul>
<p><figure 
	>
	<a href="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210126170725006.png" >
		<img src="/%e7%9c%9f%e4%bc%9aCSharp%e5%90%97%e5%98%bb%e5%98%bb%e5%98%bb%e5%ad%a6%e4%b9%a0%e6%96%87%e6%a1%a3.assets/image-20210126170725006.png"
			
			
			
			loading="lazy"
			alt="image-20210126170725006">
	</a>
	
	<figcaption>image-20210126170725006</figcaption>
	
</figure></p>
<ul>
<li>å¦‚æœæ²¡æœ‰åŒæ­¥ä¸Šä¸‹æ–‡å‡ºç°ï¼Œæˆ–è€…ä½ ä½¿ç”¨çš„æ˜¯configureawait(false)ï¼Œé‚£ä¹ˆcontinuationä¼šè¿è¡Œåœ¨å…ˆå‰taskçš„åŒä¸€ä¸ªçº¿ç¨‹ä¸Šï¼Œä»è€Œé¿å…ä¸å¿…è¦çš„å¼€é”€</li>
</ul>
<h4 id="continuewith"><em>ContinueWith</em></h4>
<ul>
<li><em><strong>å¦ä¸€ç§é™„åŠ continuationçš„æ–¹å¼æ˜¯è°ƒç”¨taskçš„continuewithæ–¹æ³•</strong></em></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="n">Task</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">task</span> <span class="p">=</span> <span class="n">Task</span><span class="p">.</span><span class="n">Run</span><span class="p">(()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="n">Enumerable</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">3000000</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="p">.</span><span class="n">Count</span><span class="p">(</span><span class="n">n</span> <span class="p">=&gt;</span> <span class="n">Enumerable</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">Math</span><span class="p">.</span><span class="n">Sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">-</span> <span class="m">1</span><span class="p">).</span><span class="n">All</span><span class="p">(</span><span class="n">i</span> <span class="p">=&gt;</span> <span class="n">n</span> <span class="p">%</span> <span class="n">i</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">task</span><span class="p">.</span><span class="n">ContinueWith</span><span class="p">(</span><span class="n">task</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="kt">int?</span> <span class="n">result</span> <span class="p">=</span> <span class="n">task</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">ReadKey</span><span class="p">();</span> 
</span></span></code></pre></div><ul>
<li>
<p>continuewithæœ¬èº«è¿”å›ä¸€ä¸ªtaskï¼Œä»–å¯ä»¥ç”¨ä»–æ¥é™„åŠ æ›´å¤šçš„continuation</p>
</li>
<li>
<p>ä½†æ˜¯ï¼Œå¿…é¡»ç›´æ¥å¤„ç†aggregateexception</p>
<ul>
<li><em><strong>å¦‚æœtaskå‘ç”Ÿæ•…éšœï¼Œéœ€è¦å†™é¢å¤–çš„ä»£ç æ¥å§continuationç»™å°è£…ï¼ˆmarshalï¼‰åˆ°uiåº”ç”¨ä¸Š</strong></em></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="n">Task</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">task</span> <span class="p">=</span> <span class="n">Task</span><span class="p">.</span><span class="n">Run</span><span class="p">(()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="n">Enumerable</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">3000000</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="p">.</span><span class="n">Count</span><span class="p">(</span><span class="n">n</span> <span class="p">=&gt;</span> <span class="n">Enumerable</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">Math</span><span class="p">.</span><span class="n">Sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">-</span> <span class="m">1</span><span class="p">).</span><span class="n">All</span><span class="p">(</span><span class="n">i</span> <span class="p">=&gt;</span> <span class="n">n</span> <span class="p">%</span> <span class="n">i</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl">            <span class="n">task</span><span class="p">.</span><span class="n">ContinueWith</span><span class="p">(</span><span class="n">a</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">Result</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">UpdateUIMessageMethod1</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">Result</span><span class="p">.</span><span class="n">ToString</span><span class="p">());</span><span class="c1">//marshalè¿‡ç¨‹</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="p">);</span>
</span></span></code></pre></div><ul>
<li>åœ¨éuiä¸Šä¸‹æ–‡ä¸­ï¼Œè‹¥æƒ³è®©continuationå’Œtaskæ‰§è¡Œåœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸Šï¼Œå¿…é¡»æŒ‡å®štaskcontinuationoptions.executesynchronously,å¦åˆ™ä»–å°†å¼¹å›çº¿ç¨‹æ± </li>
</ul>
</li>
<li>
<p>continuewithå¯¹äºå¹¶è¡Œç¼–ç¨‹æ¥è¯´éå¸¸æœ‰ç”¨</p>
</li>
</ul>
<h4 id="taskcompletionsource">taskCompletionSource</h4>
<ul>
<li>task.run åˆ›å»ºtask</li>
<li>å¦ä¸€ç§æ–¹å¼å°±æ˜¯ç”¨taskcompletionsourceæ¥åˆ›å»ºtask</li>
<li>taskcompletionsourceè®©ä½ åœ¨ç¨åå¼€å§‹å’Œç»“æŸçš„ä»»æ„æ“ä½œä¸­åˆ›å»ºtask
<ul>
<li>ä»–ä¼šä¸ºä½ æä¾›ä¸€ä¸ªå¯æ‰‹åŠ¨æ‰§è¡Œçš„ä»å±task
<ul>
<li>æŒ‡ç¤ºæ“ä½œä½•æ—¶ç»“æŸæˆ–å‘ç”Ÿæ•…éšœ</li>
</ul>
</li>
</ul>
</li>
<li>ä»–å¯¹io-boundç±»å·¥ä½œæ¯”è¾ƒç†æƒ³
<ul>
<li>å¯ä»¥è·å¾—æ‰€æœ‰taskçš„å¥½å¤„ï¼ˆä¼ æ’­å€¼ã€å¼‚å¸¸ã€continuationï¼‰</li>
<li>ä¸éœ€è¦åœ¨æ“ä½œæ—¶é˜»å¡çº¿ç¨‹</li>
</ul>
</li>
</ul>
<h4 id="ä½¿ç”¨taskcompletionsource">ä½¿ç”¨taskcompletionsource</h4>
<ul>
<li>åˆå§‹åŒ–ä¸€ä¸ªå®ä¾‹å³å¯</li>
<li>ä»–æœ‰ä¸€ä¸ªtaskå±æ€§å¯ä»¥è¿”å›ä¸€ä¸ªtask</li>
<li>è¯¥taskå®Œå…¨ç”±taskcompletionsourceå¯¹è±¡æ§åˆ¶</li>
<li>è°ƒç”¨ä»»æ„ä¸€ä¸ªæ–¹æ³•éƒ½ä¼šç»™taskå‘ä¿¡å·ï¼š
<ul>
<li>å®Œæˆã€æ•…éšœã€å–æ¶ˆ</li>
</ul>
</li>
<li>è¿™äº›æ–¹æ³•åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œå¦‚æœå†æ¬¡è°ƒç”¨
<ul>
<li>setä¼šæŠ›å‡ºå¼‚å¸¸</li>
<li>tryä¼šè¿”å›false</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">taskCompletionSource</span> <span class="p">=</span> <span class="k">new</span> <span class="n">TaskCompletionSource</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;();</span>
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">Thread</span><span class="p">(()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">5000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">taskCompletionSource</span><span class="p">.</span><span class="n">SetResult</span><span class="p">(</span><span class="m">42</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">IsBackground</span> <span class="p">=</span> <span class="k">true</span>
</span></span><span class="line"><span class="cl">            <span class="p">}.</span><span class="n">Start</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">task</span> <span class="p">=</span> <span class="n">taskCompletionSource</span><span class="p">.</span><span class="n">Task</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">task</span><span class="p">.</span><span class="n">Result</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><h4 id="taskcompletionsourceçœŸæ­£é­”åŠ›">TaskcompletionsourceçœŸæ­£é­”åŠ›</h4>
<ul>
<li>å®ƒåˆ›å»ºtaskï¼Œä½†å¹¶ä¸å ç”¨çº¿ç¨‹</li>
</ul>
<h4 id="taskdelay">task.delay</h4>
<ul>
<li>ç›¸å½“äºå¼‚æ­¥ç‰ˆæœ¬çš„thread.sleep</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">      <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Task</span><span class="p">.</span><span class="n">Delay</span><span class="p">(</span><span class="m">5000</span><span class="p">).</span><span class="n">GetAwaiter</span><span class="p">().</span><span class="n">OnCompleted</span><span class="p">(()=&gt;</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="m">42</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Task</span><span class="p">.</span><span class="n">Delay</span><span class="p">(</span><span class="m">5000</span><span class="p">).</span><span class="n">ContinueWith</span><span class="p">(</span><span class="n">task</span> <span class="p">=&gt;</span> <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="m">42</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">ReadKey</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><h4 id="åŒæ­¥vså¼‚æ­¥">åŒæ­¥vså¼‚æ­¥</h4>
<ul>
<li>åŒæ­¥æ“ä½œä¼šè¿”å›è°ƒç”¨è€…ä¹‹å‰å®Œæˆå®ƒçš„å·¥ä½œ</li>
<li>å¼‚æ­¥æ“ä½œä¼šè¿”å›è°ƒç”¨è€…ä¹‹åå»åšä»–çš„å·¥ä½œï¼ˆå¤§éƒ¨åˆ†çš„ï¼‰
<ul>
<li>å¼‚æ­¥çš„æ–¹æ³•æ›´ä¸ºå°‘è§ï¼Œä¼šå¯ç”¨å¹¶å‘ï¼Œå› ä¸ºå®ƒçš„å·¥ä½œä¼šä¸è°ƒç”¨è€…å¹¶è¡Œæ‰§è¡Œ</li>
<li>å¼‚æ­¥æ–¹æ³•é€šå¸¸å¾ˆå¿«å°±ä¼šè¿”å›åˆ°è°ƒç”¨è€…ï¼Œå› æ­¤åˆå«éé˜»å¡æ–¹æ³•</li>
</ul>
</li>
<li>ç›®å‰è§åˆ°çš„å¤§éƒ¨åˆ†çš„ä¸€éƒ¨æ–¹æ³•éƒ½æ˜¯é€šç”¨ç›®çš„çš„
<ul>
<li>thread.start</li>
<li>task.run</li>
<li>å¯ä»¥å°†continuation é™„åŠ åˆ°taskçš„æ–¹æ³•</li>
</ul>
</li>
</ul>
<h3 id="å¼‚æ­¥ç¼–ç¨‹">å¼‚æ­¥ç¼–ç¨‹</h3>
<ul>
<li>å¼‚æ­¥ç¼–ç¨‹çš„åŸåˆ™æ˜¯å°†é•¿æ—¶é—´è¿è¡Œçš„å‡½æ•°å†™æˆå¼‚æ­¥çš„</li>
<li><em><strong>ä¼ ç»Ÿçš„åšæ³•æ˜¯å°†é•¿æ—¶é—´è¿è¡Œçš„å‡½æ•°å†™æˆåŒæ­¥çš„ï¼Œç„¶åä»æ–°çš„çº¿ç¨‹æˆ–taskè¿›è¡Œè°ƒç”¨ï¼Œä»è€ŒæŒ‰éœ€å¼•å…¥å¹¶å‘</strong></em></li>
<li><em><strong>ä¸Šè¿°å¼‚æ­¥æ–¹å¼çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒæ˜¯ä»é•¿æ—¶é—´è¿è¡Œå‡½æ•°çš„å†…éƒ¨å¯åŠ¨å¹¶å‘ã€‚è¿™æœ‰ä¸¤ç‚¹å¥½å¤„ï¼š</strong></em>
<ul>
<li>io-bound å¹¶å‘å¯ä¸ä½¿ç”¨çº¿ç¨‹æ¥å®ç°ã€‚å¯æé«˜å¯æ‰©å±•æ€§å’Œæ‰§è¡Œæ•ˆç‡</li>
<li><em><strong>å¯Œå®¢æˆ·ç«¯åœ¨workerçº¿ç¨‹ä¼šä½¿ç”¨æ›´å°‘çš„ä»£ç ï¼Œç®€åŒ–äº†çº¿ç¨‹å®‰å…¨æ€§</strong></em></li>
</ul>
</li>
</ul>
<h4 id="å¼‚æ­¥ç¼–ç¨‹çš„ä¸¤ç§ç”¨é€”">å¼‚æ­¥ç¼–ç¨‹çš„ä¸¤ç§ç”¨é€”</h4>
<ul>
<li>ç¼–å†™é«˜æ•ˆå¤„ç†å¤§é‡å¹¶å‘ioçš„åº”ç”¨ç¨‹åºï¼ˆå…¸å‹çš„ï¼šæœåŠ¡ç«¯åº”ç”¨ç¨‹åºï¼‰
<ul>
<li>æŒ‘æˆ˜å¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨ï¼ˆå› ä¸ºå…±äº«çŠ¶æ€é€šå¸¸æ˜¯æœ€å°åŒ–çš„ï¼‰ï¼Œè€Œæ˜¯æ‰§è¡Œæ•ˆç‡
<ul>
<li>ç‰¹åˆ«çš„ï¼Œæ¯ä¸ªç½‘ç»œè¯·æ±‚å¹¶ä¸ä¼šæ¶ˆè€—ä¸€ä¸ªçº¿ç¨‹</li>
</ul>
</li>
</ul>
</li>
<li>è°ƒç”¨å›¾ call graph</li>
<li><em><strong>åœ¨å¯Œå®¢æˆ·ç«¯åº”ç”¨é‡Œç®€åŒ–çº¿ç¨‹å®‰å…¨</strong></em>
<ul>
<li>å¦‚æœè°ƒç”¨å›¾ä¸­ä»»ä½•ä¸€ä¸ªæ“ä½œéƒ½æ˜¯é•¿æ—¶é—´è¿è¡Œçš„ï¼Œé‚£ä¹ˆæ•´ä¸ªcall graph å¿…é¡»è¿è¡Œåœ¨workerçº¿ç¨‹ä¸Šï¼Œä»¥ä¿è¯uiçš„å“åº”
<ul>
<li>å¾—åˆ°ä¸€ä¸ªæ¨ªè·¨å¤šä¸ªæ–¹æ³•çš„å•ä¸€å¹¶å‘æ“ä½œï¼ˆç²—ç²’åº¦ï¼‰</li>
<li>éœ€è¦ä¸ºcall graph ä¸­çš„æ¯ä¸ªæ–¹æ³•è€ƒè™‘çº¿ç¨‹å®‰å…¨</li>
</ul>
</li>
<li>å¼‚æ­¥çš„call graphï¼Œç›´åˆ°éœ€è¦æ‰å¼€å¯ä¸€ä¸ªçº¿ç¨‹ï¼Œé€šå¸¸è¾ƒæµ…ï¼ˆio-boundæ“ä½œå®Œå…¨ä¸éœ€è¦ï¼‰
<ul>
<li><em><strong>å…¶ä»–çš„æ–¹æ³•å¯ä»¥åœ¨uiçº¿ç¨‹æ‰§è¡Œï¼Œçº¿ç¨‹å®‰å…¨å¾—åˆ°ç®€åŒ–</strong></em></li>
<li>å¹¶å‘çš„ç²’åº¦é€‚ä¸­
<ul>
<li><em><strong>ä¸€è¿ä¸²å°çš„å¹¶å‘æ“ä½œï¼Œæ“ä½œä¹‹é—´ä¼šå¼¹å›åˆ°uiçº¿ç¨‹</strong></em></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="ç»éªŒä¹‹è°ˆ">ç»éªŒä¹‹è°ˆ</h4>
<ul>
<li>ä¸ºäº†è·å¾—ä¸Šè¿°å¥½å¤„ï¼Œå»ºè®®ä¸‹åˆ—æ“ä½œä½¿ç”¨å¼‚æ­¥ç¼–å†™ï¼š
<ul>
<li>io-boundå’Œcompute-boundæ“ä½œ</li>
<li>æ‰§è¡Œè¶…è¿‡50msçš„æ“ä½œ</li>
</ul>
</li>
<li>å¦ä¸€æ–¹é¢è¿‡ç»†çš„ç²’åº¦ä¼šæŸå®³æ€§èƒ½ï¼Œå› ä¸ºå¼‚æ­¥æ“ä½œä¹Ÿæœ‰å¼€é”€</li>
</ul>
<h4 id="å¼‚æ­¥ç¼–ç¨‹å’Œcontinuation">å¼‚æ­¥ç¼–ç¨‹å’Œcontinuation</h4>
<ul>
<li>taskéå¸¸é€‚åˆå¼‚æ­¥ç¼–ç¨‹ï¼Œå› ä¸ºä»–ä»¬æ”¯æŒcontinuationï¼ˆå®ƒå¯¹å¼‚æ­¥éå¸¸é‡è¦ï¼‰
<ul>
<li>taskcompletionsourceæ˜¯å®ç°åº•å±‚io-boundå¼‚æ­¥æ–¹æ³•çš„ä¸€ç§æ ‡å‡†æ–¹å¼</li>
</ul>
</li>
<li>å¯¹äºcompute-boundæ–¹æ³•ï¼Œtask.runä¼šåˆå§‹åŒ–ç»‘å®šçº¿ç¨‹çš„å¹¶å‘
<ul>
<li>æŠŠtaskè¿”å›è°ƒç”¨è€…ï¼Œåˆ›å»ºå¼‚æ­¥æ–¹æ³•</li>
<li>å¼‚æ­¥ç¼–ç¨‹çš„åŒºåˆ«ï¼šç›®æ ‡æ˜¯åœ¨è°ƒç”¨å›¾è¾ƒä½çš„ä½ç½®æ¥è¿™æ ·åš
<ul>
<li><em><strong>å¯Œå®¢æˆ·ç«¯åº”ç”¨ä¸­ï¼Œé«˜çº§æ–¹æ³•å¯ä»¥ä¿ç•™åœ¨uiçº¿ç¨‹å’Œè®¿é—®æ§åˆ¶ä»¥åŠå…±äº«çŠ¶æ€ä¸Šï¼Œä¸ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜</strong></em></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">        <span class="c1">// static void Main(string[] args)</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// {</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//     // DisplayPrimeCounts();//åŒæ­¥å†™æ³•</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//     Task.Run(DisplayPrimeCounts);//ç²—ç²’åº¦å¼‚æ­¥å†™æ³•</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//     Thread.Sleep(500);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//     Console.WriteLine(&#34;lalala&#34;);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//     Console.ReadKey();</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// }</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Task</span><span class="p">.</span><span class="n">Run</span><span class="p">(</span><span class="n">DisplayPrimeCountsAsync</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">ReadKey</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">DisplayPrimeCounts</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="m">10</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">GetPrimesCount</span><span class="p">(</span><span class="n">i</span> <span class="p">*</span> <span class="m">1000000</span> <span class="p">+</span> <span class="m">2</span><span class="p">,</span> <span class="m">1000000</span><span class="p">)</span> <span class="p">+</span> <span class="s">&#34;primes between &#34;</span> <span class="p">+</span> <span class="p">(</span><span class="n">i</span> <span class="p">+</span> <span class="m">1000000</span><span class="p">)</span> <span class="p">+</span> <span class="s">&#34;and&#34;</span><span class="p">+</span>
</span></span><span class="line"><span class="cl">                                  <span class="p">((</span><span class="n">i</span><span class="p">+</span><span class="m">1</span><span class="p">)*</span><span class="m">1000000</span><span class="p">-</span><span class="m">1</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;done!&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">void</span> <span class="n">DisplayPrimeCountsAsync</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="m">10</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="kt">var</span> <span class="n">taskAwaiter</span> <span class="p">=</span> <span class="n">GetPrimesCountAsync</span><span class="p">(</span><span class="n">i</span> <span class="p">*</span> <span class="m">1000000</span> <span class="p">+</span> <span class="m">2</span><span class="p">,</span> <span class="m">1000000</span><span class="p">).</span><span class="n">GetAwaiter</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                <span class="n">taskAwaiter</span><span class="p">.</span><span class="n">OnCompleted</span><span class="p">(()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">taskAwaiter</span><span class="p">.</span><span class="n">GetResult</span><span class="p">()+</span> <span class="s">&#34;primes between &#34;</span> <span class="p">+</span> <span class="p">(</span><span class="n">i</span> <span class="p">+</span> <span class="m">1000000</span><span class="p">)</span> <span class="p">+</span> <span class="s">&#34;and&#34;</span> <span class="p">+</span>
</span></span><span class="line"><span class="cl">                                      <span class="p">((</span><span class="n">i</span> <span class="p">+</span> <span class="m">1</span><span class="p">)</span> <span class="p">*</span> <span class="m">1000000</span> <span class="p">-</span> <span class="m">1</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">                <span class="p">});</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;done!&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="kt">int</span> <span class="n">GetPrimesCount</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">ParallelEnumerable</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">.</span><span class="n">Count</span><span class="p">(</span><span class="n">n</span> <span class="p">=&gt;</span> <span class="n">Enumerable</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">Math</span><span class="p">.</span><span class="n">Sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">-</span> <span class="m">1</span><span class="p">).</span><span class="n">All</span><span class="p">(</span><span class="n">i</span> <span class="p">=&gt;</span> <span class="n">n</span> <span class="p">%</span> <span class="n">i</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="n">Task</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">GetPrimesCountAsync</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">Task</span><span class="p">.</span><span class="n">FromResult</span><span class="p">(</span><span class="n">ParallelEnumerable</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">.</span><span class="n">Count</span><span class="p">(</span><span class="n">n</span> <span class="p">=&gt;</span> <span class="n">Enumerable</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">Math</span><span class="p">.</span><span class="n">Sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">-</span> <span class="m">1</span><span class="p">).</span><span class="n">All</span><span class="p">(</span><span class="n">i</span> <span class="p">=&gt;</span> <span class="n">n</span> <span class="p">%</span> <span class="n">i</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><h4 id="è¯­è¨€å¯¹å¼‚æ­¥çš„æ”¯æŒéå¸¸é‡è¦">è¯­è¨€å¯¹å¼‚æ­¥çš„æ”¯æŒéå¸¸é‡è¦</h4>
<ul>
<li>
<p>éœ€è¦å¯¹taskçš„æ‰§è¡Œåºåˆ—åŒ–</p>
<ul>
<li><em><strong>ä¾‹å¦‚task b ä¾èµ–äº task a çš„æ‰§è¡Œç»“æœ</strong></em></li>
<li>ä¸ºæ­¤ï¼Œå¿…é¡»åœ¨continuationå†…éƒ¨è§¦å‘ä¸‹ä¸€æ¬¡å¾ªç¯</li>
</ul>
</li>
<li>
<p>å¾ˆéº»çƒ¦ å› ä¸ºæˆ‘ä»¬å†³å®šå¼•å…¥ async å’Œawaitå…³é”®å­—</p>
<ul>
<li>å¯¹äºä¸æƒ³å¤æ‚çš„å®ç°å¼‚æ­¥éå¸¸é‡è¦</li>
</ul>
</li>
<li>
<p>å‘½ä»¤å¼å¾ªç¯ç»“æ„ä¸è¦å’Œcontinuationæ··åˆåœ¨ä¸€èµ·ï¼Œå› ä¸ºä»–ä»¬ä¾èµ–äºå½“å‰æœ¬åœ°çŠ¶æ€</p>
</li>
<li>
<p>å¦ä¸€ä¸ªå®ç°ï¼Œå‡½æ•°å¼å†™æ³•ï¼ˆlinqæŸ¥è¯¢ï¼‰, ä»–ä¹Ÿæ˜¯å“åº”å¼ç¼–ç¨‹ï¼ˆRxï¼‰çš„åŸºç¡€</p>
</li>
</ul>
<h4 id="å¼‚æ­¥å‡½æ•°">å¼‚æ­¥å‡½æ•°</h4>
<ul>
<li>asyncå’Œawaitå…³é”®å­—å¯ä»¥è®©ä½ å†™å‡ºå’ŒåŒæ­¥ä»£ç ä¸€æ ·ç®€æ´ä¸”ç»“æ„ç›¸åŒçš„å¼‚æ­¥ä»£ç </li>
</ul>
<h4 id="await">await</h4>
<ul>
<li><em><strong>awaitå…³é”®å­—ç®€åŒ–äº†é™„åŠ continuationçš„è¿‡ç¨‹</strong></em></li>
<li>ä»–çš„ä½œç”¨ç›¸å½“äº</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="kt">var</span> <span class="n">awaiter</span> <span class="p">=</span> <span class="n">expression</span><span class="p">.</span><span class="n">GetAwaiter</span><span class="p">()</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="n">awaiter</span><span class="p">.</span><span class="n">OnCompleted</span><span class="p">(()=&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="kt">var</span> <span class="n">result</span> <span class="p">=</span> <span class="n">awaiter</span><span class="p">.</span><span class="n">GetResult</span><span class="p">()</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">                        <span class="n">statement</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="p">;</span> 
</span></span><span class="line"><span class="cl">                    <span class="p">})</span>
</span></span></code></pre></div><h4 id="asyncä¿®é¥°ç¬¦">asyncä¿®é¥°ç¬¦</h4>
<ul>
<li>asyncä¿®é¥°ç¬¦ä¼šè®©ç¼–è¯‘å™¨æŠŠawaitå½“åšå…³é”®å­—è€Œä¸æ˜¯æ ‡è¯†ç¬¦ï¼ˆc# 5 ä»¥å‰å¯èƒ½ä¼šä½¿ç”¨awaitä½œä¸ºæ ‡è¯†ç¬¦ï¼‰</li>
<li>asyncä¿®é¥°ç¬¦æ™ºèƒ½åº”ç”¨äºæ–¹æ³•ï¼ˆåŒ…æ‹¬lambdaè¡¨è¾¾å¼ï¼‰
<ul>
<li>è¯¥æ–¹æ³•å¯ä»¥è¿”å›void / task / task<!-- raw HTML omitted --></li>
</ul>
</li>
<li><em><strong>asyncä¿®é¥°ç¬¦å¯¹æ–¹æ³•çš„ç­¾åæˆ–publicå…ƒæ•°æ®æ²¡æœ‰å½±å“ï¼ˆå’Œuisafeä¸€æ ·ï¼‰ï¼Œä»–åªä¼šå½±å“æ–¹æ³•å†…éƒ¨</strong></em>
<ul>
<li>åœ¨æ¥å£é‡Œä½¿ç”¨asyncæ˜¯æ²¡æœ‰æ„ä¹‰çš„</li>
<li>ä½¿ç”¨asyncæ¥é‡è½½éasyncæ–¹æ³•ç¡®å®åˆæ³•çš„</li>
</ul>
</li>
<li><em><strong>ä½¿ç”¨asyncä¿®é¥°ç¬¦çš„æ–¹æ³•å°±æ˜¯å¼‚æ­¥å‡½æ•°</strong></em></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">  <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">await</span> <span class="n">DisplayPrimeCountsAsync</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="n">DisplayPrimeCountsAsync</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="m">10</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="k">await</span> <span class="n">GetPrimesCountAsync</span><span class="p">(</span><span class="n">i</span> <span class="p">*</span> <span class="m">1000000</span> <span class="p">+</span> <span class="m">2</span><span class="p">,</span> <span class="m">1000000</span><span class="p">)</span> <span class="p">+</span> <span class="s">&#34;primes between &#34;</span> <span class="p">+</span> <span class="p">(</span><span class="n">i</span> <span class="p">+</span> <span class="m">1000000</span><span class="p">)</span> <span class="p">+</span> <span class="s">&#34;and&#34;</span> <span class="p">+</span>
</span></span><span class="line"><span class="cl">                                                                             <span class="p">((</span><span class="n">i</span> <span class="p">+</span> <span class="m">1</span><span class="p">)</span> <span class="p">*</span> <span class="m">1000000</span> <span class="p">-</span> <span class="m">1</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;Done!&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">GetPrimesCountAsync</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span> <span class="p">,</span> <span class="kt">int</span> <span class="n">count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="k">await</span> <span class="n">Task</span><span class="p">.</span><span class="n">FromResult</span><span class="p">(</span><span class="n">ParallelEnumerable</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">.</span><span class="n">Count</span><span class="p">(</span><span class="n">n</span> <span class="p">=&gt;</span> <span class="n">Enumerable</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">Math</span><span class="p">.</span><span class="n">Sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">-</span> <span class="m">1</span><span class="p">).</span><span class="n">All</span><span class="p">(</span><span class="n">i</span> <span class="p">=&gt;</span> <span class="n">n</span> <span class="p">%</span> <span class="n">i</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><h4 id="å¼‚æ­¥æ–¹æ³•å¦‚ä½•æ‰§è¡Œ">å¼‚æ­¥æ–¹æ³•å¦‚ä½•æ‰§è¡Œ</h4>
<ul>
<li>é‡åˆ°awaitè¡¨è¾¾å¼ï¼Œæ‰§è¡Œï¼ˆæ­£å¸¸æƒ…å†µä¸‹ï¼‰ä¼šè¿”å›è°ƒç”¨è€…
<ul>
<li>å°±åƒiteratoré‡Œé¢çš„yield return</li>
<li>åœ¨è¿”å›å‰ï¼Œè¿è¡Œæ—¶ä¼šé™„åŠ ä¸€ä¸ªcontinuationåˆ°awaitçš„task
<ul>
<li>ä¸ºä¿è¯taskç»“æŸæ—¶ï¼Œæ‰§è¡Œä¼šè·³å›åŸæ–¹æ³•ï¼Œä»åœæ­¢çš„åœ°æ–¹ç»§ç»­æ‰§è¡Œ</li>
</ul>
</li>
<li>å¦‚æœå‘ç”Ÿæ•…éšœï¼Œé‚£ä¹ˆå¼‚å¸¸ä¼šè¢«é‡æ–°æŠ›å‡º</li>
<li>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œé‚£ä¹ˆä»–çš„è¿”å›å€¼å°±ä¼šèµ‹ç»™awaitè¡¨è¾¾å¼   â€”å®é™…ä¸Šå°±æ˜¯è·Ÿé‚£ä¸ªawaiter å’Œ awaiter.oncompleted æ˜¯ä¸€æ ·çš„ï¼Œæ‰§è¡Œå®Œçš„å¾—åˆ°è¿”å›å€¼ç»§ç»­å‘ä¸‹æ‰§è¡Œ</li>
</ul>
</li>
</ul>
<h4 id="å¯ä»¥awaitä»€ä¹ˆ">å¯ä»¥awaitä»€ä¹ˆ</h4>
<ul>
<li>awaitçš„è¡¨è¾¾å¼é€šå¸¸æ˜¯ä¸€ä¸ªtask</li>
<li>ä¹Ÿå¯ä»¥æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„ä»»æ„å¯¹è±¡
<ul>
<li>æœ‰getawaiteræ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªawaiter</li>
<li>è¿”å›é€‚å½“ç±»å‹çš„getresultæ–¹æ³•</li>
<li>ä¸€ä¸ªboolç±»å‹çš„iscompletedå±æ€§</li>
</ul>
</li>
</ul>
<h4 id="æ•è·æœ¬åœ°çŠ¶æ€">æ•è·æœ¬åœ°çŠ¶æ€</h4>
<ul>
<li>awaitè¡¨è¾¾å¼æœ€ç‰›çš„åœ°æ–¹åœ¨äºä»–å‡ ä¹å¯ä»¥å‡ºç°åœ¨ä»»ä½•åœ°æ–¹</li>
<li>ç‰¹åˆ«çš„ï¼Œåœ¨å¼‚æ­¥æ–¹æ³•å†…ï¼Œawaitè¡¨è¾¾å¼å¯ä»¥æ›¿æ¢ä»»ä½•è¡¨è¾¾å¼
<ul>
<li>é™¤äº†lockè¡¨è¾¾å¼å’Œunsafeä¸Šä¸‹æ–‡</li>
</ul>
</li>
</ul>
<h4 id="awaitä¹‹ååœ¨å“ªä¸ªçº¿ç¨‹ä¸Šæ‰§è¡Œ">awaitä¹‹ååœ¨å“ªä¸ªçº¿ç¨‹ä¸Šæ‰§è¡Œ</h4>
<ul>
<li>åœ¨awaitè¡¨è¾¾å¼ä¹‹åï¼Œç¼–è¯‘å™¨ä¾èµ–äºcontinuationï¼ˆé€šè¿‡awaiteræ¨¡å¼ï¼‰æ¥ç»§ç»­æ‰§è¡Œ</li>
<li><em><strong>å¦‚æœåœ¨å¯Œå®¢æˆ·ç«¯åº”ç”¨çš„uiçº¿ç¨‹ä¸Šï¼ŒåŒæ­¥ä¸Šä¸‹æ–‡ä¼šä¿è¯åç»­æ˜¯åœ¨åŸçº¿ç¨‹ä¸Šæ‰§è¡Œ</strong></em></li>
<li>å¦åˆ™ï¼Œå°±ä¼šåœ¨taskç»“æŸçš„çº¿ç¨‹ä¸Šç»§ç»­æ‰§è¡Œ</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">  <span class="k">private</span> <span class="k">void</span> <span class="n">button2_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Go();</span>
</span></span><span class="line"><span class="cl">            <span class="n">GoAsync</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">async</span> <span class="k">void</span> <span class="n">GoAsync</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">button2</span><span class="p">.</span><span class="n">Enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="m">5</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">textBox2</span><span class="p">.</span><span class="n">Text</span> <span class="p">+=</span> <span class="k">await</span> <span class="n">GetPrimesCountAsync</span><span class="p">(</span><span class="n">i</span> <span class="p">*</span> <span class="m">1000000</span><span class="p">,</span> <span class="m">1000000</span><span class="p">)</span> <span class="p">+</span> <span class="s">&#34; primes between &#34;</span> <span class="p">+</span> <span class="s">&#34; and &#34;</span> <span class="p">+</span>
</span></span><span class="line"><span class="cl">                                 <span class="p">((</span><span class="n">i</span> <span class="p">+</span> <span class="m">1</span><span class="p">)</span> <span class="p">*</span> <span class="m">1000000</span> <span class="p">-</span> <span class="m">1</span><span class="p">)</span> <span class="p">+</span>
</span></span><span class="line"><span class="cl">                                 <span class="n">Environment</span><span class="p">.</span><span class="n">NewLine</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">button2</span><span class="p">.</span><span class="n">Enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">         <span class="n">Task</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">GetPrimesCountAsync</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span>  <span class="n">Task</span><span class="p">.</span><span class="n">Run</span><span class="p">(()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="n">ParallelEnumerable</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="p">.</span><span class="n">Count</span><span class="p">(</span><span class="n">n</span> <span class="p">=&gt;</span> <span class="n">Enumerable</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">Math</span><span class="p">.</span><span class="n">Sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">-</span> <span class="m">1</span><span class="p">).</span><span class="n">All</span><span class="p">(</span><span class="n">i</span> <span class="p">=&gt;</span> <span class="n">n</span> <span class="p">%</span> <span class="n">i</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><h4 id="ui-ä¸Šçš„await"><em><strong>UI ä¸Šçš„await</strong></em></h4>
<ul>
<li><em><strong>åªæœ‰getprimescountasyncæ˜¯åœ¨workerçº¿ç¨‹ä¸Šè¿è¡Œçš„</strong></em></li>
<li>goä¸­çš„ä»£ç ä¼šâ€œç§Ÿç”¨â€uiçº¿ç¨‹ä¸Šçš„æ—¶é—´</li>
<li>å¯ä»¥è¯´ï¼šGoæ˜¯åœ¨æ¶ˆæ¯å¾ªç¯ä¸­ä¼ªå¹¶å‘çš„æ‰§è¡Œ
<ul>
<li><em><strong>ä¹Ÿå°±æ˜¯è¯´ï¼šå®ƒå’Œuiçº¿ç¨‹å¤„ç†çš„å…¶ä»–æ—¶é—´æ˜¯ç©¿æ’æ‰§è¡Œçš„</strong></em></li>
<li>å› ä¸ºè¿™ç§ä¼ªå¹¶å‘ï¼Œå”¯ä¸€å¯èƒ½å‘ç”ŸæŠ¢å çš„æ—¶åˆ»å°±æ˜¯åœ¨awaitæœŸé—´
<ul>
<li>è¿™å…¶å®ç®€åŒ–äº†çº¿ç¨‹å®‰å…¨ï¼Œé˜²æ­¢é‡æ–°è¿›å…¥å³å¯</li>
</ul>
</li>
</ul>
</li>
<li>è¿™ç§å¹¶å‘å‘ç”Ÿåœ¨è°ƒç”¨æ ˆæ¯”è¾ƒæµ…çš„åœ°æ–¹ï¼ˆrask.runè°ƒç”¨çš„ä»£ç é‡Œï¼‰</li>
<li>ä¸ºäº†ä»è¯¥æ¨¡å‹ä¸­è·ç›Šï¼ŒçœŸæ­£çš„å¹¶å‘ä»£ç è¦é¿å…è®¿é—®å…±äº«çŠ¶æ€æˆ–uiæ§ä»¶</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">   <span class="k">private</span> <span class="k">void</span> <span class="n">button2_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Go();</span>
</span></span><span class="line"><span class="cl">            <span class="n">GoAsync</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">async</span> <span class="k">void</span> <span class="n">GoAsync</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">button2</span><span class="p">.</span><span class="n">Enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="m">5</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">textBox2</span><span class="p">.</span><span class="n">Text</span> <span class="p">+=</span> <span class="k">await</span> <span class="n">GetPrimesCountAsync</span><span class="p">(</span><span class="n">i</span> <span class="p">*</span> <span class="m">1000000</span><span class="p">,</span> <span class="m">1000000</span><span class="p">)</span> <span class="p">+</span> <span class="s">&#34; primes between &#34;</span> <span class="p">+</span> <span class="s">&#34; and &#34;</span> <span class="p">+</span>
</span></span><span class="line"><span class="cl">                                 <span class="p">((</span><span class="n">i</span> <span class="p">+</span> <span class="m">1</span><span class="p">)</span> <span class="p">*</span> <span class="m">1000000</span> <span class="p">-</span> <span class="m">1</span><span class="p">)</span> <span class="p">+</span>
</span></span><span class="line"><span class="cl">                                 <span class="n">Environment</span><span class="p">.</span><span class="n">NewLine</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">button2</span><span class="p">.</span><span class="n">Enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">         <span class="n">Task</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">GetPrimesCountAsync</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span>  <span class="n">Task</span><span class="p">.</span><span class="n">Run</span><span class="p">(()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="n">ParallelEnumerable</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="p">.</span><span class="n">Count</span><span class="p">(</span><span class="n">n</span> <span class="p">=&gt;</span> <span class="n">Enumerable</span><span class="p">.</span><span class="n">Range</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">Math</span><span class="p">.</span><span class="n">Sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">-</span> <span class="m">1</span><span class="p">).</span><span class="n">All</span><span class="p">(</span><span class="n">i</span> <span class="p">=&gt;</span> <span class="n">n</span> <span class="p">%</span> <span class="n">i</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><ul>
<li><em><strong>å› ä¸ºåœ¨uiçº¿ç¨‹ä¸Šawait ï¼Œ continuationå°†å‘é€åˆ°åŒæ­¥ä¸Šä¸‹æ–‡ä¸­ï¼Œè¯¥åŒæ­¥ä¸Šä¸‹æ–‡é€šè¿‡æ¶ˆæ¯å¾ªç¯æ‰§è¡Œï¼Œæ¥ä¿è¯æ•´ä¸ªgoæ–¹æ³•ä¼ªå¹¶å‘çš„åœ¨uiçº¿ç¨‹ä¸Šè¿è¡Œ</strong></em></li>
</ul>
<h4 id="å’Œç²—ç²’åº¦çš„å¹¶å‘ç›¸æ¯”">å’Œç²—ç²’åº¦çš„å¹¶å‘ç›¸æ¯”</h4>
<ul>
<li>æ•´ä¸ªåŒæ­¥è°ƒç”¨å›¾éƒ½åœ¨workerçº¿ç¨‹ä¸Š</li>
<li>å¿…é¡»åœ¨ä»£ç ä¸­åˆ°å¤„ä½¿ç”¨dispatcher.begininvoke</li>
<li>å¼•å…¥äº†race condition</li>
<li>å¾ªç¯æœ¬çœåœ¨workerçº¿ç¨‹ä¸Š</li>
<li>è‹¥å®ç°å–æ¶ˆæˆ–è€…è¿‡ç¨‹æŠ¥å‘Šï¼Œä¼šä½¿å¾—çº¿ç¨‹å®‰å…¨é—®é¢˜æ›´å®¹æ˜“å‘ç”Ÿï¼Œåœ¨æ–¹æ³•ä¸­æ–°æ·»åŠ ä»»ä½•ä»£ç ä¹Ÿæ˜¯åŒæ ·çš„æ•ˆæœ</li>
</ul>
<h4 id="ç¼–å†™å¼‚æ­¥å‡½æ•°">ç¼–å†™å¼‚æ­¥å‡½æ•°</h4>
<ul>
<li>å¯¹äºä»»ä½•å¼‚æ­¥å‡½æ•°ï¼Œä½ å¯ä»¥ä½¿ç”¨taskä»£æ›¿voidä½œä¸ºè¿”å›ç±»å‹ï¼Œè®©è¯¥æ–¹æ³•ç§°ä¸ºæ›´æœ‰æ•ˆçš„å¼‚æ­¥ï¼ˆå¯ä»¥è¿›è¡Œawaitï¼‰</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">  <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// PrintAnswerToLife();  //å¦‚æœä¸ä½¿ç”¨å¼‚æ­¥å…³é”®å­—ï¼Œä¼šå¯¼è‡´å¹¶è¡Œæ‰§è¡Œ  ï¼Œ åˆç”±äºæ˜¯taskçº¿ç¨‹æ± ï¼Œæ˜¯åå°è¿›ç¨‹ï¼Œå‰å°è¿›ç¨‹æ‰§è¡Œå®Œæ¯•å°±å…³äº†ï¼Œæ‰€ä»¥ç¨‹åºè¿˜æ²¡è¾“å‡º42å°±åœäº†</span>
</span></span><span class="line"><span class="cl">            <span class="k">await</span> <span class="n">PrintAnswerToLife</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="n">PrintAnswerToLife</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">await</span> <span class="n">Task</span><span class="p">.</span><span class="n">Delay</span><span class="p">(</span><span class="m">5000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">answer</span> <span class="p">=</span> <span class="m">21</span> <span class="p">*</span> <span class="m">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">answer</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><ul>
<li>å¹¶ä¸éœ€è¦åœ¨æ–¹æ³•ä½“ä¸­æ˜¾å¼çš„è¿”å›taskã€‚ç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªtaskï¼ˆå½“æ–¹æ³•å®Œæˆæˆ–è€…å‘ç”Ÿå¼‚å¸¸æ—¶ï¼‰ï¼Œè¿™ä½¿å¾—åˆ›å»ºå¼‚æ­¥çš„è°ƒç”¨é“¾éå¸¸æ–¹ä¾¿å•Š</li>
<li>ç¼–è¯‘å™¨ä¼šè¿”å›taskçš„å¼‚æ­¥å‡½æ•°æ¥è¿›è¡Œæ‰©å±•ï¼Œä½¿å…¶æˆä¸ºå½“å‘é€ä¿¡å·æˆ–å‘ç”Ÿæ•…éšœæ—¶ä½¿ç”¨taskcompletionsourceæ¥åˆ›å»ºtaskä»£ç </li>
<li>å› æ­¤ï¼Œå½“è¿”å›taskçš„å¼‚æ­¥æ–¹æ³•ç»“æŸçš„æ—¶å€™ï¼Œæ‰§è¡Œå°±ä¼šè·³å›åˆ°å¯¹å®ƒè¿›è¡Œawaitçš„åœ°æ–¹ï¼ˆé€šè¿‡continuationï¼‰</li>
</ul>
<h4 id="ç¼–å†™å¼‚æ­¥å‡½æ•°åœ¨å¯Œå®¢æˆ·ç«¯åœºæ™¯ä¸‹">ç¼–å†™å¼‚æ­¥å‡½æ•°åœ¨å¯Œå®¢æˆ·ç«¯åœºæ™¯ä¸‹</h4>
<ul>
<li>å¯Œå®¢æˆ·ç«¯åœºæ™¯ä¸‹ï¼Œæ‰§è¡Œåœ¨æ­¤åˆ»ä¼šè·³å›åˆ°uiçº¿ç¨‹ï¼ˆå¦‚æœç›®å‰ä¸åœ¨uiçº¿ç¨‹çš„è¯ï¼‰</li>
<li>å¦åˆ™ï¼Œå°±åœ¨continuationè¿”å›çš„ä»»æ„çº¿ç¨‹ä¸Šç»§ç»­è¿è¡Œ</li>
<li>è¿™æ„å‘³ç€ï¼Œåœ¨å¼‚æ­¥è°ƒç”¨å›¾ä¸­å‘ä¸Šå†’æ³¡çš„æ—¶å€™ï¼Œä¸ä¼šå‘ç”Ÿå»¶è¿Ÿæˆæœ¬ï¼Œé™¤éæ˜¯uiçº¿ç¨‹å¯åŠ¨çš„ç¬¬ä¸€æ¬¡åå¼¹</li>
</ul>
<h4 id="è¿”å›tasktresult">è¿”å›task<!-- raw HTML omitted --></h4>
<ul>
<li>å¦‚æœæ–¹æ³•ä½“è¿”å›tresult ï¼Œ é‚£ä¹ˆå¼‚æ­¥æ–¹æ³•å°±å¯ä»¥è¿”å›task<!-- raw HTML omitted --></li>
<li>å…¶åŸç†å°±æ˜¯ç»™taskcompletionsourceå‘é€çš„ä¿¡å·å¸¦æœ‰å€¼ï¼Œè€Œä¸æ˜¯null</li>
<li>ä¸åŒæ­¥ç¼–ç¨‹å¾ˆç›¸ä¼¼ï¼Œæ˜¯æ•…æ„è¿™æ ·è®¾è®¡çš„</li>
</ul>
<h4 id="cä¸­å¦‚ä½•è®¾è®¡å¼‚æ­¥å‡½æ•°"><em>C#ä¸­å¦‚ä½•è®¾è®¡å¼‚æ­¥å‡½æ•°</em></h4>
<ul>
<li>ä»¥åŒæ­¥çš„æ–¹å¼ç¼–å†™å‡½æ•°</li>
<li>ä½¿ç”¨å¼‚æ­¥è°ƒç”¨æ¥ä»£æ›¿åŒæ­¥è°ƒç”¨ï¼Œå¹¶ä¸”è¿›è¡Œawait</li>
<li>é™¤äº†é¡¶å±‚æ–¹æ³•å¤–ï¼ˆUIæ§ä»¶çš„event handlerï¼‰ï¼ŒæŠŠä½ çš„æ–¹æ³•çš„è¿”å›ç±»å‹å‡çº§ä¸ºtaskæˆ–task<!-- raw HTML omitted -->,è¿™æ ·ä»–ä»¬å°±å¯ä»¥è¿›è¡Œawaitäº†</li>
</ul>
<h4 id="ç¼–è¯‘å™¨èƒ½å¯¹å¼‚æ­¥å‡½æ•°ç”Ÿæˆtaskæ„å‘³ç€ä»€ä¹ˆ">ç¼–è¯‘å™¨èƒ½å¯¹å¼‚æ­¥å‡½æ•°ç”Ÿæˆtaskæ„å‘³ç€ä»€ä¹ˆ</h4>
<ul>
<li>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ åªéœ€è¦åœ¨åˆå§‹åŒ–io-boundå¹¶å‘çš„åº•å±‚æ–¹æ³•é‡Œæ˜¾å¼çš„åˆå§‹åŒ–taskcompletionsourceï¼Œè¿™ç§æƒ…å†µå¾ˆå°‘è§</li>
<li>é’ˆå¯¹åˆå§‹åŒ–compute-boundçš„å¹¶å‘æ–¹æ³•ï¼Œä½ å¯ä»¥ä½¿ç”¨task.runæ¥åˆ›å»ºtask</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"> <span class="k">class</span> <span class="nc">Program</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">await</span> <span class="n">Go</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="n">Go</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">printAnswerToLife</span> <span class="p">=</span> <span class="n">PrintAnswerToLife</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">await</span> <span class="n">printAnswerToLife</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;Done!&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="n">PrintAnswerToLife</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">answerToLife</span> <span class="p">=</span> <span class="n">GetAnswerToLife</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">toLife</span> <span class="p">=</span> <span class="k">await</span> <span class="n">answerToLife</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">toLife</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">GetAnswerToLife</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">delay</span> <span class="p">=</span> <span class="n">Task</span><span class="p">.</span><span class="n">Delay</span><span class="p">(</span><span class="m">5000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">await</span> <span class="n">delay</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">answer</span> <span class="p">=</span> <span class="m">21</span> <span class="p">*</span> <span class="m">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">answer</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><h4 id="å¼‚æ­¥è°ƒç”¨å›¾æ‰§è¡Œ">å¼‚æ­¥è°ƒç”¨å›¾æ‰§è¡Œ</h4>
<ul>
<li>æ•´ä¸ªæ‰§è¡Œä¸åŒæ­¥ä¾‹å­ä¸­è°ƒç”¨å›¾çš„é¡ºåºä¸€æ ·ï¼Œå› ä¸ºæˆ‘ä»¬å¯¹æ¯ä¸ªå¼‚æ­¥å‡½æ•°çš„è°ƒç”¨éƒ½è¿›è¡Œäº†await</li>
<li>åœ¨è°ƒç”¨å›¾ä¸­åˆ›å»ºäº†ä¸€ä¸ªæ²¡æœ‰å¹¶è¡Œå’Œé‡å çš„è¿ç»­æµ</li>
<li>æ¯ä¸ªawaitåœ¨æ‰§è¡Œä¸­éƒ½åˆ›å»ºäº†ä¸€ä¸ªé—´éš™ï¼Œåœ¨é—´éš™åï¼Œç¨‹åºå¯ä»¥ä»ä¸­æ–­å¤„æ¢å¤æ‰§è¡Œ</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="k">private</span> <span class="k">void</span> <span class="n">button3_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Go1</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">         <span class="k">async</span> <span class="k">void</span> <span class="n">Go1</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">printAnswerToLife</span> <span class="p">=</span> <span class="n">PrintAnswerToLife</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">await</span> <span class="n">printAnswerToLife</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">textBox3</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="s">&#34;Done!&#34;</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">         <span class="k">async</span> <span class="n">Task</span> <span class="n">PrintAnswerToLife</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">answerToLife</span> <span class="p">=</span> <span class="n">GetAnswerToLife</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">toLife</span> <span class="p">=</span> <span class="k">await</span> <span class="n">answerToLife</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">textBox3</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="n">toLife</span><span class="p">.</span><span class="n">ToString</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">         <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">GetAnswerToLife</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">var</span> <span class="n">delay</span> <span class="p">=</span> <span class="n">Task</span><span class="p">.</span><span class="n">Delay</span><span class="p">(</span><span class="m">5000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">await</span> <span class="n">delay</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">answer</span> <span class="p">=</span> <span class="m">21</span> <span class="p">*</span> <span class="m">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">answer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><h4 id="å¹¶è¡Œparallelism">å¹¶è¡ŒParallelism</h4>
<ul>
<li>ä¸é€‚ç”¨awaitæ¥è°ƒç”¨å¼‚æ­¥å‡½æ•°ä¼šå¯¼è‡´å¹¶è¡Œæ‰§è¡Œçš„å‘ç”Ÿ
<ul>
<li>ç¡®å®ä¹Ÿèƒ½æ»¡è¶³ä¿æŒuiå“åº”çš„å¹¶å‘è¦æ±‚</li>
</ul>
</li>
<li>åŒæ ·ï¼Œå¯ä»¥å¹¶è¡Œè·‘ä¸¤ä¸ªæ“ä½œ</li>
</ul>
<h4 id="å¼‚æ­¥lambdaè¡¨è¾¾å¼">å¼‚æ­¥lambdaè¡¨è¾¾å¼</h4>
<ul>
<li>åŒ¿åæ–¹æ³•ï¼ˆåŒ…æ‹¬lambdaè¡¨è¾¾å¼ï¼‰ï¼Œé€šè¿‡ä½¿ç”¨asyncä¹Ÿå¯ä»¥å˜æˆå¼‚æ­¥æ–¹æ³•</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">   <span class="k">static</span> <span class="k">async</span>  <span class="n">Task</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Func</span><span class="p">&lt;</span><span class="n">Task</span><span class="p">&gt;</span> <span class="n">func</span> <span class="p">=</span> <span class="k">async</span> <span class="p">()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">await</span> <span class="n">Task</span><span class="p">.</span><span class="n">Delay</span><span class="p">(</span><span class="m">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;Foo&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">await</span> <span class="n">NamedMethod</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">await</span> <span class="n">func</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="n">NamedMethod</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">await</span> <span class="n">Task</span><span class="p">.</span><span class="n">Delay</span><span class="p">(</span><span class="m">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;Foo1&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><ul>
<li>è°ƒç”¨æ–¹å¼ä¹Ÿæ˜¯ä¸€æ ·æ ·çš„</li>
<li>é™„åŠ  event handler çš„æ—¶å€™ä¹Ÿå¯ä»¥ä½¿ç”¨å¼‚æ­¥lambdaè¡¨è¾¾å¼</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">    <span class="c1">// this.button3.Click += async (sender,args) =&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// {</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//     await Task.Delay(1000);</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//     button3.Text = &#34;comeon baby&#34;; </span>
</span></span><span class="line"><span class="cl">            <span class="c1">// };</span>
</span></span></code></pre></div><ul>
<li>ä¹Ÿå¯ä»¥è¿”å›task<!-- raw HTML omitted --></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">   <span class="n">Func</span><span class="p">&lt;</span><span class="n">Task</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;&gt;</span> <span class="n">func</span> <span class="p">=</span> <span class="k">async</span> <span class="p">()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">await</span> <span class="n">Task</span><span class="p">.</span><span class="n">Delay</span><span class="p">(</span><span class="m">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&#34;Foo&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="m">123</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">            <span class="p">};</span>
</span></span></code></pre></div><h4 id="å‘å¸ƒå¼‚å¸¸">å‘å¸ƒå¼‚å¸¸</h4>
<ul>
<li>å¯Œå®¢æˆ·ç«¯åº”ç”¨é€šå¸¸ä¾èµ–äºé›†ä¸­çš„å¼‚å¸¸å¤„ç†äº‹ä»¶æ¥å¤„ç†uiçº¿ç¨‹ä¸Šæœªæ•è·çš„å¼‚å¸¸
<ul>
<li>ä¾‹å¦‚wpfä¸­çš„application.dispatcherunhandledexception</li>
<li>asp.net core ä¸­å®šåˆ¶ exceptionfilterattributeä¹Ÿæ˜¯å·®ä¸å¤šçš„æ•ˆæœ</li>
</ul>
</li>
<li>å…¶å†…éƒ¨åŸç†å°±æ˜¯ï¼šé€šè¿‡åœ¨å®ƒä»¬è‡ªå·±çš„try/catchå—æ¥è°ƒç”¨uiäº‹ä»¶ï¼ˆåœ¨asp.net coreé‡Œå°±æ˜¯é¡µé¢å¤„ç†æ–¹æ³•çš„ç®¡é“ï¼‰</li>
<li>é¡¶å±‚çš„å¼‚æ­¥æ–¹æ³•ä¼šä½¿äº‹æƒ…æ›´åŠ å¤æ‚ é¡¶å±‚çš„å¼‚æ­¥æ–¹æ³•ç”±äºå·²ç»æ²¡æœ‰æ–¹æ³•è®©ä»–è¿›è¡Œawaitäº†ï¼Œæ‰€ä»¥ä»–ä¼šä½¿ç”¨void è€Œä¸æ˜¯taskä½œä¸ºè¿”å›ç±»å‹</li>
<li>åœ¨æŠ›å‡ºå¼‚å¸¸åæ— æ³•è¢«æ¶ˆæ¯å¾ªç¯ä¸­çš„catchæ•è·</li>
<li>ä¸ºäº†ç¼“è§£è¯¥é—®é¢˜ï¼Œasyncvoidmethodbuilderä¼šæ•è·æœªå¤„ç†çš„å¼‚å¸¸ï¼ˆåœ¨è¿”å›voidçš„å¼‚æ­¥æ–¹æ³•é‡Œï¼‰ ï¼Œ å¹¶æŠŠä»–ä»¬å‘å¸ƒåˆ°åŒæ­¥ä¸Šä¸‹æ–‡ï¼ˆå¦‚æœå‡ºç°çš„è¯ï¼‰ï¼Œä»¥ç¡®ä¿å…¨å±€å¼‚å¸¸å¤„ç†äº‹ä»¶èƒ½å¤Ÿè§¦å‘</li>
</ul>
<h4 id="æ³¨æ„-1">æ³¨æ„</h4>
<ul>
<li>
<p>ç¼–è¯‘å™¨åªä¼šæŠŠä¸Šè¿°é€»è¾‘åº”ç”¨äºè¿”å›ç±»å‹ä¸ºvoidçš„ä¸€éƒ¨æ–¹æ³•</p>
</li>
<li>
<p>å¦‚æœbuttonclickçš„è¿”å›ç±»å‹æ˜¯taskï¼Œé‚£ä¹ˆæœªå¤„ç†çš„å¼‚å¸¸å°†å¯¼è‡´ç»“æœtaskå‡ºé”™ï¼Œç„¶åtaskå°†æ— å¤„å¯å»ï¼ˆå¯¼è‡´ä¸ºè§‚å¯Ÿåˆ°çš„å¼‚å¸¸ï¼‰</p>
</li>
<li>
<p>æ— è®ºåœ¨awaitå‰é¢è¿˜æ˜¯åé¢è·‘å‡ºå¼‚å¸¸ï¼Œéƒ½æ²¡æœ‰åŒºåˆ«</p>
</li>
<li>
<p>å¦‚æœå‡ºç°åŒæ­¥ä¸Šä¸‹æ–‡ï¼Œè¿”å›å€¼ä¸ºvoidçš„å¼‚å¸¸ä¼šè¢«å‘å¸ƒåˆ°åŒæ­¥ä¸Šä¸‹æ–‡ä¸­ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°ï¼Œå¼‚å¸¸å°†ä¼šåœ¨çº¿ç¨‹æ± ä¸Šä¼ æ’­ï¼Œä»è€Œå¯¼è‡´ç»ˆæ­¢åº”ç”¨ç¨‹åº</p>
</li>
</ul>
<h4 id="operationstarted-å’Œ-operationcompleted">operationstarted å’Œ operationcompleted</h4>
<ul>
<li>å¦‚æœå­˜åœ¨åŒæ­¥ä¸Šä¸‹æ–‡ï¼Œè¿”å›voidçš„å¼‚æ­¥å‡½æ•°ä¹Ÿä¼šè¿›å…¥å‡½æ•°æ—¶è°ƒç”¨å…¶operationstartedæ–¹æ³•ï¼Œåœ¨å‡½æ•°å®Œæˆæ—¶è°ƒç”¨å…¶operationcompletedæ–¹æ³•</li>
</ul>
<h4 id="ä¼˜åŒ–åŒæ­¥å®Œæˆ">ä¼˜åŒ–åŒæ­¥å®Œæˆ</h4>
<ul>
<li>å¼‚æ­¥å‡½æ•°å¯ä»¥åœ¨awaitä¹‹å‰å°±è¿”å›</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl">        <span class="k">static</span> <span class="k">async</span>  <span class="n">Task</span> <span class="n">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="k">await</span> <span class="n">GetWebPageAsync</span><span class="p">(</span><span class="s">&#34;http://oreilly.com&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span> <span class="p">,</span><span class="kt">string</span> <span class="p">&gt;</span> <span class="n">_cache</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;();</span>
</span></span><span class="line"><span class="cl">        <span class="k">private</span> <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">GetWebPageAsync</span><span class="p">(</span><span class="kt">string</span> <span class="n">uri</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">string</span> <span class="n">html</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">_cache</span><span class="p">.</span><span class="n">TryGetValue</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span><span class="k">out</span> <span class="n">html</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">html</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">_cache</span><span class="p">[</span><span class="n">uri</span><span class="p">]</span> <span class="p">=</span> <span class="k">await</span> <span class="k">new</span> <span class="n">WebClient</span><span class="p">().</span><span class="n">DownloadStringTaskAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><ul>
<li>
<p>ç¼–è¯‘å™¨æ˜¯é€šè¿‡æ£€æŸ¥awaiterä¸Šçš„iscompletedå±æ€§æ¥å®ç°è¿™ä¸ªä¼˜åŒ–çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ— è®ºä½•æ—¶awaitæ”¶åˆ°æ—¶å€™ï¼Œéƒ½ä¼šæ£€æŸ¥</p>
</li>
<li>
<p>å¦‚æœæ˜¯åŒæ­¥å®Œæˆäº†ï¼Œç¼–è¯‘å™¨å°±ä¼šé‡Šæ”¾å¯çŸ­è·¯çš„continuationä»£ç </p>
</li>
<li>
<p>ç¼–å†™å®Œå…¨æ²¡æœ‰awaitçš„å¼‚æ­¥æ–¹æ³•ä¹Ÿæ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯ç¼–è¯‘å™¨ä¼šå‘å‡ºè­¦å‘Š</p>
</li>
<li>
<p>è¿™ç±»æ–¹æ³•å¯ä»¥ç”¨äºé‡è½½virtual/abstractæ–¹æ³•</p>
</li>
<li>
<p>å¦ä¸€ç§å¯ä»¥è¾¾åˆ°ç›¸åŒç»“æœçš„æ–¹å¼æ˜¯ï¼Œä½¿ç”¨task.fromresultï¼Œä»–ä¼šè¿”å›ä¸€ä¸ªå·²ç»è®¾ç½®å¥½ä¿¡å·çš„task</p>
</li>
<li>
<p>å¦‚æœä»uiçº¿ç¨‹ä¸Šè°ƒç”¨ï¼Œé‚£ä¹ˆgetwebpageasyncæ–¹æ³•æ˜¯éšå¼çº¿ç¨‹å®‰å…¨çš„ã€‚å¯ä»¥è¿ç»­å¤šæ¬¡è°ƒç”¨å®ƒï¼ˆä»è€Œå¯åŠ¨å¤šä¸ªå¹¶å‘ä¸‹è½½ï¼‰ï¼Œå¹¶ä¸”ä¸éœ€è¦lockæ¥ä¿æŠ¤ç¼“å­˜</p>
</li>
<li>
<p>æœ‰ä¸€ç§ç®€å•çš„æ–¹æ³•å¯ä»¥å®ç°è¿™ä¸€ç‚¹ï¼Œè€Œä¸å¿…æ±‚åŠ©äºlockæˆ–ä¿¡ä»¤ç»“æ„ã€‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªfutures ï¼ˆtask<!-- raw HTML omitted -->ï¼‰çš„ç¼“å­˜ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²çš„ç¼“å­˜ï¼Œæ³¨æ„å¹¶æ²¡æœ‰async</p>
</li>
</ul>
<h4 id="å–æ¶ˆ-cancellationtoken-å’Œ-cancellationtokensource">å–æ¶ˆ cancellationToken å’Œ cancellationTokenSource</h4>
<h4 id="è·å–cancellationtoken">è·å–cancellationToken</h4>
<ul>
<li>å…ˆå®ä¾‹åŒ–cancellationtokensource
<ul>
<li>var cancelsource = new cancellationTokensource() ;</li>
</ul>
</li>
<li>è¿™å›æš´éœ²ä¸€ä¸ªtokenå±æ€§ï¼Œä»–ä¼šè¿”å›ä¸€ä¸ªcancellationtoken ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™æ ·è°ƒç”¨
<ul>
<li>task foo = Foo(cancelsource.token) â€¦ â€¦ cancelsource.cancel()</li>
</ul>
</li>
</ul>
<h4 id="delay">Delay</h4>
<ul>
<li>clré‡Œå¤§éƒ¨åˆ†å¼‚æ­¥æ–¹æ³•éƒ½æ”¯æŒcancellationtoken ï¼Œ åŒ…æ‹¬delayæ–¹æ³•</li>
</ul>
<h4 id="å…¶ä»–">å…¶ä»–</h4>
<ul>
<li>äº‹å®ä¸Šï¼Œå¯ä»¥åœ¨æ„é€ cancellationtokensourceæ—¶æŒ‡å®šä¸€ä¸ªæ—¶é—´é—´éš”ï¼Œä»¥ä¾¿åœ¨ä¸€æ®µæ—¶é—´åå¯åŠ¨å–æ¶ˆã€‚å®ƒå¯¹äºå®ç°è¶…æ—¶éå¸¸æœ‰ç”¨ï¼Œæ— è®ºæ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥</li>
<li>cancellationtokenè¿™ä¸ªstructæä¾›äº†ä¸€ä¸ªregisteræ–¹æ³•ï¼Œä»–å¯ä»¥è®©ä½ æ³¨å†Œä¸€ä¸ªå›è°ƒå§”æ‰˜ï¼Œè¿™ä¸ªå§”æ‰˜ä¼šåœ¨å–æ¶ˆæ—¶è§¦å‘ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åœ¨å–æ¶ˆæ³¨å†Œæ—¶å¯ä»¥è¢«disposeæ‰</li>
</ul>
<h4 id="è¿›åº¦æŠ¥å‘Š">è¿›åº¦æŠ¥å‘Š</h4>
<ul>
<li>
<p>å¼‚æ­¥æ“ä½œåœ¨è¿è¡Œå½“ä¸­åé¦ˆå®æ—¶è¿›åº¦ï¼Œè§£å†³åŠæ³•æ˜¯å‘å¼‚æ­¥æ–¹æ³•ä¸­é—¯å…¥ä¸€ä¸ªactionå§”æ‰˜ï¼Œå½“è¿›åº¦å˜åŒ–æ—¶è§¦å‘æ–¹æ³•è°ƒç”¨</p>
</li>
<li>
<p>iprogress<!-- raw HTML omitted --> å’Œprogress<!-- raw HTML omitted --></p>
</li>
<li>
<p>progress<!-- raw HTML omitted -->çš„ä¸€ä¸ªæ„é€ å‡½æ•°å¯ä»¥æ¥å—action<!-- raw HTML omitted -->ç±»å‹çš„å§”æ‰˜</p>
</li>
</ul>
<h4 id="taskç»„åˆå™¨">Taskç»„åˆå™¨</h4>
<ul>
<li>å¼‚æ­¥å‡½æ•°æœ‰ä¸€ä¸ªè®©å…¶ä¿æŒä¸€è‡´çš„åè®®ï¼ˆå¯ä»¥ä¸€è‡´çš„è¿”å›taskï¼‰ï¼Œè®©å…¶ä¿æŒè‰¯å¥½çš„ç»“æœï¼Œå¯ä»¥ä½¿ç”¨ä»¥åŠç¼–å†™taskç»„åˆå™¨ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ç»„åˆtaskï¼Œä½†æ˜¯ä¸å…³å¿ƒtaskå…·ä½“åšä»€ä¹ˆçš„å‡½æ•°</li>
<li>CLRæä¾›äº†ä¸¤ä¸ªtaskç»„åˆå™¨ï¼š
<ul>
<li>task.whenany</li>
<li>task.whenall</li>
</ul>
</li>
</ul>
<h4 id="whenany">WhenAny</h4>
<ul>
<li>å½“ä¸€ç»„taskä¸­ä»»ä½•ä¸€ä¸ªtaskå®Œæˆæ—¶ï¼Œtask.whenanyä¼šè¿”å›å®Œæˆçš„task</li>
<li>å› ä¸ºtask.whenanyæœ¬èº«å°±è¿”å›ä¸€ä¸ªtaskï¼Œæˆ‘ä»¬å¯¹ä»–è¿›è¡Œawaitï¼Œå°±ä¼šè¿”å›æœ€å…ˆå®Œæˆçš„task</li>
<li>äº‹å®ä¸Šï¼Œwhenanyå¾ˆé€‚åˆä¸ºä¸æ”¯æŒè¶…æ—¶æˆ–å–æ¶ˆçš„æ“ä½œæ·»åŠ è¿™äº›åŠŸèƒ½</li>
</ul>
<h4 id="whenall">whenall</h4>
<ul>
<li>å½“ä¼ ç»™ä»–çš„æ‰€æœ‰çš„taskéƒ½å®Œæˆåï¼Œtask.whenallä¼šè¿”å›ä¸€ä¸ªtask</li>
</ul>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/.net/">.Net</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    <aside class="related-contents--wrapper">
    
    
        <h2 class="section-title">ç›¸å…³æ–‡ç« </h2>
        <div class="related-contents">
            <div class="flex article-list--tile">
                
                    
<article class="">
    <a href="/p/gotemplateandbootstrap3/">
        
        

        <div class="article-details">
            <h2 class="article-title">GoTemplateAndBootStrap3</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/p/%E5%B0%9A%E7%A1%85%E8%B0%B7go%E5%AD%A6%E4%B9%A0/">
        
        

        <div class="article-details">
            <h2 class="article-title">å°šç¡…è°·Goå­¦ä¹ </h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/p/go-web%E7%BC%96%E7%A8%8B-chapter9/">
        
        

        <div class="article-details">
            <h2 class="article-title">Go Webç¼–ç¨‹ Chapter9</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/p/go-web%E7%BC%96%E7%A8%8B-chapter7/">
        
        

        <div class="article-details">
            <h2 class="article-title">Go Webç¼–ç¨‹ Chapter7</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/p/go-web%E7%BC%96%E7%A8%8B-chapter6/">
        
        

        <div class="article-details">
            <h2 class="article-title">Go Webç¼–ç¨‹ Chapter6</h2>
        </div>
    </a>
</article>
                
            </div>
        </div>
    
</aside>

     
     
        
    <script src="https://utteranc.es/client.js" 
        repo="linjianshu/hugoblogtalks"
        issue-term="pathname"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2022 think hy how to learn
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.2.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer="true"
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer="true"
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    

        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                defer="false"
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>
<!doctype html>
<html lang="en">
<head>
   
</head>









<body>
</body>

</html>


    </body>
</html>
