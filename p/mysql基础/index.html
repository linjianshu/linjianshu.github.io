<!DOCTYPE html>
<html lang="en-us">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='mysql学习文档 一 为什么要学习数据库 二 数据库的相关概念 DBMS DB SQL
三 数据库存储数据的特点 四 初始mysql mysql产品的介绍
mysql产品的安装
mysql服务的启动和停止
mysql服务的登陆和退出
mysql的常见命令和语法规范
五DQL语言的学习 基础查询
条件查询
排序查询
常见函数
分组查询
连接查询
子查询
分页查询
union联合查询
六 DML语言的学习 插入语句
修改语句
删除语句
七 DDL语言的学习 库和表的管理
常见数据类型介绍
常见约束
保存数据的容器:
数组 集合 内存数据 断电就没了
文件 但是文件不好查找
因此把文件做成方便增删改查的软件 对文件进行操作 这样的软件就叫做数据库
数据库的好处  实现数据持久化 使用完整的管理系统统一管理,易于查询  数据库的概念 DB 数据库 database:存储数据的仓库,保存了一系列有组织的数据.
DBMS 数据库管理系统 database management system 数据库是通过dbms创建和操作的容器
常见的数据库管理系统 mysql oracle db2 sqlserver
SQL 结构化查询语言 structure query language :专门用来与数据库通信的语言'><title>Mysql基础</title>

<link rel='canonical' href='https://linjianshu.github.io/p/mysql%E5%9F%BA%E7%A1%80/'>

<link rel="stylesheet" href="/scss/style.min.css"><meta property='og:title' content='Mysql基础'>
<meta property='og:description' content='mysql学习文档 一 为什么要学习数据库 二 数据库的相关概念 DBMS DB SQL
三 数据库存储数据的特点 四 初始mysql mysql产品的介绍
mysql产品的安装
mysql服务的启动和停止
mysql服务的登陆和退出
mysql的常见命令和语法规范
五DQL语言的学习 基础查询
条件查询
排序查询
常见函数
分组查询
连接查询
子查询
分页查询
union联合查询
六 DML语言的学习 插入语句
修改语句
删除语句
七 DDL语言的学习 库和表的管理
常见数据类型介绍
常见约束
保存数据的容器:
数组 集合 内存数据 断电就没了
文件 但是文件不好查找
因此把文件做成方便增删改查的软件 对文件进行操作 这样的软件就叫做数据库
数据库的好处  实现数据持久化 使用完整的管理系统统一管理,易于查询  数据库的概念 DB 数据库 database:存储数据的仓库,保存了一系列有组织的数据.
DBMS 数据库管理系统 database management system 数据库是通过dbms创建和操作的容器
常见的数据库管理系统 mysql oracle db2 sqlserver
SQL 结构化查询语言 structure query language :专门用来与数据库通信的语言'>
<meta property='og:url' content='https://linjianshu.github.io/p/mysql%E5%9F%BA%E7%A1%80/'>
<meta property='og:site_name' content='think hy how to learn'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2021-10-10T23:44:44&#43;08:00'/><meta property='article:modified_time' content='2021-10-10T23:44:44&#43;08:00'/><meta property='og:image' content='https://linjianshu.github.io/' />
<meta name="twitter:site" content="@ljs56495989">
    <meta name="twitter:creator" content="@ljs56495989"><meta name="twitter:title" content="Mysql基础">
<meta name="twitter:description" content="mysql学习文档 一 为什么要学习数据库 二 数据库的相关概念 DBMS DB SQL
三 数据库存储数据的特点 四 初始mysql mysql产品的介绍
mysql产品的安装
mysql服务的启动和停止
mysql服务的登陆和退出
mysql的常见命令和语法规范
五DQL语言的学习 基础查询
条件查询
排序查询
常见函数
分组查询
连接查询
子查询
分页查询
union联合查询
六 DML语言的学习 插入语句
修改语句
删除语句
七 DDL语言的学习 库和表的管理
常见数据类型介绍
常见约束
保存数据的容器:
数组 集合 内存数据 断电就没了
文件 但是文件不好查找
因此把文件做成方便增删改查的软件 对文件进行操作 这样的软件就叫做数据库
数据库的好处  实现数据持久化 使用完整的管理系统统一管理,易于查询  数据库的概念 DB 数据库 database:存储数据的仓库,保存了一系列有组织的数据.
DBMS 数据库管理系统 database management system 数据库是通过dbms创建和操作的容器
常见的数据库管理系统 mysql oracle db2 sqlserver
SQL 结构化查询语言 structure query language :专门用来与数据库通信的语言"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://linjianshu.github.io/' />
    </head>
    <body class="
    article-page has-toc
">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex 
    
        extended
    
">
    
        <div id="article-toolbar">
            <a href="https://linjianshu.github.io/" class="back-home">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="15 6 9 12 15 18" />
</svg>



                <span>返回</span>
            </a>
        </div>
    
<main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <h2 class="article-title">
        <a href="/p/mysql%E5%9F%BA%E7%A1%80/">Mysql基础</a>
    </h2>

    

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Oct 10, 2021</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 23 分钟
                </time>
            </div>
        
    </footer>
    
</div>
</header>

    <section class="article-content">
    <h3 id="mysql学习文档">mysql学习文档</h3>
<h5 id="一-为什么要学习数据库">一 为什么要学习数据库</h5>
<h5 id="二-数据库的相关概念">二 数据库的相关概念</h5>
<p>DBMS DB SQL</p>
<h5 id="三-数据库存储数据的特点">三 数据库存储数据的特点</h5>
<h5 id="四-初始mysql">四 初始mysql</h5>
<p>mysql产品的介绍</p>
<p>mysql产品的安装</p>
<p>mysql服务的启动和停止</p>
<p>mysql服务的登陆和退出</p>
<p>mysql的常见命令和语法规范</p>
<h5 id="五dql语言的学习">五DQL语言的学习</h5>
<p>基础查询</p>
<p>条件查询</p>
<p>排序查询</p>
<p>常见函数</p>
<p>分组查询</p>
<p>连接查询</p>
<p>子查询</p>
<p>分页查询</p>
<p>union联合查询</p>
<h5 id="六-dml语言的学习">六 DML语言的学习</h5>
<p>插入语句</p>
<p>修改语句</p>
<p>删除语句</p>
<h5 id="七-ddl语言的学习">七 DDL语言的学习</h5>
<p>库和表的管理</p>
<p>常见数据类型介绍</p>
<p>常见约束</p>
<p>保存数据的容器:</p>
<p>数组 集合 内存数据 断电就没了</p>
<p>文件 但是文件不好查找</p>
<p>因此把文件做成方便增删改查的软件 对文件进行操作 这样的软件就叫做数据库</p>
<h5 id="数据库的好处">数据库的好处</h5>
<ul>
<li>实现数据持久化</li>
<li>使用完整的管理系统统一管理,易于查询</li>
</ul>
<h5 id="数据库的概念">数据库的概念</h5>
<p>DB 数据库 database:存储数据的仓库,保存了一系列有组织的数据.</p>
<p>DBMS 数据库管理系统 database management system 数据库是通过dbms创建和操作的容器</p>
<p>常见的数据库管理系统 mysql oracle db2 sqlserver</p>
<p>SQL 结构化查询语言 structure query language :专门用来与数据库通信的语言</p>
<p>sql的优点:</p>
<ol>
<li>不是某个特定数据库供应商专有的语言,几乎所有DBMS都支持sql</li>
<li>简单易学</li>
<li>虽然简单,但实际上是一种强有力的语言,灵活使用其语言元素,可以进行非常复杂和高级的数据库操作</li>
</ol>
<p>类似于管家 管理 文件柜  DBMS 管理 DB</p>
<h5 id="数据库的特点">数据库的特点</h5>
<ol>
<li>将数据放到表中,表再放到库中</li>
<li>一个数据库中够可以有多个表,每个表都有一个自己的名字,用来标识自己,表名具有唯一性</li>
<li>表具有一些特性,这些特性定义了数据在表中如何存储,类似java中类的设计</li>
<li>表由列组成,我们也称为字段.所有表都是由一个或多个列组成的,每个列类似java中的属性</li>
<li>表中的数据是按行存储的,每一行类似于java中的对象</li>
</ol>
<h5 id="mysql产品的特点">Mysql产品的特点</h5>
<ul>
<li>mysql数据库隶属于mysqlab公司,总部位于瑞典,后被oracle收购</li>
<li>优点
<ul>
<li>成本低:开放源代码,一般可以免费使用</li>
<li>性能高:执行很快</li>
<li>简单:很容易安装和使用</li>
</ul>
</li>
</ul>
<h5 id="dbms分为两类">DBMS分为两类</h5>
<ul>
<li>基于共享文件系统的DBMS 例如 access</li>
<li>基于客户机&mdash;服务器的DBMS 例如 mysql oracle sqlserver</li>
</ul>
<h5 id="mysql版本">mysql版本</h5>
<ul>
<li>社区版 免费</li>
<li>企业版 收费</li>
</ul>
<h5 id="mysql卸载">mysql卸载</h5>
<p>先控制面板卸载</p>
<p>然后在安装目录下删除文件夹</p>
<p>然后在programdata中删除残余文件</p>
<p>清理注册表</p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919154523464.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919154523464.png"
			
			
			
			loading="lazy"
			alt="image-20210919154523464">
	</a>
	
	<figcaption>image-20210919154523464</figcaption>
	
</figure></p>
<h5 id="myini-配置文件">my.ini 配置文件</h5>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919160841225.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919160841225.png"
			
			
			
			loading="lazy"
			alt="image-20210919160841225">
	</a>
	
	<figcaption>image-20210919160841225</figcaption>
	
</figure></p>
<p>端口号 安装位置 数据存放位置 字符集 默认存储引擎 语法模式 最大连接数</p>
<p>改完服务需要重启</p>
<h5 id="mysql服务的启动和停止">mysql服务的启动和停止</h5>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919161439996.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919161439996.png"
			
			
			
			loading="lazy"
			alt="image-20210919161439996">
	</a>
	
	<figcaption>image-20210919161439996</figcaption>
	
</figure></p>
<h5 id="mysql服务端的登陆和退出">mysql服务端的登陆和退出</h5>
<ol>
<li>使用mysql command line client 不建议 只适用于root用户</li>
</ol>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919161620401.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919161620401.png"
			
			
			
			loading="lazy"
			alt="image-20210919161620401">
	</a>
	
	<figcaption>image-20210919161620401</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919161637466.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919161637466.png"
			
			
			
			loading="lazy"
			alt="image-20210919161637466">
	</a>
	
	<figcaption>image-20210919161637466</figcaption>
	
</figure></p>
<p>2.命令行 p输入密码不能有空格 -h 主机名 -P 端口号 -u 用户名 -p密码</p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919161848290.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919161848290.png"
			
			
			
			loading="lazy"
			alt="image-20210919161848290">
	</a>
	
	<figcaption>image-20210919161848290</figcaption>
	
</figure></p>
<p>简化命令 退出exit 或者 ctrl+C</p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919161938321.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919161938321.png"
			
			
			
			loading="lazy"
			alt="image-20210919161938321">
	</a>
	
	<figcaption>image-20210919161938321</figcaption>
	
</figure></p>
<p>基本命令</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">show</span><span class="w"> </span><span class="n">databases</span><span class="w"> </span><span class="p">;</span><span class="w"> 
</span><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">tset</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="err">进入数据库</span><span class="w">
</span></code></pre></div><p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919163057930.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919163057930.png"
			
			
			
			loading="lazy"
			alt="image-20210919163057930">
	</a>
	
	<figcaption>image-20210919163057930</figcaption>
	
</figure></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">show</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="err">查看数据库里的表</span><span class="w"> </span><span class="err">在当前用户进入的数据库中查看</span><span class="w">
</span><span class="w"></span><span class="k">show</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">sys</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="err">查看数据库里的表</span><span class="w"> </span><span class="err">可以在当前数据库中查看别的数据库中的表</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="k">database</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="err">查看当前处于什么位置</span><span class="w">  </span><span class="err">类似于</span><span class="n">linux中的</span><span class="w"> </span><span class="n">pwd</span><span class="w">
</span><span class="w"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="o">//</span><span class="err">创建表</span><span class="w">
</span></code></pre></div><p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919163334648.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919163334648.png"
			
			
			
			loading="lazy"
			alt="image-20210919163334648">
	</a>
	
	<figcaption>image-20210919163334648</figcaption>
	
</figure></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">desc</span><span class="w"> </span><span class="n">stuInfo</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="err">查看表</span><span class="n">stuInfo中的字段</span><span class="w">
</span><span class="w"></span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">stuInfo</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;ljs&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">delete</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">stuInfo</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">update</span><span class="w"> </span><span class="n">stuInfo</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="s1">&#39;jwt&#39;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">stuInfo</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">增删改查</span><span class="w">
</span></code></pre></div><p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919163430191.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919163430191.png"
			
			
			
			loading="lazy"
			alt="image-20210919163430191">
	</a>
	
	<figcaption>image-20210919163430191</figcaption>
	
</figure></p>
<p>练习</p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919164509494.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919164509494.png"
			
			
			
			loading="lazy"
			alt="image-20210919164509494">
	</a>
	
	<figcaption>image-20210919164509494</figcaption>
	
</figure></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">sql</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="k">version</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="err">查看版本号</span><span class="w"> </span><span class="n">sql中</span><span class="w">
</span><span class="w"></span><span class="n">cmd</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="w"> </span><span class="c1">--version 
</span><span class="c1"></span><span class="n">mysql</span><span class="w"> </span><span class="o">-</span><span class="n">V</span><span class="w"> 
</span></code></pre></div><h5 id="mysql的语法规范">mysql的语法规范</h5>
<ol>
<li>不区分大小写,但建议关键字大写,表名 列名小写</li>
<li>每条命令用分号结尾</li>
<li>每条命令根据需要,可以进行缩进或者换行</li>
<li>注释
<ol>
<li>单行注释 #注释文字 &ndash; 注释文字 (必须要有空格)</li>
<li>多行注释 /*     lkdfjasldfj     */</li>
</ol>
</li>
</ol>
<h5 id="基础查询">基础查询</h5>
<p>select 查询列表 from 表名</p>
<ul>
<li>查询列表可以是:表中的字段 / 常量值 / 表达式 / 函数</li>
<li>查询的结果可以是一个虚拟的表格</li>
</ul>
<p>查询单个字段</p>
<p>查询多个字段</p>
<p>查询所有字段</p>
<p>select * 不能控制字段的显示顺序</p>
<p>之所以用`` 着重号 第一为了直白,第二为了区分关键字 防止与关键字重名</p>
<p>查询常量</p>
<p>查询表达式</p>
<p>查询函数</p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919202609756.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919202609756.png"
			
			
			
			loading="lazy"
			alt="image-20210919202609756">
	</a>
	
	<figcaption>image-20210919202609756</figcaption>
	
</figure></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="s1">&#39;join&#39;</span><span class="w"> </span><span class="p">;</span><span class="w"> 
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="mi">100</span><span class="o">*</span><span class="mi">98</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="k">version</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">show</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><p>起别名 方便理解 如果要查询的字段有重名的情况,使用别名可以区分开来</p>
<p>方式一: 使用as</p>
<p>方式二: 直接不用as</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">姓</span><span class="w"> </span><span class="p">,</span><span class="n">first_name</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">名</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w">  </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w">  </span><span class="err">姓</span><span class="w"> </span><span class="p">,</span><span class="n">first_name</span><span class="w">  </span><span class="err">名</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w">  </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">防止歧义</span><span class="w"> </span><span class="err">双引号也行</span><span class="w"> </span><span class="err">单引号也可以</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">`</span><span class="k">out</span><span class="w"> </span><span class="n">put</span><span class="o">`</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><p>去重</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="k">database</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">show</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">desc</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919203515527.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919203515527.png"
			
			
			
			loading="lazy"
			alt="image-20210919203515527">
	</a>
	
	<figcaption>image-20210919203515527</figcaption>
	
</figure></p>
<p>+号的作用</p>
<p>姓名连接成一个字段 , 显示为姓名</p>
<p>以下错误</p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919203805417.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919203805417.png"
			
			
			
			loading="lazy"
			alt="image-20210919203805417">
	</a>
	
	<figcaption>image-20210919203805417</figcaption>
	
</figure></p>
<p>java中的+号:</p>
<ul>
<li>运算符 , 操作数为数值型</li>
<li>连接符, 只要有一个操作数为字符串</li>
</ul>
<p>mysql中的+号:</p>
<ul>
<li>仅仅只有一个功能:运算符</li>
</ul>
<p>select 100+90 ;</p>
<p>select &lsquo;123&rsquo; +90 ; 其中一方为字符型,视图将字符型数值转换为数值型, 如果转换成功,则继续做加法运算</p>
<p>select &lsquo;james&rsquo; + 90 ; 如果转换失败,则将字符型数值转换成0</p>
<p>select null +10 ; 只要其中一方为null , 则结果肯定为null <figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919204251938.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210919204251938.png"
			
			
			
			loading="lazy"
			alt="image-20210919204251938">
	</a>
	
	<figcaption>image-20210919204251938</figcaption>
	
</figure></p>
<p>所以需要使用函数 concat() ;</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">这是错误的用法</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">加上了单引号</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">无法解析</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">concat</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;last_name&#39;</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;first_name&#39;</span><span class="p">)</span><span class="w"> </span><span class="err">姓名</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">这是正确的</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">concat</span><span class="w"> </span><span class="p">(</span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">first_name</span><span class="p">)</span><span class="w"> </span><span class="err">姓名</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><h5 id="显示出表employees中的全部列各个列之间用逗号连接列头显示成out_put">显示出表employees中的全部列,各个列之间用逗号连接,列头显示成out_put</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">查看某表列名</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="k">column_name</span><span class="w"> </span><span class="n">fuck_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">information_schema</span><span class="p">.</span><span class="n">columns</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">table_schema</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;myemployees&#39;</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">table_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;employees&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">没问题</span><span class="w"> </span><span class="err">因为不存在</span><span class="k">null</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">concat</span><span class="w"> </span><span class="p">(</span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">first_name</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">有问题</span><span class="w"> </span><span class="err">因为存在</span><span class="k">null</span><span class="w">  </span><span class="p">,</span><span class="w"> </span><span class="err">导致那行都变成</span><span class="k">null</span><span class="w"> </span><span class="err">了</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">concat</span><span class="w"> </span><span class="p">(</span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">first_name</span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">commission_pct</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">concat</span><span class="w"> </span><span class="p">(</span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">first_name</span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">commission_pct</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="引入函数-ifnull">引入函数 IFNULL</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">IFNULL</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">ifnull</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">奖金率</span><span class="p">,</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">ifnull</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">奖金率</span><span class="p">,</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">奖金率</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">   </span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">0</span><span class="p">.</span><span class="mi">40</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">0</span><span class="p">.</span><span class="mi">40</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">0</span><span class="p">.</span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">0</span><span class="p">.</span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">0</span><span class="p">.</span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">0</span><span class="p">.</span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">这是正确的</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">concat</span><span class="w"> </span><span class="p">(</span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">first_name</span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">ifnull</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">concat</span><span class="w"> </span><span class="p">(</span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">first_name</span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">ifnull</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">142</span><span class="p">,</span><span class="n">Curtis</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w">                                                    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">143</span><span class="p">,</span><span class="n">Randall</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w">                                                   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">144</span><span class="p">,</span><span class="n">Peter</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">161</span><span class="p">,</span><span class="n">Sarath</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">25</span><span class="w">                                                    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">169</span><span class="p">,</span><span class="n">Harrison</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">20</span><span class="w">                                                  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">170</span><span class="p">,</span><span class="n">Tayler</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">20</span><span class="w">                                                    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">171</span><span class="p">,</span><span class="n">William</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">15</span><span class="w">                                                   </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="条件查询-select-查询列表-from-表名-where-筛选条件-">条件查询 select 查询列表 from 表名 where 筛选条件 ;</h5>
<p>先查表名有没有在,再筛选,再查询</p>
<p>分类</p>
<ul>
<li>按条件表达式筛选
<ul>
<li>条件运算符 &gt; &lt; = &lt;&gt;(不等于)</li>
</ul>
</li>
<li>按逻辑表达式筛选 作用用于连接条件表达式
<ul>
<li>&amp;&amp; || ! and or not</li>
</ul>
</li>
<li>模糊查询
<ul>
<li>like</li>
<li>between and</li>
<li>in</li>
<li>is null</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">条件运算符</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">12000</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">逻辑运算符</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="mi">90</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">逻辑表达式筛选</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">10000</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">20000</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">好像三个不太一样</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="p">(</span><span class="n">department_id</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="mi">90</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="mi">120</span><span class="p">)</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">15000</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"> 
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">)</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">15000</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"> 
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="p">(</span><span class="n">department_id</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="mi">90</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="mi">120</span><span class="p">)</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">15000</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><p>模糊查询</p>
<ul>
<li>like</li>
<li>一般和通配符使用
<ul>
<li>% 0到任意个字符</li>
<li>_ 任意一个字符</li>
</ul>
</li>
<li>between and</li>
<li>in</li>
<li>is null | is not null</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">模糊查询</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%a%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;__e_a%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">如果不想使用转义字符</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">第二个字符就是</span><span class="n">_</span><span class="w"> </span><span class="err">而不是任意单个字符的话</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;_\_%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">或者使用以下这种</span><span class="w"> </span><span class="err">使用</span><span class="k">ESCAPE</span><span class="w"> </span><span class="err">来取消转义</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;_$_%&#39;</span><span class="w"> </span><span class="k">escape</span><span class="w"> </span><span class="s1">&#39;$&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;_h_%&#39;</span><span class="w"> </span><span class="k">escape</span><span class="w"> </span><span class="s1">&#39;h&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="between-and">between and</h5>
<ul>
<li>提高语句简洁度</li>
<li>左右都包含临界值</li>
<li>不能颠倒顺序</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">左闭右闭</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="mi">120</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><h5 id="in-判断某字段的值是否属于in列表中的某一项">in 判断某字段的值是否属于in列表中的某一项</h5>
<ul>
<li>
<p>使用 in 提高语句的简洁度</p>
</li>
<li>
<p>in 列表的值类型必须一致或兼容</p>
</li>
<li>
<p>in 不支持通配符  毕竟不是like关键字</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="k">in</span><span class="p">(</span><span class="s1">&#39;IT_PROG&#39;</span><span class="p">,</span><span class="s1">&#39;AD_VP&#39;</span><span class="p">,</span><span class="s1">&#39;AD_PRES&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><h5 id="is-null">is null</h5>
<ul>
<li>= 或 &lt;&gt; 不能用于判断null值</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><h5 id="is-not-null">is not null</h5>
<h5 id="安全等于---">安全等于   &lt;=&gt;</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">安全等于可以用来判断是不是为空</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">&lt;=&gt;</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">安全等于也可以用来判断是不是某个数值</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&lt;=&gt;</span><span class="w"> </span><span class="mi">12000</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Greenberg</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Errazuriz</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Higgins</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+
</span><span class="c1"></span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="安全等于和is-null-的区别">安全等于和is null 的区别</h5>
<p>is null 仅仅可以判断null值 , 可读性较高 , 建议使用</p>
<p>&lt;=&gt; 既可以判断null值,又可以判断普通的数值</p>
<h5 id="复习一下">复习一下</h5>
<h5 id="mysql">mysql</h5>
<h5 id="与mysql的第一次亲密接触">与mysql的第一次亲密接触</h5>
<h5 id="数据库的好处-1">数据库的好处</h5>
<ol>
<li>持久化数据到本地</li>
<li>结构化查询</li>
</ol>
<h5 id="数据库的常见概念">数据库的常见概念</h5>
<ol>
<li>DB 数据库,存储数据的容器</li>
<li>DBMS 数据库管理系统, 又称为数据库软件或数据库产品,用于创建或管理DB</li>
<li>SQL 结构化查询语言 ,用于和数据库通信的语言,不是某个数据库软件特有的,而是几乎所有的主流数据库软件通用的语言</li>
</ol>
<h5 id="数据库存储的特点">数据库存储的特点</h5>
<ol>
<li>数据存放到表中,然后表再存放到库中</li>
<li>一个库中可以有多张表,每张表具有唯一的表名用以标识自己</li>
<li>表有一个或多个列,列又称为字段,相当于java中的属性</li>
<li>表中的每一行数据,相当于java中的对象</li>
</ol>
<h5 id="常见的数据库管理系统">常见的数据库管理系统</h5>
<p>mysq oracle db2 sqlserver</p>
<h5 id="mysql的介绍">mysql的介绍</h5>
<h5 id="mysql的背景">mysql的背景</h5>
<p>前身属于瑞典的一家公司 mysql ab , 08被sun收购 , 09年被oracle收购</p>
<h5 id="mysql的优点">mysql的优点</h5>
<ol>
<li>开源免费成本低</li>
<li>性能高 , 移植性好</li>
<li>体积小,便于安装</li>
</ol>
<h5 id="mysql的安装">mysql的安装</h5>
<p>属于c/s架构的软件,一般来讲是安装服务端</p>
<p>企业版/社区版</p>
<p>环境变量配置</p>
<h5 id="mysql服务的启动和停止-1">mysql服务的启动和停止</h5>
<p>net start mysql</p>
<p>图形化界面里开服务</p>
<h5 id="mysql服务的登陆和退出">mysql服务的登陆和退出</h5>
<p>mysql -h localhost -P 3306 -u root -p123456</p>
<p>exit或者ctrl+C</p>
<h5 id="dql语言">DQL语言</h5>
<h5 id="基础查询-1">基础查询</h5>
<p>select 查询列表 from 表名</p>
<p>特点</p>
<ol>
<li>查询列表可以是字段/常量 / 表达式/ 函数/ 也可以是多个</li>
<li>查询结果是一个虚拟表</li>
</ol>
<p>示例</p>
<h5 id="查询单个字段">查询单个字段</h5>
<p>select 字段名 from 表名  ;</p>
<h5 id="查询多个字段">查询多个字段</h5>
<p>select 字段名 , 字段名 from 表名 ;</p>
<h5 id="查询所有字段">查询所有字段</h5>
<p>select * from 表名 ;</p>
<h5 id="查询常量">查询常量</h5>
<p>select 常量 as &hellip; ;</p>
<p><strong>注意:字符型和日期型的常量值必须用单引号引起来,数值型不需要</strong></p>
<h5 id="查询函数">查询函数</h5>
<p>select 函数名(实参列表) ;</p>
<h5 id="查询表达式">查询表达式</h5>
<p>select 100%98 ;</p>
<h5 id="起别名">起别名</h5>
<ol>
<li>as</li>
<li>空格</li>
</ol>
<h5 id="去重">去重</h5>
<p>distinct 只能给一个参数用</p>
<h5 id="号的作用">+号的作用</h5>
<p>只能做加法运算</p>
<p>select 数值+数值 ; 直接运算</p>
<p>select 字符 +数值 ; 尝试隐式转换然后运算 , 成功就成功,不成功就是0+数值</p>
<p>select null + 数值; 返回null</p>
<h5 id="concat函数">concat函数</h5>
<p>拼接字符</p>
<p>select concat (字符1 , 字符2 , 字符3 &hellip;) ;</p>
<h5 id="ifnull函数">ifnull函数</h5>
<p>判断某自字段或表达式是否为null , 如果为null 返回指定的值, 否则返回原本的值</p>
<p>select ifnull(commission_pct,0) from employees ; 如果是null则返回0 , 如果不是null , 则返回原值</p>
<h5 id="isnull函数">isnull函数</h5>
<p>判断是不是null , 是的话返回1 , 否的话就返回0</p>
<h5 id="条件查询">条件查询</h5>
<p>select 查询列表 from 表名 where 筛选条件</p>
<p>筛选条件的分类</p>
<ol>
<li>简单条件运算符 &gt; &lt; = &lt;&gt; &lt;=&gt; &gt;= &lt;=</li>
<li>逻辑运算符  || &amp;&amp; ! and or not</li>
<li>模糊查询</li>
</ol>
<p>like in is null is not null between and</p>
<p>like :一般搭配通配符使用, 用于判断字符型数值, <strong>在5.5版本之后 , 也可以判断int类型的</strong> , % 和 _ 区别</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;1__&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+-----------+----------+--------------+------------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">first_name</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">email</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">phone_number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">hiredate</span><span class="w">            </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+-----------+----------+--------------+------------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">108</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Nancy</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">Greenberg</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">NGREENBE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">124</span><span class="p">.</span><span class="mi">4569</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">FI_MGR</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">101</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1998</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">109</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Daniel</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Faviet</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">DFAVIET</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">124</span><span class="p">.</span><span class="mi">4169</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">FI_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">9000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">108</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1998</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">110</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">John</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">Chen</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">JCHEN</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">124</span><span class="p">.</span><span class="mi">4269</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">FI_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">8200</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">108</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2000</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">09</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">111</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Ismael</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Sciarra</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">ISCIARRA</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">124</span><span class="p">.</span><span class="mi">4369</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">FI_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">7700</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">108</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2000</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">09</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">112</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Jose</span><span class="w"> </span><span class="n">Manuel</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Urman</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">JMURMAN</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">124</span><span class="p">.</span><span class="mi">4469</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">FI_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">7800</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">108</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2000</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">09</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">113</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Luis</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">Popp</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">LPOPP</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">124</span><span class="p">.</span><span class="mi">4567</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">FI_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">6900</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">108</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2000</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">09</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">205</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Shelley</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Higgins</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">SHIGGINS</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">8080</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AC_MGR</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">101</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">110</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">206</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">William</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Gietz</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">WGIETZ</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">8181</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AC_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">8300</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">205</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">110</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+-----------+----------+--------------+------------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="mi">8</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="is-null-和-的区别">is null 和&lt;=&gt; 的区别</h5>
<p>is null 只会判断null</p>
<p>&lt;=&gt; 不仅判断null 还可以普通类型的数值</p>
<h5 id="排序查询">排序查询</h5>
<p>select 查询列表 from 表 where 筛选条件 order by 排序列表 asc|desc</p>
<p><strong>默认是asc 升序</strong></p>
<p>支持单个字段/多个字段/表达式/函数/别名</p>
<p>order by 一般是放在查询语句的最后面 limit子句除外</p>
<ul>
<li>按表达式排序</li>
<li>按字段排序</li>
<li>按别名排序</li>
<li>按函数排序</li>
<li>按多字段排序</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">asc</span><span class="w"> </span><span class="p">;</span><span class="w"> 
</span><span class="w"></span><span class="o">#</span><span class="err">默认升序</span><span class="w"> </span><span class="k">asc</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">&gt;=</span><span class="mi">90</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">hiredate</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="o">*</span><span class="err">必须放在前面</span><span class="w"> </span><span class="err">可以按照表达式排序</span><span class="w"> </span><span class="err">也可以按照别名排序</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="o">*</span><span class="mi">12</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">ifnull</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span><span class="k">as</span><span class="w"> </span><span class="err">年薪</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">年薪</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">按照函数排序</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">双重排序</span><span class="w"> </span><span class="err">先按照工资升序排</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">再按照员工编号降序排</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">asc</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><p>练习</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">ifnull</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">年薪</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">年薪</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="k">asc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">以下用法</span><span class="w"> </span><span class="err">错误</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="err">不能</span><span class="w"> </span><span class="err">按照</span><span class="w"> </span><span class="err">别名来</span><span class="w"> 
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">工资</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="p">(</span><span class="err">工资</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="mi">8000</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="mi">17000</span><span class="p">)</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">工资</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">以下用法</span><span class="w"> </span><span class="err">正确</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">工资</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="p">(</span><span class="n">salary</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="mi">8000</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="mi">17000</span><span class="p">)</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">工资</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">可以这样</span><span class="w"> </span><span class="err">直接</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="k">and</span><span class="w"> 
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">工资</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="mi">8000</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="mi">17000</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">工资</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%e%&#39;</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="n">email</span><span class="p">)</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><h5 id="常见函数">常见函数</h5>
<p>功能:类似于java中的方法,将一组逻辑语句封装在方法体中,对外暴露方法名</p>
<p>好处:1.隐藏了实现细节 2.提高代码的重用性</p>
<p>调用: select 函数名(实参列表)  [from 表] ;</p>
<p>特点:</p>
<ul>
<li>叫什么 函数名</li>
<li>干什么 函数功能</li>
</ul>
<p>分类：</p>
<ul>
<li>单行函数
<ul>
<li>字符函数 length concat substr substring replace lpad rpad upper lower instr trim</li>
<li>数学函数 mod floor round ceil  truncate</li>
<li>日期函数 now curdate curtime year month monthname day hour minute second date_format str_to_date</li>
<li>其他函数</li>
<li>流程控制函数</li>
<li>concat / length / ifnull 等</li>
</ul>
</li>
<li>分组函数
<ul>
<li>做统计使用 又称为统计函数、聚合函数、组函数</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">查看字节长度</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="s1">&#39;lalala&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="s1">&#39;lalala&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">                </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查看字节长度</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">length</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;林健树&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">length</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;林健树&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">                 </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">展示字符集</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%char%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------+---------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Variable_name</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w">                                                   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------+---------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_client</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">gbk</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_connection</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">gbk</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_database</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">utf8mb4</span><span class="w">                                                 </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_filesystem</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nb">binary</span><span class="w">                                                  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_results</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">gbk</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_server</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">utf8mb4</span><span class="w">                                                 </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_system</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">utf8mb3</span><span class="w">                                                 </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_sets_dir</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="k">C</span><span class="p">:</span><span class="err">\</span><span class="n">Program</span><span class="w"> </span><span class="n">Files</span><span class="err">\</span><span class="n">MySQL</span><span class="err">\</span><span class="n">MySQL</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="mi">8</span><span class="p">.</span><span class="mi">0</span><span class="err">\</span><span class="k">share</span><span class="err">\</span><span class="n">charsets</span><span class="err">\</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------+---------------------------------------------------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">拼接字符</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">concat</span><span class="p">(</span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;_&#39;</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"> 
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="k">upper</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">lower</span><span class="w"> 
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="k">upper</span><span class="p">(</span><span class="s1">&#39;aaabbbccc&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="k">lower</span><span class="p">(</span><span class="s1">&#39;aBc&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">函数嵌套</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">concat</span><span class="p">(</span><span class="k">lower</span><span class="p">(</span><span class="n">last_name</span><span class="p">),</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="k">upper</span><span class="p">(</span><span class="n">first_name</span><span class="p">))</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">substr</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">substring</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">sql中索引从1开始</span><span class="w">
</span><span class="w"> </span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">substring</span><span class="p">(</span><span class="s1">&#39;李莫愁爱上了陆展元&#39;</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">陆展元</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">函数的重载</span><span class="w"> </span><span class="err">从指定索引出指定字符长度的字符</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">SUBSTRING</span><span class="p">(</span><span class="s1">&#39;李莫愁爱上了陆展元&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">SUBSTRING</span><span class="p">(</span><span class="s1">&#39;李莫愁爱上了陆展元&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">李莫愁</span><span class="w">                              </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">concat</span><span class="p">(</span><span class="n">concat</span><span class="p">(</span><span class="k">upper</span><span class="p">(</span><span class="k">substring</span><span class="p">(</span><span class="n">first_name</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)),</span><span class="n">substr</span><span class="p">(</span><span class="n">first_name</span><span class="p">,</span><span class="mi">2</span><span class="p">)),</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">instr</span><span class="w"> </span><span class="err">判断是否在字符串中</span><span class="w"> 
</span><span class="w"></span><span class="o">#</span><span class="err">返回的是第一次出现的索引</span><span class="w"> </span><span class="err">索引仍然从</span><span class="mi">1</span><span class="err">开始</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">如果找不到返回</span><span class="mi">0</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">instr</span><span class="p">(</span><span class="s1">&#39;杨不悔爱上了尹柳霞&#39;</span><span class="p">,</span><span class="s1">&#39;尹柳霞&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">instr</span><span class="p">(</span><span class="s1">&#39;杨不悔爱上了尹柳霞&#39;</span><span class="p">,</span><span class="s1">&#39;尹柳霞&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">                                    </span><span class="mi">7</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">instr</span><span class="p">(</span><span class="s1">&#39;杨不悔尹柳霞爱上了尹柳霞&#39;</span><span class="p">,</span><span class="s1">&#39;尹柳霞&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">       </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">trim</span><span class="w"> </span><span class="err">去空格</span><span class="w"> 
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="s1">&#39;   张翠山   &#39;</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">length</span><span class="w"> </span><span class="p">(</span><span class="k">trim</span><span class="p">(</span><span class="s1">&#39;    张翠山   &#39;</span><span class="p">))</span><span class="w">  </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------------+--------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="s1">&#39;   张翠山   &#39;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">length</span><span class="w"> </span><span class="p">(</span><span class="k">trim</span><span class="p">(</span><span class="s1">&#39;    张翠山   &#39;</span><span class="p">))</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------------+--------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">                     </span><span class="mi">12</span><span class="w"> </span><span class="o">|</span><span class="w">                              </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------------+--------------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">trim</span><span class="w"> </span><span class="err">可以去掉指定的字符或者字符串</span><span class="w"> </span><span class="err">中间不会去掉的</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">trim</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="s1">&#39;aabbaaccaa&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">bbaacc</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">trim</span><span class="w"> </span><span class="err">只是按照单位去去的</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">trim</span><span class="p">(</span><span class="s1">&#39;aa&#39;</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="s1">&#39;aaabbaaccaaa&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">out_put</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">abbaacca</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">lpad</span><span class="w"> </span><span class="err">用指定的字符来实现左填充指定长度</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">lpad</span><span class="p">(</span><span class="s1">&#39;殷素素&#39;</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="s1">&#39;*&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">lpad</span><span class="p">(</span><span class="s1">&#39;殷素素&#39;</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="s1">&#39;*&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="o">*******</span><span class="err">殷素素</span><span class="w">         </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">lpad</span><span class="p">(</span><span class="s1">&#39;97&#39;</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;0&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">lpad</span><span class="p">(</span><span class="s1">&#39;97&#39;</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;0&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">097</span><span class="w">              </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">lpad</span><span class="w"> </span><span class="err">如果长度超过了</span><span class="w"> </span><span class="err">反而会发生截断</span><span class="w"> </span><span class="err">从左边开始向右边截断</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">lpad</span><span class="p">(</span><span class="s1">&#39;101&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;0&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">lpad</span><span class="p">(</span><span class="s1">&#39;101&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;0&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">10</span><span class="w">                </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">Rpad同理</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">replace替换</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">replace</span><span class="p">(</span><span class="s1">&#39;张无忌爱上了周芷若&#39;</span><span class="p">,</span><span class="s1">&#39;周芷若&#39;</span><span class="p">,</span><span class="s1">&#39;赵敏&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">out_put</span><span class="w">          </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">张无忌爱上了赵敏</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">replace</span><span class="w"> </span><span class="err">凡是有的全部替换喔</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">replace</span><span class="p">(</span><span class="s1">&#39;周芷若张无忌爱上了周芷若&#39;</span><span class="p">,</span><span class="s1">&#39;周芷若&#39;</span><span class="p">,</span><span class="s1">&#39;赵敏&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">out_put</span><span class="w">              </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">赵敏张无忌爱上了赵敏</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="数学函数">数学函数</h5>
<p>round 四舍五入</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="n">round</span><span class="w"> </span><span class="err">四舍五入</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">round</span><span class="p">(</span><span class="mi">4</span><span class="p">.</span><span class="mi">65</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">round</span><span class="p">(</span><span class="mi">4</span><span class="p">.</span><span class="mi">65</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">           </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">round</span><span class="w"> </span><span class="err">两个参数时</span><span class="p">,</span><span class="err">后面的参数是值按小数点后几位来四舍五入</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">round</span><span class="p">(</span><span class="mi">4</span><span class="p">.</span><span class="mi">65</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">round</span><span class="p">(</span><span class="mi">4</span><span class="p">.</span><span class="mi">65</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">           </span><span class="mi">4</span><span class="p">.</span><span class="mi">7</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">round</span><span class="p">(</span><span class="mi">4</span><span class="p">.</span><span class="mi">65</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">round</span><span class="p">(</span><span class="mi">4</span><span class="p">.</span><span class="mi">65</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">             </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">ceil</span><span class="w"> </span><span class="err">向上取整</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">ceil</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">001</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">ceil</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">001</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">           </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">floor</span><span class="w"> </span><span class="err">向下取整</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">floor</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">01</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">floor</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">01</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">           </span><span class="o">-</span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"> 
</span><span class="w"></span><span class="o">#</span><span class="k">truncate</span><span class="w"> </span><span class="err">截断</span><span class="w"> </span><span class="err">保留小数点后几位</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">truncate</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">6999</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w">  </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">truncate</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">6999</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">               </span><span class="mi">1</span><span class="p">.</span><span class="mi">69</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">mod</span><span class="w"> </span><span class="err">取余运算</span><span class="w"> </span><span class="n">a</span><span class="o">-</span><span class="n">a</span><span class="o">/</span><span class="n">b</span><span class="o">*</span><span class="n">b</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">b会发生截断的可能</span><span class="w"> </span><span class="err">所以这个等式没毛病</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="o">-</span><span class="mi">10</span><span class="w"> </span><span class="k">mod</span><span class="w"> </span><span class="o">-</span><span class="mi">3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w">  </span><span class="o">-</span><span class="mi">10</span><span class="w"> </span><span class="k">mod</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="k">mod</span><span class="w"> </span><span class="o">-</span><span class="mi">3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">只要被除数是</span><span class="o">-</span><span class="w"> </span><span class="err">就是</span><span class="o">-</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">mod</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">mod</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">          </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="日期函数">日期函数</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="err">返回当前系统日期</span><span class="w"> </span><span class="err">包含时间</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">now</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">now</span><span class="p">()</span><span class="w">               </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">20</span><span class="w"> </span><span class="mi">16</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">28</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="n">curdate</span><span class="w"> </span><span class="err">返回当前日期</span><span class="w"> </span><span class="err">不包含时间</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">curdate</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">curdate</span><span class="p">()</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="n">curtime</span><span class="w"> </span><span class="err">返回当前时间</span><span class="w"> </span><span class="err">不包含日期</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">curtime</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">curtime</span><span class="p">()</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">16</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">21</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">获取指定的部分</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">年</span><span class="w"> </span><span class="err">月</span><span class="w"> </span><span class="err">日</span><span class="w"> </span><span class="err">时</span><span class="w"> </span><span class="err">分</span><span class="w"> </span><span class="err">秒</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">year</span><span class="p">(</span><span class="n">now</span><span class="p">())</span><span class="w"> </span><span class="err">年</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">month</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;1998-1-1&#39;</span><span class="p">)</span><span class="w"> </span><span class="err">月</span><span class="p">,</span><span class="w"> </span><span class="k">day</span><span class="p">(</span><span class="n">curdate</span><span class="p">())</span><span class="err">日</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">年</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="err">月</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="err">日</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">2021</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+------+------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">获取月份的英文</span><span class="w"> 
</span><span class="w"> </span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">monthname</span><span class="p">(</span><span class="n">hiredate</span><span class="p">)</span><span class="w"> </span><span class="err">月份英文</span><span class="p">,</span><span class="w"> </span><span class="k">year</span><span class="p">(</span><span class="n">hiredate</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">月份英文</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="k">year</span><span class="p">(</span><span class="n">hiredate</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">April</span><span class="w">     </span><span class="o">|</span><span class="w">           </span><span class="mi">1992</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">April</span><span class="w">     </span><span class="o">|</span><span class="w">           </span><span class="mi">1992</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">日期转换函数</span><span class="w"> </span><span class="n">str_to_date</span><span class="p">()</span><span class="w"> </span><span class="n">date_format</span><span class="p">()</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">str_to_date</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;9--10--2021&#39;</span><span class="p">,</span><span class="s1">&#39;%m--%d--%Y&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">out_put</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">date_format</span><span class="p">(</span><span class="s1">&#39;2021-09-20&#39;</span><span class="p">,</span><span class="s1">&#39;%y年%m月%d日&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">out_put</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">out_put</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">21</span><span class="err">年</span><span class="mi">09</span><span class="err">月</span><span class="mi">20</span><span class="err">日</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"> 
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">前端传进来的是字符串</span><span class="w"> </span><span class="err">而且格式不一</span><span class="w"> </span><span class="err">我们要使用函数来将字符串做处理</span><span class="w"> </span><span class="err">解析成想要的格式</span><span class="w"> </span><span class="err">然后再到数据库中查找</span><span class="w"> 
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">hiredate</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">hiredate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">str_to_date</span><span class="p">(</span><span class="s1">&#39;4-3 1992&#39;</span><span class="p">,</span><span class="s1">&#39;%c-%d %Y&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">hiredate</span><span class="w">            </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+
</span><span class="c1"></span><span class="mi">5</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">数据库这边也需要做好相应的处理</span><span class="w"> </span><span class="err">将日期处理成对应格式字符串然后返回回去</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="n">date_format</span><span class="p">(</span><span class="n">hiredate</span><span class="p">,</span><span class="s1">&#39;%m月/%d日 %y年&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">入职日期</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">&lt;=&gt;</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="err">入职日期</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mi">04</span><span class="err">月</span><span class="o">/</span><span class="mi">03</span><span class="err">日</span><span class="w"> </span><span class="mi">92</span><span class="err">年</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">04</span><span class="err">月</span><span class="o">/</span><span class="mi">03</span><span class="err">日</span><span class="w"> </span><span class="mi">92</span><span class="err">年</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></code></pre></div><p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210920161042293.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210920161042293.png"
			
			
			
			loading="lazy"
			alt="image-20210920161042293">
	</a>
	
	<figcaption>image-20210920161042293</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210920161613677.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210920161613677.png"
			
			
			
			loading="lazy"
			alt="image-20210920161613677">
	</a>
	
	<figcaption>image-20210920161613677</figcaption>
	
</figure></p>
<h5 id="其他函数">其他函数</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">version</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">version</span><span class="p">()</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">8</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">24</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">database</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">database</span><span class="p">()</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">myemployees</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">user</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">user</span><span class="p">()</span><span class="w">         </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">root</span><span class="o">@</span><span class="n">localhost</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="流程控制函数">流程控制函数</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="w"> </span><span class="n">IF函数</span><span class="w"> </span><span class="n">true就是第二个参数</span><span class="w"> </span><span class="n">false就是第三个参数</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="k">isnull</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">)</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;没奖金 呵呵&#39;</span><span class="p">,</span><span class="s1">&#39;有奖金 嘻嘻&#39;</span><span class="p">)</span><span class="w"> </span><span class="err">备注</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">备注</span><span class="w">        </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">有奖金</span><span class="w"> </span><span class="err">嘻嘻</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">有奖金</span><span class="w"> </span><span class="err">嘻嘻</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="n">mysql中默认</span><span class="w"> </span><span class="mi">0</span><span class="err">就是第三个参数</span><span class="w"> </span><span class="mi">1</span><span class="err">就是第二个参数</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="k">isnull</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">),</span><span class="s1">&#39;没奖金 呵呵&#39;</span><span class="p">,</span><span class="s1">&#39;有奖金 嘻嘻&#39;</span><span class="p">)</span><span class="w"> </span><span class="err">备注</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">备注</span><span class="w">        </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">没奖金</span><span class="w"> </span><span class="err">呵呵</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">没奖金</span><span class="w"> </span><span class="err">呵呵</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="k">isnull</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">),</span><span class="n">concat</span><span class="p">(</span><span class="s1">&#39;没奖金 呵呵 &#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="n">concat</span><span class="p">(</span><span class="s1">&#39;有奖金 嘻嘻 &#39;</span><span class="p">,</span><span class="n">commission_pct</span><span class="p">))</span><span class="w"> </span><span class="err">备注</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">备注</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">没奖金</span><span class="w"> </span><span class="err">呵呵</span><span class="w"> </span><span class="mi">0</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">没奖金</span><span class="w"> </span><span class="err">呵呵</span><span class="w"> </span><span class="mi">0</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">case</span><span class="w"> </span><span class="err">函数</span><span class="w"> </span><span class="err">相当于</span><span class="w"> </span><span class="n">switch</span><span class="w"> </span><span class="n">case的效果</span><span class="w">
</span><span class="w"></span><span class="cm">/*
</span><span class="cm">	case 要判断的字段或者表达式
</span><span class="cm">	when 常量1 then 要显示的值1或语句1
</span><span class="cm">	when 常量2 then 要显示的值2或语句2
</span><span class="cm">	...
</span><span class="cm">	else 要显示的值n或语句n
</span><span class="cm">	end
</span><span class="cm">*/</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="err">原始工资</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="err">部门</span><span class="p">,</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="mi">30</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">salary</span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">salary</span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">salary</span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">3</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">end</span><span class="w">  </span><span class="k">as</span><span class="w"> </span><span class="err">新工资</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">原始工资</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">部门</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">新工资</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">case</span><span class="w"> </span><span class="err">多重</span><span class="n">if类似于</span><span class="w">
</span><span class="w"></span><span class="cm">/*
</span><span class="cm">	case 
</span><span class="cm">	when 条件1 then 要显示的值1或语句1
</span><span class="cm">	when 条件2 then 要显示的值2或语句2
</span><span class="cm">	...
</span><span class="cm">	else 要显示的值n或语句n
</span><span class="cm">	end
</span><span class="cm">*/</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="p">,</span><span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">20000</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="s1">&#39;A&#39;</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">15000</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="s1">&#39;B&#39;</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">10000</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="s1">&#39;C&#39;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;D&#39;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">工资级别</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="err">工资级别</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">A</span><span class="w">        </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">B</span><span class="w">        </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">B</span><span class="w">        </span><span class="o">|</span><span class="w">
</span></code></pre></div><p>练习</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">`</span><span class="k">new</span><span class="w"> </span><span class="n">salary</span><span class="o">`</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">substr</span><span class="p">(</span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">szm</span><span class="w"> </span><span class="p">,</span><span class="k">length</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="o">`</span><span class="k">length</span><span class="o">`</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">szm</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">szm</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="k">length</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Austin</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">A</span><span class="w">    </span><span class="o">|</span><span class="w">      </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Atkinson</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">A</span><span class="w">    </span><span class="o">|</span><span class="w">      </span><span class="mi">8</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">concat</span><span class="p">(</span><span class="n">last_name</span><span class="p">,</span><span class="s1">&#39; earns &#39;</span><span class="w"> </span><span class="p">,</span><span class="n">salary</span><span class="w"> </span><span class="p">,</span><span class="s1">&#39; monthly but wants &#39;</span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="o">*</span><span class="mi">3</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">`</span><span class="n">Dream</span><span class="w"> </span><span class="n">Salary</span><span class="o">`</span><span class="w">  </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w">  </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Dream</span><span class="w"> </span><span class="n">Salary</span><span class="w">                                        </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w"> </span><span class="n">earns</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">monthly</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">wants</span><span class="w"> </span><span class="mi">72000</span><span class="p">.</span><span class="mi">00</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w"> </span><span class="n">earns</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">monthly</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">wants</span><span class="w"> </span><span class="mi">51000</span><span class="p">.</span><span class="mi">00</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">job</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="s1">&#39;AD_PRES&#39;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="s1">&#39;A&#39;</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="s1">&#39;ST_MAN&#39;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="s1">&#39;B&#39;</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="s1">&#39;IT_PROG&#39;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="s1">&#39;C&#39;</span><span class="k">end</span><span class="w">  </span><span class="n">grade</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">job</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">grade</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">AC_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">AC_MGR</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w">
</span></code></pre></div><h5 id="分组函数">分组函数</h5>
<p>功能:用作统计使用,又称为聚合函数或统计函数或组函数</p>
<p>分类:</p>
<p>sum 求和 avg平均值 max最大值 min最小值 count计算个数</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">   </span><span class="mi">691400</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">6461</span><span class="p">.</span><span class="mi">682243</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">     </span><span class="mi">2100</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">    </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">           </span><span class="mi">107</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w"> 
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">round</span><span class="p">(</span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">),</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="err">平均</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">最低</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">最高</span><span class="p">,</span><span class="k">count</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">个数</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+---------+---------+----------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">和</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="err">平均</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="err">最低</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="err">最高</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="err">个数</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+---------+---------+----------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">691400</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">6461</span><span class="p">.</span><span class="mi">68</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2100</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">107</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+---------+---------+----------+------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">参数支持哪些类型</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">sum</span><span class="w"> </span><span class="k">avg</span><span class="w"> </span><span class="err">不支持字符型</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">              </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w">              </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+----------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="k">max</span><span class="w"> </span><span class="k">min</span><span class="w"> </span><span class="err">支持字符型</span><span class="o">/</span><span class="err">日期型</span><span class="w"> </span><span class="err">只要能够排序</span><span class="w"> </span><span class="k">max</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="n">min就能支持</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Zlotkey</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">Abel</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------+----------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">hiredate</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">hiredate</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w">  </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">hiredate</span><span class="p">)</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">hiredate</span><span class="p">)</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+---------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">count支持计数</span><span class="w"> </span><span class="err">计的是非</span><span class="n">null的数</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">              </span><span class="mi">107</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">)</span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">                    </span><span class="mi">35</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">判断是否忽略</span><span class="n">null来计算</span><span class="w"> </span><span class="err">这里说明</span><span class="n">sum肯定是没参与</span><span class="w"> </span><span class="err">因为如果有</span><span class="k">null</span><span class="w"> </span><span class="k">null</span><span class="o">+</span><span class="err">任何都是</span><span class="k">null</span><span class="w"> </span><span class="err">不可能有值</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">avg也没有参与</span><span class="w"> </span><span class="err">所以</span><span class="n">avg不将null的项加入运算</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">)</span><span class="err">总计</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">)</span><span class="w"> </span><span class="err">平均值</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">)</span><span class="o">/</span><span class="mi">35</span><span class="w"> </span><span class="err">没参与</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">)</span><span class="o">/</span><span class="mi">107</span><span class="w"> </span><span class="err">参与了</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+----------+----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">总计</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">平均值</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="err">没参与</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="err">参与了</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+----------+----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">7</span><span class="p">.</span><span class="mi">80</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">222857</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">222857</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">072897</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+----------+----------+----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">min</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="k">max</span><span class="w"> </span><span class="err">也忽略了</span><span class="k">null</span><span class="w"> </span><span class="err">否则肯定会在一头出现的</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">)</span><span class="w"> </span><span class="k">max</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">)</span><span class="w"> </span><span class="k">min</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">max</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="k">min</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">40</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">可以和</span><span class="k">distinct</span><span class="w"> </span><span class="err">匹配使用</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">去重</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">不去重</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">去重</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="err">不去重</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">397900</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">691400</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+-----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="k">distinct</span><span class="p">(</span><span class="n">salary</span><span class="p">))</span><span class="w"> </span><span class="err">几种工资</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">几种工资</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">       </span><span class="mi">57</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="k">count</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">意思是加了一列</span><span class="w"> </span><span class="err">那么当然就等同于统计行数辣</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">      </span><span class="mi">107</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">      </span><span class="mi">107</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">      </span><span class="mi">107</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p><strong>所有的分组函数 都忽略null值</strong></p>
<p><strong>可以和distinct搭配</strong></p>
<p><strong>count函数的详细介绍</strong></p>
<p>效率:</p>
<p>MYISAM 存储引擎下, count(*) 的效率高</p>
<p>INNODB存储引擎下, count(*) 和 count(1) 的效率差不多,比count(字段) 要高一点儿</p>
<p>和分组函数一同查询的字段有限制</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">已经不存在逻辑意义了</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">6461</span><span class="p">.</span><span class="mi">682243</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>和分组函数一同查询的字段要求是group by 后的字段</p>
<p>练习一下</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">datediff</span><span class="p">(</span><span class="k">max</span><span class="p">(</span><span class="n">hiredate</span><span class="p">),</span><span class="k">min</span><span class="p">(</span><span class="n">hiredate</span><span class="p">))</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">datediff</span><span class="p">(</span><span class="k">max</span><span class="p">(</span><span class="n">hiredate</span><span class="p">),</span><span class="k">min</span><span class="p">(</span><span class="n">hiredate</span><span class="p">))</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">                                  </span><span class="mi">8735</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">datediff</span><span class="p">(</span><span class="n">now</span><span class="p">(),</span><span class="s1">&#39;1997-11-21&#39;</span><span class="p">)</span><span class="w"> </span><span class="err">活了多久了</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">活了多久了</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">       </span><span class="mi">8705</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">90</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">        </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="分组查询">分组查询</h5>
<p>select 分组函数, 列(要求出现在group by的后面) from 表 where 筛选条件 group by 分组的列表 order by 子句</p>
<p>**注意:	**查询列表必须特殊,要求是分组函数和group by 后出现的字段</p>
<p><strong>group by可以使用别名</strong>  <strong>oracle是不支持的 mysql支持</strong></p>
<p><strong>having 可以使用别名</strong> <strong>oracle是不支持的 mysql支持</strong></p>
<p><strong>order by 可以使用别名 oracle是不支持的 mysql支持</strong></p>
<p><strong>where 不可以使用别名</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">最高工资</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="err">工种</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">工种</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">最高工资</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">工种</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">8300</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AC_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AC_MGR</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4400</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_ASST</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="err">部门个数</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="err">位置</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">位置</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">部门个数</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">位置</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w">        </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1400</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">        </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">平均工资</span><span class="p">,</span><span class="n">department_id</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%a%&#39;</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">平均工资</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">7000</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4400</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+----------+
</span><span class="c1"></span><span class="mi">11</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询有奖金的每个领导手下员工的最高工资</span><span class="w"> </span><span class="err">很奇怪</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="err">最高工资</span><span class="p">,</span><span class="n">manager_id</span><span class="w"> </span><span class="err">领导</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">&lt;=&gt;</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">最高工资</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">领导</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">9000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">102</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">6000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">103</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">101</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">9000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">108</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">3100</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">114</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">3200</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">120</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4200</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">121</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">3800</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">122</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">123</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">3500</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">124</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">6000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">201</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">8300</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">205</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------+
</span><span class="c1"></span><span class="mi">14</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="err">最高工资</span><span class="p">,</span><span class="n">manager_id</span><span class="w"> </span><span class="err">领导</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="p">;</span><span class="w"> 
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">最高工资</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">领导</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">14000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">10000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">145</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">10000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">146</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">10500</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">147</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">11500</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">148</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">11000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">149</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+------+
</span><span class="c1"></span><span class="mi">6</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询每个部门的员工个数</span><span class="w"> </span><span class="err">其实就是</span><span class="k">having</span><span class="w"> </span><span class="err">在每个</span><span class="n">group之下的筛选</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="err">部门</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="err">员工个数</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">部门</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="err">员工个数</span><span class="o">&gt;</span><span class="mi">2</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">部门</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">员工个数</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">   </span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">50</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">45</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">80</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">34</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+----------+
</span><span class="c1"></span><span class="mi">6</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询每个工种有奖金的员工的最高工资</span><span class="o">&gt;</span><span class="mi">12000</span><span class="err">的工种编号和最高工资</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">最高工资</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="err">工种编号</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">工种编号</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="err">最高工资</span><span class="o">&gt;</span><span class="mi">12000</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">最高工资</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">工种编号</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">14000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">SA_MAN</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询领导编号</span><span class="o">&gt;</span><span class="mi">102</span><span class="err">的每个领导手下的最低工资</span><span class="o">&gt;</span><span class="mi">5000</span><span class="err">的领导编号是那个</span><span class="p">,</span><span class="err">以及其最低工资</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">最低工资</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="err">领导编号</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">manager_id</span><span class="o">&gt;</span><span class="mi">102</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">领导编号</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="err">最低工资</span><span class="o">&gt;</span><span class="mi">5000</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">最低工资</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">领导编号</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">6900</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="mi">108</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">7000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="mi">145</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="特点">特点</h5>
<ol>
<li>分组查询中的筛选条件分为两类
<ol>
<li>分组前筛选  来源于原始表  放在group by 子句的前面 使用where关键字</li>
<li>分组后筛选  来源于分组后的结果集 放在group by子句的后面 使用having关键字</li>
<li>分组函数 min max count avg 作为条件肯定是放在having子句中</li>
<li>能用分组前筛选的,就优先考虑放在分组前面,考虑到性能</li>
</ol>
</li>
<li>group by 子句支持单个字段分组,多个字段分组(多个字段之间用逗号隔开,没有顺序之分),也支持表达式或函数(较少)</li>
<li>也可以添加排序(排序放在整个分组查询的最后)</li>
</ol>
<h5 id="按表达式或函数分组">按表达式或函数分组</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">按员工姓名的长度分组</span><span class="p">,</span><span class="err">查询每一组的员工个数</span><span class="p">,</span><span class="err">筛选同学个数</span><span class="o">&gt;</span><span class="mi">5</span><span class="err">的有哪些</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="err">姓名长度</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="err">员工个数</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="err">员工个数</span><span class="o">&gt;</span><span class="mi">5</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">姓名长度</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">员工个数</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">        </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">29</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">        </span><span class="mi">7</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">15</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="按多个字段分组">按多个字段分组</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">查询每个部门每个工种的员工的平均工资</span><span class="w"> </span><span class="err">交换</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">的顺序不影响</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">平均工资</span><span class="p">,</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="err">工种编号</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">工种编号</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+----------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">平均工资</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">工种编号</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+----------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_PRES</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_VP</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">5760</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">IT_PROG</span><span class="w">    </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="分组后添加排序">分组后添加排序</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">平均工资</span><span class="p">,</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="err">工种编号</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">工种编号</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">平均工资</span><span class="w"> </span><span class="k">asc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+----------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">平均工资</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">工种编号</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+----------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">2780</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">PU_CLERK</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">2785</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">50</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ST_CLERK</span><span class="w">   </span><span class="o">|</span><span class="w">
</span></code></pre></div><p>练习一下</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="err">工种</span><span class="p">,</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">最大</span><span class="w"> </span><span class="p">,</span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">最小</span><span class="w"> </span><span class="p">,</span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">平均</span><span class="w"> </span><span class="p">,</span><span class="k">sum</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">总和</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">工种</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">工种</span><span class="w"> </span><span class="k">asc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------+----------+--------------+-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">工种</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="err">最大</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="err">最小</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="err">平均</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="err">总和</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------+----------+--------------+-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">AC_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">8300</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">8300</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">8300</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">8300</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">AC_MGR</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="o">-</span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="n">DIFFERENCE</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">DIFFERENCE</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">   </span><span class="mi">21900</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="err">领导编号</span><span class="p">,</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="err">员工编号</span><span class="p">,</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">最低工资</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;=</span><span class="mi">6000</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">领导编号</span><span class="w">  </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">领导编号</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">员工编号</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">最低工资</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">      </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="mi">101</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">6500</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">      </span><span class="mi">102</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="mi">103</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">9000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="err">员工数量</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">平均工资</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">平均工资</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">部门编号</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">员工数量</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">平均工资</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+----------+--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">       </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">19333</span><span class="p">.</span><span class="mi">333333</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">      </span><span class="mi">110</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">10150</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="err">工种</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="err">人数</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">工种</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">工种</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="err">人数</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">AC_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">AC_MGR</span><span class="w">     </span><span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="连接查询">连接查询</h5>
<p>含义:又称为多表查询,当查询的字段来自于多个表时,就会用到连接查询</p>
<p>笛卡尔积现象: 表1 有m行 表2 有n行 结果有m*n行</p>
<p>发生原因:没有有效的连接条件</p>
<p>如何避免:添加有效的连接条件</p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210921141653473.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210921141653473.png"
			
			
			
			loading="lazy"
			alt="image-20210921141653473">
	</a>
	
	<figcaption>image-20210921141653473</figcaption>
	
</figure></p>
<p>每个都匹配了一遍 , 这不好 ,都是我的</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">boyName</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">beauty</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="n">boys</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">boyName</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Angelababy</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">黄晓明</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">热巴</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="err">鹿晗</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">周芷若</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="err">张无忌</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">小昭</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="err">张无忌</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">王语嫣</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="err">段誉</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">赵敏</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="err">张无忌</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+---------+
</span></code></pre></div><p>分类:</p>
<ul>
<li>按照年代分类
<ul>
<li>sql92标准 仅仅支持内连接</li>
<li>sql99标准 [推荐] 支持内连接+外连接(左外+右外)+交叉连接</li>
</ul>
</li>
<li>按功能分类
<ul>
<li>内连接
<ul>
<li>等值连接</li>
<li>非等值连接</li>
<li>自连接</li>
</ul>
</li>
<li>外连接
<ul>
<li>左外连接</li>
<li>右外连接</li>
<li>全外连接</li>
</ul>
</li>
<li>交叉连接</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">以下是</span><span class="n">sql92标准的等值连接用法</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employees</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="n">departments</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">Exe</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Exe</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">为表起别名</span><span class="w"> </span><span class="err">提高语句的简洁度</span><span class="w"> </span><span class="err">区分多个重名的字段</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_title</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jobs</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">job_title</span><span class="w">                       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Gietz</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">AC_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Public</span><span class="w"> </span><span class="n">Accountant</span><span class="w">               </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Higgins</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">AC_MGR</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Accounting</span><span class="w"> </span><span class="n">Manager</span><span class="w">              </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">交换表的出现顺序是可以的</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">加上筛选条件</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Russell</span><span class="w">    </span><span class="o">|</span><span class="w">           </span><span class="mi">0</span><span class="p">.</span><span class="mi">40</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Sal</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Partners</span><span class="w">   </span><span class="o">|</span><span class="w">           </span><span class="mi">0</span><span class="p">.</span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Sal</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="p">,</span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;_o%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">city</span><span class="w">                </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">IT</span><span class="w">              </span><span class="o">|</span><span class="w"> </span><span class="n">Southlake</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Shi</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">South</span><span class="w"> </span><span class="n">San</span><span class="w"> </span><span class="n">Francisco</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询每个城市的部门个数</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="err">部门个数</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">city</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="err">部门个数</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Southlake</span><span class="w">           </span><span class="o">|</span><span class="w">        </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">South</span><span class="w"> </span><span class="n">San</span><span class="w"> </span><span class="n">Francisco</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Seattle</span><span class="w">             </span><span class="o">|</span><span class="w">       </span><span class="mi">21</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">manager_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">最低工资</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">最低工资</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">            </span><span class="mi">80</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Sal</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">145</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">6100</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+----------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">job_title</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="err">员工个数</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">员工个数</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">job_title</span><span class="w">                       </span><span class="o">|</span><span class="w"> </span><span class="err">员工个数</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Sales</span><span class="w"> </span><span class="n">Representative</span><span class="w">            </span><span class="o">|</span><span class="w">       </span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Shipping</span><span class="w"> </span><span class="n">Clerk</span><span class="w">                  </span><span class="o">|</span><span class="w">       </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">三表连接</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">city</span><span class="w">                </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Whalen</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Adm</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">Seattle</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Hartstein</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">Mar</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">Toronto</span><span class="w">             </span><span class="o">|</span><span class="w">
</span></code></pre></div><p><strong>注意:如果为表起了别名,则查询的字段就不能使用原来的表名去限定了</strong></p>
<h5 id="sql92标准">sql92标准</h5>
<ol>
<li>等值连接
<ol>
<li>多表等值连接的结果为多表的交集部分</li>
<li>n表连接,至少需要n-1个连接条件</li>
<li>多表的顺序没有要求</li>
<li>一般需要为表其别名</li>
<li>可以搭配前面介绍的所有子句使用,比如排序/筛选/分组</li>
</ol>
</li>
<li>非等值连接</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">非等值连接</span><span class="w"> </span><span class="err">也可以加上排序</span><span class="o">/</span><span class="err">筛选</span><span class="o">/</span><span class="err">分组</span><span class="w">  
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">grade_level</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_grades</span><span class="w"> </span><span class="k">g</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">lower_sal</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">highest_sal</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">grade_level</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">E</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">E</span><span class="w">           </span><span class="o">|</span><span class="w">
</span></code></pre></div><p>​	3.自连接</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="err">员工名</span><span class="w"> </span><span class="p">,</span><span class="n">b</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="err">领导名称</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">manager_id</span><span class="w"> </span><span class="o">=</span><span class="n">b</span><span class="p">.</span><span class="n">employee_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">员工名</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="err">领导名称</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="练习一下">练习一下</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">    </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">2100</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">asc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">206</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AC_ACCOUNT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Gietz</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">205</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AC_MGR</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Higgins</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%a%e%&#39;</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">AD_PRES</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">SA_REP</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">substr</span><span class="p">(</span><span class="s1">&#39;aabbcc&#39;</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">substr</span><span class="p">(</span><span class="s1">&#39;aabbcc&#39;</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">bbcc</span><span class="w">               </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">trim</span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;aa&#39;</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="s1">&#39;aaabbbcccaaa&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">trim</span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;aa&#39;</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="s1">&#39;aaabbbcccaaa&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">abbbccca</span><span class="w">                        </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="复习一下-1">复习一下</h5>
<p>语法</p>
<p>select 查询列表 from 表 where 筛选条件 order by 排序列表 asc|desc</p>
<p>特点</p>
<p>asc 升序 默认 desc 降序</p>
<p>排序列表 支持 单个字段 多个字段 函数 表达式 别名</p>
<p>order by 位置一般放在查询语句的最后(除了limit语句之外)</p>
<p>常见函数</p>
<p>功能:类似于java中的方法</p>
<p>好处:提高重用性和隐藏实现细节</p>
<p>调用:select 函数名(实参列表) ;</p>
<p>单行函数</p>
<ul>
<li>字符函数 length concat substr substring upper lower instr  replace trim lpad rpad</li>
<li>数学函数 truncate round ceil mod floor rand(获取随机数 0-1)</li>
<li>日期函数 curdate curtime now year month monthname day hour minute second date_format str_to_date <strong>timediff datediff</strong></li>
<li>其他函数 version user database ifnull isnull <strong>md5</strong>(自动将字符加密成md格式密文)</li>
<li>流程控制函数 if case when then else end</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">MD5</span><span class="p">(</span><span class="s1">&#39;lalala123&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">MD5</span><span class="p">(</span><span class="s1">&#39;lalala123&#39;</span><span class="p">)</span><span class="w">                 </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">24500</span><span class="n">fa6ecaeb8300905727802af3081</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>流程控制函数</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">if</span><span class="p">(</span><span class="err">条件表达式</span><span class="p">,</span><span class="w"> </span><span class="err">表达式</span><span class="mi">1</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">表达式</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="err">如果条件表达式成立</span><span class="p">,</span><span class="w"> </span><span class="err">返回表达式</span><span class="mi">1</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">否则返回表达式</span><span class="mi">2</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">case</span><span class="w"> </span><span class="err">情况</span><span class="mi">1</span><span class="w"> 
</span><span class="w">
</span><span class="w"></span><span class="k">case</span><span class="w"> </span><span class="err">变量或表达式或字段</span><span class="w">
</span><span class="w">
</span><span class="w">	</span><span class="k">when</span><span class="w"> </span><span class="err">常量</span><span class="mi">1</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="err">值</span><span class="mi">1</span><span class="w">
</span><span class="w">
</span><span class="w">	</span><span class="k">when</span><span class="w"> </span><span class="err">常量</span><span class="mi">2</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="err">值</span><span class="mi">2</span><span class="w">
</span><span class="w">
</span><span class="w">	</span><span class="k">else</span><span class="w"> </span><span class="err">值</span><span class="n">n</span><span class="w">
</span><span class="w">
</span><span class="w"> </span><span class="k">end</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">case</span><span class="w"> </span><span class="err">情况</span><span class="mi">2</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">case</span><span class="w"> 
</span><span class="w">
</span><span class="w">	</span><span class="k">when</span><span class="w"> </span><span class="err">条件</span><span class="mi">1</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="err">值</span><span class="mi">1</span><span class="w">
</span><span class="w">
</span><span class="w">	</span><span class="k">when</span><span class="w"> </span><span class="err">条件</span><span class="mi">2</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="err">值</span><span class="mi">2</span><span class="w">
</span><span class="w">
</span><span class="w">	</span><span class="k">else</span><span class="w"> </span><span class="err">值</span><span class="n">n</span><span class="w">
</span><span class="w">
</span><span class="w"> </span><span class="k">end</span><span class="w">
</span></code></pre></div><h5 id="分组函数-1">分组函数</h5>
<p>分类</p>
<p>max min avg sum count</p>
<p>特点</p>
<p>select max(字段) from 表名</p>
<p>支持的类型</p>
<p><strong>sum 和 avg 一般用于处理数值型</strong></p>
<p><strong>max min count 可以处理任何数据类型</strong></p>
<p><strong>以上分组函数都忽略null</strong></p>
<p><strong>都可以搭配distinct使用,实现去重的统计</strong></p>
<p>select sum(distinct 字段) from 表 ;</p>
<p>count函数</p>
<p>count(字段) 统计该字段非空值的个数</p>
<p>count(*) 统计结果集的行数</p>
<p>count(1) 统计结果集的行数</p>
<p>效率上:</p>
<p>myisam 存储引擎 count(*) 最高</p>
<p>innodb 存储引擎 count(*)和count(1) 效率&gt;count(字段)</p>
<p>和分组函数一同查询的字段,要求是group by后面出现的字段</p>
<h5 id="分组查询-1">分组查询</h5>
<p>select 分组函数, 分组后的字段 from 表 where 筛选条件 group by 分组的字段 having 分组后的筛选 order by 排序列表</p>
<p>分组前筛选 where 原始表 group by的前面</p>
<p>分组后筛选 having 分组后的结果 group by的后面</p>
<h5 id="连接查询-1">连接查询</h5>
<h5 id="含义">含义</h5>
<p>当查询中涉及到了多个表的字段,需要使用多表连接</p>
<p>select 字段1 , 字段2 from 表1 , 表2</p>
<p>笛卡儿乘积:当查询多个表时,没有添加有效的连接条件,导致多个表所有行实现完全连接</p>
<p>如何解决:添加有效的连接条件</p>
<h5 id="分类">分类</h5>
<ul>
<li>按年代分类
<ul>
<li>sql92
<ul>
<li>等值</li>
<li>非等值</li>
<li>自连接</li>
<li>也支持一部分外连接 用于oracle sqlserver , mysql不支持</li>
</ul>
</li>
<li>sql99 [推荐使用]
<ul>
<li>内连接
<ul>
<li>等值</li>
<li>非等值</li>
<li>自连接</li>
</ul>
</li>
<li>外连接
<ul>
<li>左外</li>
<li>右外</li>
<li>全外(mysql 不支持)</li>
</ul>
</li>
<li>交叉连接</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="等值连接">等值连接:</h5>
<p>select 查询列表 from 表1 别名, 表2 别名 where 表1.key = 表2.key and 筛选条件 group by 分组字段 having 分组后的筛选 order by 排序字段</p>
<p>特点:</p>
<ul>
<li>一般为表起别名</li>
<li>多表顺序可以调换</li>
<li>n表连接至少需要n-1个连接条件</li>
<li>等值连接的结果是多表的交集部分</li>
</ul>
<h5 id="非等值连接">非等值连接</h5>
<p>select 查询列表 from 表1 别名, 表2 别名 where 非等值连接条件 and 筛选条件 group by 分组字段 having 分组后的筛选 order by 排序字段</p>
<h5 id="自连接">自连接</h5>
<p>select 查询列表 from 表 别名1, 表 别名2 where 等值连接条件 and 筛选条件 group by 分组字段 having 分组后的筛选 order by 排序字段</p>
<p>练习一下</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+---------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+---------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Whalen</span><span class="w">      </span><span class="o">|</span><span class="w">            </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Adm</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Hartstein</span><span class="w">   </span><span class="o">|</span><span class="w">            </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Mar</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">90</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">AD_PRES</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1700</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">AD_VP</span><span class="w">   </span><span class="o">|</span><span class="w">        </span><span class="mi">1700</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="p">,</span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+-----------------+-------------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">city</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+-----------------+-------------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Russell</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Sal</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">2500</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Oxford</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Partners</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">Sal</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">2500</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Oxford</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="o">=</span><span class="s1">&#39;Toronto&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+--------+---------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+--------+---------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Hartstein</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">MK_MAN</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Mar</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Fay</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">MK_REP</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Mar</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+--------+---------------+-----------------+\
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询每个工种</span><span class="w"> </span><span class="err">每个部门的部门名</span><span class="w"> </span><span class="err">工种名</span><span class="w"> </span><span class="err">和最低工资</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_title</span><span class="w"> </span><span class="p">,</span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="p">,</span><span class="n">jobs</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">job_title</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_name</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------+---------------------------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_title</span><span class="w">                       </span><span class="o">|</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------+---------------------------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Acc</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="k">Public</span><span class="w"> </span><span class="n">Accountant</span><span class="w">               </span><span class="o">|</span><span class="w">     </span><span class="mi">8300</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Acc</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">Accounting</span><span class="w"> </span><span class="n">Manager</span><span class="w">              </span><span class="o">|</span><span class="w">    </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询每个国家下的部门个数大于</span><span class="mi">2</span><span class="err">的国家编号</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">country_id</span><span class="p">,</span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="err">部门个数</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">country_id</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="err">部门个数</span><span class="o">&gt;</span><span class="mi">2</span><span class="w">  </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">country_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">部门个数</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">US</span><span class="w">         </span><span class="o">|</span><span class="w">       </span><span class="mi">23</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">选择指定员工的姓名</span><span class="w"> </span><span class="err">员工号</span><span class="w"> </span><span class="err">以及他的管理者的姓名和员工号</span><span class="w"> </span><span class="err">结果类似于下面的格式</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">employee_id</span><span class="w"> </span><span class="n">Emp</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="n">manager</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">employee_id</span><span class="w"> </span><span class="n">Mgr</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">manager_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">employee_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----+-----------+-----+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employees</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">Emp</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">Mgr</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----+-----------+-----+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">101</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">102</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="sql99语法">sql99语法</h5>
<p>语法:</p>
<p>select 查询列表 from 表1 别名 连接类型 join 表2 别名 on 连接条件 where 筛选条件 group by 分组条件 having 筛选条件 order by 排序列表</p>
<p>分类:</p>
<p>内连接: inner</p>
<p>外连接:</p>
<p>​	左外:left outer</p>
<p>​	右外:right outer</p>
<p>​	全外:full outer</p>
<p>交叉连接 :cross</p>
<h5 id="内连接">内连接</h5>
<p>select 查询列表 from 表1 别名 inner join 表2 别名 on 连接条件 where 筛选条件 &hellip;</p>
<p>分类:</p>
<ul>
<li>等值连接</li>
<li>非等值连接</li>
<li>自连接</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">调换顺序是可以的</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Whalen</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Adm</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_title</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%e%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">job_title</span><span class="w">                       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Administration</span><span class="w"> </span><span class="n">Vice</span><span class="w"> </span><span class="n">President</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Ernst</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">Programmer</span><span class="w">                      </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_title</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%e%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">job_title</span><span class="w">                       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Administration</span><span class="w"> </span><span class="n">Vice</span><span class="w"> </span><span class="n">President</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Ernst</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">Programmer</span><span class="w">                      </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询部门个数</span><span class="o">&gt;</span><span class="mi">3</span><span class="err">的城市名和部门个数</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="err">部门个数</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="err">部门个数</span><span class="o">&gt;</span><span class="mi">3</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">city</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="err">部门个数</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Seattle</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="mi">21</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+----------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询哪个部门的员工个数</span><span class="o">&gt;</span><span class="mi">3</span><span class="err">的部门名和员工个数</span><span class="p">,</span><span class="err">并按个数降序</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="err">员工个数</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">3</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">员工个数</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Shi</span><span class="w">             </span><span class="o">|</span><span class="w">       </span><span class="mi">45</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Sal</span><span class="w">             </span><span class="o">|</span><span class="w">       </span><span class="mi">34</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Pur</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">多表连接</span><span class="w"> </span><span class="err">是有顺序的</span><span class="w"> </span><span class="err">第一个表和第二个表在连接的时候形成了新的表</span><span class="w"> </span><span class="err">然后新的表里的字段和第三个表里的字段再连接</span><span class="w"> </span><span class="err">所以是有顺序之分的</span><span class="w"> </span><span class="err">这个和两表连接有差别</span><span class="w"> 
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_title</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------------+---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_title</span><span class="w">                       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------------+---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Taylor</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Shi</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">Shipping</span><span class="w"> </span><span class="n">Clerk</span><span class="w">                  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Fleaur</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Shi</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">Shipping</span><span class="w"> </span><span class="n">Clerk</span><span class="w">                  </span><span class="o">|</span><span class="w">
</span></code></pre></div><p>特点:</p>
<ul>
<li>添加排序/分组/筛选</li>
<li>inner可以省略</li>
<li>筛选条件放在where后面 , 连接条件放在on后面, 提高分离性, 便于阅读</li>
<li>inner join等值连接和sql92中的等值连接效果是一样的,都是查询多表的交集</li>
</ul>
<h5 id="非等值连接-1">非等值连接</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">非等值连接</span><span class="w"> 
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">grade_level</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">job_grades</span><span class="w"> </span><span class="k">g</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">salary</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">lower_sal</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">highest_sal</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">grade_level</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">E</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">E</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询工资级别的个数</span><span class="o">&gt;</span><span class="mi">2</span><span class="err">并且按工资级别降序</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="err">级别个数</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">grade_level</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">job_grades</span><span class="w"> </span><span class="k">g</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">salary</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">lower_sal</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">highest_sal</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">grade_level</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="err">级别个数</span><span class="o">&gt;</span><span class="mi">2</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w">  </span><span class="k">g</span><span class="p">.</span><span class="n">grade_level</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">级别个数</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grade_level</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">       </span><span class="mi">24</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">A</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">       </span><span class="mi">26</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">B</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">       </span><span class="mi">38</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">C</span><span class="w">           </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="自连接-1">自连接</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">自连接</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询员工姓名和他的领导的姓名</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">manager_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">employee_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="外连接">外连接</h5>
<h5 id="应用场景">应用场景</h5>
<p>用于查询一个表中有,另一个表中没有的记录</p>
<p>特点</p>
<ol>
<li>外连接的查询结果为主表中的所有记录
<ol>
<li>如果从表中有和他匹配的,则显示匹配的值</li>
<li>如果从表中没有和他匹配的,则显示null</li>
<li>外连接查询结果=内连接结果+主表中有而从表中没有的记录</li>
</ol>
</li>
<li>左外连接,left join左边的是主表</li>
<li>右外连接,right join右边的是主表</li>
<li>交换两表的顺序和关键字,可以实现同样的结果</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">查询没有男朋友的女神名</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">这样的话就是内连接</span><span class="w"> </span><span class="err">内连接是取的交集</span><span class="w"> </span><span class="err">没有用查不到</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">g</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Angelababy</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">热巴</span><span class="w">       </span><span class="o">|</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">这样的话就是外连接</span><span class="w"> </span><span class="err">外连接全取了</span><span class="w"> </span><span class="err">要加筛选条件</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">g</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">柳岩</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">苍老师</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Angelababy</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">这样没错</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">g</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">柳岩</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">苍老师</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询那个部门没有员工</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w">  </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">           </span><span class="mi">120</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Tre</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">           </span><span class="mi">130</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Cor</span><span class="w">             </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="全外连接-好像不支持-全外连接内连接的结果表1中有但表2没有的表2中有但表1没有的">全外连接 好像不支持 全外连接=内连接的结果+表1中有但表2没有的+表2中有但表1没有的</h5>
<h5 id="交叉连接">交叉连接</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">交叉做</span><span class="w"> </span><span class="err">笛卡尔乘积</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">beauty</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">boys</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">cross</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+------------+------+---------------------+-------------+--------------+--------------+----+---------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">sex</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">borndate</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">phone</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">photo</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">boyName</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">userCP</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+------------+------+---------------------+-------------+--------------+--------------+----+---------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">柳岩</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="err">女</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">1988</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">18209876577</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">         </span><span class="o">|</span><span class="w">            </span><span class="mi">8</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">段誉</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">300</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">柳岩</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="err">女</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">1988</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="sql92和sql99的区别">sql92和sql99的区别</h5>
<p>功能:sql99 支持的较多</p>
<p>可读性:sql99实现连接条件和筛选条件的分离,可读性较高</p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210923202009215.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210923202009215.png"
			
			
			
			loading="lazy"
			alt="image-20210923202009215">
	</a>
	
	<figcaption>image-20210923202009215</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210923202111351.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210923202111351.png"
			
			
			
			loading="lazy"
			alt="image-20210923202111351">
	</a>
	
	<figcaption>image-20210923202111351</figcaption>
	
</figure></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">查询编号</span><span class="o">&gt;</span><span class="mi">3</span><span class="err">的女生的男朋友信息</span><span class="p">,</span><span class="err">如果有则列出</span><span class="p">,</span><span class="err">如果没有就</span><span class="n">null填充</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="err">女生</span><span class="n">id</span><span class="p">,</span><span class="k">g</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="p">,</span><span class="n">b</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">g</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">id</span><span class="o">&gt;</span><span class="mi">3</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+--------+------+---------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">女生</span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">boyName</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">userCP</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+--------+------+---------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w">      </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">热巴</span><span class="w">   </span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">鹿晗</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">800</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">      </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">周冬雨</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">   </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">      </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">周芷若</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">张无忌</span><span class="w">  </span><span class="o">|</span><span class="w">    </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询哪个城市没有部门</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">city</span><span class="w"> </span><span class="err">这个城市没有部门</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">这个城市没有部门</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Roma</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Venice</span><span class="w">           </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="子查询">子查询</h5>
<p>含义:出现在其他语句中的eslect语句,称为子查询或内查询</p>
<p>外部的查询语句,称为主查询或外查询</p>
<p>分类:</p>
<ul>
<li>按子查询出现的位置
<ul>
<li>select后面
<ul>
<li>一般只支持标量子查询</li>
</ul>
</li>
<li>from后面
<ul>
<li>支持表子查询</li>
</ul>
</li>
<li>where 或者 having 后面**(重要)**
<ul>
<li>支持标量子查询/列子查询/行子查询</li>
</ul>
</li>
<li>exists 后面 (相关子查询)
<ul>
<li>表子查询</li>
</ul>
</li>
</ul>
</li>
<li>按功能(结果集的行列书不同)
<ul>
<li>标量子查询(结果集只有一行一列)</li>
<li>列子查询(结果集中只有一列多行)</li>
<li>行子查询(结果集有一行多列)</li>
<li>表子查询(结果结一般为多行多列)</li>
</ul>
</li>
</ul>
<h5 id="where或having后面的子查询">where或having后面的子查询</h5>
<p>支持标量子查询 / 列子查询 / 行子查询(多列多行)</p>
<p>特点:</p>
<ol>
<li>子查询放在小括号内</li>
<li>一般放在条件的右侧</li>
<li>标量子查询,一般搭配着单行操作符使用 &gt; &lt; &gt;= &lt;= &lt;&gt;</li>
<li>列子查询,一般搭配着多行操作符使用 in any/some all</li>
<li>子查询的执行顺序优先于主查询执行,主查询的条件用到了子查询的结果</li>
</ol>
<h5 id="标量子查询">标量子查询</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">谁的工资比</span><span class="n">Abel高</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="o">&gt;</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Abel&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="p">,</span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employee_id</span><span class="o">=</span><span class="mi">141</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">=</span><span class="mi">143</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Rajs</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">ST_CLERK</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">3500</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+---------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="mi">141</span><span class="err">号员工的</span><span class="n">job_id相同的</span><span class="p">,</span><span class="n">salary比143号员工多的员工</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="p">,</span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">job_id</span><span class="o">=</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">=</span><span class="mi">141</span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">=</span><span class="mi">143</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Nayer</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">ST_CLERK</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">3200</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Mikkilineni</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ST_CLERK</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2700</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Bissot</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">ST_CLERK</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">3300</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询公司工资最少的员工的</span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="p">,</span><span class="w"> </span><span class="err">和</span><span class="n">salary</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Olson</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">ST_CLERK</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2100</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+---------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询最低工资大于</span><span class="mi">50</span><span class="err">号部门的最低工资的部门</span><span class="n">id和其最低工资</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">最低工资</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">最低工资</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">          </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">7000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">4400</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="标量子查询可能出现的问题">标量子查询可能出现的问题</h5>
<ul>
<li>子查询里查到的元素个数不止一个</li>
<li>子查询里压根没查到任何元素</li>
</ul>
<h5 id="列子查询">列子查询</h5>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210923211703043.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210923211703043.png"
			
			
			
			loading="lazy"
			alt="image-20210923211703043">
	</a>
	
	<figcaption>image-20210923211703043</figcaption>
	
</figure></p>
<p><strong>any就是大于最小值小于最大值 all就是大于最大值小于最小值</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">查询</span><span class="n">location_id是1400或1700的部门中的所有员工姓名</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="mi">1400</span><span class="p">,</span><span class="mi">1700</span><span class="p">));</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Hunold</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Ernst</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Austin</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">返回比</span><span class="n">job_id为IT_PROG部门任意工资低的员工的员工号</span><span class="o">/</span><span class="err">姓名</span><span class="o">/</span><span class="n">job_id以及salary</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">any</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">job_id</span><span class="o">=</span><span class="s1">&#39;IT_PROG&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+------------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+------------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">104</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Ernst</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">IT_PROG</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">6000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">105</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Austin</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">IT_PROG</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">4800</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">也可以使用</span><span class="n">max或者min来代替any</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">any</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">job_id</span><span class="o">=</span><span class="s1">&#39;IT_PROG&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">employee_id</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+------------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+------------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">104</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Ernst</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">IT_PROG</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">6000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">105</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Austin</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">IT_PROG</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">4800</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">all也是同样的</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">in</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="o">=</span><span class="n">Any也是一样的</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="n">All也是一样的</span><span class="w">
</span></code></pre></div><h5 id="行子查询">行子查询</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">查询员工编号最小并且工资最高的员工信息</span><span class="w"> </span><span class="p">(</span><span class="err">不一定存在</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">简单粗暴的做法</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">employee_id</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+-------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">phone_number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">hiredate</span><span class="w">            </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+-------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Steven</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">SKING</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">4567</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_PRES</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+-------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">行子查询</span><span class="w"> </span><span class="err">有局限性</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="p">(</span><span class="n">employee_id</span><span class="p">,</span><span class="n">salary</span><span class="p">)</span><span class="o">=</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">employee_id</span><span class="p">),</span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+-------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">phone_number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">hiredate</span><span class="w">            </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+-------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Steven</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">SKING</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">4567</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_PRES</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+-------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="放在select后面的子查询">放在select后面的子查询</h5>
<p><strong>仅仅支持标量子查询</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">查询每个部门的员工个数</span><span class="w"> 
</span><span class="w"></span><span class="o">#</span><span class="err">通过子查询来做</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="p">,(</span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="o">=</span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+----------------------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="o">=</span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+----------------------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">            </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Adm</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">200</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1700</span><span class="w"> </span><span class="o">|</span><span class="w">                                                                    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Mar</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">201</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1800</span><span class="w"> </span><span class="o">|</span><span class="w">                                                                    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">也可以通过左右连接来做</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">right</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">            </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Adm</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">200</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1700</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Mar</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">201</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1800</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Pur</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">114</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1700</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询员工号</span><span class="o">=</span><span class="mi">102</span><span class="err">的部门名</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="p">,(</span><span class="k">select</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">employee_id</span><span class="w"> </span><span class="o">=</span><span class="mi">102</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+--------------------------------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+--------------------------------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">102</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Exe</span><span class="w">                                                                            </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+--------------------------------------------------------------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="from后面">from后面</h5>
<p>特点：将子查询充当一张表 <strong>要求必须起别名</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">查询每个部门的平均工资的工资等级</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">sql92语法</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="n">grade_level</span><span class="p">,</span><span class="n">av</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="n">av</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_id</span><span class="p">)</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="n">job_grades</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">av</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">lower_sal</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">highest_sal</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------------+--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grade_level</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">av</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------------+--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">          </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">C</span><span class="w">           </span><span class="o">|</span><span class="w">  </span><span class="mi">7000</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">B</span><span class="w">           </span><span class="o">|</span><span class="w">  </span><span class="mi">4400</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">sql99语法</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">av</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">grade_level</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="n">avs</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="p">)</span><span class="w"> </span><span class="n">av</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">job_grades</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">av</span><span class="p">.</span><span class="n">avs</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">lower_sal</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">highest_sal</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grade_level</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">          </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">C</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">B</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">C</span><span class="w">           </span><span class="o">|</span><span class="w">
</span></code></pre></div><h5 id="exists后面子查询">exists后面（子查询）</h5>
<p>select exists(select employee_id from employees)</p>
<p>语法:</p>
<p>exists(完整的查询语句) 结果是1/0</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">回顾</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">)</span><span class="err">部门</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="err">部门</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">Exe</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Exe</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询有员工的部门名</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">            </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Adm</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Mar</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">可以用</span><span class="n">in来代替</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">            </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Adm</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Mar</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询没有女朋友的男生信息</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">boyfriend_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+---------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">boyName</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">userCP</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+---------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">段誉</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">300</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+---------+--------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>练习一下</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Zlotkey&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Russell</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">14000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Partners</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">13500</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询各部门中工资比本部门平均工资中搞的员工和员工号</span><span class="p">,</span><span class="err">姓名和工资</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------------+-----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------------+-----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="mi">103</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Hunold</span><span class="w">    </span><span class="o">|</span><span class="w">  </span><span class="mi">9000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%u%&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">            </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="mi">103</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Hunold</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="mi">104</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Ernst</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询部门的</span><span class="n">location_id是1700的部门工作的员工的员工号</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">employee_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="mi">1700</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">200</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">114</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;K_ing&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询最高工资的员工的姓名</span><span class="p">,</span><span class="err">要求</span><span class="n">first_name和last_name显示为一列</span><span class="p">,</span><span class="err">列名为姓名</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">concat</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="err">姓</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="err">名</span><span class="p">)</span><span class="err">姓名</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="err">姓</span><span class="p">,</span><span class="n">last_name</span><span class="w"> </span><span class="err">名</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="p">))</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">姓名</span><span class="w">        </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">StevenK_ing</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="分页查询">分页查询</h5>
<p>应用场景:当要显示的数据,一页显示不全,需要分页提交sql请求的时候</p>
<p><strong>语法</strong>:select  查询列表 from 表 inner join 表2 on 连接条件 group by 分组字段 having 分组后的筛选 order by 排序后的字段 limit offset,size ;</p>
<p>offset要显示条目的起始索引(起始索引从0开始)</p>
<p>size要显示的条目个数</p>
<p><strong>特点</strong>:</p>
<ul>
<li>limit语句放在查询语句的最后</li>
<li>公式  要显示的页数 page 每页的条目数size , 那么就是limit (page-1)*size,size</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+----------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">email</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">phone_number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">hiredate</span><span class="w">            </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+----------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Steven</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">SKING</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">4567</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_PRES</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">101</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Neena</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">NKOCHHAR</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">4568</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_VP</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">102</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Lex</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">LDEHAAN</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">4569</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_VP</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">103</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Alexander</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">Hunold</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">AHUNOLD</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">590</span><span class="p">.</span><span class="mi">423</span><span class="p">.</span><span class="mi">4567</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">IT_PROG</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">9000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">102</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">104</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Bruce</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Ernst</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">BERNST</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">590</span><span class="p">.</span><span class="mi">423</span><span class="p">.</span><span class="mi">4568</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">IT_PROG</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">6000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">103</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+----------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="mi">5</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">如果从第一条开始的话</span><span class="p">,</span><span class="err">那么这样可以省略前一个数字</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+----------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">email</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">phone_number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">hiredate</span><span class="w">            </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+----------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Steven</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">SKING</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">4567</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_PRES</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">101</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Neena</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">NKOCHHAR</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">4568</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_VP</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">102</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Lex</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">LDEHAAN</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">4569</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AD_VP</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">103</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Alexander</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">Hunold</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">AHUNOLD</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">590</span><span class="p">.</span><span class="mi">423</span><span class="p">.</span><span class="mi">4567</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">IT_PROG</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">9000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">102</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">104</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Bruce</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Ernst</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">BERNST</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">590</span><span class="p">.</span><span class="mi">423</span><span class="p">.</span><span class="mi">4568</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">IT_PROG</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">6000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">103</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+----------+--------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="mi">5</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">第</span><span class="mi">11</span><span class="err">到第</span><span class="mi">25</span><span class="err">条</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="mi">15</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">salary</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">commission_pct</span><span class="p">)</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><h5 id="练习一下-1">练习一下</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">substr</span><span class="p">(</span><span class="n">email</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">instr</span><span class="p">(</span><span class="n">email</span><span class="p">,</span><span class="s1">&#39;@&#39;</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="err">个数</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">sex</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">sex</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">age</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">gradeName</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">grade</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stuinfo</span><span class="p">.</span><span class="n">gradeid</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">gradeId</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">age</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">gradeName</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">grade</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stuinfo</span><span class="p">.</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">gradeId</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">age</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">20</span><span class="p">;</span><span class="w">
</span></code></pre></div><h5 id="查询语句中涉及到的所有关键字以及执行先后顺序">查询语句中涉及到的所有关键字,以及执行先后顺序.</h5>
<p>select 查询列表  ⑦</p>
<p>from 表   ① 锁定数据源</p>
<p>连接类型 join 表2   ②拼接数据源 笛卡尔儿乘积</p>
<p>on 连接条件  ③缩小数据源 非笛卡尔乘积</p>
<p>where 筛选条件   ④缩小数据范围</p>
<p>group by 分组列表    ⑤</p>
<p>having 分组后的筛选   ⑥分组后筛选</p>
<p>order by 排序列表    ⑧</p>
<p>limit 偏移,条目数;    ⑨</p>
<h5 id="sql99语法-1">sql99语法</h5>
<h5 id="内连接-1">内连接</h5>
<p>select 查询列表 from 表1 别名 inner join 表2 别名 on 连接条件 where 筛选条件 group by 分组列表 having 分组后的筛选 order by 排序列表 limit子句</p>
<p><strong>特点:</strong></p>
<p>表的顺序可以调换</p>
<p>内连接的结果=多表的交集</p>
<p>n表连接至少需要n-1个连接条件</p>
<p>分类: 等值连接 非等值连接 自连接</p>
<h5 id="外连接-1">外连接</h5>
<p>select 查询列表 from 表1 别名 left|right|full outer join 表2 别名 on 连接条件</p>
<p>where 筛选条件 group by 分组列表 having 分组后的筛选 order by 排序列表 limit 子句;</p>
<p><strong>特点:</strong></p>
<p>查询的结果=主表中所有的行,其中从表和他匹配的将显示匹配行,如果从表没有匹配的则显示null</p>
<p>left join 左边的就是主表,right join右边的就是主表</p>
<p>full join 两边都是主表</p>
<p>一般用于查询除了交集部分的剩余的不匹配的行</p>
<h5 id="交叉连接-1">交叉连接</h5>
<p>select 查询列表 from 表1 别名 cross join 表2 别名 ;</p>
<p>**特点:	**</p>
<p>类似于笛卡尔乘积</p>
<h5 id="子查询-1">子查询</h5>
<p>嵌套在其他语句内部的select语句称为子查询或内查询</p>
<p>外面的语句可以是insert update select delete 等等,一般select 作为外面语句较多</p>
<p>外面如果为select语句,则此语句成为外查询或主查询</p>
<p>**分类:	**</p>
<ol>
<li>
<p>按出现的位置</p>
<ul>
<li>select 后面 仅仅支持标量子查询</li>
<li>from 后面 表子查询</li>
<li><strong>where或having后面 标量子查询 / 列子查询</strong> / 行子查询</li>
<li>exists后面 标量子查询 列子查询 行子查询 表子查询</li>
</ul>
</li>
<li>
<p>按结果集的行列</p>
<ul>
<li><strong>标量子查询(单行子查询):结果集为一行一列</strong></li>
<li><strong>列子查询(多行子查询):结果集为多行一列</strong></li>
<li>行子查询(结果集为多行多列)</li>
<li>表子查询(结果集为多行多列)</li>
</ul>
</li>
<li>
<p>示例</p>
<p>标量子查询</p>
<p>查询最低工资的员工姓名和工资</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="o">=</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Olson</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">2100</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+---------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>列子查询</p>
<p>查询所有是领导的员工姓名</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">   </span><span class="o">|</span><span class="w">
</span></code></pre></div></li>
</ol>
<h5 id="分页查询-1">分页查询</h5>
<p>当要查询的条目数太多,一页显示不全</p>
<p>语法</p>
<p>select 查询列表 from 表 limit offset,size</p>
<p>**注意	** offset代表的是起始的条目索引,默认是从0开始  size代表的是要显示的条目数</p>
<p>公式 limit (page-1)*size , size</p>
<h5 id="练习一下-2">练习一下</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询平均工资最低的部门信息</span><span class="w"> </span><span class="err">直接使用</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">平均工资</span><span class="w"> </span><span class="k">asc</span><span class="w"> </span><span class="err">再</span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">asc</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">            </span><span class="mi">50</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Shi</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">121</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询平均工资最低的部门信息和它的平均工资</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">avgsalary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="p">,</span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="n">avgsalary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">asc</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">department_id</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">avgsalary</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">            </span><span class="mi">50</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Shi</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">121</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">3475</span><span class="p">.</span><span class="mi">555556</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询平均工资最高的</span><span class="n">job信息</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="o">=</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-----------+------------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">job_title</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">min_salary</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">max_salary</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-----------+------------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">AD_PRES</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">President</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="mi">20000</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="mi">40000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-----------+------------+------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">),</span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">7000</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">          </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">9500</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">6500</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">40</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">10000</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">70</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">8955</span><span class="p">.</span><span class="mi">882353</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">80</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">19333</span><span class="p">.</span><span class="mi">333333</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">8600</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">10150</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="mi">110</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+---------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+----------+--------------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">first_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">email</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">phone_number</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">hiredate</span><span class="w">            </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+------------+-----------+----------+--------------------+---------+----------+----------------+------------+---------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Steven</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">SKING</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">515</span><span class="p">.</span><span class="mi">123</span><span class="p">.</span><span class="mi">4567</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">AD_PRES</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">           </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">       </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">102</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Lex</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">LDEH</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询各个部门中最高工资中最低的那个部门的最低工资是多少</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">),</span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">asc</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">     </span><span class="mi">4400</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询平均工资最高的部门的</span><span class="n">manager的详细信息</span><span class="p">:</span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="o">=</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+---------------+-------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+---------------+-------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">SKING</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+---------------+-------+----------+
</span></code></pre></div><p>练习一下</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="err">个数</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">majorid</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">major</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">majorid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="p">)</span><span class="err">专业号</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">majorid</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">个数</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">专业号</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w">    </span><span class="mi">8</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">score</span><span class="p">),</span><span class="k">max</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">studentno</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">                </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">                 </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询姓张的每个学生的最低分大于</span><span class="mi">60</span><span class="err">的学号姓名</span><span class="w">  </span><span class="err">其实可以用</span><span class="k">join</span><span class="w"> </span><span class="err">就不用那么麻烦了</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="w"> </span><span class="err">最低分</span><span class="p">,</span><span class="n">r</span><span class="p">.</span><span class="n">studentno</span><span class="p">,(</span><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentname</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentno</span><span class="o">=</span><span class="n">r</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentname</span><span class="w"> </span><span class="k">like</span><span class="s1">&#39;张%&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="err">最低分</span><span class="o">&gt;</span><span class="mi">60</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+-----------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">最低分</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">studentno</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">a</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+-----------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w">    </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">s001</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="err">张三封</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">     </span><span class="mi">70</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">s004</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="err">张翠山</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+-----------+--------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">可以使用</span><span class="n">diff函数</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="k">join</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentname</span><span class="p">,(</span><span class="k">select</span><span class="w"> </span><span class="n">majorname</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">major</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">majorid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="p">)</span><span class="w"> </span><span class="err">专业名称</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">borndate</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="s1">&#39;1998-1-1&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">studentname</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">专业名称</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">张无忌</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">html5</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">赵敏</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">javaee</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentname</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">major</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">datediff</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">borndate</span><span class="p">,</span><span class="s1">&#39;1998-1-1&#39;</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">studentname</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">张无忌</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">赵敏</span><span class="w">        </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询每个专业的男生人数和女生人数分别是多少</span><span class="w"> </span><span class="err">在这里</span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="o">=</span><span class="n">s1</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="n">s1一定不能省略</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">s1</span><span class="p">.</span><span class="n">majorid</span><span class="p">,(</span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="o">=</span><span class="n">s1</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sex</span><span class="w"> </span><span class="o">=</span><span class="s1">&#39;男&#39;</span><span class="p">)</span><span class="err">男生</span><span class="p">,(</span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="o">=</span><span class="n">s1</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">sex</span><span class="o">=</span><span class="s1">&#39;女&#39;</span><span class="p">)</span><span class="w"> </span><span class="err">女生</span><span class="w">  </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">s1</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">majorid</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">男生</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">女生</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w">       </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">       </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">       </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+------+------+
</span><span class="c1"></span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询专业和张翠山一样的学生的最低分</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">studentno</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">majorid</span><span class="w"> </span><span class="o">=</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">majorid</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">studentname</span><span class="w"> </span><span class="o">=</span><span class="s1">&#39;张翠山&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">studentname</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="s1">&#39;张翠山&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">studentno</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">        </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">         </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询大于</span><span class="mi">60</span><span class="err">分的学生的姓名</span><span class="w"> </span><span class="err">密码</span><span class="w"> </span><span class="err">专业名</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentname</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">loginpwd</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">majorname</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">major</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">majorid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">studentno</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">60</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------+---------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">studentname</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">loginpwd</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">majorname</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">major</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">majorid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------+---------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">张三封</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">8888</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">javaee</span><span class="w">                                                  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">殷天正</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">8888</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">javaee</span><span class="w">                                                  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">周伯通</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">8888</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">html5</span><span class="w">                                                   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">张翠山</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">8888</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">javaee</span><span class="w">                                                  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">小小张</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">8888</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">android</span><span class="w">                                                 </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">张无忌</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">8888</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">html5</span><span class="w">                                                   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------+---------------------------------------------------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">按邮箱的位数分组</span><span class="p">,</span><span class="err">并查询个数</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="err">个数</span><span class="p">,</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">email</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">email</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">个数</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">email</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">              </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">              </span><span class="mi">19</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">              </span><span class="mi">18</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">              </span><span class="mi">17</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">              </span><span class="mi">15</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+-----------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询学生名</span><span class="w"> </span><span class="err">专业名</span><span class="w"> </span><span class="err">分数</span><span class="w"> </span><span class="err">这是错误的</span><span class="w"> </span><span class="err">如果使用</span><span class="n">join是取完全交集</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentname</span><span class="w"> </span><span class="p">,</span><span class="n">m</span><span class="p">.</span><span class="n">majorname</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">score</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">major</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">studentname</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">majorname</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">张翠山</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">javaee</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">70</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">殷天正</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">javaee</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询学生名</span><span class="w"> </span><span class="err">专业名</span><span class="w"> </span><span class="err">分数</span><span class="w"> </span><span class="err">这是错误的</span><span class="w"> </span><span class="err">应该使用</span><span class="k">left</span><span class="w"> </span><span class="n">join防止出现score为null的情况</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentname</span><span class="w"> </span><span class="p">,</span><span class="n">m</span><span class="p">.</span><span class="n">majorname</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">score</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">major</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">studentname</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">majorname</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-----------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">张三封</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">javaee</span><span class="w">    </span><span class="o">|</span><span class="w">   </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">殷天正</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">javaee</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">周伯通</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">html5</span><span class="w">     </span><span class="o">|</span><span class="w">    </span><span class="mi">80</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentname</span><span class="w"> </span><span class="p">,</span><span class="n">m</span><span class="p">.</span><span class="n">majorname</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">score</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">major</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">majorid</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询没有成绩的学生人数</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="err">学号</span><span class="p">,(</span><span class="k">select</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">studentno</span><span class="w"> </span><span class="o">=</span><span class="n">s</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">)</span><span class="n">a</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">学号</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">a</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">S007</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">S008</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">S009</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="err">学号</span><span class="p">,(</span><span class="k">select</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">studentno</span><span class="w"> </span><span class="o">=</span><span class="n">s</span><span class="p">.</span><span class="n">studentno</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">)</span><span class="n">a</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">        </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span></code></pre></div><h5 id="联合查询">联合查询</h5>
<p>union 联合 合并:将多条查询语句的结果合并成一个结果</p>
<p>查询语句1 union 查询语句2 union 查询语句3 &hellip;</p>
<p>查询部门编号&gt;90 或 邮箱包含a的员工信息</p>
<p><strong>应用场景</strong></p>
<p>保证两个表的列数一致 , 并不要求两个表的列名一致 ,就可以使用联合查询</p>
<p>要查询的结果来源于多个表,且多个表没有直接的连接关系,但查询的信息一致时</p>
<p>例如全站搜索 ,肯定不可能所有的数据都放在一个表里 , 所以这时候就需要union</p>
<p><strong>注意</strong></p>
<p><strong>union 会默认去重</strong></p>
<p><strong>union all 可以包含重复项</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">90</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="k">like</span><span class="s1">&#39;%a%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">90</span><span class="w"> </span><span class="k">union</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w">  </span><span class="n">email</span><span class="w"> </span><span class="k">like</span><span class="s1">&#39;%a%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><h5 id="dml语言-数据操作语言">DML语言 数据操作语言</h5>
<p>插入 insert</p>
<p>更新 update</p>
<p>删除 delete</p>
<h5 id="插入语句">插入语句</h5>
<p><strong>方式一</strong></p>
<p>语法:</p>
<p>insert into 表名(列名, &hellip;) values(值, &hellip;) ;</p>
<p><strong>注意</strong></p>
<ul>
<li>插入的值的类型要与列的类型一直或兼容</li>
<li>不可以为null的列必须插入值,可以为null的列如何插入值
<ul>
<li>插入null</li>
<li>或者在 into beauty(少一点字段)</li>
</ul>
</li>
<li>列的顺序可以调换</li>
<li>列和值的个数必须一致</li>
<li>可以省略列名,默认所有列名,而且列的顺序和表中列的顺序一直</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">经典型</span><span class="w"> </span><span class="k">insert</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">beauty</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">sex</span><span class="p">,</span><span class="n">borndate</span><span class="p">,</span><span class="n">phone</span><span class="p">,</span><span class="n">photo</span><span class="p">,</span><span class="n">boyfriend_id</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="s1">&#39;唐艺昕&#39;</span><span class="p">,</span><span class="s1">&#39;女&#39;</span><span class="p">,</span><span class="s1">&#39;1990-4-23&#39;</span><span class="p">,</span><span class="s1">&#39;18988888&#39;</span><span class="p">,</span><span class="k">null</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">beauty</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">sex</span><span class="p">,</span><span class="n">phone</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="s1">&#39;金星&#39;</span><span class="p">,</span><span class="s1">&#39;女&#39;</span><span class="p">,</span><span class="s1">&#39;13888888&#39;</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="s1">&#39;张飞&#39;</span><span class="p">,</span><span class="s1">&#39;女&#39;</span><span class="p">,</span><span class="s1">&#39;1990-4-23&#39;</span><span class="p">,</span><span class="s1">&#39;119&#39;</span><span class="p">,</span><span class="k">null</span><span class="p">,</span><span class="k">null</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>**方式二	**</p>
<p>语法</p>
<p>insert into 表名 set 列名 = 值 , 列名 = 值 &hellip;</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">19</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;文涛&#39;</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">phone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;999&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>**两种方式的区别	**</p>
<ul>
<li>方式一支持多行插入,方式二不支持</li>
<li>方式一支持子查询,方式二不支持</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">方式一</span><span class="w"> </span><span class="err">支持子查询</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">beauty</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">phone</span><span class="p">)</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="s1">&#39;宋西&#39;</span><span class="p">,</span><span class="s1">&#39;11809866&#39;</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">方式一</span><span class="w"> </span><span class="err">支持多行插入</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">beauty</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">phone</span><span class="p">)</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">boyname</span><span class="p">,</span><span class="s1">&#39;120&#39;</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">ERROR</span><span class="w"> </span><span class="mi">1062</span><span class="w"> </span><span class="p">(</span><span class="mi">23000</span><span class="p">):</span><span class="w"> </span><span class="n">Duplicate</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="s1">&#39;1&#39;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="s1">&#39;beauty.PRIMARY&#39;</span><span class="w">
</span></code></pre></div><h5 id="修改语句">修改语句</h5>
<p>修改单表的记录(重要)</p>
<p>update 表名 set 列=新值 , 列=新值 where 筛选条件 ;</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">update</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">phone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;11010011&#39;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;唐%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w"> 
</span><span class="w">
</span><span class="w"></span><span class="k">update</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">boyname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;张飞&#39;</span><span class="w"> </span><span class="p">,</span><span class="n">userCp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">;</span><span class="w">  
</span></code></pre></div><p>修改多表的记录(补充)</p>
<p><strong>sql92语法</strong></p>
<p>update 表1 别名 , 表2 别名</p>
<p>set 列=值 , &hellip; where 连接条件 and 筛选条件 ;</p>
<p><strong>sql99语法</strong></p>
<p>update 表1 别名 inner join 表2 别名 on 连接条件 set 列=值, &hellip; where 筛选条件</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">修改张无忌的女朋友的手机号为</span><span class="mi">114</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">boys</span><span class="p">.</span><span class="n">id</span><span class="w">  </span><span class="k">set</span><span class="w"> </span><span class="n">phone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;114&#39;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">boys</span><span class="p">.</span><span class="n">boyname</span><span class="w"> </span><span class="o">=</span><span class="s1">&#39;张无忌&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">Rows</span><span class="w"> </span><span class="n">matched</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="n">Changed</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">也可以使用修改单表</span><span class="w"> </span><span class="err">使用子查询</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">phone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;115&#39;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">boyname</span><span class="w"> </span><span class="o">=</span><span class="s1">&#39;张无忌&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">Rows</span><span class="w"> </span><span class="n">matched</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="n">Changed</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">修改没有男朋友的女神的男朋友编号都为</span><span class="mi">2</span><span class="err">号</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">先</span><span class="k">select</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="p">,</span><span class="n">b</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="p">,</span><span class="n">boyname</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">boys</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">boyfriend_id</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">boyname</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+--------------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">boyname</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+--------------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">柳岩</span><span class="w">   </span><span class="o">|</span><span class="w">            </span><span class="mi">8</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">苍老师</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">周冬雨</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">岳灵珊</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">双儿</span><span class="w">   </span><span class="o">|</span><span class="w">            </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">夏雪</span><span class="w">   </span><span class="o">|</span><span class="w">            </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+--------------+---------+
</span><span class="c1"></span><span class="mi">6</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">再</span><span class="k">update</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">boys</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="mi">2</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">boyfriend_id</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">boyname</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">Rows</span><span class="w"> </span><span class="n">matched</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w">  </span><span class="n">Changed</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">再查一下</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="p">,</span><span class="n">b</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="p">,</span><span class="n">boyname</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">boys</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">boyfriend_id</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">boyname</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Empty</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="删除语句">删除语句</h5>
<p>方式一  delete</p>
<p>方式二 truncate</p>
<p>语法:truncate table 表名 (删除的是所有的 不能加筛选条件)</p>
<p><strong>单表的删除</strong></p>
<p>语法:delete from 表名 where 筛选条件</p>
<p><strong>多表的删除</strong></p>
<p>语法:</p>
<p><strong>sql92语法</strong></p>
<p>delete 表1的别名 from 表1 别名 , 表2 别名 where 连接条件 and 筛选条件 ;  //删除的是表1的数据内容</p>
<p>delete 表2的别名 from 表1 别名 , 表2 别名 where 连接条件 and 筛选条件 ;  //删除的是表2的数据内容</p>
<p>delete 表1的别名, 表2的别名 from 表1 别名 , 表2 别名 where 连接条件 and 筛选条件 ; //删除的是表1和表2的数据内容</p>
<p><strong>sql99语法</strong></p>
<p>delete 表1的别名,表2的别名 from 表1 别名 join 表2 别名 on 连接条件 where 筛选条件</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">单表的删除</span><span class="w">
</span><span class="w"></span><span class="k">delete</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">phone</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%9&#39;</span><span class="w"> </span><span class="p">;</span><span class="w"> 
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">删除张无忌的女朋友的信息</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">多表删除</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="n">boy</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">boy</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">boy</span><span class="p">.</span><span class="n">boyname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;张无忌&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">删除黄晓明和他女朋友的信息</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">g</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">g</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">boyname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;黄晓明&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p><strong>方式二 truncate语句</strong></p>
<p>直接清空 truncate table boys ;</p>
<h5 id="delete和truncate的区别">delete和truncate的区别</h5>
<ul>
<li>delete可以加where条件 , truncate不能加</li>
<li>truncate 删除, 效率高一丢丢</li>
<li>假如要删除的表中有自增长列,如果用delete删除后,再插入数据,自增长列的值依旧是从断点开始,而如果truncate删除后,再插入数据,自增长列的值从1开始</li>
<li>truncate删除没有返回值,delete删除有返回值</li>
<li>truncate删除回滚,delete删除可以回滚</li>
</ul>
<h5 id="练习一下-3">练习一下</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------------+------+-----+---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="k">Null</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Key</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Extra</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------------+------+-----+---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="nb">int</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">userid</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nb">int</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------------+------+-----+---------+-------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">my_employees</span><span class="p">(</span><span class="n">First_name</span><span class="p">,</span><span class="n">Last_name</span><span class="p">,</span><span class="n">Userid</span><span class="p">,</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;patel&#39;</span><span class="p">,</span><span class="s1">&#39;Ralph&#39;</span><span class="p">,</span><span class="s1">&#39;Rpatel&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">895</span><span class="p">),(</span><span class="s1">&#39;Dance&#39;</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Betty&#39;</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Bdancs&#39;</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="mi">860</span><span class="p">),(</span><span class="s1">&#39;Biri&#39;</span><span class="p">,</span><span class="s1">&#39;Ben&#39;</span><span class="p">,</span><span class="s1">&#39;Bbiri&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">1100</span><span class="p">),(</span><span class="s1">&#39;Newman&#39;</span><span class="p">,</span><span class="s1">&#39;Chad&#39;</span><span class="p">,</span><span class="s1">&#39;Cnewman&#39;</span><span class="p">,</span><span class="mi">750</span><span class="p">),(</span><span class="s1">&#39;Ropeburn&#39;</span><span class="p">,</span><span class="s1">&#39;Audrey&#39;</span><span class="w"> </span><span class="p">,</span><span class="s1">&#39;Aropebur&#39;</span><span class="p">,</span><span class="mi">1150</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">也可以这样</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">my_employees</span><span class="p">(</span><span class="n">First_name</span><span class="p">,</span><span class="n">Last_name</span><span class="p">,</span><span class="n">Userid</span><span class="p">,</span><span class="n">salary</span><span class="p">)</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="s1">&#39;patel&#39;</span><span class="p">,</span><span class="s1">&#39;Ralph&#39;</span><span class="p">,</span><span class="s1">&#39;Rpatel&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">895</span><span class="w"> </span><span class="k">union</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="s1">&#39;Dance&#39;</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Betty&#39;</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Bdancs&#39;</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="mi">860</span><span class="w"> </span><span class="k">union</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="s1">&#39;Biri&#39;</span><span class="p">,</span><span class="s1">&#39;Ben&#39;</span><span class="p">,</span><span class="s1">&#39;Bbiri&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">1100</span><span class="w"> </span><span class="k">union</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="s1">&#39;Newman&#39;</span><span class="p">,</span><span class="s1">&#39;Chad&#39;</span><span class="p">,</span><span class="s1">&#39;Cnewman&#39;</span><span class="p">,</span><span class="mi">750</span><span class="w"> </span><span class="k">union</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="s1">&#39;Ropeburn&#39;</span><span class="p">,</span><span class="s1">&#39;Audrey&#39;</span><span class="w"> </span><span class="p">,</span><span class="s1">&#39;Aropebur&#39;</span><span class="p">,</span><span class="mi">1150</span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">users</span><span class="p">(</span><span class="n">userid</span><span class="p">,</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="s1">&#39;Rpatel&#39;</span><span class="p">,</span><span class="mi">10</span><span class="p">),(</span><span class="s1">&#39;Bdancs&#39;</span><span class="p">,</span><span class="mi">10</span><span class="p">),(</span><span class="s1">&#39;Bbiri&#39;</span><span class="p">,</span><span class="mi">20</span><span class="p">),(</span><span class="s1">&#39;Chewman&#39;</span><span class="p">,</span><span class="mi">30</span><span class="p">),(</span><span class="s1">&#39;Aropebur&#39;</span><span class="p">,</span><span class="mi">40</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">my_employees</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;drelxer&#39;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="mi">3</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">Rows</span><span class="w"> </span><span class="n">matched</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Changed</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">my_employees</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1000</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">900</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">Rows</span><span class="w"> </span><span class="n">matched</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="n">Changed</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="n">me</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">my_employees</span><span class="w"> </span><span class="n">me</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">me</span><span class="p">.</span><span class="n">userid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">u</span><span class="p">.</span><span class="n">userid</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">u</span><span class="p">.</span><span class="n">userid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Bbiri&#39;</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">truncate</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><h5 id="ddl">DDL</h5>
<p>数据定义语言</p>
<p>库和表的管理</p>
<h5 id="库的管理">库的管理</h5>
<p>创建/修改/删除</p>
<h5 id="表的管理">表的管理</h5>
<p>创建/修改/删除</p>
<p>创建:create</p>
<p>修改:alter</p>
<p>删除:drop</p>
<h5 id="库的管理-1">库的管理</h5>
<h5 id="库的创建">库的创建</h5>
<p>语法 create database [if not exists] 库名 ;</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">如果已存在</span><span class="w"> </span><span class="err">这样执行会报错</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">create</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="n">books</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">会先判断一下</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">create</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">books</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="库的修改">库的修改</h5>
<p>更改库的字符集</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">alter</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="n">books</span><span class="w"> </span><span class="nb">character</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">gbk</span><span class="w"> </span><span class="p">;</span><span class="w"> 
</span></code></pre></div><h5 id="库的删除">库的删除</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">drop</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="n">books</span><span class="w"> </span><span class="p">;</span><span class="w"> 
</span><span class="w">
</span><span class="w"></span><span class="k">drop</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">books</span><span class="w"> </span><span class="p">;</span><span class="w"> 
</span></code></pre></div><h5 id="表的管理-1">表的管理</h5>
<h5 id="表的创建">表的创建</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="err">表名</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="w">	</span><span class="err">列名</span><span class="w"> </span><span class="err">列的类型</span><span class="p">[(</span><span class="err">长度</span><span class="p">)</span><span class="w"> </span><span class="err">约束</span><span class="p">],</span><span class="w"> 
</span><span class="w">	</span><span class="err">列名</span><span class="w"> </span><span class="err">列的类型</span><span class="p">[(</span><span class="err">长度</span><span class="p">)</span><span class="w"> </span><span class="err">约束</span><span class="p">],</span><span class="w"> 
</span><span class="w">	</span><span class="err">列名</span><span class="w"> </span><span class="err">列的类型</span><span class="p">[(</span><span class="err">长度</span><span class="p">)</span><span class="w"> </span><span class="err">约束</span><span class="p">],</span><span class="w"> 
</span><span class="w">	</span><span class="err">列名</span><span class="w"> </span><span class="err">列的类型</span><span class="p">[(</span><span class="err">长度</span><span class="p">)</span><span class="w"> </span><span class="err">约束</span><span class="p">],</span><span class="w"> 
</span><span class="w">	</span><span class="err">列名</span><span class="w"> </span><span class="err">列的类型</span><span class="p">[(</span><span class="err">长度</span><span class="p">)</span><span class="w"> </span><span class="err">约束</span><span class="p">],</span><span class="w"> 
</span><span class="w">	</span><span class="p">...</span><span class="w">
</span><span class="w"></span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">database</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">database</span><span class="p">()</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">myemployees</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">books</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">Database</span><span class="w"> </span><span class="n">changed</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">book</span><span class="p">(</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">bName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">authorId</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">,</span><span class="n">publishDate</span><span class="w"> </span><span class="n">datetime</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">03</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="n">book</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+------+-----+---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="k">Null</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Key</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Extra</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+------+-----+---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="nb">int</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">bName</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">price</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">double</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">authorId</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nb">int</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">publishDate</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">datetime</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+-------------+------+-----+---------+-------+
</span><span class="c1"></span><span class="mi">5</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">author</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w"> </span><span class="n">au_name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">nation</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="表的修改">表的修改</h5>
<p>alter table 表名 add column / drop column / change column /modify column /raname to 列名/列类型/表名</p>
<ul>
<li>修改列名</li>
<li>修改列的类型或约束</li>
<li>添加新列</li>
<li>删除列</li>
<li>修改表名</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">修改列名</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">book</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">publishDate</span><span class="w"> </span><span class="n">pbDate</span><span class="w"> </span><span class="n">datetime</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">修改列的类型或约束</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">book</span><span class="w"> </span><span class="k">modify</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">pbdate</span><span class="w"> </span><span class="k">timestamp</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">05</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">添加新列</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">author</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">annual</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">删除列</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">book</span><span class="w"> </span><span class="k">drop</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">annual</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">04</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">修改表名</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">author</span><span class="w"> </span><span class="k">rename</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">book_author</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="表的删除">表的删除</h5>
<p>drop table 表</p>
<p>drop table if exist 表</p>
<p>通用的写法:</p>
<p>drop database if exists 旧库名 ;</p>
<p>create database 库名 ;</p>
<p>drop table if exists 旧表名;</p>
<p>create table 表名 (&hellip;) ;</p>
<h5 id="表的复制">表的复制</h5>
<ul>
<li>仅仅复制表的结构</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">copy</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="n">author</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">copy</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Empty</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><ul>
<li>复制表的结构和数据</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">子查询</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">copy2</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">author</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">copy2</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+----------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">au_name</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">nation</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+----------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">村上春树</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">日本</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">莫言</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="err">中国</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">冯唐</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="err">中国</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">金庸</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="err">中国</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+----------+--------+
</span><span class="c1"></span><span class="mi">4</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><ul>
<li>只复制部分数据</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">根据一张表的部分数据</span><span class="w"> </span><span class="err">建立另一张表</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">copy3</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="n">au_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">author</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">nation</span><span class="w"> </span><span class="o">=</span><span class="s1">&#39;中国&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">copy3</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">au_name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">莫言</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">冯唐</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">金庸</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+---------+
</span><span class="c1"></span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><ul>
<li>仅仅复制某些字段</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">这样就只会复制字段</span><span class="p">,</span><span class="err">并且不满足条件不携带任何一条数据过来</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">copy4</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">author</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">copy4</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Empty</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="练习一下-4">练习一下</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">dept1</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="p">(</span><span class="mi">7</span><span class="p">),</span><span class="n">name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">25</span><span class="p">));</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">03</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">将</span><span class="n">departments中的数据插入新表</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">dept2</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">myemployees</span><span class="p">.</span><span class="n">departments</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">27</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">27</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">emp5</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="p">(</span><span class="mi">7</span><span class="p">),</span><span class="n">first_name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">25</span><span class="p">),</span><span class="n">last_name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">25</span><span class="p">),</span><span class="n">dept_id</span><span class="w"> </span><span class="nb">int</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">warnings</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">这样是修改列名和类型的</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">emp5</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">这样只是修改类型的</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">emp5</span><span class="w"> </span><span class="k">modify</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">复制结构</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">employees2</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="n">myemployees</span><span class="p">.</span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">warnings</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">03</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">drop</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">emp5</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">修改表的名字</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">employees2</span><span class="w"> </span><span class="k">rename</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">emp5</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">增加列</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">dept1</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">test_column</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">emp5</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">test_column</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">删除列</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">emp5</span><span class="w"> </span><span class="k">drop</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">04</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span></code></pre></div><h5 id="常见的数据类型">常见的数据类型</h5>
<p>数值型</p>
<ul>
<li>整形</li>
<li>小数
<ul>
<li>定点数</li>
<li>浮点数</li>
</ul>
</li>
</ul>
<p>字符型</p>
<ul>
<li>较短的文本 char varchar</li>
<li>较长的文本 text blob(较长的二进制数据)</li>
</ul>
<p>日期型:</p>
<p><strong>整形</strong></p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210926214209015.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210926214209015.png"
			
			
			
			loading="lazy"
			alt="image-20210926214209015">
	</a>
	
	<figcaption>image-20210926214209015</figcaption>
	
</figure></p>
<p>分类</p>
<p>tinyint smallint mediumin int/interger bigint</p>
<p>1              2                3                  4            8</p>
<p>特点</p>
<ul>
<li>如果不设置无符号还是有符号，默认是有符号，如果想设置无符号，需要添加unsigned关键字</li>
<li>如果插入的数值超出了类型的范围,会报out of range异常 ,但是与mysql5.0不同的是,现在不会插入数据了,mysql5.0会插入临界值</li>
<li>如果不设置长度,会有默认的长度</li>
</ul>
<p>如何设置无符号和有符号</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="n">tab_int</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+------+------+-----+---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Null</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Key</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Extra</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+------+------+-----+---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">t1</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nb">int</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+------+------+-----+---------+-------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">说明能够插入负数</span><span class="w"> </span><span class="err">说明默认的</span><span class="n">int是有符号的int</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_int</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="o">-</span><span class="mi">123456</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">drop</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">tab_int</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">插入无符号</span><span class="n">int类型</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tab_int</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">unsigned</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">想给无符号整数插入负数的话会报错</span><span class="w"> </span><span class="mi">0</span><span class="err">行一共</span><span class="w"> </span><span class="err">但是在</span><span class="n">mysql5</span><span class="p">.</span><span class="mi">5</span><span class="err">会插入</span><span class="w"> </span><span class="err">然后默认填充</span><span class="mi">0</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_int</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="o">-</span><span class="mi">123456</span><span class="p">,</span><span class="o">-</span><span class="mi">123456</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">ERROR</span><span class="w"> </span><span class="mi">1264</span><span class="w"> </span><span class="p">(</span><span class="mi">22003</span><span class="p">):</span><span class="w"> </span><span class="k">Out</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="s1">&#39;t2&#39;</span><span class="w"> </span><span class="k">at</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">tab_int</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Empty</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">zerofill</span><span class="w"> </span><span class="err">默认长度不够以</span><span class="mi">0</span><span class="err">填充</span><span class="w"> </span><span class="err">默认是无符号数</span><span class="w"> </span><span class="nb">int</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="err">不是</span><span class="mi">2</span><span class="err">的</span><span class="mi">7</span><span class="err">位</span><span class="p">,</span><span class="err">代表的是显示的最大宽度</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">int_zeroFill</span><span class="w"> </span><span class="p">(</span><span class="n">t1</span><span class="w"> </span><span class="nb">int</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="w"> </span><span class="n">zerofill</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="nb">int</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="w"> </span><span class="n">zerofill</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">warnings</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="n">int_zeroFill</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+--------------------------+------+-----+---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w">                     </span><span class="o">|</span><span class="w"> </span><span class="k">Null</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Key</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Extra</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+--------------------------+------+-----+---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">t1</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nb">int</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="w"> </span><span class="n">unsigned</span><span class="w"> </span><span class="n">zerofill</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">t2</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nb">int</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="w"> </span><span class="n">unsigned</span><span class="w"> </span><span class="n">zerofill</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+--------------------------+------+-----+---------+-------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">int_zerofill</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="mi">123</span><span class="p">,</span><span class="mi">123</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">int_zerofill</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">t1</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">t2</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">0000123</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">0000123</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+---------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="小数">小数</h5>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210929224058024.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210929224058024.png"
			
			
			
			loading="lazy"
			alt="image-20210929224058024">
	</a>
	
	<figcaption>image-20210929224058024</figcaption>
	
</figure></p>
<p>浮点型</p>
<p>float(M,D)</p>
<p>double(M,D)</p>
<p>定点型</p>
<p>dec(M,D)</p>
<p>decimal(M,D)</p>
<p>特点:</p>
<ul>
<li>M和D什么意思
<ul>
<li>m是小数部位+整数部位 d是小数部位 如果超过范围, 则插入临界值</li>
</ul>
</li>
<li>m和d都可以省略
<ul>
<li>如果是decimal , 则m默认为10,d默认为0</li>
<li>如果是float和double,则会根据插入的数值的精度来决定精度</li>
</ul>
</li>
<li>定点型和浮点型的区别
<ul>
<li>定点型的精确度较高,如果要求插入数值的精度较高如货币运算等则考虑使用</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">小数</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tab_float</span><span class="w"> </span><span class="p">(</span><span class="n">f1</span><span class="w"> </span><span class="nb">float</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="n">f2</span><span class="w"> </span><span class="n">double</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="n">f3</span><span class="w"> </span><span class="nb">decimal</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">warnings</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_float</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="mi">123</span><span class="p">.</span><span class="mi">45</span><span class="p">,</span><span class="mi">123</span><span class="p">.</span><span class="mi">45</span><span class="p">,</span><span class="mi">123</span><span class="p">.</span><span class="mi">45</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">会被截取</span><span class="w"> </span><span class="err">位数太长的话</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_float</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="mi">123</span><span class="p">.</span><span class="mi">456</span><span class="p">,</span><span class="mi">123</span><span class="p">.</span><span class="mi">456</span><span class="p">,</span><span class="mi">123</span><span class="p">.</span><span class="mi">456</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">短了就自动填充</span><span class="w"> 
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_float</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="mi">123</span><span class="p">.</span><span class="mi">4</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">4</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="mi">2</span><span class="err">代表小数后几位</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">tab_float</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+--------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">f1</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">f2</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">f3</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+--------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">45</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">45</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">45</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">46</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">46</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">46</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">40</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">40</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">40</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+--------+--------+
</span><span class="c1"></span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">超出位数了</span><span class="w"> </span><span class="err">超出的话</span><span class="n">mysql8</span><span class="p">.</span><span class="mi">0</span><span class="err">将不会插入</span><span class="w"> </span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="mi">5</span><span class="err">代表一共多少位数</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">如果小数位</span><span class="mi">2</span><span class="err">位</span><span class="p">,</span><span class="err">那整数位最多</span><span class="mi">3</span><span class="err">位</span><span class="p">,</span><span class="err">所以整数最多</span><span class="mi">999</span><span class="w"> </span><span class="n">mysql5</span><span class="p">.</span><span class="mi">0</span><span class="err">会插入最大值</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_float</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">1523</span><span class="p">.</span><span class="mi">4</span><span class="p">,</span><span class="mi">1523</span><span class="p">.</span><span class="mi">4</span><span class="p">,</span><span class="mi">1523</span><span class="p">.</span><span class="mi">4</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">ERROR</span><span class="w"> </span><span class="mi">1264</span><span class="w"> </span><span class="p">(</span><span class="mi">22003</span><span class="p">):</span><span class="w"> </span><span class="k">Out</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="s1">&#39;f1&#39;</span><span class="w"> </span><span class="k">at</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">tab_float</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+--------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">f1</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">f2</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">f3</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+--------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">45</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">45</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">45</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">46</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">46</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">46</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">40</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">40</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">40</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+--------+--------+
</span><span class="c1"></span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">如果不填写</span><span class="w"> </span><span class="n">m和d</span><span class="w"> </span><span class="n">decimal默认是</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="err">小数后面是</span><span class="mi">0</span><span class="err">位</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tab_float_default</span><span class="w"> </span><span class="p">(</span><span class="n">f1</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">f2</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">f3</span><span class="w"> </span><span class="nb">decimal</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">03</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="n">tab_float_default</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+---------------+------+-----+---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="k">Null</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Key</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Extra</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+---------------+------+-----+---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">f1</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nb">float</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">f2</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">double</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">f3</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nb">decimal</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+---------------+------+-----+---------+-------+
</span><span class="c1"></span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">如果插入了多了</span><span class="p">,</span><span class="err">会自动截断</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_float_default</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="mi">123</span><span class="p">.</span><span class="mi">456</span><span class="p">,</span><span class="mi">123</span><span class="p">.</span><span class="mi">456</span><span class="p">,</span><span class="mi">123</span><span class="p">.</span><span class="mi">456</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">tab_float_default</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+---------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">f1</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">f2</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">f3</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+---------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">456</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">123</span><span class="p">.</span><span class="mi">456</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">123</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+---------+------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="选择类型的原则">选择类型的原则</h5>
<p>所选择的类型越简单越好,能保存数值的类型越小越好</p>
<h5 id="字符型">字符型</h5>
<p>较短的文本:</p>
<p>char</p>
<p>varchar</p>
<p>较长的文本:</p>
<p>text</p>
<p>blob(较大的二进制)</p>
<p>其他:</p>
<p>binary和varbinary用于保存较短的二进制数据</p>
<p>enum用于保存枚举</p>
<p>set用于保存集合</p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210929230011199.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210929230011199.png"
			
			
			
			loading="lazy"
			alt="image-20210929230011199">
	</a>
	
	<figcaption>image-20210929230011199</figcaption>
	
</figure></p>
<p>特点:</p>
<ul>
<li>char char(m) m代表最大的字符数,可以省略,默认为1  代表固定长度的字符  效率高一点</li>
<li>varchar varchar(m) m代表最大的字符数,不可以省略 可变长度的字符 比较节省 效率低一点</li>
</ul>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210929230312590-16329277930351.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210929230312590-16329277930351.png"
			
			
			
			loading="lazy"
			alt="image-20210929230312590">
	</a>
	
	<figcaption>image-20210929230312590</figcaption>
	
</figure></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">类型为</span><span class="n">enum的字段</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tab_char</span><span class="p">(</span><span class="n">c1</span><span class="w"> </span><span class="n">enum</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">));</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="n">tab_char</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+-------------------+------+-----+---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w">              </span><span class="o">|</span><span class="w"> </span><span class="k">Null</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Key</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Extra</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+-------------------+------+-----+---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">c1</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">enum</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+-------------------+------+-----+---------+-------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_char</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">不区分大小写</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_char</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">没有定义的插入不进去</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_char</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">ERROR</span><span class="w"> </span><span class="mi">1265</span><span class="w"> </span><span class="p">(</span><span class="mi">01000</span><span class="p">):</span><span class="w"> </span><span class="k">Data</span><span class="w"> </span><span class="n">truncated</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="s1">&#39;c1&#39;</span><span class="w"> </span><span class="k">at</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">tab_char</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">c1</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">a</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">a</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210929230732259.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210929230732259.png"
			
			
			
			loading="lazy"
			alt="image-20210929230732259">
	</a>
	
	<figcaption>image-20210929230732259</figcaption>
	
</figure></p>
<p>可以从在一个字段里插入多个元素辣</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">创建类型为</span><span class="n">set的字段</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tab_set</span><span class="p">(</span><span class="n">s1</span><span class="w"> </span><span class="k">set</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">));</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_set</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_set</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="s1">&#39;a,B&#39;</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">不符合的不会插入</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_set</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;a,m&#39;</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">ERROR</span><span class="w"> </span><span class="mi">1265</span><span class="w"> </span><span class="p">(</span><span class="mi">01000</span><span class="p">):</span><span class="w"> </span><span class="k">Data</span><span class="w"> </span><span class="n">truncated</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="s1">&#39;s1&#39;</span><span class="w"> </span><span class="k">at</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">tab_set</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">s1</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">a</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="日期型">日期型</h5>
<p>分类:</p>
<p>date只保存日期</p>
<p>time只保存时间</p>
<p>year只保存年</p>
<p>datetime 保存日期+时间</p>
<p>timestamp 保存日期+时间</p>
<p>特点:</p>
<p>datetime 字节 8 范围 1000-9999 不受时区影响</p>
<p>timastamp 字节 4 范围 1970-2038 受时区影响</p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210929233916597.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210929233916597.png"
			
			
			
			loading="lazy"
			alt="image-20210929233916597">
	</a>
	
	<figcaption>image-20210929233916597</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210929234007359.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20210929234007359.png"
			
			
			
			loading="lazy"
			alt="image-20210929234007359">
	</a>
	
	<figcaption>image-20210929234007359</figcaption>
	
</figure></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">tab_date</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">t1</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="n">t2</span><span class="w">                  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">29</span><span class="w"> </span><span class="mi">23</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">53</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">29</span><span class="w"> </span><span class="mi">23</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">53</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------+---------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">时区</span><span class="w"> </span><span class="err">如果将时区改成其他时区</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">timestamp可以更加真实地反映当前时区的真实时间</span><span class="w"> </span><span class="err">而不是不变</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;time_zone&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Variable_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">time_zone</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">SYSTEM</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+--------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="复习一下-2">复习一下</h5>
<p><strong>联合查询</strong></p>
<p>union 联合 , 将多次查询结果合并为一个结果</p>
<p>查询语句1 union [all] 查询语句2 &hellip;</p>
<p>**意义	**</p>
<ol>
<li>将一条比较复杂的查询语句拆分为多条语句</li>
<li>适用于查询多个表的时候,查询的列基本是一致的</li>
</ol>
<p><strong>特点</strong></p>
<ol>
<li>要求多条查询语句的查询列数必须一致</li>
<li>要求多条查询语句的查询的各列类型/顺序最好一致 不一致会视图隐式转换</li>
<li>union会默认去重 和 union all 可以包含重复项</li>
</ol>
<p>查询的语法:</p>
<p>select *   ⑦</p>
<p>from 表1 别名   ①</p>
<p>join 表2 别名     ②</p>
<p>on 连接条件    	③</p>
<p>where 筛选条件   ④</p>
<p>group by 分组条件  ⑤</p>
<p>having 分组后筛选条件   ⑥</p>
<p>order by 排序条件  ⑧</p>
<p>limit(起始索引,条目数)选多少个  ⑨</p>
<p>union &hellip;</p>
<h5 id="dml语言">DML语言</h5>
<p><strong>插入</strong></p>
<p>insert into 表名 (字段名 , &hellip;) values (&hellip;)  //一一对应</p>
<p><strong>特点</strong></p>
<ol>
<li>要求值的类型和字段的类型要一致或兼容</li>
<li>字段的个数和顺序不一定与原始表中的字段的个数和顺序一致,但必须保证值和字段一一对应</li>
<li>假如可以为null的字段,注意可以通过以下两种方式插入null值
<ul>
<li>字段和值都省略</li>
<li>字段写上,然后值也使用null插入</li>
</ul>
</li>
<li>字段和值的个数必须一致</li>
<li>字段名可以省略,但是默认为所有列</li>
</ol>
<p><strong>插入2</strong></p>
<p>insert into 表名 set 字段名 = 值 , 字段名 = 值 &hellip;</p>
<p><strong>两种方式的区别</strong></p>
<ul>
<li>
<p>方式一支持<strong>子查询</strong></p>
<ul>
<li>insert into 表名 (select * from 表名 where &hellip;)</li>
</ul>
</li>
<li>
<p>方式一支持一次插入多行,方式二不支持</p>
<ul>
<li>insert into 表名 values (&hellip;),(&hellip;) &hellip;</li>
</ul>
</li>
</ul>
<h5 id="修改单表的记录">修改单表的记录</h5>
<p>update 表名 set 字段=值 , 字段= 值 where 筛选条件</p>
<h5 id="修改多表的记录">修改多表的记录</h5>
<p>update 表名 别名 join  表名 别名 on 连接条件 set 字段=值 , 字段 = 值 where 筛选语句</p>
<h5 id="删除">删除</h5>
<h5 id="方式一使用delete">方式一使用delete</h5>
<p>删除单表的记录</p>
<p>delete from 表名 where 筛选条件 [limit 条目数]</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">copy_girls</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+--------+------+---------------------+-------------+--------------+--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">sex</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">borndate</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">phone</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">photo</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+--------+------+---------------------+-------------+--------------+--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">柳岩</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="err">女</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">1988</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">18209876577</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">         </span><span class="o">|</span><span class="w">            </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">苍老师</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">女</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">1987</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">30</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">18219876577</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">         </span><span class="o">|</span><span class="w">            </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">热巴</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="err">女</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">1993</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">18209876579</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">         </span><span class="o">|</span><span class="w">            </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">周冬雨</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">女</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">18209179577</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">         </span><span class="o">|</span><span class="w">            </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">copy_girls</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">copy_girls</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+--------+------+---------------------+-------------+--------------+--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">sex</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">borndate</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">phone</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">photo</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+--------+------+---------------------+-------------+--------------+--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">苍老师</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">女</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">1987</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">30</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">18219876577</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">         </span><span class="o">|</span><span class="w">            </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">热巴</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="err">女</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">1993</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">18209876579</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">         </span><span class="o">|</span><span class="w">            </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></code></pre></div><p>删除多表的记录</p>
<p>delete 表1 别名1, 表2 别名2 from 表名 别名  join 表名 别名 on 连接条件 where 筛选条件</p>
<p><strong>方式二使用truncate</strong></p>
<p><strong>两种方式的区别</strong></p>
<ul>
<li>
<p>delete不会让自增列归零,从断点开始,truncate会让自增列归零</p>
</li>
<li>
<p>delete可以加筛选条件,truncate 不能加筛选条件</p>
</li>
<li>
<p>truncate 效率较高</p>
</li>
<li>
<p>truncate 没有返回值,delete可以返回受影响的行数</p>
</li>
<li>
<p>truncate不可以回滚,delete可以回滚</p>
</li>
</ul>
<h5 id="ddl语言">DDL语言</h5>
<h5 id="库的管理-2"><strong>库的管理</strong></h5>
<p>创建库</p>
<p>create database  [if not exists] 库名 [character set 字符集名] ;</p>
<p>修改库</p>
<p>alter database 库名 character set 字符集名 ;</p>
<p>修改库名很少用,不行就换个库呗何必呢,如果实在要改,就先net stop mysql80 然后到mysql8.0下的data文件夹中重命名某个数据库名,然后net start mysql80 ,刷新数据库管理工具</p>
<p>删除库</p>
<p>drop database [if exists] 库名 ;</p>
<p><strong>表的管理</strong></p>
<p><strong>创建表</strong></p>
<p>create table [if not exists] 表名(字段名 类型 [约束], 字段名 类型 [约束] &hellip;) ;</p>
<p><strong>修改表</strong></p>
<p><strong>添加列</strong></p>
<p>alter table 表名 add column 列名 列的类型 [first|after 字段名];</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">test_add_column</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">t3</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="n">test_add_column</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+------+------+-----+---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Null</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Key</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Extra</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+------+------+-----+---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">t1</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nb">int</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">t2</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nb">int</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">t3</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nb">int</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+------+------+-----+---------+-------+
</span><span class="c1"></span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">test_add_column</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">t11</span><span class="w"> </span><span class="nb">bigint</span><span class="w"> </span><span class="k">first</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">04</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="n">test_add_column</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+--------+------+-----+---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">Null</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Key</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Extra</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+--------+------+-----+---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">t11</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="nb">bigint</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">t1</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nb">int</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">t2</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nb">int</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">t3</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nb">int</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+--------+------+-----+---------+-------+
</span></code></pre></div><p><strong>修改列的类型或者约束</strong></p>
<p>alter table 表名 modify column 列名 新类型[新约束] ;</p>
<p><strong>修改列名</strong></p>
<p>alter table 表名 change column 旧列名 新列名 类型;</p>
<p><strong>删除列名</strong></p>
<p>alter table 表名 drop column 列名 ;</p>
<p><strong>修改表名</strong></p>
<p>alter table 表名 rename to 新表名</p>
<p><strong>删除表</strong></p>
<p>drop table [if exists] 表名;</p>
<p><strong>复制表</strong> 可以跨库</p>
<p><strong>仅仅复制表的结构</strong> create table 表名 like 原表 ;</p>
<p><strong>复制表的结构+数据</strong></p>
<p>create table 表名 select * from 原表 ;</p>
<p>create table 表名 select 特定字段 from 原表 where 筛选条件</p>
<h5 id="数据类型">数据类型</h5>
<p><strong>数值型</strong></p>
<ol>
<li>整型
<ol>
<li>tinyint smallint mediumint int integer bigint 1 2 3 4 8</li>
<li>特点
<ol>
<li>都可以设置无符号和有符号 默认是有符号 ,通过 unsigned设置无符号</li>
<li>如果超出范围,out of range 异常,mysql5.0 和 8.0 不同</li>
<li>长度可以不指定,默认会有一个长度</li>
<li>长度代表的是显示的最大宽度,而不是只有2的长度位那个范围,但需要搭配zerofill,搭配之后将默认变为无符号整型</li>
</ol>
</li>
</ol>
</li>
<li>浮点型
<ol>
<li>定点数 decimal(m,d) 默认为(10,0)</li>
<li>浮点数 float(m,d) 4位字节  double(m,d) 8位字节  默认为可变的</li>
<li>特点
<ol>
<li>m代表整数+小数部位的个数,d代表小数部位</li>
<li>如果超出范围,则报out of range异常,并且插入临界值</li>
<li>m和d都可以省略,但对于定点数,m默认为10,d默认为0</li>
<li>如果精度要求较高,则有限考虑使用定点数</li>
</ol>
</li>
</ol>
</li>
</ol>
<p><strong>字符型</strong></p>
<p>char varchar binary varbinary enum set text blob</p>
<p>char:固定长度的字符,写法为char(M) ,最大长度不能超过M ,其中M可以省略,默认为1</p>
<p>varchar:可变长度的字符 写法varchar(M),最大长度不能超过M,其中M不可以省略</p>
<p><strong>日期型</strong></p>
<p>year 年</p>
<p>date 日期</p>
<p>datetime 日期+时间   8</p>
<p>time 时间</p>
<p>timestamp 时间戳   4  1970-2038 比较容易受到时区,语法模式,版本的影响,更能反映当前时区的真实时间</p>
<h4 id="新的一杰克">新的一杰克</h4>
<h5 id="常见约束">常见约束</h5>
<p>含义 : 一种限制 , 用于限制表中的数据,为了保证表中的数据的准确和可靠性</p>
<p><strong>分类</strong> <strong>六大约束</strong></p>
<ul>
<li>
<p>NOT NULL 非空 用于保证该字段的值不能为空  比如姓名/学号等等</p>
</li>
<li>
<p>default 默认 , 用于保证该字段有默认值</p>
</li>
<li>
<p>PRIMARY KEY 主键 用于保证该字段的值具有唯一性,并且非空,如学号,工号</p>
</li>
<li>
<p>UNIQUE 唯一,用于保证该字段的值具有唯一性,可以为空 如座位号/老婆</p>
</li>
<li>
<p>CHECK 检查约束 [mysql 不支持] 比如性别 只能男和女 或者青年人年龄</p>
</li>
<li>
<p>FOREIGN KEY 外键,用于限制两个表的关系,用于保证该字段的值必须来自于主表的关联列的值 在从表添加外键约束,用于引用主表中的某列的值 例如学生表的专业编号,员工表的部门编号,员工表的工种编号</p>
</li>
</ul>
<p>添加约束的时机:</p>
<ol>
<li>创建表时</li>
<li>修改表时</li>
</ol>
<p>约束的添加分类:</p>
<ul>
<li>列级约束</li>
<li>NOT NULL DEFAULT PRIMARY KEY UNIQUE CHECK FOREIGN KEY 六大约束语法上都支持,但是外键约束没有效果</li>
<li>表级约束</li>
<li>除了非空/默认,其他的都支持</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="err">表</span><span class="p">(</span><span class="w">
</span><span class="w">	</span><span class="err">字段名</span><span class="w"> </span><span class="err">字段类型</span><span class="w"> </span><span class="err">列级约束</span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="err">字段名</span><span class="w">	</span><span class="err">字段类型</span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="err">表级约束</span><span class="w">
</span><span class="w"></span><span class="p">)</span><span class="w">
</span></code></pre></div><p><strong>创建表时添加约束</strong></p>
<p><strong>添加列级约束</strong></p>
<p>语法:直接在字段名和类型后面追加约束类型即可</p>
<p>只支持:默认/非空/主键</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">Database</span><span class="w"> </span><span class="n">changed</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">创建列级约束</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">stuName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">gender</span><span class="w"> </span><span class="nb">char</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">check</span><span class="p">(</span><span class="n">gender</span><span class="o">=</span><span class="s1">&#39;男&#39;</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">gender</span><span class="o">=</span><span class="s1">&#39;女&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="n">seat</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">unique</span><span class="p">,</span><span class="n">age</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="n">majorId</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">major</span><span class="p">(</span><span class="n">id</span><span class="p">));</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">03</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-------------+------+-----+---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="k">Null</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Key</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Extra</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-------------+------+-----+---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="nb">int</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">PRI</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">stuName</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">   </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">gender</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="nb">char</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">seat</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nb">int</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">UNI</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">age</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="nb">int</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">18</span><span class="w">      </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">majorId</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nb">int</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-------------+------+-----+---------+-------+
</span><span class="c1"></span><span class="mi">6</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查看索引</span><span class="w"> </span><span class="err">唯一</span><span class="o">/</span><span class="err">主键</span><span class="o">/</span><span class="err">外键都可以查看</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><p><strong>添加表级约束</strong></p>
<p>语法:在各个字段的最下面</p>
<p>[constraint 约束名] 约束类型(字段名) &hellip;</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">stuinfo</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">stuname</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="n">gender</span><span class="w"> </span><span class="nb">char</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">seat</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">,</span><span class="n">majorid</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">,</span><span class="k">constraint</span><span class="w"> </span><span class="n">pk</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">id</span><span class="p">),</span><span class="k">constraint</span><span class="w"> </span><span class="n">uq</span><span class="w"> </span><span class="k">unique</span><span class="p">(</span><span class="n">seat</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">constraint</span><span class="w"> </span><span class="n">ck</span><span class="w"> </span><span class="k">check</span><span class="p">(</span><span class="n">gender</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;男&#39;</span><span class="p">,</span><span class="s1">&#39;女&#39;</span><span class="p">)),</span><span class="k">constraint</span><span class="w"> </span><span class="n">fk_stuinfo_major</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">majorid</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">major</span><span class="p">(</span><span class="n">id</span><span class="p">))</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">04</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211001160138048.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211001160138048.png"
			
			
			
			loading="lazy"
			alt="image-20211001160138048">
	</a>
	
	<figcaption>image-20211001160138048</figcaption>
	
</figure></p>
<p><strong>constraint 约束名 可以去掉</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">stuinfo</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">stuname</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="n">gender</span><span class="w"> </span><span class="nb">char</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">seat</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">,</span><span class="n">majorid</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">,</span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">id</span><span class="p">),</span><span class="k">unique</span><span class="p">(</span><span class="n">seat</span><span class="p">),</span><span class="k">check</span><span class="p">(</span><span class="n">gender</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;男&#39;</span><span class="p">,</span><span class="s1">&#39;女&#39;</span><span class="p">)),</span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">majorid</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">major</span><span class="p">(</span><span class="n">id</span><span class="p">))</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">06</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211001160643505.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211001160643505.png"
			
			
			
			loading="lazy"
			alt="image-20211001160643505">
	</a>
	
	<figcaption>image-20211001160643505</figcaption>
	
</figure></p>
<p><strong>通用写法</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">crete</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">stuinfo</span><span class="p">(</span><span class="w">
</span><span class="w">	</span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="n">stuname</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">,</span><span class="w"> 
</span><span class="w">    </span><span class="n">sex</span><span class="w"> </span><span class="nb">char</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="n">age</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="n">seat</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">unique</span><span class="w"> </span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="n">majorid</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="k">constraint</span><span class="w"> </span><span class="n">fk_stuinfo_major</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">majroid</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">major</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="p">)</span><span class="w">
</span></code></pre></div><p>主键和唯一的大对比</p>
<table>
<thead>
<tr>
<th></th>
<th>保证唯一性</th>
<th>是否允许为空</th>
<th>一个表中可以有几个</th>
<th>是否允许组合键</th>
</tr>
</thead>
<tbody>
<tr>
<td>主键</td>
<td>对</td>
<td>不对</td>
<td>一个表中至多有一个</td>
<td>是,但不推荐</td>
</tr>
<tr>
<td>唯一</td>
<td>对</td>
<td>对</td>
<td>可以有多个</td>
<td>是,但不推荐</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">primar</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="n">stuname</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">unique</span><span class="w"> </span><span class="p">(</span><span class="n">seat</span><span class="p">,</span><span class="n">majorid</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>外键:</p>
<ol>
<li>要求在从表设置外键关系</li>
<li>从表的外键列的类型和主表的关联列一致或兼容,名称无所谓</li>
<li>主表的关联咧必须是一个key或者唯一键</li>
<li>插入数据时,先插入主表,再插入从表</li>
<li>删除数据时,先删除从表,再删除主表</li>
</ol>
<p><strong>修改表时添加约束</strong></p>
<ul>
<li>添加列级约束 alter table 表名 mofidy column 字段名  字段类型 新约束 ;</li>
<li>添加表级约束 alter table 表名 add [constraint 约束名] 约束类型(字段名)  [外键的引用] ;</li>
</ul>
<p>添加非空约束</p>
<p><strong>添加列级约束</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">drop</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">stuinfo</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="n">stuname</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="n">gender</span><span class="w"> </span><span class="nb">char</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">seat</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="n">age</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="n">majorid</span><span class="w"> </span><span class="nb">int</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="k">modify</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">stuname</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">03</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="n">stuinfo</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-------------+------+-----+---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="k">Null</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Key</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Default</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Extra</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-------------+------+-----+---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="nb">int</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">stuname</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">   </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">gender</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="nb">char</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">seat</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nb">int</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">age</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="nb">int</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">majorid</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nb">int</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-------------+------+-----+---------+-------+
</span><span class="c1"></span><span class="mi">6</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="k">modify</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">defeault</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="k">modify</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="k">modify</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">04</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span></code></pre></div><p><strong>添加表级约束</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="k">unique</span><span class="p">(</span><span class="n">seat</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span></code></pre></div><p><strong>添加外键</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="k">constraint</span><span class="w"> </span><span class="n">fk_studentinfo_major</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">majorid</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">major</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">05</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span></code></pre></div><p><strong>修改表时删除约束</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">取消非空约束</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="k">modify</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">stuname</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">04</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">取消默认约束</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="k">modify</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">删除主键</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">stuinfo</span><span class="w">  </span><span class="k">drop</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">04</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">删除唯一键</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="k">drop</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="n">seat</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+------------+----------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+---------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">Table</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">Non_unique</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Key_name</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">Seq_in_index</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Column_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Collation</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Cardinality</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Sub_part</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Packed</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Null</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Index_type</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Comment</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Index_comment</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Visible</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Expression</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+------------+----------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+---------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="o">|</span><span class="w">          </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">fk_studentinfo_major</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">majorid</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">A</span><span class="w">         </span><span class="o">|</span><span class="w">           </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">BTREE</span><span class="w">      </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+------------+----------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+---------+------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">删除外键</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="k">drop</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="n">fk_studentinfo_major</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span></code></pre></div><h5 id="练习一下-5">练习一下</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">添加主键约束</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">emp2</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="k">constraint</span><span class="w"> </span><span class="n">my_emp_id_pk</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">id</span><span class="p">));</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">Database</span><span class="w"> </span><span class="n">changed</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">添加主键约束</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">dept2</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="k">constraint</span><span class="w"> </span><span class="n">my_dept_id_pk</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">department_id</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">03</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">拷贝数据和结构</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">emp2</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">students</span><span class="p">.</span><span class="n">emp2</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">03</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Tables_in_test</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">dept1</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">dept2</span><span class="w">             </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">emp2</span><span class="w">              </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">emp5</span><span class="w">              </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">int_zerofill</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">tab_char</span><span class="w">          </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">tab_date</span><span class="w">          </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">tab_float</span><span class="w">         </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">tab_float_default</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">tab_int</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">tab_set</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">test_add_column</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------+
</span><span class="c1"></span><span class="mi">12</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">emp2</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">dept_id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">添加外键约束</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">emp2</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">dept_id</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">dept2</span><span class="p">(</span><span class="n">department_id</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">04</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span></code></pre></div><p><strong>表级约束和列级约束的区别</strong></p>
<p>​					位置							支持的约束类型									是否可以起约束名</p>
<p>列级约束     列的后面 					支持所有语法,但是外键没有效果	  不可以起约束名</p>
<p>表级约束 	所有列的下面 			默认和非空不支持,其他支持			  可以起约束名</p>
<h5 id="标识列">标识列</h5>
<p>又称为自增长列</p>
<p>可以不用手动的插入值，系统提供默认的序列值</p>
<p><strong>创建表时设置标识列</strong></p>
<p><strong>特点</strong></p>
<ul>
<li>标识列必须和主键搭配吗？不一定，但要求是一个key</li>
<li>一个表可以有多少个标识列？至多一个</li>
<li>标识列的类型只能是数值型 一般是int</li>
<li>标识列可以通过 set auto_increment =3 ;设置步长</li>
<li>标识列可以通过手动的方式设置起始值</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tab_identity</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_identity</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;john&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">不是自增的话，搞不定</span><span class="w"> </span><span class="err">会主键重复的</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_identity</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;john&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">ERROR</span><span class="w"> </span><span class="mi">1062</span><span class="w"> </span><span class="p">(</span><span class="mi">23000</span><span class="p">):</span><span class="w"> </span><span class="n">Duplicate</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="s1">&#39;1&#39;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="s1">&#39;tab_identity.PRIMARY&#39;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">drop</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">tab_identity</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tab_identity</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="n">auto_increment</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">可以给他不设置列值</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_identity</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;john&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">或者可以给他设置为</span><span class="n">null就好了</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_identity</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;jwt&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_identity</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;jwt&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_identity</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;jwt&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">tab_identity</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">john</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jwt</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jwt</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jwt</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+------+
</span><span class="c1"></span><span class="mi">4</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>mysql不支持设置起始的数值，但是可以通过取巧的办法手动设置</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">查看自增长变量</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%auto_increment%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Variable_name</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">auto_increment_increment</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">auto_increment_offset</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">1</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------+-------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">设置自增长的步长</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">auto_increment_increment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%auto_increment%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Variable_name</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">auto_increment_increment</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">3</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">auto_increment_offset</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">1</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------+-------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_identity</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;jwt&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">tab_identity</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">john</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jwt</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jwt</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jwt</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">7</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jwt</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+------+
</span><span class="c1"></span><span class="mi">5</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">手动设置起始值</span><span class="w"> </span><span class="err">这样就可以达到效果了</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_identity</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;jwt&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">tab_identity</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----+------+
</span><span class="c1"></span><span class="o">|</span><span class="w">   </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">john</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jwt</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jwt</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jwt</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">7</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jwt</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jwt</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----+------+
</span><span class="c1"></span><span class="mi">6</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tab_identity</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;jwt&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">tab_identity</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----+------+
</span><span class="c1"></span><span class="o">|</span><span class="w">   </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">john</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jwt</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jwt</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jwt</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">   </span><span class="mi">7</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jwt</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jwt</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">103</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jwt</span><span class="w">  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----+------+
</span><span class="c1"></span><span class="mi">7</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p><strong>修改表时设置标识列</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tab_identity</span><span class="w"> </span><span class="k">modify</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="n">auto_increment</span><span class="w"> </span><span class="p">;</span><span class="w">  
</span></code></pre></div><p><strong>修改表时删除标识列</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tab_identity</span><span class="w"> </span><span class="k">modify</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w">  </span><span class="p">;</span><span class="w"> 
</span></code></pre></div><h4 id="tcl">TCL</h4>
<p>Transaction Control Languaue 事务控制语言</p>
<h5 id="事务">事务</h5>
<p>一个或者一组sql语句组成一个执行单元,这个执行单元要么全部执行,要么全部不执行</p>
<p><strong>事务的特点</strong></p>
<p>ACID</p>
<ul>
<li>原子性 一个事务不可再分割,要么执行要么都不执行</li>
<li>一致性 一个事务执行会使数据从一个一致状态切换到另一个一致状态</li>
<li>持久性 一个事务的执行不受其他事务的干扰</li>
<li>隔离性 一个事务一旦提交,则会永久的改变数据库的数据</li>
</ul>
<p>案例 转账</p>
<p>事务:事务由单独单元的一个或多个语句组成,在这个单元中,每个mysql语句是相互以来的.而整个单独单元作为一个不可分割的整体,如果单元中某条sql语句一旦执行失败或产生错误,整个单元将会回滚.所有受到影响的数据将返回到事务开始以前的状态;如果单元中的所有sql语句均执行成功,则事务被顺利执行.</p>
<h5 id="存储引擎"><strong>存储引擎</strong></h5>
<ul>
<li>概念:在mysql中的数据用各种不同的技术存储在文件(或内存)中</li>
<li>通过show engines 来查看mysql支持的存储引擎</li>
<li>在mysql中用的最多的存储引擎有 innodb myisam memory 等 其中innodb支持事务,而myisam/memory等不支持事务</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="n">engines</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------+---------+----------------------------------------------------------------+--------------+------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Engine</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">Support</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Comment</span><span class="w">                                                        </span><span class="o">|</span><span class="w"> </span><span class="n">Transactions</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">XA</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">Savepoints</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------+---------+----------------------------------------------------------------+--------------+------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">MEMORY</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Hash</span><span class="w"> </span><span class="n">based</span><span class="p">,</span><span class="w"> </span><span class="n">stored</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">memory</span><span class="p">,</span><span class="w"> </span><span class="n">useful</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">temporary</span><span class="w"> </span><span class="n">tables</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">         </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">MRG_MYISAM</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Collection</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">identical</span><span class="w"> </span><span class="n">MyISAM</span><span class="w"> </span><span class="n">tables</span><span class="w">                          </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">         </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">CSV</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">CSV</span><span class="w"> </span><span class="k">storage</span><span class="w"> </span><span class="n">engine</span><span class="w">                                             </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">         </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">FEDERATED</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Federated</span><span class="w"> </span><span class="n">MySQL</span><span class="w"> </span><span class="k">storage</span><span class="w"> </span><span class="n">engine</span><span class="w">                                 </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">PERFORMANCE_SCHEMA</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Performance</span><span class="w"> </span><span class="k">Schema</span><span class="w">                                             </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">         </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">MyISAM</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">MyISAM</span><span class="w"> </span><span class="k">storage</span><span class="w"> </span><span class="n">engine</span><span class="w">                                          </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">         </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">InnoDB</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Supports</span><span class="w"> </span><span class="n">transactions</span><span class="p">,</span><span class="w"> </span><span class="k">row</span><span class="o">-</span><span class="k">level</span><span class="w"> </span><span class="n">locking</span><span class="p">,</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="n">keys</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">        </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">BLACKHOLE</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="k">null</span><span class="w"> </span><span class="k">storage</span><span class="w"> </span><span class="n">engine</span><span class="w"> </span><span class="p">(</span><span class="n">anything</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="k">write</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">disappears</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">         </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">ARCHIVE</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">Archive</span><span class="w"> </span><span class="k">storage</span><span class="w"> </span><span class="n">engine</span><span class="w">                                         </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">NO</span><span class="w">         </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------+---------+----------------------------------------------------------------+--------------+------+------------+
</span><span class="c1"></span><span class="mi">9</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>事务的ACID属性</p>
<ul>
<li>原子性A  事务是一个不可分割的工作单位,事务中的操作要么都发生,要么都不发生</li>
<li>持久性D 持久性是指一个事务一旦被提交,它对数据库中数据的改变就是永久性的,接下来的其他操作和数据库故障不应该对其有任何影响</li>
<li>隔离性I  事务的隔离性是指一个事务的执行不能被其他事务干扰,即一个事务内部的操作及使用的数据对并发的其他事务是隔离的,并发执行的各个事务之间不能互相干扰</li>
<li>一致性C  事务必须使数据库从一个一致性状态变换到另一个一致性状态</li>
</ul>
<p><strong>事务的创建</strong></p>
<ul>
<li>隐式事务:事务没有明显的开启和结束的标记</li>
</ul>
<p>比如insert / update / delete 语句</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;autocommit&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Variable_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">autocommit</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="k">ON</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><ul>
<li>显式事务:事务具有明显的开启和结束标记 前提是必须先设置自动提交功能为禁用</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">只是针对当前事务有效</span><span class="w"> </span><span class="err">所以每次开启显式事务的时候都要手动的关闭自动提交功能</span><span class="w">
</span><span class="w"></span><span class="k">set</span><span class="w"> </span><span class="n">autocommit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w"> 
</span><span class="w">
</span></code></pre></div><p>步骤1 : 开启事务</p>
<p>set autocommit = 0</p>
<p>start transaction ; 可选的</p>
<p>步骤2 : 编写事务中的sql语句 select insert update delete &hellip;</p>
<p>语句1</p>
<p>语句2</p>
<p>&hellip;</p>
<p>步骤3 : 结束事务</p>
<p>commit ; 提交事务</p>
<p>rollback ; 回滚事务</p>
<p>savepoint 节点名 ; 设置保存点</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">account</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="n">auto_increment</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="n">double</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">03</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="p">(</span><span class="n">username</span><span class="p">,</span><span class="n">balance</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;张无忌&#39;</span><span class="p">,</span><span class="mi">1000</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;赵敏&#39;</span><span class="p">,</span><span class="mi">1000</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">张无忌</span><span class="w">   </span><span class="o">|</span><span class="w">    </span><span class="mi">1000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">赵敏</span><span class="w">     </span><span class="o">|</span><span class="w">    </span><span class="mi">1000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">禁用自动提交</span><span class="w"> </span><span class="err">开启事务</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">autocommit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">开启事务</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">start</span><span class="w"> </span><span class="k">transaction</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">=</span><span class="mi">500</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;张无忌&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">Rows</span><span class="w"> </span><span class="n">matched</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Changed</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">在</span><span class="n">navicat里查看好像是1000</span><span class="w"> </span><span class="mi">1000</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">张无忌</span><span class="w">   </span><span class="o">|</span><span class="w">     </span><span class="mi">500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">赵敏</span><span class="w">     </span><span class="o">|</span><span class="w">    </span><span class="mi">1000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">回滚试了试</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">rollback</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">是可以的</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">张无忌</span><span class="w">   </span><span class="o">|</span><span class="w">    </span><span class="mi">1000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">赵敏</span><span class="w">     </span><span class="o">|</span><span class="w">    </span><span class="mi">1000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">体验一下事务</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">autocommit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">start</span><span class="w"> </span><span class="k">transaction</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;张无忌&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">Rows</span><span class="w"> </span><span class="n">matched</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Changed</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1500</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;赵敏&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">Rows</span><span class="w"> </span><span class="n">matched</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Changed</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">提交</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">commit</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">张无忌</span><span class="w">   </span><span class="o">|</span><span class="w">     </span><span class="mi">500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">赵敏</span><span class="w">     </span><span class="o">|</span><span class="w">    </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="数据库的隔离级别"><strong>数据库的隔离级别</strong></h5>
<ul>
<li>
<p>对于同时运行的多个事务,当这些事务访问数据库中相同的数据时,如果没有采取必要的隔离机制,就会导致各种并发问题</p>
<ul>
<li>脏读:对于两个事务T1 , T2 ,T1读取了已经被T2更新,但是还没有被提交的字段,之后,若T2回滚,T1读取的内容就是临时且无效的</li>
<li>不可重复读:对于两个事务T1 , T2 , T1 读取了一个字段,然后T2 更新了该字段.之后,T1再次读取同一个字段,值就不同了</li>
<li>幻读:对于两个事务T1 , T2 , T1从一个表中读取了一个字段,然后T2在该表中插入了一些新的行.之后,如果T1再次读取同一个条,就会多出几行.</li>
</ul>
</li>
<li>
<p>数据库事务的隔离性:数据库系统必须具有隔离并发运行各个事务的能力,使他们不会互相影响,避免各种并发问题.</p>
</li>
<li>
<p>一个事务与其他事务隔离的程度称为隔离级别.数据库规定了多种事务隔离级别,不同隔离级别对应不同的干扰程度,隔离级别越高,数据一致性就越好,但并发性就越弱</p>
</li>
<li>
<p>数据库提供的4中隔离级别</p>
<ul>
<li>read uncommitted(读未提交数据) 允许事务读取未被其他事务提交的变更.脏读/不可重复读/幻读的问题都会出现</li>
<li>read commit(读已经提交的数据) 只允许事务读取已经被其他事务提交的变更,可以避免脏读,但不可重复度和幻读的问题仍然可能出现</li>
<li>repeatable read(可重复读) 确保事务可以多次从一个字段中读取相同的值,在这个事务持续期间,禁止其他事务对这个字段进行更新.可以避免脏读和不可重复读,但幻读的问题仍然存在.</li>
<li>serializable(串行化) 确保事务可以从一个表中读取相同的行.在这个事务持续期间,禁止其他事务对该表执行插入,更新和删除操作.所有并发问题都可以避免,但性能十分低下</li>
</ul>
</li>
<li>
<p>oracle支持的2种事务隔离级别:read commited , serializable . oracle默认的事务隔离级别为:read commited</p>
</li>
<li>
<p>mysql支持4种事务隔离级别 mysql默认的事务隔离级别为 repeatable read</p>
</li>
</ul>
<p><strong>测试一下read uncommitted</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">重启服务可以保证恢复默认的隔离级别吧好像</span><span class="w">
</span><span class="w"></span><span class="n">PS</span><span class="w"> </span><span class="k">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">Administrator</span><span class="p">.</span><span class="n">YOURTREEDAD</span><span class="o">&gt;</span><span class="w"> </span><span class="n">net</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">mysql</span><span class="w"> </span><span class="mi">80</span><span class="w">
</span><span class="w"></span><span class="err">此命令的语法是</span><span class="p">:</span><span class="w">
</span><span class="w"></span><span class="n">NET</span><span class="w"> </span><span class="n">STOP</span><span class="w">
</span><span class="w"></span><span class="n">service</span><span class="w">
</span><span class="w"></span><span class="n">PS</span><span class="w"> </span><span class="k">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">Administrator</span><span class="p">.</span><span class="n">YOURTREEDAD</span><span class="o">&gt;</span><span class="w"> </span><span class="n">net</span><span class="w"> </span><span class="k">start</span><span class="w">  </span><span class="n">mysql80</span><span class="w">
</span><span class="w"></span><span class="err">请求的服务已经启动。</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="err">请键入</span><span class="w"> </span><span class="n">NET</span><span class="w"> </span><span class="n">HELPMSG</span><span class="w"> </span><span class="mi">2182</span><span class="w"> </span><span class="err">以获得更多的帮助。</span><span class="w">
</span><span class="w"></span><span class="n">PS</span><span class="w"> </span><span class="k">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">Administrator</span><span class="p">.</span><span class="n">YOURTREEDAD</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mysql</span><span class="w"> </span><span class="o">-</span><span class="n">u</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w">
</span><span class="w"></span><span class="n">Enter</span><span class="w"> </span><span class="n">password</span><span class="p">:</span><span class="w"> </span><span class="o">******</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查看隔离级别</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">@@</span><span class="n">transaction_isolation</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="o">@@</span><span class="n">transaction_isolation</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">REPEATABLE</span><span class="o">-</span><span class="k">READ</span><span class="w">         </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">设置隔离级别为</span><span class="w">  </span><span class="k">read</span><span class="w"> </span><span class="k">uncommitted</span><span class="w"> </span><span class="err">读未提交数据</span><span class="w"> </span><span class="err">这样会导致脏读</span><span class="o">/</span><span class="err">不可重复读</span><span class="o">/</span><span class="err">幻读</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">session</span><span class="w"> </span><span class="k">transaction</span><span class="w"> </span><span class="k">isolation</span><span class="w"> </span><span class="k">level</span><span class="w"> </span><span class="k">read</span><span class="w"> </span><span class="k">uncommitted</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">@@</span><span class="n">transaction_isolation</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="o">@@</span><span class="n">transaction_isolation</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">READ</span><span class="o">-</span><span class="k">UNCOMMITTED</span><span class="w">        </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">autocommit</span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">start</span><span class="w"> </span><span class="k">transaction</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">看</span><span class="o">!</span><span class="w"> </span><span class="err">还没提交</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;john&#39;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">Rows</span><span class="w"> </span><span class="n">matched</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Changed</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">
</span></code></pre></div><p>在另一个界面打开设置隔离级别为 read uncommitted</p>
<p>就可以看到脏读的数据</p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002112133588.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002112133588.png"
			
			
			
			loading="lazy"
			alt="image-20211002112133588">
	</a>
	
	<figcaption>image-20211002112133588</figcaption>
	
</figure></p>
<p>假若原来的回滚了,那就离谱了</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">rollback</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002112511055.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002112511055.png"
			
			
			
			loading="lazy"
			alt="image-20211002112511055">
	</a>
	
	<figcaption>image-20211002112511055</figcaption>
	
</figure></p>
<p>所以会出现脏读幻读不可重复读都可能出现在这种隔离级别下</p>
<p><strong>测试一下 read committed</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">session</span><span class="w"> </span><span class="k">transaction</span><span class="w"> </span><span class="k">isolation</span><span class="w"> </span><span class="k">level</span><span class="w"> </span><span class="k">read</span><span class="w"> </span><span class="k">committed</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">autocommit</span><span class="w"> </span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">还没提交</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="s1">&#39;john&#39;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">Rows</span><span class="w"> </span><span class="n">matched</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Changed</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span></code></pre></div><p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002113519057.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002113519057.png"
			
			
			
			loading="lazy"
			alt="image-20211002113519057">
	</a>
	
	<figcaption>image-20211002113519057</figcaption>
	
</figure></p>
<p>这边也确实在第二个事务中没有看到还没提交的数据</p>
<p>但是!!! 但是 说明这可以避免脏读,但是不可重复读和幻读 嘿嘿!不行!</p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002113728187.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002113728187.png"
			
			
			
			loading="lazy"
			alt="image-20211002113728187">
	</a>
	
	<figcaption>image-20211002113728187</figcaption>
	
</figure></p>
<p>**测试一下 repeatable read **</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="o">@@</span><span class="n">transaction_isolation</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="o">@@</span><span class="n">transaction_isolation</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">REPEATABLE</span><span class="o">-</span><span class="k">READ</span><span class="w">         </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">john</span><span class="w">     </span><span class="o">|</span><span class="w">     </span><span class="mi">500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">赵敏</span><span class="w">     </span><span class="o">|</span><span class="w">    </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;autocommit&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Variable_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">autocommit</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="k">ON</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">autocommit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">start</span><span class="w"> </span><span class="k">transaction</span><span class="w">  </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">更新还未提交</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;刘备&#39;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">Rows</span><span class="w"> </span><span class="n">matched</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Changed</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span></code></pre></div><p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002151741957.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002151741957.png"
			
			
			
			loading="lazy"
			alt="image-20211002151741957">
	</a>
	
	<figcaption>image-20211002151741957</figcaption>
	
</figure>完全没问题,避免了脏读</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">提交之后在看看</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">commit</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">刘备</span><span class="w">     </span><span class="o">|</span><span class="w">     </span><span class="mi">500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">赵敏</span><span class="w">     </span><span class="o">|</span><span class="w">    </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002151946236.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002151946236.png"
			
			
			
			loading="lazy"
			alt="image-20211002151946236">
	</a>
	
	<figcaption>image-20211002151946236</figcaption>
	
</figure></p>
<p>下面演示一下为什么这种隔离级别会出现幻读</p>
<p>cmd中开启事务,插入一条数据</p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002152534283.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002152534283.png"
			
			
			
			loading="lazy"
			alt="image-20211002152534283">
	</a>
	
	<figcaption>image-20211002152534283</figcaption>
	
</figure></p>
<p>powershell中开启事务,查询数据</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">autocommit</span><span class="w"> </span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">start</span><span class="w"> </span><span class="k">transaction</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">暂时没查到</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">刘备</span><span class="w">     </span><span class="o">|</span><span class="w">     </span><span class="mi">500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">赵敏</span><span class="w">     </span><span class="o">|</span><span class="w">    </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>cmd中commit了</p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002152659690.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002152659690.png"
			
			
			
			loading="lazy"
			alt="image-20211002152659690">
	</a>
	
	<figcaption>image-20211002152659690</figcaption>
	
</figure></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="n">sql中也没有问题</span><span class="w"> </span><span class="err">保证数据一致性</span><span class="w"> </span><span class="err">所以么有出现不可重复读</span><span class="w"> </span><span class="err">不会多出来刚刚插入的那条数据</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">刘备</span><span class="w">     </span><span class="o">|</span><span class="w">     </span><span class="mi">500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">赵敏</span><span class="w">     </span><span class="o">|</span><span class="w">    </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">但是</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="err">但是</span><span class="o">!</span><span class="w"> </span><span class="err">下面出问题了</span><span class="w">  </span><span class="err">本来希望在事务的开始的时候</span><span class="p">,</span><span class="err">表里有两条数据</span><span class="p">,</span><span class="err">我希望把两条数据的</span><span class="n">username改一下</span><span class="p">,</span><span class="err">但是这时候另一个事务中插入了一条</span><span class="w"> </span><span class="err">在更新的时候把插入的也更新了</span><span class="n">username</span><span class="w"> </span><span class="err">这样的话就裂开了</span><span class="w"> </span><span class="err">出现幻读</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;mmm&#39;</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">Rows</span><span class="w"> </span><span class="n">matched</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="n">Changed</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">mmm</span><span class="w">      </span><span class="o">|</span><span class="w">     </span><span class="mi">500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">mmm</span><span class="w">      </span><span class="o">|</span><span class="w">    </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">mmm</span><span class="w">      </span><span class="o">|</span><span class="w">    </span><span class="mi">1000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002153254274.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002153254274.png"
			
			
			
			loading="lazy"
			alt="image-20211002153254274">
	</a>
	
	<figcaption>image-20211002153254274</figcaption>
	
</figure></p>
<h5 id="测试一下-serializable">测试一下 serializable</h5>
<p>powershell中尝试开启事务 并且更新数据</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">autocommit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">session</span><span class="w"> </span><span class="k">transaction</span><span class="w"> </span><span class="k">isolation</span><span class="w"> </span><span class="k">level</span><span class="w"> </span><span class="k">serializable</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">@@</span><span class="n">transaction_isolation</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="o">@@</span><span class="n">transaction_isolation</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">SERIALIZABLE</span><span class="w">            </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">autocommit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">start</span><span class="w"> </span><span class="k">transaction</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">  </span><span class="k">from</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">mmm</span><span class="w">      </span><span class="o">|</span><span class="w">     </span><span class="mi">500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">mmm</span><span class="w">      </span><span class="o">|</span><span class="w">    </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">mmm</span><span class="w">      </span><span class="o">|</span><span class="w">    </span><span class="mi">1000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="s1">&#39;www&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><p>这时还没有更新,cmd中开启了一个事务尝试往这张表中插入数据</p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002154329103.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002154329103.png"
			
			
			
			loading="lazy"
			alt="image-20211002154329103">
	</a>
	
	<figcaption>image-20211002154329103</figcaption>
	
</figure></p>
<p>这就会将表锁住,因为上一个事务在使用这张表,为了防止数据库出现幻读的操作,该隔离级别将表锁住了,这样子完全插入不了,做更新的时候就可以保证更新的数据条目和查出来的数据条目是一致的了.</p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002154520024.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211002154520024.png"
			
			
			
			loading="lazy"
			alt="image-20211002154520024">
	</a>
	
	<figcaption>image-20211002154520024</figcaption>
	
</figure></p>
<h5 id="在mysql中设置隔离级别">在mysql中设置隔离级别</h5>
<ul>
<li>每启动一个mysql程序,就会获得一个单独的数据库连接.每个数据库连接都有一个全局变量@@tx_isolation,表示当前的事务隔离级别</li>
<li>查看当前的隔离级别: select @@tx_isolation ;</li>
<li>设置当前mysql连接的隔离级别: set transaction isolation level read committed ;</li>
<li>设置数据库系统的全局的隔离级别: set global transaction isolation level read committed ;</li>
</ul>
<h5 id="事务的隔离级别">事务的隔离级别</h5>
<table>
<thead>
<tr>
<th></th>
<th>脏读</th>
<th>不可重复读</th>
<th>幻读</th>
</tr>
</thead>
<tbody>
<tr>
<td>read uncommitted</td>
<td>会</td>
<td>会</td>
<td>会</td>
</tr>
<tr>
<td>read committed</td>
<td>不会</td>
<td>会</td>
<td>会</td>
</tr>
<tr>
<td>repeated read</td>
<td>不会</td>
<td>不会</td>
<td>会</td>
</tr>
<tr>
<td>serializable</td>
<td>不会</td>
<td>不会</td>
<td>不会</td>
</tr>
</tbody>
</table>
<p><strong>mysql中默认的是repeated read ;</strong></p>
<p><strong>oracle中默认的是read committed</strong></p>
<p>查看 select @@transaction_isolation ;</p>
<p>设置 set session/global transaction isolation level serilizable&hellip;</p>
<h5 id="delete和truncate的区别-1">delete和truncate的区别</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;autocommit&#39;</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Variable_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">autocommit</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="k">OFF</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">autocommit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">start</span><span class="w"> </span><span class="k">transaction</span><span class="w">  </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">删除数据</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">回滚</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">rollback</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">数据还在</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">mmm</span><span class="w">      </span><span class="o">|</span><span class="w">     </span><span class="mi">500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">mmm</span><span class="w">      </span><span class="o">|</span><span class="w">    </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">mmm</span><span class="w">      </span><span class="o">|</span><span class="w">    </span><span class="mi">1000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">autocommit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">start</span><span class="w"> </span><span class="k">transaction</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">删除数据</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">truncate</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">03</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">回滚</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">rollback</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">无法恢复</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Empty</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p><strong>savepoint的使用</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">autocommit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">start</span><span class="w"> </span><span class="k">transaction</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">设置保存点</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="n">savepoint</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="mi">3</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">回到保存点</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">rollback</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">关羽</span><span class="w">     </span><span class="o">|</span><span class="w">    </span><span class="mi">3000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">还可以再回滚</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">rollback</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">刘备</span><span class="w">     </span><span class="o">|</span><span class="w">    </span><span class="mi">1000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">张飞</span><span class="w">     </span><span class="o">|</span><span class="w">    </span><span class="mi">2000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">关羽</span><span class="w">     </span><span class="o">|</span><span class="w">    </span><span class="mi">3000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+---------+
</span><span class="c1"></span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="视图">视图</h5>
<p>虚拟表,和普通表一样使用,通过普通表动态生成的数据</p>
<p>mysql5.1开始提供视图功能.一种虚拟存在的表,行和列的数据来自定义视图的查询中使用的表,并且是在使用视图时动态生成的,只保存了sql逻辑,不保存查询结果</p>
<ul>
<li>应用场景
<ul>
<li>多个地方用到了同样的查询结果</li>
<li>该查询结果使用的sql语句较为复杂</li>
</ul>
</li>
</ul>
<p><strong>创建视图</strong></p>
<p>语法 create view 视图名 as 查询语句</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="n">d</span><span class="p">.</span><span class="n">department_name</span><span class="p">,</span><span class="n">j</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%a%&#39;</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+-----------------+------------+---------------------------------+------------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">job_id</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">job_title</span><span class="w">                       </span><span class="o">|</span><span class="w"> </span><span class="n">min_salary</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">max_salary</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+-----------------+------------+---------------------------------+------------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Exe</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">AD_VP</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Administration</span><span class="w"> </span><span class="n">Vice</span><span class="w"> </span><span class="n">President</span><span class="w">   </span><span class="o">|</span><span class="w">      </span><span class="mi">15000</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="mi">30000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Exe</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">AD_VP</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Administration</span><span class="w"> </span><span class="n">Vice</span><span class="w"> </span><span class="n">President</span><span class="w">   </span><span class="o">|</span><span class="w">      </span><span class="mi">15000</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="mi">30000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询各部门的平均工资级别</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">g</span><span class="p">.</span><span class="n">grade_level</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="err">平均工资</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">平均工资</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w">  </span><span class="n">department_id</span><span class="w"> </span><span class="p">)</span><span class="n">a</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">job_grades</span><span class="w">  </span><span class="k">g</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="err">平均工资</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">lower_sal</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">highest_sal</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------------+--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grade_level</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">平均工资</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-------------+--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">          </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">C</span><span class="w">           </span><span class="o">|</span><span class="w">  </span><span class="mi">7000</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">B</span><span class="w">           </span><span class="o">|</span><span class="w">  </span><span class="mi">4400</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">C</span><span class="w">           </span><span class="o">|</span><span class="w">  </span><span class="mi">9500</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">如果用视图来做简化一点点</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">myv2</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="err">平均工资</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="n">j</span><span class="p">.</span><span class="n">grade_level</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">myv2</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">job_grades</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="err">平均工资</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">lower_sal</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">highest_sal</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+--------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">平均工资</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">grade_level</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+--------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">          </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">7000</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">C</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">4400</span><span class="p">.</span><span class="mi">000000</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">B</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询平均工资最低的部门信息</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">asc</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">            </span><span class="mi">50</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Shi</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">121</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">使用视图</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">myv2</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">平均工资</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">            </span><span class="mi">50</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Shi</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">121</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">可以使用视图套视图</span><span class="w">
</span><span class="w">
</span></code></pre></div><p><strong>视图的优点</strong></p>
<ul>
<li>重用sql语句</li>
<li>简化复杂的sql操作,不知道他的查询细节</li>
<li>保护数据,提高安全性</li>
</ul>
<p><strong>视图的修改</strong></p>
<ul>
<li>方式一</li>
</ul>
<p>create or replace view 视图名 as 查询语句 ;</p>
<ul>
<li>方式二</li>
</ul>
<p>alter view 视图名 as 查询语句;</p>
<p><strong>视图的删除</strong></p>
<p>drop view 视图名,视图名,&hellip;</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">drop</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">emp_v1</span><span class="p">,</span><span class="n">emp_v2</span><span class="p">,</span><span class="n">info</span><span class="p">,</span><span class="n">myv2</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p><strong>查看视图</strong></p>
<p>desc 视图名 ;</p>
<p>查看具体的过程 show create view 视图名  ;</p>
<h5 id="练习一下-6">练习一下</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">create</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">emp_v1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">phone_number</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;011%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">创建视图要求查询部门的最高工资高于</span><span class="mi">12000</span><span class="err">的部门信息</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">emp_v2</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">12000</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">emp_v2</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">            </span><span class="mi">90</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Exe</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">100</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1700</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">80</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Sal</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">145</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">2500</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">            </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Mar</span><span class="w">             </span><span class="o">|</span><span class="w">        </span><span class="mi">201</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1800</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+-----------------+------------+-------------+
</span></code></pre></div><p><strong>视图的更新</strong></p>
<p><strong>视图的插入</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">myv1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">myv1</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">email</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">SKING</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">NKOCHHAR</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">原始表也插入了张飞这条数据了</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">myv1</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="s1">&#39;张飞&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;101@qq.com&#39;</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p><strong>视图的更新</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">myv1</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;张无忌&#39;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;张飞&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">Rows</span><span class="w"> </span><span class="n">matched</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Changed</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">都会修改原始表</span><span class="w">
</span></code></pre></div><p><strong>视图的删除</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">myv1</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;张无忌&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">都会修改原始表</span><span class="w">
</span></code></pre></div><p><strong>通常情况下不会对视图进行增删改的操作的</strong></p>
<p><strong>备注:</strong> 视图的可更新性和视图中查询的定义有关系,以下类型的视图是不能更新的</p>
<ul>
<li>包含以下关键字的sql语句:分组函数/distinct/group by/having/union/union all</li>
<li>常量视图</li>
<li>select中包含子查询</li>
<li>join</li>
<li>from一个不能更新的视图</li>
<li>where子句的子查询引用了from子句中的表</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="w"> </span><span class="o">#</span><span class="err">关键字的</span><span class="n">sql语句的视图不可以被更新</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">myv2</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="p">,</span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">想想也是</span><span class="p">,</span><span class="err">怎么能简单的更新一下</span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="err">呢</span><span class="p">,</span><span class="err">聚合函数的值是算出来的</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">myv2</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="mi">9000</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">ERROR</span><span class="w"> </span><span class="mi">1288</span><span class="w"> </span><span class="p">(</span><span class="n">HY000</span><span class="p">):</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">myv2</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">updatable</span><span class="w">
</span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">常量视图不能修改</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">myv3</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="s1">&#39;john&#39;</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">myv3</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">john</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">myv3</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;lucy&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">ERROR</span><span class="w"> </span><span class="mi">1288</span><span class="w"> </span><span class="p">(</span><span class="n">HY000</span><span class="p">):</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">myv3</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">updatable</span><span class="w">
</span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="n">select中包含子查询的不能修改视图</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">myv4</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="p">)</span><span class="w"> </span><span class="err">最高工资</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">myv4</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">最高工资</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">myv4</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="err">最高工资</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10000</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">ERROR</span><span class="w"> </span><span class="mi">1288</span><span class="w"> </span><span class="p">(</span><span class="n">HY000</span><span class="p">):</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">myv4</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">updatable</span><span class="w">
</span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="n">join中不能更新视图</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">myv5</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="n">department_name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">可以更新</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">myv5</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;张飞&#39;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">last_name</span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Whalen&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">Rows</span><span class="w"> </span><span class="n">matched</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Changed</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">不能插入</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">可能是因为两个视图中有一个是</span><span class="n">department_id是主键叭</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">myv5</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;陈真&#39;</span><span class="p">,</span><span class="s1">&#39;xxxx&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">ERROR</span><span class="w"> </span><span class="mi">1394</span><span class="w"> </span><span class="p">(</span><span class="n">HY000</span><span class="p">):</span><span class="w"> </span><span class="n">Can</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="s1">&#39;myemployees.myv5&#39;</span><span class="w"> </span><span class="k">without</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="n">list</span><span class="w">
</span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">由一个不可更新的视图构成的视图不可更新</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">myv6</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">myv4</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">myv6</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">最高工资</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">myv6</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="err">最高工资</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20000</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">ERROR</span><span class="w"> </span><span class="mi">1288</span><span class="w"> </span><span class="p">(</span><span class="n">HY000</span><span class="p">):</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">myv6</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">updatable</span><span class="w">
</span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="n">where子句的子查询引用了from子句中的表</span><span class="w"> </span><span class="err">相当于自连接</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">myv7</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="k">in</span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">manager_id</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">myv7</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">email</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">salary</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">K_ing</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">SKING</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">24000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">De</span><span class="w"> </span><span class="n">Haan</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">LDEHAAN</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Hunold</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">AHUNOLD</span><span class="w">  </span><span class="o">|</span><span class="w">  </span><span class="mi">9000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Kochhar</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">NKOCHHAR</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">17000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Greenberg</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">NGREENBE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Raphaely</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">DRAPHEAL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">11000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Weiss</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">MWEISS</span><span class="w">   </span><span class="o">|</span><span class="w">  </span><span class="mi">8000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Fripp</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">AFRIPP</span><span class="w">   </span><span class="o">|</span><span class="w">  </span><span class="mi">8200</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Kaufling</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">PKAUFLIN</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">7900</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Vollman</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">SVOLLMAN</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">6500</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Mourgos</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">KMOURGOS</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">5800</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Russell</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">JRUSSEL</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">14000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Partners</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">KPARTNER</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">13500</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Errazuriz</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AERRAZUR</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Cambrault</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">GCAMBRAU</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">11000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Zlotkey</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">EZLOTKEY</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">10500</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Hartstein</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">MHARTSTE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">13000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Higgins</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">SHIGGINS</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">12000</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+----------+----------+
</span><span class="c1"></span><span class="mi">18</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="n">myv7</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">=</span><span class="mi">10000</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;K_ing&#39;</span><span class="w"> </span><span class="p">;</span><span class="w"> 
</span><span class="w"></span><span class="n">ERROR</span><span class="w"> </span><span class="mi">1288</span><span class="w"> </span><span class="p">(</span><span class="n">HY000</span><span class="p">):</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">myv7</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">updatable</span><span class="w">
</span></code></pre></div><h5 id="视图和表的对比">视图和表的对比</h5>
<table>
<thead>
<tr>
<th></th>
<th>创建语法的关键字</th>
<th>是否实际占用物理空间</th>
<th>使用</th>
</tr>
</thead>
<tbody>
<tr>
<td>视图</td>
<td>create view</td>
<td>只是保存了sql逻辑</td>
<td>增删改查,只是一般不能增删改</td>
</tr>
<tr>
<td>表</td>
<td>create table</td>
<td>保存了数据</td>
<td>增删改查</td>
</tr>
</tbody>
</table>
<h5 id="delete和truncate在事务使用时的区别">delete和truncate在事务使用时的区别</h5>
<ul>
<li>delete可以回滚 truncate不能回滚</li>
</ul>
<h5 id="练习一下-7">练习一下</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">添加约束</span><span class="w"> </span><span class="err">创建表</span><span class="w"> </span><span class="err">但是这样</span><span class="w"> </span><span class="err">列级约束中外键是不起作用的</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">Book</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">bid</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">bname</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">unique</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="k">default</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span><span class="n">btypeId</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">booktype</span><span class="p">(</span><span class="n">id</span><span class="p">));</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">03</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">这里发现索引只有</span><span class="w"> </span><span class="err">主键和唯一键</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">book</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+---------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">Table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Non_unique</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Key_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Seq_in_index</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Column_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Collation</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Cardinality</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Sub_part</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Packed</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Null</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Index_type</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Comment</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Index_comment</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Visible</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Expression</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+---------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">book</span><span class="w">  </span><span class="o">|</span><span class="w">          </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w">  </span><span class="o">|</span><span class="w">            </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bid</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">A</span><span class="w">         </span><span class="o">|</span><span class="w">           </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">BTREE</span><span class="w">      </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">book</span><span class="w">  </span><span class="o">|</span><span class="w">          </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bname</span><span class="w">    </span><span class="o">|</span><span class="w">            </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bname</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">A</span><span class="w">         </span><span class="o">|</span><span class="w">           </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">BTREE</span><span class="w">      </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+---------+------------+
</span><span class="c1"></span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">所以要改成这样</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">Book</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">bid</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">bname</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">unique</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="k">default</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span><span class="n">btypeId</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">btypeId</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">bookType</span><span class="p">(</span><span class="n">id</span><span class="p">));</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">03</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">book</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+---------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">Table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Non_unique</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Key_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Seq_in_index</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Column_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Collation</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Cardinality</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Sub_part</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Packed</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Null</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Index_type</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Comment</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Index_comment</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Visible</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Expression</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+---------+------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">book</span><span class="w">  </span><span class="o">|</span><span class="w">          </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w">  </span><span class="o">|</span><span class="w">            </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bid</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">A</span><span class="w">         </span><span class="o">|</span><span class="w">           </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">BTREE</span><span class="w">      </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">book</span><span class="w">  </span><span class="o">|</span><span class="w">          </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bname</span><span class="w">    </span><span class="o">|</span><span class="w">            </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bname</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">A</span><span class="w">         </span><span class="o">|</span><span class="w">           </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">BTREE</span><span class="w">      </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">book</span><span class="w">  </span><span class="o">|</span><span class="w">          </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">btypeId</span><span class="w">  </span><span class="o">|</span><span class="w">            </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">btypeId</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">A</span><span class="w">         </span><span class="o">|</span><span class="w">           </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="k">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">BTREE</span><span class="w">      </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+---------+------------+
</span><span class="c1"></span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">myvbook</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">bname</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">book</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">booktype</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">btypeid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">100</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">myvbook1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">bname</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">book</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="mi">90</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="mi">120</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">drop</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">myvbook</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">myvbook1</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="复习前一天内容">复习前一天内容</h5>
<p>DDL语言</p>
<p><strong>常见的约束</strong></p>
<p>NOT NULL 非空,该字段的值必填</p>
<p>DEFAULT  默认,该字段的值不用手动插入有默认值</p>
<p>CHECK  检查 mysql不支持</p>
<p>PRIMARY KEY  主键 该字段的值不可重复并且非空 unique+not null</p>
<p>FOREIGN KEY 外键 该字段的值引用了另外的表的字段</p>
<p>UNIQUE   唯一 该字段的值不可重复</p>
<p><strong>主键和唯一的区别</strong></p>
<ol>
<li>一个表至多有一个主键 , 但可以有多个唯一键</li>
<li>主键不允许为空 , 唯一可以为空</li>
<li>都具有唯一性,都支持组合键 , 但不推荐</li>
</ol>
<p><strong>外键</strong></p>
<ol>
<li>用于限制两个表的关系,从表的字段引用了主表的某字段值</li>
<li>要求外键列和主表的被引用列要求类型一致,意义一样,名称无要求</li>
<li>主表的被引用列要求是一个key(一般就是主键)</li>
<li>插入数据,先插入主表</li>
<li>删除数据,先删除从表</li>
</ol>
<p><strong>级联删除</strong></p>
<p>实际上就是在删除主表里的数据的时候,把从表里相关的带有该数据的行也一并删除</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">级联删除</span><span class="w">
</span><span class="w"></span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="k">constraint</span><span class="w"> </span><span class="n">fk_stu_major</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">majorid</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">major</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">cascade</span><span class="w"> </span><span class="p">;</span><span class="w"> 
</span></code></pre></div><p><strong>级联置空</strong></p>
<p>实际上就是在删除主表里的数据的时候,把从表里相关的带有该数据的行的对应字段置为空</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">级联置空</span><span class="w">
</span><span class="w"></span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">stuinfo</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="k">constraint</span><span class="w"> </span><span class="n">fk_stu_major</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">majorid</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="n">major</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div><p><strong>创建表时添加约束</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="err">表名</span><span class="p">(</span><span class="w">
</span><span class="w">	</span><span class="err">字段名</span><span class="w"> </span><span class="err">字段类型</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">,</span><span class="w"> 
</span><span class="w">    </span><span class="err">字段名</span><span class="w"> </span><span class="err">字段类型</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">,</span><span class="w"> 
</span><span class="w">    </span><span class="err">字段名</span><span class="w"> </span><span class="err">字段类型</span><span class="w"> </span><span class="k">unique</span><span class="w"> </span><span class="p">,</span><span class="w"> 
</span><span class="w">    </span><span class="err">字段名</span><span class="w"> </span><span class="err">字段类型</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="p">,</span><span class="w"> 
</span><span class="w">    </span><span class="k">constraint</span><span class="w"> </span><span class="err">约束名</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="err">字段名</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="err">主表</span><span class="p">(</span><span class="err">被引用列</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="p">)</span><span class="w">
</span></code></pre></div><p>**注意:	**</p>
<table>
<thead>
<tr>
<th></th>
<th>支持类型</th>
<th>可以起约束名字</th>
</tr>
</thead>
<tbody>
<tr>
<td>列级约束</td>
<td>除了外键</td>
<td>不可以</td>
</tr>
<tr>
<td>表级约束</td>
<td>除了默认,非空</td>
<td>可以,但是对主键无效</td>
</tr>
</tbody>
</table>
<p>列级约束可以在一个字段上追加多个,中间用空格隔开,没有顺序要求</p>
<p><strong>修改表时添加或删除约束</strong></p>
<p><strong>非空</strong></p>
<p>alter table 表名 modify column 字段名 字段类型 not null ;</p>
<p><strong>删除非空</strong></p>
<p>alter table 表名 modify column 字段名 字段类型 ;</p>
<p><strong>默认</strong></p>
<p>alter table 表名 modify column 字段名 字段类型 default 值 ;</p>
<p><strong>删除默认</strong></p>
<p>alter table 表名 modify column 字段名 字段类型;</p>
<p><strong>主键</strong></p>
<p>alter table 表名 add primary key (字段名) ;</p>
<p><strong>删除主键</strong></p>
<p>alter table 表名 drop primary key ;</p>
<p><strong>唯一</strong></p>
<p>alter table 表名 add unique (字段名) ;</p>
<p><strong>删除</strong></p>
<p>alter table 表名 drop index 索引名 ;</p>
<p><strong>外键</strong></p>
<p>alter table 表名 add foreign key (字段名) references 主表 (被引用列) ;</p>
<p><strong>删除外键</strong></p>
<p>alter table 表名 drop foreign key 约束名 ;</p>
<p><strong>自增长列</strong></p>
<p>特点</p>
<ol>
<li>不用手动插入值 , 可以自动提供序列值,默认从1开始,步长为1  auto_increament_increment</li>
<li>如果要更改起始值:手动插入值</li>
<li>如果要更改步长:更改系统变量 set auto_increment_increment = 值 ;</li>
<li>一个表至多有一个自增长列</li>
<li>自增长列只能支持数值型</li>
<li>自增长列必须为一个key</li>
</ol>
<p>创建表时设置自增长列</p>
<p>create table 表</p>
<p>修改表时设置自增长列</p>
<p>create table 表 modify column 字段名 字段类型  约束 auto_increment  ;</p>
<p>删除自增长列</p>
<p>alter table 表 modify column 字段名 字段类型 约束</p>
<p>TCL语言</p>
<p><strong>事务</strong>:一条或多条sql语句组成一个执行单位,一组sql句要么都执行要么都不执行</p>
<p><strong>特点(ACID)</strong></p>
<ul>
<li>原子性 一个事务是不可再分割的整体,要么都执行要么都不执行</li>
<li>一致性 一个事务可以使数据从一个一致状态切换到另一个一致的状态</li>
<li>隔离性 一个事务不受其他事务的干扰,多个事务互相隔离的</li>
<li>持久性 一个事务一旦提交了,则永久的持久化到本地</li>
</ul>
<p><strong>事务的使用步骤</strong></p>
<p>了解:</p>
<ul>
<li>隐式事务(自动事务) 没有明显的开始和结束,本事就是一条事务可以自动提交,比如insert update delete</li>
<li>显式事务 具有明显的开启和结束</li>
</ul>
<p>使用显式事务</p>
<ol>
<li>开启事务 set autocommit = 0</li>
<li>start transacton ; 可以省略</li>
<li>编写逻辑sql语句 一条或者多条 注意 不包含create alter drop 只支持insert update delete select</li>
<li>设置回滚点  savepoint 回滚点名 ;</li>
<li>结束事务
<ol>
<li>提交 commit</li>
<li>回滚 rollback</li>
<li>回滚点 rollback to 回滚点名;</li>
</ol>
</li>
</ol>
<h5 id="并发事务">并发事务</h5>
<ul>
<li>事务的并发问题是如何发生的</li>
</ul>
<p>多个事务同时操作同一个数据库的相同数据时</p>
<ul>
<li>并发问题有哪些
<ul>
<li>脏读 一个事务读取了其他事务还没有提交的数据  读到的是其他事务&quot;更新&quot;的数据</li>
<li>不可重复读 一个事务多次读取结果不一样 重复读取可能造成数据不一致的现象</li>
<li>幻读 一个事务读取了其他事务还没有提交的数据 只是读到的是 其他事务&quot;插入&quot;的数据</li>
</ul>
</li>
<li>如何解决并发问题
<ul>
<li>通过设置隔离级别来解决</li>
</ul>
</li>
<li>隔离级别                                                    脏读            不可重复读             幻读
<ul>
<li>read uncommitted  读未提交         会                    会                         会</li>
<li>read committed  读已提交           不会              会                        会           (oracle默认)</li>
<li>repeatted read  可重复读            不会              不会                         会       (msyql默认)</li>
<li>serializable  串行化                        不会                       不会                  不会</li>
</ul>
</li>
</ul>
<h5 id="视图-1">视图</h5>
<p>含义 mysql5.1版本出现的新特性 , 本身是一个虚拟表,是通过表数据动态生成的,查看时动态生成</p>
<p><strong>好处</strong></p>
<ul>
<li>简化sql语句</li>
<li>封装重用</li>
<li>保护了基表的数据,提高了安全性</li>
</ul>
<p><strong>创建</strong></p>
<p>create or replace view 视图名 as select &hellip;&hellip;</p>
<p><strong>修改</strong></p>
<p>create or replace view 视图名 as select &hellip;..</p>
<p>alter view 视图名 as select &hellip;.</p>
<p><strong>删除</strong></p>
<p>drop view 视图名,视图名&hellip;</p>
<p><strong>查看</strong></p>
<p>desc 视图名</p>
<p>show create view 视图名</p>
<p><strong>使用</strong></p>
<p>insert delete update select</p>
<p>**注意:	**视图一般用于查询的,而不是更新的,所以具备以下的视图都不允许更新</p>
<ul>
<li>带有 group by 分组函数 union having</li>
<li>where后的子查询用到了from中的表</li>
<li>常量视图</li>
<li>从不可更新的视图中生成的视图</li>
<li>join</li>
</ul>
<p><strong>视图和表的区别</strong></p>
<ul>
<li>view 和 table</li>
<li>视图占用较少物理空间 表占用实际数据</li>
<li>视图一般用于查询 表用于增删改查</li>
</ul>
<h5 id="变量">变量</h5>
<ul>
<li>系统变量
<ul>
<li>全局变量</li>
<li>会话变量</li>
</ul>
</li>
<li>自定义变量
<ul>
<li>用户变量</li>
<li>局部变量</li>
</ul>
</li>
</ul>
<h5 id="系统变量">系统变量</h5>
<p>说明:变量由系统提供,不是用户定义,属于服务器层面</p>
<p>使用的语法:</p>
<ol>
<li>查看所有的系统变量 show golbal/session  variables  ;  session是默认的</li>
<li>查看满足条件的部分系统变量 show global/session variables like &lsquo;%char%&rsquo; ;</li>
<li>查看指定的某个系统变量的值 select @@global/session.系统变量名字 ; session是默认的</li>
<li>为某个系统变量赋值
<ol>
<li>方式一 set global/session 系统变量名 = 值 ;</li>
<li>方式二 set @@global/session.系统变量名 = 值;</li>
</ol>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">show</span><span class="w"> </span><span class="k">global</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">@@</span><span class="n">transaction_isolation</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="o">@@</span><span class="n">transaction_isolation</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">REPEATABLE</span><span class="o">-</span><span class="k">READ</span><span class="w">         </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p><strong>注意</strong></p>
<p>如果是全局级别,则需要加global , 如果是会话级别,则需要加session , 如果不写, 则默认</p>
<p><strong>全局变量</strong></p>
<p><strong>作用域:服务器每次启动将为所有的全局变量赋初始值,针对所有的会话连接有效,但不能跨重启</strong></p>
<p>show gloabl variables ;</p>
<p><strong>查看部分的全局变量</strong></p>
<p>show global variables ; show variables like &lsquo;%char%&rsquo; ;</p>
<p><strong>查看指定的全局变量的值</strong></p>
<p>select @@global.autocommit ;</p>
<p><strong>为某个指定的全局变量赋值</strong></p>
<p>mysql&gt; set @@global.autocommit = 0 ;
Query OK, 0 rows affected (0.00 sec)</p>
<p><strong>会话变量</strong></p>
<p><strong>作用域:仅仅针对于当前会话(连接)有效</strong></p>
<p><strong>查看所有的会话变量</strong></p>
<p>show session variables ;</p>
<p>show variables ;</p>
<p><strong>查看部分的会话变量</strong></p>
<p>show variables like &lsquo;%char%&rsquo; ;</p>
<p>show session variables like &lsquo;%char%&rsquo; ;</p>
<p><strong>查看指定的某个会话变量</strong></p>
<p>select @@transaction_isolation ;</p>
<p>select @@session.transaction_isolation ;</p>
<p><strong>为某个会话变量赋值</strong></p>
<p>方式一</p>
<p>mysql&gt; set @@session.transaction_isolation = &lsquo;read-committed&rsquo; ;
Query OK, 0 rows affected (0.00 sec)</p>
<p>方式二</p>
<p>mysql&gt; set session transaction isolation level read uncommitted ;
Query OK, 0 rows affected (0.00 sec)</p>
<p>方式三</p>
<p>set session transaction_isolation = &lsquo;serializable&rsquo; ;</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%char%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------+---------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Variable_name</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w">                                                   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------+---------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_client</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">gbk</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_connection</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">gbk</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_database</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">utf8mb4</span><span class="w">                                                 </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_filesystem</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nb">binary</span><span class="w">                                                  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_results</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">gbk</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_server</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">utf8mb4</span><span class="w">                                                 </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_system</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">utf8mb3</span><span class="w">                                                 </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_sets_dir</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="k">C</span><span class="p">:</span><span class="err">\</span><span class="n">Program</span><span class="w"> </span><span class="n">Files</span><span class="err">\</span><span class="n">MySQL</span><span class="err">\</span><span class="n">MySQL</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="mi">8</span><span class="p">.</span><span class="mi">0</span><span class="err">\</span><span class="k">share</span><span class="err">\</span><span class="n">charsets</span><span class="err">\</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------+---------------------------------------------------------+
</span><span class="c1"></span><span class="mi">8</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="k">session</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%char%&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------+---------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Variable_name</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w">                                                   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------+---------------------------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_client</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">gbk</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_connection</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">gbk</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_database</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">utf8mb4</span><span class="w">                                                 </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_filesystem</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nb">binary</span><span class="w">                                                  </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_results</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">gbk</span><span class="w">                                                     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_server</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">utf8mb4</span><span class="w">                                                 </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_set_system</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">utf8mb3</span><span class="w">                                                 </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">character_sets_dir</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="k">C</span><span class="p">:</span><span class="err">\</span><span class="n">Program</span><span class="w"> </span><span class="n">Files</span><span class="err">\</span><span class="n">MySQL</span><span class="err">\</span><span class="n">MySQL</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="mi">8</span><span class="p">.</span><span class="mi">0</span><span class="err">\</span><span class="k">share</span><span class="err">\</span><span class="n">charsets</span><span class="err">\</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------------------+---------------------------------------------------------+
</span><span class="c1"></span><span class="mi">8</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">@@</span><span class="n">transaction_isolation</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="o">@@</span><span class="n">transaction_isolation</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">REPEATABLE</span><span class="o">-</span><span class="k">READ</span><span class="w">         </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">@@</span><span class="k">session</span><span class="p">.</span><span class="n">transaction_isolation</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="o">@@</span><span class="k">session</span><span class="p">.</span><span class="n">transaction_isolation</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">REPEATABLE</span><span class="o">-</span><span class="k">READ</span><span class="w">                 </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">session</span><span class="w"> </span><span class="k">transaction</span><span class="w"> </span><span class="k">isolation</span><span class="w"> </span><span class="k">level</span><span class="w"> </span><span class="k">read</span><span class="w"> </span><span class="k">uncommitted</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="o">@@</span><span class="k">session</span><span class="p">.</span><span class="n">transaction_isolation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;read-committed&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">@@</span><span class="n">transaction_isolation</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="o">@@</span><span class="n">transaction_isolation</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">READ</span><span class="o">-</span><span class="k">COMMITTED</span><span class="w">          </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">session</span><span class="w"> </span><span class="n">transaction_isolation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;serializable&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="自定义变量">自定义变量</h5>
<p>说明:变量是用户自定义的,不是由系统生成的</p>
<p>使用步骤:声明=&gt;赋值=&gt;使用(查看/比较/运算等)</p>
<p><strong>用户变量</strong></p>
<p><strong>作用域</strong>:针对当前会话(连接)有效,同于会话变量的作用域 , 应用在任何地方,也就是begin end里面或者begin end 外面</p>
<p><strong>赋值操作符</strong> =或者 :=</p>
<p><strong>声明并初始化</strong>  set @用户变量名 = 值 | set@用户变量名 :=值 | select @用户变量名:=值</p>
<p><strong>赋值</strong></p>
<ul>
<li>方式一  set @用户变量名 = 值 | set@用户变量名 :=值 | select @用户变量名:=值</li>
<li>方式二  通过 select into    select 字段 into 变量名 from 表</li>
</ul>
<p><strong>使用</strong></p>
<p>select @用户变量名</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="o">@</span><span class="n">name</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;ljs&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">弱类型</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="o">@</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1997</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="o">@</span><span class="k">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">myemployees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">Database</span><span class="w"> </span><span class="n">changed</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">方式二</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="o">@</span><span class="k">count</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">@</span><span class="n">name</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="o">@</span><span class="n">name</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1997</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">@</span><span class="k">count</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="o">@</span><span class="k">count</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+
</span><span class="c1"></span><span class="o">|</span><span class="w">    </span><span class="mi">107</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="局部变量">局部变量</h5>
<p><strong>作用域</strong>:仅仅在定义它的begin end中有效</p>
<p>应用在begin end 中的第一句话!!!</p>
<p><strong>声明</strong></p>
<p>declare 变量名  类型 ;</p>
<p>declare 变量名 类型 default 值;</p>
<p><strong>赋值</strong></p>
<p>方式一</p>
<p>set 局部变量名 = 值;</p>
<p>方式二</p>
<p>set 局部变量名 := 值 ;</p>
<p>方式三</p>
<p>select @局部变量名 := 值 ;</p>
<p>方式四</p>
<p>select 值 into @局部变量名 from 表 ;</p>
<p><strong>使用</strong></p>
<p>select 局部变量名 ;</p>
<p><strong>对比用户变量和局部变量</strong></p>
<table>
<thead>
<tr>
<th></th>
<th>作用域</th>
<th>定义和使用的位置</th>
<th>语法</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户变量</td>
<td>当前会话</td>
<td>会话中的任何地方</td>
<td>需要加上@符号,不用限定类型</td>
</tr>
<tr>
<td>局部变量</td>
<td>begin end 中</td>
<td>只能在begin end中,且为第一句话</td>
<td>一般不用加上@符号,除非select,需要限定类型</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">使用用户变量</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w">  </span><span class="k">set</span><span class="w"> </span><span class="o">@</span><span class="n">a</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">b1</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="o">@</span><span class="n">b</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">b1</span><span class="p">)</span><span class="n">b</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">@</span><span class="n">b</span><span class="o">+@</span><span class="n">a</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="o">@</span><span class="n">b</span><span class="o">+@</span><span class="n">a</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+
</span><span class="c1"></span><span class="o">|</span><span class="w">     </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">只能在</span><span class="k">begin</span><span class="w"> </span><span class="n">end中才行</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">declare</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">ERROR</span><span class="w"> </span><span class="mi">1064</span><span class="w"> </span><span class="p">(</span><span class="mi">42000</span><span class="p">):</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="k">SQL</span><span class="w"> </span><span class="n">syntax</span><span class="p">;</span><span class="w"> </span><span class="k">check</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">manual</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">corresponds</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">MySQL</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="k">version</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">right</span><span class="w"> </span><span class="n">syntax</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">near</span><span class="w"> </span><span class="s1">&#39;declare m int default 1&#39;</span><span class="w"> </span><span class="k">at</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span></code></pre></div><h5 id="存储过程和函数">存储过程和函数</h5>
<p>存储过程和函数:类似与java中的方法</p>
<p>好处:</p>
<ul>
<li>提高代码的重用性</li>
<li>简化操作</li>
</ul>
<p>存储过程</p>
<p>含义:一组预先编译豪的sql语句的集合,理解成批处理语句</p>
<p>好处:</p>
<ol>
<li>提高了代码的重用性</li>
<li>简化操作</li>
<li>减少了编译次数并减少了和数据库服务器的连接次数,提高了效率</li>
</ol>
<p><strong>创建语法</strong></p>
<p>create procedure 存储过程名(参数列表)</p>
<p>begin</p>
<p>​	存储过程体(一组合法的sql语句)</p>
<p>end</p>
<p><strong>注意</strong>:</p>
<ol>
<li>
<p>参数列表包含三部分  参数模式  参数名  参数类型</p>
<ul>
<li>IN stuname varchar(20)</li>
<li>参数模式
<ul>
<li>IN  该参数可以作为输入,也就是该参数需要调用方传入值</li>
<li>OUT  该参数可以作为输出,也就是该参数可以作为返回值</li>
<li>INOUT 该参数既可以作为输入又可以作为输出,也就是该参数既需要传入值,又可以返回值</li>
</ul>
</li>
</ul>
</li>
<li>
<p>如果存储过程体仅仅只有一句话 , begin end 可以省略</p>
<p>存储过程体中的每条sql语句的结尾要求必须加分号;</p>
<p>存储过程的结尾可以使用 DELIMITER重新设置</p>
<p>语法:</p>
<p>DELIMITER 结束标记</p>
<p>DELIMITER $</p>
</li>
</ol>
<p><strong>调用语法</strong></p>
<p>CALL 存储过程名 (实参列表)  结束标记;</p>
<h5 id="空参列表">空参列表</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">实现批量插入数据</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;myp1&#39;</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+------+-----------+----------------+---------------------+---------------------+---------------+---------+----------------------+----------------------+--------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Db</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="k">Definer</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">Modified</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">Created</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">Security_type</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Comment</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">character_set_client</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">collation_connection</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Database</span><span class="w"> </span><span class="k">Collation</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+------+-----------+----------------+---------------------+---------------------+---------------+---------+----------------------+----------------------+--------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">girls</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">myp1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">PROCEDURE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">root</span><span class="o">@</span><span class="n">localhost</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">10</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="mi">19</span><span class="p">:</span><span class="mi">11</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">10</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="mi">19</span><span class="p">:</span><span class="mi">11</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">DEFINER</span><span class="w">       </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">gbk</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="n">gbk_chinese_ci</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">utf8_general_ci</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+------+-----------+----------------+---------------------+---------------------+---------------+---------+----------------------+----------------------+--------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">girls</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">Database</span><span class="w"> </span><span class="n">changed</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">写错了</span><span class="w"> </span><span class="err">就把存储过程删了重来</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">drop</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">myp1</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;myp1&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Empty</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">delimiter</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">myp1</span><span class="p">()</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="k">admin</span><span class="p">(</span><span class="n">username</span><span class="w"> </span><span class="p">,</span><span class="n">password</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;ljs&#39;</span><span class="p">,</span><span class="s1">&#39;11&#39;</span><span class="p">),(</span><span class="s1">&#39;jwt&#39;</span><span class="p">,</span><span class="s1">&#39;22&#39;</span><span class="p">),(</span><span class="s1">&#39;lje&#39;</span><span class="p">,</span><span class="s1">&#39;33&#39;</span><span class="p">),(</span><span class="s1">&#39;fyz&#39;</span><span class="p">,</span><span class="s1">&#39;44&#39;</span><span class="p">),(</span><span class="s1">&#39;wzr&#39;</span><span class="p">,</span><span class="s1">&#39;55&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;myp1&#39;</span><span class="w"> </span><span class="err">$</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+------+-----------+----------------+---------------------+---------------------+---------------+---------+----------------------+----------------------+--------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Db</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="k">Definer</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">Modified</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">Created</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">Security_type</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Comment</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">character_set_client</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">collation_connection</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Database</span><span class="w"> </span><span class="k">Collation</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+------+-----------+----------------+---------------------+---------------------+---------------+---------+----------------------+----------------------+--------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">girls</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">myp1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">PROCEDURE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">root</span><span class="o">@</span><span class="n">localhost</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">10</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">35</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">10</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">35</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">DEFINER</span><span class="w">       </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">gbk</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="n">gbk_chinese_ci</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">utf8_general_ci</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------+------+-----------+----------------+---------------------+---------------------+---------------+---------+----------------------+----------------------+--------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">执行存储过程</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CALL</span><span class="w"> </span><span class="n">myp1</span><span class="p">()</span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">admin</span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">john</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">8888</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">lyt</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">6666</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ljs</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">11</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jwt</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">22</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">lje</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">33</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">fyz</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">44</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">7</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">wzr</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">55</span><span class="w">       </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+----------+
</span><span class="c1"></span><span class="mi">7</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="创建带in模式参数的存储过程">创建带IN模式参数的存储过程</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">查看女神的男朋友</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">DELIMITER</span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">myp2</span><span class="w"> </span><span class="p">(</span><span class="k">IN</span><span class="w"> </span><span class="n">girlName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">bo</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="n">bo</span><span class="w"> </span><span class="k">right</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">bo</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">girlName</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">ERROR</span><span class="w"> </span><span class="mi">1065</span><span class="w"> </span><span class="p">(</span><span class="mi">42000</span><span class="p">):</span><span class="w"> </span><span class="n">Query</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">empty</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CALL</span><span class="w"> </span><span class="n">myp2</span><span class="p">(</span><span class="s1">&#39;柳岩&#39;</span><span class="p">);</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+---------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">boyName</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">userCP</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+---------+--------+
</span><span class="c1"></span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">张飞</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+---------+--------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">传入多个参数</span><span class="p">,</span><span class="err">判断用户是否登陆成功</span><span class="w">  </span><span class="err">方式一</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">DELIMITER</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">myp3</span><span class="p">(</span><span class="k">IN</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="k">IN</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="s1">&#39;登陆成功&#39;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;未登陆&#39;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="err">登陆状态</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">admin</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">admin</span><span class="p">.</span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="n">username</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">admin</span><span class="p">.</span><span class="n">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">call</span><span class="w"> </span><span class="n">myp3</span><span class="p">(</span><span class="s1">&#39;john&#39;</span><span class="p">,</span><span class="s1">&#39;8888&#39;</span><span class="p">)</span><span class="err">$</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">登陆状态</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">登陆成功</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">call</span><span class="w"> </span><span class="n">myp3</span><span class="p">(</span><span class="s1">&#39;john&#39;</span><span class="p">,</span><span class="s1">&#39;8887&#39;</span><span class="p">)</span><span class="err">$</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">登陆状态</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">未登陆</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">方式二</span><span class="w"> </span><span class="err">使用局部变量</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">DELIMITER</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">myp4</span><span class="p">(</span><span class="k">in</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">declare</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">admin</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">admin</span><span class="p">.</span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">admin</span><span class="p">.</span><span class="n">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="k">result</span><span class="w"> </span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">,</span><span class="s1">&#39;未登陆&#39;</span><span class="p">,</span><span class="s1">&#39;登陆成功&#39;</span><span class="p">);</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CALL</span><span class="w"> </span><span class="n">myp4</span><span class="p">(</span><span class="s1">&#39;john&#39;</span><span class="p">,</span><span class="s1">&#39;8888&#39;</span><span class="p">)</span><span class="err">$</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="k">result</span><span class="w"> </span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">,</span><span class="s1">&#39;未登陆&#39;</span><span class="p">,</span><span class="s1">&#39;登陆成功&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">登陆成功</span><span class="w">                            </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">warnings</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CALL</span><span class="w"> </span><span class="n">myp4</span><span class="p">(</span><span class="s1">&#39;john&#39;</span><span class="p">,</span><span class="s1">&#39;88887&#39;</span><span class="p">)</span><span class="err">$</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="k">result</span><span class="w"> </span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">,</span><span class="s1">&#39;未登陆&#39;</span><span class="p">,</span><span class="s1">&#39;登陆成功&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">未登陆</span><span class="w">                              </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------------------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="创建带out模式的存储过程">创建带out模式的存储过程</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">根据女神名</span><span class="p">,</span><span class="err">返回对应男神名</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">DELIMITER</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">myp5</span><span class="p">(</span><span class="k">in</span><span class="w"> </span><span class="n">beautyname</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="k">out</span><span class="w"> </span><span class="n">boyname</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">bo</span><span class="p">.</span><span class="n">boyname</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">boyname</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="n">bo</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">bo</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">boyfriend_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">beautyname</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">不用初始化也是可以的</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="o">@</span><span class="n">boyname</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">call</span><span class="w"> </span><span class="n">myp5</span><span class="p">(</span><span class="s1">&#39;柳岩&#39;</span><span class="p">,</span><span class="o">@</span><span class="n">boyname</span><span class="p">)</span><span class="err">$</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">@</span><span class="n">boyname</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="o">@</span><span class="n">boyname</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">张飞</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">多个</span><span class="n">out返回值</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">返回男朋友的名字和魅力值</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">DELIMITER</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">myp6</span><span class="p">(</span><span class="k">in</span><span class="w"> </span><span class="n">girlname</span><span class="w"> </span><span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="n">boyname</span><span class="w"> </span><span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="n">soulIndex</span><span class="w"> </span><span class="nb">int</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">bo</span><span class="p">.</span><span class="n">boyname</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">bo</span><span class="p">.</span><span class="n">usercp</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">boyname</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">soulIndex</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="n">bo</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bo</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">girlname</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">call</span><span class="w"> </span><span class="n">myp6</span><span class="p">(</span><span class="s1">&#39;柳岩&#39;</span><span class="p">,</span><span class="o">@</span><span class="n">boyname</span><span class="p">,</span><span class="o">@</span><span class="n">soulIndex</span><span class="p">)</span><span class="err">$</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">warnings</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">@</span><span class="n">boyname</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="o">@</span><span class="n">boyname</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">张飞</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">@</span><span class="n">soulIndex</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="o">@</span><span class="n">soulIndex</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">         </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="创建带inout模式参数的存储过程">创建带INOUT模式参数的存储过程</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">DELIMITER</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">myp7</span><span class="w"> </span><span class="p">(</span><span class="k">inout</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">inout</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">*</span><span class="mi">2</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="o">*</span><span class="mi">2</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="o">@</span><span class="n">a</span><span class="p">:</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="o">@</span><span class="n">b</span><span class="p">:</span><span class="o">=</span><span class="mi">2</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">CALL</span><span class="w"> </span><span class="n">myp7</span><span class="p">(</span><span class="o">@</span><span class="n">a</span><span class="p">,</span><span class="o">@</span><span class="n">b</span><span class="p">)</span><span class="err">$</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">@</span><span class="n">a</span><span class="p">,</span><span class="o">@</span><span class="n">b</span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="o">@</span><span class="n">a</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="o">@</span><span class="n">b</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+------+
</span><span class="c1"></span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p><strong>练习一下</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">传入用户名密码</span><span class="p">,</span><span class="err">插入</span><span class="n">admin表</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">DELIMITER</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">myp8</span><span class="p">(</span><span class="k">in</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="k">in</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="k">admin</span><span class="p">(</span><span class="k">admin</span><span class="p">.</span><span class="n">username</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">admin</span><span class="p">.</span><span class="n">password</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="n">username</span><span class="p">,</span><span class="n">password</span><span class="p">);</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CALL</span><span class="w"> </span><span class="n">myp8</span><span class="p">(</span><span class="s1">&#39;wlz&#39;</span><span class="p">,</span><span class="s1">&#39;hellouu&#39;</span><span class="p">)</span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">warnings</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">查询传入女神编号</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">返回女神名称和女神电话</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">DELIMITER</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">myp9</span><span class="p">(</span><span class="k">in</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="n">girlname</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="n">phone</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">11</span><span class="p">))</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">phone</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">girlname</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">phone</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CALL</span><span class="w"> </span><span class="n">myp9</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="o">@</span><span class="n">girlname</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="o">@</span><span class="n">phone</span><span class="p">)</span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">warnings</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">@</span><span class="n">girlname</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="o">@</span><span class="n">phone</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="o">@</span><span class="n">girlname</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">@</span><span class="n">phone</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">柳岩</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">18209876577</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------+-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">比较两个日期大小</span><span class="w"> </span><span class="err">并返回大小关系</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">DELIMITER</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">myp10</span><span class="p">(</span><span class="k">in</span><span class="w"> </span><span class="n">birth1</span><span class="w"> </span><span class="n">datetime</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">birth2</span><span class="w"> </span><span class="n">datetime</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">datediff</span><span class="p">(</span><span class="n">birth1</span><span class="p">,</span><span class="n">birth2</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="k">if</span><span class="p">(</span><span class="n">datediff</span><span class="p">(</span><span class="n">birth1</span><span class="p">,</span><span class="n">birth2</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CALL</span><span class="w"> </span><span class="n">myp10</span><span class="p">(</span><span class="s1">&#39;1997-11-21&#39;</span><span class="p">,</span><span class="s1">&#39;1998-11-21&#39;</span><span class="p">,</span><span class="o">@</span><span class="k">result</span><span class="p">)</span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">@</span><span class="k">result</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="o">@</span><span class="k">result</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="o">|</span><span class="w">      </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p><strong>删除存储过程</strong></p>
<p>drop procedure 存储过程名   <strong>一次只能删除一次</strong></p>
<p><strong>查看存储过程的信息</strong></p>
<p>show create proceduce 存储过程名</p>
<p><strong>修改存储过程</strong></p>
<p>比较麻烦,通常不这么做</p>
<p><strong>练习一下</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">传入日期</span><span class="p">,</span><span class="err">转换成</span><span class="n">xx年xx月xx日并返回</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">myptest1</span><span class="p">(</span><span class="k">in</span><span class="w"> </span><span class="n">mydate</span><span class="w"> </span><span class="n">datetime</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="n">strDate</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">date_format</span><span class="p">(</span><span class="n">mydate</span><span class="p">,</span><span class="s1">&#39;%y年%m月%d日&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">strDate</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CALL</span><span class="w"> </span><span class="n">myptest1</span><span class="p">(</span><span class="s1">&#39;1997-11-21&#39;</span><span class="p">,</span><span class="o">@</span><span class="n">strDate</span><span class="p">);</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">@</span><span class="n">strDate</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="o">@</span><span class="n">strDate</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">97</span><span class="err">年</span><span class="mi">11</span><span class="err">月</span><span class="mi">21</span><span class="err">日</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">传入女神名字</span><span class="w"> </span><span class="err">输出</span><span class="w"> </span><span class="err">女神名字</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="err">男生名字</span><span class="w">  </span><span class="err">最好使用右连接</span><span class="w"> </span><span class="err">另外</span><span class="n">concat和null拼接永远都是null</span><span class="w"> </span><span class="err">所以要用</span><span class="n">ifnull的函数防止出问题</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">delimiter</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">myptest2</span><span class="p">(</span><span class="k">inout</span><span class="w"> </span><span class="n">girlName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">concat</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="p">,</span><span class="s1">&#39; AND &#39;</span><span class="p">,</span><span class="n">bo</span><span class="p">.</span><span class="n">boyName</span><span class="p">)</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">girlName</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">boys</span><span class="w"> </span><span class="n">bo</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bo</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">girlName</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="o">@</span><span class="n">name</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;柳岩&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">CALL</span><span class="w"> </span><span class="n">MYPTEST2</span><span class="p">(</span><span class="o">@</span><span class="n">name</span><span class="p">);</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">@</span><span class="n">name</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="o">@</span><span class="n">name</span><span class="w">         </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="err">柳岩</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="err">张飞</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">传入条目数和起始索引</span><span class="p">,</span><span class="err">查询</span><span class="n">beauty表的记录</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="k">offset</span><span class="p">,</span><span class="k">size</span><span class="w"> </span><span class="err">是从</span><span class="n">offset的下一条开始的</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">delimiter</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">myptest3</span><span class="p">(</span><span class="k">in</span><span class="w"> </span><span class="k">size</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">startIndex</span><span class="w"> </span><span class="nb">int</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">beauty</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="n">startIndex</span><span class="p">,</span><span class="k">size</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CALL</span><span class="w"> </span><span class="n">myptest3</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+--------+------+---------------------+-------------+--------------+--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">sex</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">borndate</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">phone</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">photo</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">boyfriend_id</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+--------+------+---------------------+-------------+--------------+--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">周冬雨</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">女</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">1992</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">18209179577</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">         </span><span class="o">|</span><span class="w">            </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">7</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">岳灵珊</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">女</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">1987</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">30</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">18219876577</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">         </span><span class="o">|</span><span class="w">            </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">双儿</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="err">女</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">1993</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">18209876579</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">         </span><span class="o">|</span><span class="w">            </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">夏雪</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="err">女</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">1993</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">03</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">18209876579</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">         </span><span class="o">|</span><span class="w">            </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">唐艺昕</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">女</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="mi">1990</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">23</span><span class="w"> </span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">18988888</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span><span class="w">         </span><span class="o">|</span><span class="w">            </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+--------+------+---------------------+-------------+--------------+--------------+
</span><span class="c1"></span><span class="mi">5</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="函数">函数</h5>
<p>含义:一组预先编译豪的sql语句的集合,理解成批处理语句</p>
<p>好处:</p>
<ol>
<li>提高了代码的重用性</li>
<li>简化操作</li>
<li>减少了编译次数并减少了和数据库服务器的连接次数,提高了效率</li>
</ol>
<p>区别:</p>
<p>存储过程:可以有0个返回,也可以有多个返回,适合做批量插入/批量更新</p>
<p>函数:有且仅有1个返回,适合做处理数据后返回一个结果</p>
<p><strong>创建语法</strong></p>
<p>create function 函数名 (参数列表) return 返回类型</p>
<p>begin</p>
<p>​	函数体</p>
<p>end</p>
<p><strong>注意:</strong></p>
<ul>
<li>
<p>参数列表 包含两部分</p>
<p>参数名 参数类型</p>
</li>
<li>
<p>函数体:肯定会有return语句,如果没有会报错</p>
<p>如果return语句没有放在函数体的最后也不报错,但不建议</p>
<p>return 值;</p>
</li>
<li>
<p>函数体中仅有一句话,则可以省略begin end</p>
</li>
<li>
<p>使用delimeter语句作为设置结束标记</p>
</li>
</ul>
<p><strong>调用语法</strong></p>
<p>select 函数名(参数列表)</p>
<p><strong>无参有返回</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">返回公司的员工个数</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">和存储过程不一样</span><span class="w"> </span><span class="err">这里要声明局部变量</span><span class="w"> </span><span class="err">最后一句需要</span><span class="n">return一下</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="n">mysql中要改一下全局变量</span><span class="w"> </span><span class="err">这是我们开启了</span><span class="n">bin</span><span class="o">-</span><span class="n">log</span><span class="p">,</span><span class="w"> </span><span class="err">我们就必须指定我们的函数是否是</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">global</span><span class="w"> </span><span class="n">log_bin_trust_function_creators</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">delimiter</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">myf1</span><span class="p">()</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="nb">int</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">declare</span><span class="w"> </span><span class="k">count</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="k">count</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="k">count</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">使用的时候用</span><span class="n">select关键字</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">myf1</span><span class="p">()</span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">myf1</span><span class="p">()</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+
</span><span class="c1"></span><span class="o">|</span><span class="w">    </span><span class="mi">107</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p><strong>有参有返回</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">根据员工名</span><span class="p">,</span><span class="err">返回他的工资</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">delimiter</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">myf3</span><span class="p">(</span><span class="n">departmentname</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="n">double</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="o">@</span><span class="n">avgsalary</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="o">@</span><span class="n">avgsalary</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">departmentname</span><span class="w"> </span><span class="p">);</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="o">@</span><span class="n">avgsalary</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">myf3</span><span class="p">(</span><span class="s1">&#39;Adm&#39;</span><span class="p">);</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">myf3</span><span class="p">(</span><span class="s1">&#39;Adm&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">     </span><span class="mi">4400</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="查看函数">查看函数</h5>
<p>show create function myf3;</p>
<p><strong>删除函数</strong></p>
<p>drop function myf3 ;</p>
<p><strong>存储过程和函数都在information_schema中的routines表中</strong></p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211010170437148.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211010170437148.png"
			
			
			
			loading="lazy"
			alt="image-20211010170437148">
	</a>
	
	<figcaption>image-20211010170437148</figcaption>
	
</figure></p>
<p><strong>练习一下</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">传入两个</span><span class="n">float的值</span><span class="w"> </span><span class="err">返回一个和</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">delimiter</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">test_func1</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="nb">float</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">declare</span><span class="w"> </span><span class="k">sum</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="k">sum</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">test_func1</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">test_func1</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">               </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">-----------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">test_func1</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">test_func1</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">                    </span><span class="mi">0</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----------------------+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="流程控制结构">流程控制结构</h5>
<p>顺序结构:程序从上往下依次执行</p>
<p>分支结构:程序从两条或多条路径中选择一条去执行</p>
<p>循环结构:程序在满足一定条件的基础上,重复执行一段代码</p>
<h5 id="分支结构">分支结构</h5>
<ul>
<li>if函数</li>
</ul>
<p>功能:实现简单的双分支</p>
<p>语法:</p>
<p>if(表达式1,表达式2,表达式3)</p>
<p>如果表达式1成立,则if函数返回表达式2的值,否则返回表达式3的值</p>
<p>应用:任何地方</p>
<ul>
<li>case结构</li>
</ul>
<p>情况1:类似于java中的switch语句,一般用于实现等值判断</p>
<p>case 表达式|字段|变量</p>
<p>when 要判断的值 then &hellip; 或语句1 ;</p>
<p>when 要判断的值 then &hellip;  或语句2 ;</p>
<p>else &hellip;  或语句n ;</p>
<p>end  case ;</p>
<p>情况2:类似于java中的多重if语句,一般用于实现区间判断</p>
<p>case</p>
<p>when 要判断的条件1 then &hellip; 或语句1 ;</p>
<p>when 要判断的表达式2 then &hellip;  或语句2 ;</p>
<p>else  &hellip; 或语句n ;</p>
<p>end case ;</p>
<p><strong>特点:</strong></p>
<ul>
<li>可以作为表达式,嵌套在其他语句中使用,可以放在任何地方,begin end 中或者begin end 的外面</li>
<li>可以作为独立的语句去使用,只能放在begin end 中</li>
<li>如果when中的值或条件成立,则执行对应的then后面的语句,并且结束case</li>
<li>如果都不满足,则执行else中的语句或值</li>
<li>else可以省略,如果else省略了,并且所有when条件都不满足,则返回null</li>
</ul>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211010203810756.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211010203810756.png"
			
			
			
			loading="lazy"
			alt="image-20211010203810756">
	</a>
	
	<figcaption>image-20211010203810756</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211010203829794.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211010203829794.png"
			
			
			
			loading="lazy"
			alt="image-20211010203829794">
	</a>
	
	<figcaption>image-20211010203829794</figcaption>
	
</figure></p>
<p><strong>案例</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="mi">90</span><span class="o">-</span><span class="mi">100</span><span class="w"> </span><span class="err">显示</span><span class="n">A</span><span class="w"> </span><span class="mi">80</span><span class="o">-</span><span class="mi">90</span><span class="w"> </span><span class="err">显示</span><span class="n">B</span><span class="w"> </span><span class="mi">60</span><span class="o">-</span><span class="mi">80</span><span class="err">显示</span><span class="k">C</span><span class="w"> </span><span class="err">其余显示</span><span class="n">D</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">test_case</span><span class="p">(</span><span class="k">in</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="nb">int</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">&gt;=</span><span class="mi">90</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">&lt;=</span><span class="mi">100</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="s1">&#39;A&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">&gt;=</span><span class="mi">80</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">90</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="s1">&#39;B&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">&gt;=</span><span class="mi">60</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">80</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="s1">&#39;C&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="s1">&#39;D&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">call</span><span class="w"> </span><span class="n">test_case</span><span class="w"> </span><span class="p">(</span><span class="mi">95</span><span class="p">)</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---+
</span><span class="c1"></span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="if结构">if结构</h5>
<p>功能:实现多重分支</p>
<p>语法:</p>
<p>if 条件1 then 语句1 <strong>;</strong></p>
<p>else if 条件2 then 语句2 <strong>;</strong></p>
<p>&hellip;</p>
<p>else 语句n <strong>;</strong></p>
<p>end if <strong>;</strong></p>
<p>应用在begin end 中</p>
<p><strong>案例</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="mi">90</span><span class="o">-</span><span class="mi">100</span><span class="w"> </span><span class="err">返回</span><span class="n">A</span><span class="w"> </span><span class="mi">80</span><span class="o">-</span><span class="mi">90</span><span class="w"> </span><span class="err">返回</span><span class="n">B</span><span class="w"> </span><span class="mi">60</span><span class="o">-</span><span class="mi">80</span><span class="err">返回</span><span class="k">C</span><span class="w"> </span><span class="err">其余返回</span><span class="n">D</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">方式一</span><span class="w"> </span><span class="err">可以这样直接</span><span class="k">return</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">test_if</span><span class="p">(</span><span class="n">score</span><span class="w"> </span><span class="nb">int</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">&gt;=</span><span class="mi">90</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">&lt;=</span><span class="mi">100</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;A&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">elseif</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">80</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;B&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">elseif</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">60</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;C&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">else</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;D&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">或者用原始的这样</span><span class="w">  </span><span class="err">这里注意</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="err">一定要有封号</span><span class="o">!!!!</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">test_id1</span><span class="p">(</span><span class="n">score</span><span class="w"> </span><span class="nb">int</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="o">@</span><span class="n">grade</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">&gt;=</span><span class="mi">90</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">100</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="o">@</span><span class="n">grade</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;A&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">elseif</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">80</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="o">@</span><span class="n">grade</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;B&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">elseif</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">&gt;</span><span class="mi">60</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="o">@</span><span class="n">grade</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;C&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">else</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="o">@</span><span class="n">grade</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;D&#39;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="o">@</span><span class="n">grade</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="循环结构">循环结构</h5>
<p>分类:</p>
<ul>
<li>while</li>
<li>loop</li>
<li>repeat</li>
</ul>
<p><strong>循环控制:</strong></p>
<p>iterate类似于continue ,结束本次循环,继续下一次</p>
<p>leave 类似于 break , 跳出,结束当前所在的循环</p>
<ul>
<li>while</li>
</ul>
<p>[标签:] while 循环条件 do</p>
<p>​			循环体</p>
<p>end while [标签]</p>
<ul>
<li>loop</li>
</ul>
<p>[标签:] loop</p>
<p>​	循环体</p>
<p>end loop [标签]</p>
<p>可以用来模拟简单的死循环</p>
<ul>
<li>repeat</li>
</ul>
<p>[标签:] repeat</p>
<p>​		循环体</p>
<p>until 结束循环的条件</p>
<p>end repeat [标签]</p>
<p><strong>案例</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">批量插入</span><span class="w"> </span><span class="err">根据次数插入到</span><span class="n">admin中多条记录</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">pro_while1</span><span class="p">(</span><span class="k">in</span><span class="w"> </span><span class="n">insertcount</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">declare</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">while</span><span class="w"> </span><span class="n">i</span><span class="o">&lt;</span><span class="n">insertcount</span><span class="w"> </span><span class="k">do</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="k">admin</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="n">username</span><span class="p">,</span><span class="n">password</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="n">concat</span><span class="p">(</span><span class="s1">&#39;rose&#39;</span><span class="p">,</span><span class="n">i</span><span class="p">),</span><span class="mi">666</span><span class="p">);</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="n">while</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">call</span><span class="w"> </span><span class="n">pro_while1</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">admin</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="err">$</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+----------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">john</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">8888</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">lyt</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">6666</span><span class="w">     </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">rose0</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">666</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">rose1</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">666</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">rose2</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">666</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+----------+----------+
</span><span class="c1"></span><span class="mi">11</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">添加</span><span class="n">leave语句</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">批量插入</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">根据次数插入到</span><span class="n">admin表中多条记录</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">如果次数</span><span class="o">&gt;</span><span class="mi">20</span><span class="w"> </span><span class="err">就停止</span><span class="w">  </span><span class="err">注意安全</span><span class="w"> </span><span class="n">if语句没写好</span><span class="w"> </span><span class="err">一直在循环插入了</span><span class="mi">300</span><span class="n">w条数据</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">test_whileleave</span><span class="p">(</span><span class="k">in</span><span class="w"> </span><span class="n">insertcount</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">declare</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="p">:</span><span class="n">while</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">insertcount</span><span class="w"> </span><span class="k">do</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">20</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">leave</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="w">  </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="k">admin</span><span class="p">(</span><span class="n">username</span><span class="p">,</span><span class="n">password</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="n">concat</span><span class="p">(</span><span class="s1">&#39;xiaohua&#39;</span><span class="p">,</span><span class="n">i</span><span class="p">),</span><span class="s1">&#39;0000&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="n">while</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="o">#</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">call</span><span class="w"> </span><span class="n">test_whileleave</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="o">#</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">03</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="o">#</span><span class="err">添加</span><span class="k">iterate</span><span class="w">
</span><span class="w"></span><span class="o">##</span><span class="err">批量插入</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">根据次数插入到</span><span class="n">admin表中多条记录</span><span class="w"> </span><span class="p">,</span><span class="w">  </span><span class="err">并且插入奇数</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">test_iterate</span><span class="p">(</span><span class="k">in</span><span class="w"> </span><span class="n">insertcount</span><span class="w"> </span><span class="nb">int</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">declare</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="p">:</span><span class="n">while</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">insertcount</span><span class="w"> </span><span class="k">do</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">mod</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="mi">1</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">iterate</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">else</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="k">admin</span><span class="w"> </span><span class="p">(</span><span class="n">username</span><span class="p">,</span><span class="w"> </span><span class="n">password</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="n">concat</span><span class="p">(</span><span class="s1">&#39;jishu&#39;</span><span class="p">,</span><span class="n">i</span><span class="p">),</span><span class="s1">&#39;1111&#39;</span><span class="p">);</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="n">while</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="o">#</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">call</span><span class="w"> </span><span class="n">test_iterate</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="o">#</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p><figure 
	>
	<a href="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211010222825964.png" >
		<img src="/mysql%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3.assets/image-20211010222825964.png"
			
			
			
			loading="lazy"
			alt="image-20211010222825964">
	</a>
	
	<figcaption>image-20211010222825964</figcaption>
	
</figure></p>
<h5 id="练习一下-8">练习一下</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">#</span><span class="err">新建表</span><span class="w"> </span><span class="err">然后像该表插入指定个数的</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">随机字符串</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">stringcontent</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="n">auto_increment</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">));</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">test_randstr_insert</span><span class="p">(</span><span class="k">in</span><span class="w"> </span><span class="n">insertcount</span><span class="w"> </span><span class="nb">int</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">begin</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">declare</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">declare</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="s1">&#39;abcdefghijklmnopqrstuvwxyz&#39;</span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">declare</span><span class="w"> </span><span class="n">startIndex</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">declare</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">while</span><span class="w"> </span><span class="n">i</span><span class="o">&lt;</span><span class="n">insertcount</span><span class="w"> </span><span class="k">do</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">startIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">floor</span><span class="p">(</span><span class="n">rand</span><span class="p">()</span><span class="o">*</span><span class="mi">26</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">floor</span><span class="p">(</span><span class="n">rand</span><span class="p">()</span><span class="o">*</span><span class="p">(</span><span class="mi">20</span><span class="o">-</span><span class="n">startindex</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">stringcontent</span><span class="p">(</span><span class="n">content</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="n">substr</span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="n">startIndex</span><span class="p">,</span><span class="n">len</span><span class="p">));</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="n">while</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="o">#</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">call</span><span class="w"> </span><span class="n">test_randstr_insert</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">#</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">02</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">stringcontent</span><span class="w"> </span><span class="o">#</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">content</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">klm</span><span class="w">          </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">hijklmn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">pqr</span><span class="w">          </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">no</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">rs</span><span class="w">           </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">6</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">abcde</span><span class="w">        </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">7</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bcdefghijklm</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">8</span><span class="w"> </span><span class="o">|</span><span class="w">              </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">f</span><span class="w">            </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">lmn</span><span class="w">          </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">----+--------------+
</span><span class="c1"></span><span class="mi">10</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h5 id="复习一下-3">复习一下</h5>
<p>分类:</p>
<p><strong>系统变量</strong></p>
<p>说明:变量由系统提供的,不用自定义</p>
<p>语法:</p>
<ol>
<li>查看系统变量
<ol>
<li>show global|session variables  ;如果没有显式声明,那默认是session</li>
</ol>
</li>
<li>查看指定的系统变量的值
<ol>
<li>select @@global|session.变量名 ;</li>
</ol>
</li>
<li>为系统变量赋值
<ol>
<li>set gloabl|session 变量名 = 值 ;</li>
<li>set @@global.变量名 = 值 ;</li>
<li>set @@变量名 = 值;</li>
</ol>
</li>
</ol>
<ul>
<li>全局变量</li>
<li>服务器层面上的,必须拥有super权限才能为系统变量赋值,作用域为整个服务器,也就是针对于所有连接(会话)有效,服务器重启后失效(除非修改配置)</li>
<li>会话变量
<ul>
<li>服务器为每一个连接的客户端都提供了系统变量,作用域为当前的连接(会话)</li>
</ul>
</li>
</ul>
<p><strong>自定义变量</strong></p>
<p>说明:</p>
<p><strong>用户变量</strong></p>
<ul>
<li>
<p>作用域：针对于当前连接(会话)生效</p>
</li>
<li>
<p>位置:begin end 里面, 也可以放在外面</p>
</li>
<li>
<p>使用</p>
</li>
<li>
<p><strong>声明并赋值</strong></p>
<ul>
<li>set @变量名 = 值;</li>
<li>set @变量名:= 值;</li>
<li>select @变量名:=值 ;</li>
</ul>
</li>
<li>
<p><strong>更新值</strong></p>
<ul>
<li>set @变量名 = 值;</li>
<li>set @变量名:= 值;</li>
<li>select @变量名:=值 ;</li>
<li>select xx into @变量名 from 表 ;</li>
</ul>
</li>
<li>
<p><strong>使用</strong></p>
<ul>
<li>select @变量名 ;</li>
</ul>
</li>
</ul>
<p><strong>局部变量</strong></p>
<ul>
<li>作用域:仅仅在定义它的begin end 中有效</li>
<li>位置:只能放在begin end 中， 而且只能放在第一句</li>
<li>create procedure pro1()</li>
<li>begin</li>
<li>declare i int default 1 ;</li>
<li>&hellip;</li>
<li>end</li>
<li><strong>声明</strong>
<ul>
<li>declare 变量名 类型 default 值;</li>
</ul>
</li>
<li><strong>赋值或更新</strong>
<ul>
<li>set 变量名=值;</li>
<li>set 变量名:= 值;</li>
<li>select @变量名 := 值;</li>
<li>select xx into 变量名 from 表 ;</li>
</ul>
</li>
<li><strong>使用</strong>
<ul>
<li>select 变量名 ;</li>
</ul>
</li>
</ul>
<p><strong>存储过程和函数</strong></p>
<p>说明:都类似于java中的方法,将一组完成特定功能的逻辑语句包装起来,对外暴露名字</p>
<p>好处:</p>
<ul>
<li>提高重用性</li>
<li>sql语句简单</li>
<li>减少了和数据库服务器连接的次数,提高了效率</li>
</ul>
<p><strong>创建</strong></p>
<p>create procedure 存储过程名 (参数模式 参数名 参数类型)</p>
<p>begin</p>
<p>存储过程体</p>
<p>end</p>
<ul>
<li>注意:参数模式 in out inout  其中IN可以省略</li>
<li>存储过程体中的每一条sql语句都需要分号结尾</li>
</ul>
<p><strong>调用</strong></p>
<p>CALL 存储过程名(实参列表)</p>
<p>调用in模式的参数 call sp1(&lsquo;值&rsquo;) ;</p>
<p>调用out模式的参数 set @name :=&quot;&quot; ; call sp1(@name) ;</p>
<p>调用inout模式的参数 set @name = 值 ; call sp1(@name)  ; select @name ;</p>
<p><strong>查看存储过程</strong></p>
<p>show create procedure 存储过程名 ;</p>
<p><strong>删除存储过程</strong></p>
<p>drop procedure 存储过程名 ;</p>
<p><strong>函数</strong></p>
<p><strong>创建</strong></p>
<p>create function 函数名 (参数名 参数类型) returns 返回值类型</p>
<p>begin</p>
<p>declare a int default 0  ;</p>
<p>&hellip;</p>
<p>return a ;</p>
<p>end</p>
<p>**注意:	**函数体中肯定需要有return语句</p>
<p><strong>调用</strong></p>
<p>select 函数名 (实参列表) ;</p>
<h5 id="查看">查看</h5>
<p>show create function 函数名 ;</p>
<p><strong>删除</strong></p>
<p>drop functioon 函数名 ;</p>
<p><strong>流程控制结构</strong></p>
<p>顺序结构 :程序从上往下依次执行 ;</p>
<p>分支结构:: 程序按条件进行选择执行, 从两条或多条路径中选择一条执行 ;</p>
<p>循环结构: 程序满足一定条件下,重复执行一组语句</p>
<p><strong>分支结构</strong></p>
<ul>
<li>if函数
<ul>
<li>功能:简单实现双分支</li>
<li>if(条件, 值1 , 值2 )</li>
<li>位置:任何位置</li>
</ul>
</li>
<li>case 结构
<ul>
<li>功能:实现多分支</li>
<li>case 表达式字段 when 值1 then &hellip; when 值2 then &hellip; else &hellip; end [case];</li>
<li>位置:可以放在任何位置, 如果放在begin end 外面,作为表达式结合着其他语句使用 , 如果放在begin end 里面, 一般作为独立的语句使用</li>
</ul>
</li>
<li>if结构
<ul>
<li>功能:实现多分支</li>
<li>if 条件1 then &hellip;; elseif 条件2 then &hellip;; else then &hellip; ;  end if ;</li>
<li>位置: 只能放在begin end中</li>
</ul>
</li>
</ul>
<p><strong>循环结构</strong></p>
<p><strong>注意:只能放在begin end 中</strong></p>
<p><strong>特点:都能实现循环结构</strong></p>
<p><strong>对比:</strong></p>
<ol>
<li>这三种循环都可以省略名称,但如果循环中添加了循环控制语句(leave或iterate)则必须添加名称</li>
<li>loop 一般用于实现简单的死循环 while先判断后执行 repeat 先执行后判断,无条件至少执行一次</li>
</ol>
<ul>
<li>
<p>while</p>
<ul>
<li>
<p>[标签:] while 循环条件 do</p>
<p>循环体</p>
<p>end while [标签] ;</p>
</li>
</ul>
</li>
<li>
<p>loop</p>
<ul>
<li>
<p>[标签:] loop</p>
<p>循环体</p>
<p>end loop [标签]</p>
</li>
</ul>
</li>
<li>
<p>repeat</p>
<ul>
<li>
<p>[标签:] repeat</p>
<p>循环体</p>
<p>until 结束条件</p>
<p>end repeat [名称]</p>
</li>
</ul>
</li>
</ul>
<p><strong>循环控制语句</strong></p>
<p>leave:类似于 break , 用于跳出所在的循环</p>
<p>iterate:类似于continue , 用于结束本次循环, 继续下一次</p>
<p><strong>完结撒花</strong>😋😜💕🤣</p>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    <aside class="related-contents--wrapper">
    
    
</aside>

     
     
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugo-theme-stack" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (DISQUS) {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2021 think hy how to learn
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.2.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer="true"
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer="true"
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    
        <aside class="sidebar right-sidebar sticky">
            <section class="widget archives">
                <div class="widget-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



                </div>
                <h2 class="widget-title section-title">目录</h2>
                
                <div class="widget--toc">
                    <nav id="TableOfContents">
  <ol>
    <li>
      <ol>
        <li><a href="#mysql学习文档">mysql学习文档</a>
          <ol>
            <li></li>
            <li><a href="#新的一杰克">新的一杰克</a></li>
            <li><a href="#tcl">TCL</a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>
</nav>
                </div>
            </section>
        </aside>
    

        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                defer="false"
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
