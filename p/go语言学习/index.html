<!DOCTYPE html>
<html lang="en-us">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='Goè¯­è¨€å­¦ä¹  alt&#43;enter
ctrl&#43;space
ctrl&#43;shift&#43;space
ctrl&#43;alt&#43;L
ctrl&#43;alt&#43;Mé‡æ„
F2æŸ¥çœ‹é”™è¯¯
alt&#43;6æŸ¥çœ‹é—®é¢˜
ctrl&#43;shift&#43;/
alt&#43;F8 è¯„ä¼°è¡¨è¾¾å¼
ctrl&#43;F8 åˆ‡æ¢æ–­ç‚¹
ç¯å¢ƒæ­å»ºï¼Œç¼–è¯‘ä¹‹åç”Ÿæˆå¯æ‰§è¡Œexeæ–‡ä»¶ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†
image-20210725102106105
image-20210725102139391
ç¼–è¯‘
ä½¿ç”¨ go build
1.åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œgo build
2.åœ¨å…¶ä»–è·¯å¾„ä¸‹æ‰§è¡Œgo build ï¼Œéœ€è¦åœ¨åé¢åŠ ä¸Šé¡¹ç›®çš„è·¯å¾„ï¼ˆé¡¹ç›®è·¯å¾„ä»gopath/srcåå¼€å§‹å†™èµ·ï¼Œç¼–è¯‘ä¹‹åçš„å¯æ‰§è¡Œæ–‡ä»¶å°±ä¿å­˜åœ¨å½“å‰ç›®å½•ä¸‹ï¼‰
3.go build -o hello.exe
go run
åƒæ‰§è¡Œè„šæœ¬æ–‡ä»¶ä¸€æ ·æ‰§è¡Œgoä»£ç 
go install
åˆ†ä¸ºä¸¤æ­¥ï¼š
1.å…ˆç¼–è¯‘å¾—åˆ°ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶
2.å°†å¯æ‰§è¡Œæ–‡ä»¶æ‹·è´åˆ°gopathçš„binç›®å½•
äº¤å‰ç¼–è¯‘ï¼Œå¯ä»¥è·¨å¹³å°è·‘ç¨‹åº
ä¾‹å¦‚åœ¨windowså¹³å°ç¼–è¯‘ä¸€ä¸ªèƒ½åœ¨linuxå¹³å°ä¸Šæ‰§è¡Œçš„å¯æ‰§è¡Œæ–‡ä»¶
è¿™ä¸ªä¼¼ä¹è¦åœ¨æºæ–‡ä»¶ä½ç½®å¤„ä½¿ç”¨cmdå‘½ä»¤æ“ä½œ,å¹¶ä¸”è¦ç”¨å¤§å†™!!!
E:\project\GOproject\code.oldboyedu.com\day1&amp;gt;SET CGO_ENABLE=0 E:\project\GOproject\code.oldboyedu.com\day1&amp;gt;SET GOOS=linux E:\project\GOproject\code.oldboyedu.com\day1&amp;gt;SET GOARCH=amd64 E:\project\GOproject\code.oldboyedu.com\day1&amp;gt;go build image-20210725103733683
goè¯­è¨€çš„åŸºæœ¬ç»“æ„
package main //å¯¼å…¥çš„åŒ… import &amp;#34;fmt&amp;#34; //ç¨‹åºçš„å…¥å£å‡½æ•° //å‡½æ•°å¤–éƒ¨åªèƒ½æ”¾ç½®æ ‡è¯†ç¬¦ï¼ˆå˜é‡ã€å¸¸é‡ã€å‡½æ•°ã€ç±»å‹ï¼‰çš„å£°æ˜ func main() { fmt.Println(&amp;#34;hello world&amp;#34;) } å˜é‡å’Œå¸¸é‡'><title>Goè¯­è¨€å­¦ä¹ </title>

<link rel='canonical' href='https://linjianshu.github.io/p/go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/'>

<link rel="stylesheet" href="/scss/style.min.css"><meta property='og:title' content='Goè¯­è¨€å­¦ä¹ '>
<meta property='og:description' content='Goè¯­è¨€å­¦ä¹  alt&#43;enter
ctrl&#43;space
ctrl&#43;shift&#43;space
ctrl&#43;alt&#43;L
ctrl&#43;alt&#43;Mé‡æ„
F2æŸ¥çœ‹é”™è¯¯
alt&#43;6æŸ¥çœ‹é—®é¢˜
ctrl&#43;shift&#43;/
alt&#43;F8 è¯„ä¼°è¡¨è¾¾å¼
ctrl&#43;F8 åˆ‡æ¢æ–­ç‚¹
ç¯å¢ƒæ­å»ºï¼Œç¼–è¯‘ä¹‹åç”Ÿæˆå¯æ‰§è¡Œexeæ–‡ä»¶ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†
image-20210725102106105
image-20210725102139391
ç¼–è¯‘
ä½¿ç”¨ go build
1.åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œgo build
2.åœ¨å…¶ä»–è·¯å¾„ä¸‹æ‰§è¡Œgo build ï¼Œéœ€è¦åœ¨åé¢åŠ ä¸Šé¡¹ç›®çš„è·¯å¾„ï¼ˆé¡¹ç›®è·¯å¾„ä»gopath/srcåå¼€å§‹å†™èµ·ï¼Œç¼–è¯‘ä¹‹åçš„å¯æ‰§è¡Œæ–‡ä»¶å°±ä¿å­˜åœ¨å½“å‰ç›®å½•ä¸‹ï¼‰
3.go build -o hello.exe
go run
åƒæ‰§è¡Œè„šæœ¬æ–‡ä»¶ä¸€æ ·æ‰§è¡Œgoä»£ç 
go install
åˆ†ä¸ºä¸¤æ­¥ï¼š
1.å…ˆç¼–è¯‘å¾—åˆ°ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶
2.å°†å¯æ‰§è¡Œæ–‡ä»¶æ‹·è´åˆ°gopathçš„binç›®å½•
äº¤å‰ç¼–è¯‘ï¼Œå¯ä»¥è·¨å¹³å°è·‘ç¨‹åº
ä¾‹å¦‚åœ¨windowså¹³å°ç¼–è¯‘ä¸€ä¸ªèƒ½åœ¨linuxå¹³å°ä¸Šæ‰§è¡Œçš„å¯æ‰§è¡Œæ–‡ä»¶
è¿™ä¸ªä¼¼ä¹è¦åœ¨æºæ–‡ä»¶ä½ç½®å¤„ä½¿ç”¨cmdå‘½ä»¤æ“ä½œ,å¹¶ä¸”è¦ç”¨å¤§å†™!!!
E:\project\GOproject\code.oldboyedu.com\day1&amp;gt;SET CGO_ENABLE=0 E:\project\GOproject\code.oldboyedu.com\day1&amp;gt;SET GOOS=linux E:\project\GOproject\code.oldboyedu.com\day1&amp;gt;SET GOARCH=amd64 E:\project\GOproject\code.oldboyedu.com\day1&amp;gt;go build image-20210725103733683
goè¯­è¨€çš„åŸºæœ¬ç»“æ„
package main //å¯¼å…¥çš„åŒ… import &amp;#34;fmt&amp;#34; //ç¨‹åºçš„å…¥å£å‡½æ•° //å‡½æ•°å¤–éƒ¨åªèƒ½æ”¾ç½®æ ‡è¯†ç¬¦ï¼ˆå˜é‡ã€å¸¸é‡ã€å‡½æ•°ã€ç±»å‹ï¼‰çš„å£°æ˜ func main() { fmt.Println(&amp;#34;hello world&amp;#34;) } å˜é‡å’Œå¸¸é‡'>
<meta property='og:url' content='https://linjianshu.github.io/p/go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/'>
<meta property='og:site_name' content='think hy how to learn'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='GO' /><meta property='article:published_time' content='2021-08-24T00:17:57&#43;08:00'/><meta property='article:modified_time' content='2021-08-24T00:17:57&#43;08:00'/><meta property='og:image' content='https://linjianshu.github.io/img/avatar.png' />
<meta name="twitter:site" content="@ljs56495989">
    <meta name="twitter:creator" content="@ljs56495989"><meta name="twitter:title" content="Goè¯­è¨€å­¦ä¹ ">
<meta name="twitter:description" content="Goè¯­è¨€å­¦ä¹  alt&#43;enter
ctrl&#43;space
ctrl&#43;shift&#43;space
ctrl&#43;alt&#43;L
ctrl&#43;alt&#43;Mé‡æ„
F2æŸ¥çœ‹é”™è¯¯
alt&#43;6æŸ¥çœ‹é—®é¢˜
ctrl&#43;shift&#43;/
alt&#43;F8 è¯„ä¼°è¡¨è¾¾å¼
ctrl&#43;F8 åˆ‡æ¢æ–­ç‚¹
ç¯å¢ƒæ­å»ºï¼Œç¼–è¯‘ä¹‹åç”Ÿæˆå¯æ‰§è¡Œexeæ–‡ä»¶ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†
image-20210725102106105
image-20210725102139391
ç¼–è¯‘
ä½¿ç”¨ go build
1.åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œgo build
2.åœ¨å…¶ä»–è·¯å¾„ä¸‹æ‰§è¡Œgo build ï¼Œéœ€è¦åœ¨åé¢åŠ ä¸Šé¡¹ç›®çš„è·¯å¾„ï¼ˆé¡¹ç›®è·¯å¾„ä»gopath/srcåå¼€å§‹å†™èµ·ï¼Œç¼–è¯‘ä¹‹åçš„å¯æ‰§è¡Œæ–‡ä»¶å°±ä¿å­˜åœ¨å½“å‰ç›®å½•ä¸‹ï¼‰
3.go build -o hello.exe
go run
åƒæ‰§è¡Œè„šæœ¬æ–‡ä»¶ä¸€æ ·æ‰§è¡Œgoä»£ç 
go install
åˆ†ä¸ºä¸¤æ­¥ï¼š
1.å…ˆç¼–è¯‘å¾—åˆ°ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶
2.å°†å¯æ‰§è¡Œæ–‡ä»¶æ‹·è´åˆ°gopathçš„binç›®å½•
äº¤å‰ç¼–è¯‘ï¼Œå¯ä»¥è·¨å¹³å°è·‘ç¨‹åº
ä¾‹å¦‚åœ¨windowså¹³å°ç¼–è¯‘ä¸€ä¸ªèƒ½åœ¨linuxå¹³å°ä¸Šæ‰§è¡Œçš„å¯æ‰§è¡Œæ–‡ä»¶
è¿™ä¸ªä¼¼ä¹è¦åœ¨æºæ–‡ä»¶ä½ç½®å¤„ä½¿ç”¨cmdå‘½ä»¤æ“ä½œ,å¹¶ä¸”è¦ç”¨å¤§å†™!!!
E:\project\GOproject\code.oldboyedu.com\day1&amp;gt;SET CGO_ENABLE=0 E:\project\GOproject\code.oldboyedu.com\day1&amp;gt;SET GOOS=linux E:\project\GOproject\code.oldboyedu.com\day1&amp;gt;SET GOARCH=amd64 E:\project\GOproject\code.oldboyedu.com\day1&amp;gt;go build image-20210725103733683
goè¯­è¨€çš„åŸºæœ¬ç»“æ„
package main //å¯¼å…¥çš„åŒ… import &amp;#34;fmt&amp;#34; //ç¨‹åºçš„å…¥å£å‡½æ•° //å‡½æ•°å¤–éƒ¨åªèƒ½æ”¾ç½®æ ‡è¯†ç¬¦ï¼ˆå˜é‡ã€å¸¸é‡ã€å‡½æ•°ã€ç±»å‹ï¼‰çš„å£°æ˜ func main() { fmt.Println(&amp;#34;hello world&amp;#34;) } å˜é‡å’Œå¸¸é‡"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://linjianshu.github.io/img/avatar.png' />
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <style>
            * {
              margin: 0;
              padding: 0;
            }
            html, body {
              height: 100%;
              width: 100%;
            }
            #github-iframe {
              position: fixed;
              left: 32px;
              top: 32px;
            }
             
        </style>
   


<link rel="stylesheet" type="texts" href="https://blog-static.cnblogs.com/files/monster-jian/waifu.css"/>
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script src="https://files.cnblogs.com/files/liyhbk/js.js" color="0,0,255" opacity="1" count="119" zindex="-2"></script>

</head>

<body size-sensor-id="1" style="position: relative;">
    
    <div id="area-render"></div>
    <script src="https://files.cnblogs.com/files/liyhbk/js.js" color="0,0,255" opacity="1" count="119" zindex="-2">
    </script>
    <script type="text/javascript" color="255,0,0" pointcolor="255,0,0" opacity="0.7" zindex="-2" count="100" src="/dist/canvas-nest.js"></script>
    <script type="text/javascript" src="/dist/canvas-nest.umd.js"></script>
    <script type="text/javascript">
        var cn = new CanvasNest(document.getElementById('area-render'), {
            color: '255,0,255',
            count: 50,
          });
          
          function asyncLoad() {
            
            var i = document.createElement("iframe");
            i.src = "https://ghbtns.com/github-btn.html?user=hustcc&repo=canvas-nest.js&type=star&count=true";
            i.scrolling = "no";
            i.frameborder = "0";
            i.border = "0";
            i.setAttribute("frameborder", "0", 0);
            i.width = "100px";
            i.height = "20px";
            document.getElementById("github-iframe").appendChild(i);
          }
          function loadGitHubBtn() {
            if (window.addEventListener) {window.addEventListener("load", asyncLoad, false);}
            else if (window.attachEvent) {window.attachEvent("onload", asyncLoad);}
            else {window.onload = asyncLoad;}
          }
          loadGitHubBtn();
    </script>
    <script src="/canvas-nest.js?version=10"></script><canvas width="1536" height="454" style="display: block; position: absolute; top: 0px; left: 0px; height: 100%; width: 100%; overflow: hidden; pointer-events: none;"></canvas>


</body>


<script type="text/javascript">
  
   
  var a_idx = 0;
  jQuery(document).ready(function($) {
      $("body").click(function(e) {
          var a = new Array("â¤ä¸åšå’¸é±¼ï¼â¤","â¤æ‹’ç»æ‡’æƒ°ï¼â¤","â¤æƒ³åšåƒè´§â¤","â¤å‘å¤§ä½¬å­¦ä¹ â¤","â¤æ‰¶æˆ‘èµ·æ¥~â¤","â¤come onâ¤","â¤ä¸€ç›´åœ¨è·¯ä¸Š~â¤","â¤ç´¯äº†~â¤","â¤å†è¶´ä¸€ä¼šâ¤","â¤66666â¤","â¤é«˜å…´çš„é£èµ·*****â¤");
          var $i = $("<span></span>").text(a[a_idx]);
          a_idx = (a_idx + 1) % a.length;
          var x = e.pageX,
          y = e.pageY;
          $i.css({
              "z-index": 999999999999999999999999999999999999999999999999999999999999999999999,
              "top": y - 20,
              "left": x,
              "position": "absolute",
              "font-weight": "bold",
              "color": "rgb("+~~(255*Math.random())+","+~~(255*Math.random())+","+~~(255*Math.random())+")"
          });
          $("body").append($i);
          $i.animate({
              "top": y - 180,
              "opacity": 0
          },
          1500,
          function() {
              $i.remove();
          });
      });
  });
  </script>

<style>
 
body{
    background-repeat: repeat;
    background-attachment: fixed;
    background-size:cover;
     cursor: url(https://files.cnblogs.com/files/monster-jian/cursor.ico),auto;
}
 
#div_digg {
  position: fixed;
  bottom: 10px;
  right: 15px;
  border: 2px solid #ECD7B1;
  padding: 10px;
  width: 140px;
  background-color: #fff;
  border-radius: 5px 5px 5px 5px !important;
  box-shadow: 0 0 0 1px #5F5A4B, 1px 1px 6px 1px rgba(10, 10, 0, 0.5);
}
</style>

<script src="https://eqcn.ajz.miesnfu.com/wp-content/plugins/wp-3d-pony/live2dw/lib/L2Dwidget.min.js"></script>  

 
   
      
      
          
          <script>         
          L2Dwidget.init({ "model": { jsonPath:          "https://unpkg.com/live2d-widget-model-shizuku@1.0.5/assets/shizuku.model.json",  
                "scale": 1 }, "display": { "position": "right", "width": 66, "height": 88,        "hOffset": 0, "vOffset": -20 },
                 "mobile": { "show": true, "scale": 0.5 },      "react": { "opacityDefault": 0.8, "opacityOnHover": 0.1 } }); 
                  </script>
</html>


    </head>
    <body class="
    article-page 
">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex 
    
        on-phone--column extended
    
">
    
        <aside class="sidebar left-sidebar sticky">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header class="site-info">
        
            
            <figure class="site-avatar">
                
                    
                    
                    
                        
                        <img src="/img/hanbagui_hu1992e2ef3ca17530e3489d97af7cbea6_3164_300x0_resize_box.bmp" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                

                
                    <span class="emoji">ğŸ¥</span>
                
            </figure>
            
        
        <h1 class="site-name"><a href="https://linjianshu.github.io/">think hy how to learn</a></h1>
        <h2 class="site-description">å¥½è¿æš´å¯Œ,å°±åœ¨ä»Šæ—¥.</h2>
    </header>

    <ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/about' >
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        

        <li >
            <a href='/' target="_blank">
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        

        
            <li id="dark-mode-toggle">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                <span>æš—è‰²æ¨¡å¼</span>
            </li>
        
    </ol>
</aside>

    
<main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <h2 class="article-title">
        <a href="/p/go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/">Goè¯­è¨€å­¦ä¹ </a>
    </h2>

    

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Aug 24, 2021</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 57 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    
</div>
</header>

    <section class="article-content">
    <h3 id="goè¯­è¨€å­¦ä¹ ">Goè¯­è¨€å­¦ä¹ </h3>
<p>alt+enter</p>
<p>ctrl+space</p>
<p>ctrl+shift+space</p>
<p>ctrl+alt+L</p>
<p>ctrl+alt+Mé‡æ„</p>
<p>F2æŸ¥çœ‹é”™è¯¯</p>
<p>alt+6æŸ¥çœ‹é—®é¢˜</p>
<p>ctrl+shift+/</p>
<p>alt+F8 è¯„ä¼°è¡¨è¾¾å¼</p>
<p>ctrl+F8 åˆ‡æ¢æ–­ç‚¹</p>
<p>ç¯å¢ƒæ­å»ºï¼Œç¼–è¯‘ä¹‹åç”Ÿæˆå¯æ‰§è¡Œexeæ–‡ä»¶ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210725102106105.png" >
		<img src="/GoLearning.assets/image-20210725102106105.png"
			
			
			
			loading="lazy"
			alt="image-20210725102106105">
	</a>
	
	<figcaption>image-20210725102106105</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210725102139391.png" >
		<img src="/GoLearning.assets/image-20210725102139391.png"
			
			
			
			loading="lazy"
			alt="image-20210725102139391">
	</a>
	
	<figcaption>image-20210725102139391</figcaption>
	
</figure></p>
<p>ç¼–è¯‘</p>
<p>ä½¿ç”¨ go build</p>
<p>1.åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œgo build</p>
<p>2.åœ¨å…¶ä»–è·¯å¾„ä¸‹æ‰§è¡Œgo build ï¼Œéœ€è¦åœ¨åé¢åŠ ä¸Šé¡¹ç›®çš„è·¯å¾„ï¼ˆé¡¹ç›®è·¯å¾„ä»gopath/srcåå¼€å§‹å†™èµ·ï¼Œç¼–è¯‘ä¹‹åçš„å¯æ‰§è¡Œæ–‡ä»¶å°±ä¿å­˜åœ¨å½“å‰ç›®å½•ä¸‹ï¼‰</p>
<p>3.go build -o hello.exe</p>
<p>go run</p>
<p>åƒæ‰§è¡Œè„šæœ¬æ–‡ä»¶ä¸€æ ·æ‰§è¡Œgoä»£ç </p>
<p>go install</p>
<p>åˆ†ä¸ºä¸¤æ­¥ï¼š</p>
<p>1.å…ˆç¼–è¯‘å¾—åˆ°ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶</p>
<p>2.å°†å¯æ‰§è¡Œæ–‡ä»¶æ‹·è´åˆ°gopathçš„binç›®å½•</p>
<p>äº¤å‰ç¼–è¯‘ï¼Œå¯ä»¥è·¨å¹³å°è·‘ç¨‹åº</p>
<p>ä¾‹å¦‚åœ¨windowså¹³å°ç¼–è¯‘ä¸€ä¸ªèƒ½åœ¨linuxå¹³å°ä¸Šæ‰§è¡Œçš„å¯æ‰§è¡Œæ–‡ä»¶</p>
<p><strong>è¿™ä¸ªä¼¼ä¹è¦åœ¨æºæ–‡ä»¶ä½ç½®å¤„ä½¿ç”¨cmdå‘½ä»¤æ“ä½œ,å¹¶ä¸”è¦ç”¨å¤§å†™!!!</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">E:<span class="se">\p</span>roject<span class="se">\G</span>Oproject<span class="se">\c</span>ode.oldboyedu.com<span class="se">\d</span>ay1&gt;SET <span class="nv">CGO_ENABLE</span><span class="o">=</span><span class="m">0</span>

E:<span class="se">\p</span>roject<span class="se">\G</span>Oproject<span class="se">\c</span>ode.oldboyedu.com<span class="se">\d</span>ay1&gt;SET <span class="nv">GOOS</span><span class="o">=</span>linux

E:<span class="se">\p</span>roject<span class="se">\G</span>Oproject<span class="se">\c</span>ode.oldboyedu.com<span class="se">\d</span>ay1&gt;SET <span class="nv">GOARCH</span><span class="o">=</span>amd64

E:<span class="se">\p</span>roject<span class="se">\G</span>Oproject<span class="se">\c</span>ode.oldboyedu.com<span class="se">\d</span>ay1&gt;go build


</code></pre></div><p><figure 
	>
	<a href="/GoLearning.assets/image-20210725103733683.png" >
		<img src="/GoLearning.assets/image-20210725103733683.png"
			
			
			
			loading="lazy"
			alt="image-20210725103733683">
	</a>
	
	<figcaption>image-20210725103733683</figcaption>
	
</figure></p>
<p>goè¯­è¨€çš„åŸºæœ¬ç»“æ„</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="c1">//å¯¼å…¥çš„åŒ…
</span><span class="c1"></span><span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="c1">//ç¨‹åºçš„å…¥å£å‡½æ•°
</span><span class="c1">//å‡½æ•°å¤–éƒ¨åªèƒ½æ”¾ç½®æ ‡è¯†ç¬¦ï¼ˆå˜é‡ã€å¸¸é‡ã€å‡½æ•°ã€ç±»å‹ï¼‰çš„å£°æ˜
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;hello world&#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><p>å˜é‡å’Œå¸¸é‡</p>
<p>goè¯­è¨€ä¸­çš„å˜é‡å¿…é¡»å…ˆå£°æ˜åä½¿ç”¨</p>
<p>var s1 string :å£°æ˜ä¸€ä¸ªä¿å­˜å­—ç¬¦ä¸²æ•°æ®çš„å˜é‡</p>
<p>var name string</p>
<p>var age int</p>
<p>var isOk bool</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">var</span> <span class="nx">name</span> <span class="kt">string</span>
<span class="kd">var</span> <span class="nx">age</span> <span class="kt">int</span>
<span class="kd">var</span> <span class="nx">isOk</span> <span class="kt">bool</span>

<span class="c1">//æ‰¹é‡å£°æ˜
</span><span class="c1"></span><span class="kd">var</span> <span class="p">(</span>
	<span class="nx">name1</span> <span class="kt">string</span>
	<span class="nx">age1</span> <span class="kt">int</span>
	<span class="nx">isOk1</span> <span class="kt">bool</span>
<span class="p">)</span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">name1</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">age1</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">isOk1</span><span class="p">)</span>

	<span class="nx">name1</span> <span class="p">=</span> <span class="s">&#34;linjianshu&#34;</span>
	<span class="nx">age1</span> <span class="p">=</span> <span class="mi">16</span>
	<span class="nx">isOk1</span> <span class="p">=</span> <span class="kc">true</span>

	<span class="c1">//goè¯­è¨€ä¸­æ¨èä½¿ç”¨é©¼å³°å‘½å
</span><span class="c1"></span>	<span class="c1">//goè¯­è¨€ä¸­éå…¨å±€å˜é‡å£°æ˜å¿…é¡»ä½¿ç”¨ï¼Œä¸ç”¨å°±ç¼–è¯‘ä¸è¿‡å»
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">name1</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">age1</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">isOk1</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;name:%s&#34;</span><span class="p">,</span><span class="nx">name1</span><span class="p">)</span>  <span class="c1">//%så ä½ç¬¦ï¼Œä½¿ç”¨name1è¿™ä¸ªå˜é‡å»æ›¿æ¢è¿™ä¸ªå ä½ç¬¦
</span><span class="c1"></span>
	<span class="c1">//å£°æ˜å˜é‡åŒæ—¶èµ‹å€¼
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">studentName</span> <span class="kt">string</span> <span class="p">=</span> <span class="s">&#34;ljs&#34;</span>
	<span class="c1">//ç±»å‹æ¨å¯¼
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">studentName1</span>  <span class="p">=</span> <span class="s">&#34;ljs&#34;</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">studentName</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">studentName1</span><span class="p">)</span>
	<span class="c1">//ç®€çŸ­å˜é‡å£°æ˜ :=  åªèƒ½åœ¨å‡½æ•°é‡Œé¢ä½¿ç”¨
</span><span class="c1"></span>	<span class="nx">studentName2</span> <span class="o">:=</span> <span class="s">&#34;jwt&#34;</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">studentName2</span><span class="p">)</span>

	<span class="nx">x</span><span class="p">,</span><span class="nx">_</span> <span class="o">:=</span><span class="nf">foo</span><span class="p">()</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>

	<span class="nx">x1</span> <span class="o">:=</span> <span class="mi">0</span>
	<span class="nx">x1</span><span class="p">,</span><span class="nx">_</span> <span class="p">=</span><span class="nf">foo</span><span class="p">()</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">x1</span><span class="p">)</span>

<span class="p">}</span>

<span class="kd">func</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">return</span> <span class="mi">10</span><span class="p">,</span><span class="s">&#34;ljs&#34;</span>
<span class="p">}</span>
</code></pre></div><p>åŒ¿åå˜é‡ ç”¨_æ¥æ¥æ”¶ï¼Œè¡¨ç¤ºæˆ‘ä¸ç”¨è¿™ä¸ªå˜é‡ï¼ŒåŒ¿åå˜é‡ä¸å ç”¨å‘½åç©ºé—´ï¼Œä¸ä¼šåˆ†é…å†…å­˜ï¼Œæ‰€ä»¥åŒ¿åå˜é‡ä¸å­˜åœ¨é‡å¤å£°æ˜</p>
<p>æ³¨æ„ï¼š1.å‡½æ•°å¤–çš„æ¯ä¸ªè¯­å¥éƒ½å¿…é¡»ä»¥å…³é”®å­—å¼€å§‹2.åŒä¸€ä¸ªä½œç”¨åŸŸ{}ä¸­ä¸èƒ½é‡å¤å£°æ˜åŒåçš„å˜é‡</p>
<p>å¸¸é‡</p>
<p>iota</p>
<p>iotoæ˜¯goè¯­è¨€çš„å¸¸é‡è®¡æ•°å™¨ï¼Œåªèƒ½åœ¨å¸¸é‡è¡¨è¾¾å¼ä¸­ä½¿ç”¨</p>
<p>iotaåœ¨constå…³é”®å­—å‡ºç°çš„æ—¶å€™è¢«é‡ç½®ä¸º0. constä¸­æ¯æ–°å¢ä¸€è¡Œå¸¸é‡å£°æ˜å°†ä½¿iotaè®¡æ•°ä¸€æ¬¡iotaå¯ç†è§£ä¸ºconstè¯­å¥å—ä¸­çš„è¡Œç´¢å¼• ä½¿ç”¨iotaèƒ½ç®€åŒ–å®šä¹‰ï¼Œåœ¨å®šä¹‰æšä¸¾æ—¶å¾ˆæœ‰ç”¨</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="c1">//å¸¸é‡
</span><span class="c1"></span><span class="kd">const</span> <span class="nx">pi</span> <span class="p">=</span> <span class="mf">3.1415926</span>
<span class="c1">//å¸¸é‡å®šä¹‰äº†ä¹‹åä¸èƒ½ä¿®æ”¹
</span><span class="c1">//åœ¨ç¨‹åºè¿è¡ŒæœŸé—´ä¸ä¼šæ”¹å˜
</span><span class="c1"></span>
<span class="c1">//æ‰¹é‡å£°æ˜å¸¸é‡æ—¶ï¼Œå¦‚æœæŸä¸€è¡Œæ²¡æœ‰èµ‹å€¼ï¼Œé»˜è®¤å°±å’Œä¸Šä¸€è¡Œä¸€è‡´
</span><span class="c1"></span><span class="kd">const</span> <span class="p">(</span>
	<span class="nx">pi1</span> <span class="p">=</span> <span class="nx">pi</span>
	<span class="nx">pi2</span>
	<span class="nx">pi3</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="p">(</span>
	<span class="nx">i1</span> <span class="p">=</span> <span class="kc">iota</span>
	<span class="nx">i2</span>
	<span class="nx">i3</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="p">(</span>
	<span class="nx">n1</span> <span class="p">=</span> <span class="kc">iota</span>
	<span class="nx">n2</span>
	<span class="nx">_</span>
	<span class="nx">n3</span>
<span class="p">)</span>

<span class="c1">//æ’é˜Ÿ
</span><span class="c1"></span><span class="kd">const</span> <span class="p">(</span>
	<span class="nx">k1</span> <span class="p">=</span> <span class="kc">iota</span>
	<span class="nx">k2</span> <span class="p">=</span> <span class="mi">100</span>
	<span class="nx">k3</span>
	<span class="nx">k4</span> <span class="p">=</span><span class="kc">iota</span>
	<span class="nx">k5</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="p">(</span>
	<span class="nx">p1</span><span class="p">,</span><span class="nx">p2</span> <span class="p">=</span> <span class="kc">iota</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="kc">iota</span><span class="o">+</span><span class="mi">2</span>
	<span class="nx">p3</span><span class="p">,</span><span class="nx">p4</span> <span class="p">=</span> <span class="kc">iota</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="kc">iota</span><span class="o">+</span><span class="mi">2</span>
<span class="p">)</span>

<span class="c1">//å®šä¹‰æ•°é‡çº§
</span><span class="c1"></span><span class="kd">const</span> <span class="p">(</span>
	<span class="nx">_</span> <span class="p">=</span> <span class="kc">iota</span>
	<span class="nx">KB</span> <span class="p">=</span> <span class="mi">1</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="kc">iota</span><span class="p">)</span>
	<span class="nx">MB</span> <span class="p">=</span> <span class="mi">1</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="kc">iota</span><span class="p">)</span>
	<span class="nx">GB</span> <span class="p">=</span> <span class="mi">1</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="kc">iota</span><span class="p">)</span>
	<span class="nx">TB</span> <span class="p">=</span> <span class="mi">1</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="kc">iota</span><span class="p">)</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">// ä¸å¯ä»¥ pi = 12.3
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;pi2:&#34;</span><span class="p">,</span><span class="nx">pi2</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;i1:&#34;</span><span class="p">,</span><span class="nx">i1</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;i2:&#34;</span><span class="p">,</span><span class="nx">i2</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;i3:&#34;</span><span class="p">,</span><span class="nx">i3</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;n1:&#34;</span><span class="p">,</span><span class="nx">n1</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;n2:&#34;</span><span class="p">,</span><span class="nx">n2</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;n3:&#34;</span><span class="p">,</span><span class="nx">n3</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;k1:&#34;</span><span class="p">,</span><span class="nx">k1</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;k2:&#34;</span><span class="p">,</span><span class="nx">k2</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;k3:&#34;</span><span class="p">,</span><span class="nx">k3</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;k4:&#34;</span><span class="p">,</span><span class="nx">k4</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;k5:&#34;</span><span class="p">,</span><span class="nx">k5</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;p1:&#34;</span><span class="p">,</span><span class="nx">p1</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;p2:&#34;</span><span class="p">,</span><span class="nx">p2</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;p3:&#34;</span><span class="p">,</span><span class="nx">p3</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;p4:&#34;</span><span class="p">,</span><span class="nx">p4</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;kb:&#34;</span><span class="p">,</span><span class="nx">KB</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;mb:&#34;</span><span class="p">,</span><span class="nx">MB</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;gb:&#34;</span><span class="p">,</span><span class="nx">GB</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;tb:&#34;</span><span class="p">,</span><span class="nx">TB</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><p>å…³é”®å­—å’Œæ ‡è¯†ç¬¦</p>
<p>goè¯­è¨€æœ‰25ä¸ªå…³é”®å­—</p>
<p>break default func interface select case defer go map struct chan else goto package switch const fallthrough if range type continue for import return var</p>
<p>åŸºæœ¬æ•°æ®ç±»å‹</p>
<p>æ•´å‹</p>
<p>æ•´å‹åˆ†ä¸ºä»¥ä¸‹ä¸¤å¤§ç±»ï¼šæŒ‰é•¿åº¦åˆ†ä¸ºï¼šint8 , int16 , int32 ,int64 å¯¹åº”çš„æ— ç¬¦å·æ•´å‹ï¼šuint8 , uint16 ,uint32</p>
<p>å…¶ä¸­ï¼Œuint8å°±æ˜¯æˆ‘ä»¬ç†ŸçŸ¥çš„byteå‹ï¼Œint16å¯¹åº”Cè¯­è¨€ä¸­çš„shortå‹ï¼Œint64å¯¹åº”Cè¯­è¨€ä¸­çš„longå‹</p>
<p>ç‰¹æ®Šæ•´å‹</p>
<p>uintæ ¹æ®ç”µè„‘ä½æ•°æ¥æ</p>
<p>intæ ¹æ®ç”µè„‘ä½æ•°æ¥æ</p>
<p>uintptræ— ç¬¦å·æ•´æ•°ï¼Œç”¨äºå­˜æ”¾ä¸€ä¸ªæŒ‡é’ˆ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	 <span class="nx">i1</span>  <span class="o">:=</span> <span class="mi">10</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d\n&#34;</span><span class="p">,</span><span class="nx">i1</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%o\n&#34;</span><span class="p">,</span><span class="nx">i1</span><span class="p">)</span>   <span class="c1">//æŠŠåè¿›åˆ¶è½¬æˆ8è¿›åˆ¶
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%b\n&#34;</span><span class="p">,</span><span class="nx">i1</span><span class="p">)</span>   <span class="c1">//æŠŠåè¿›åˆ¶è½¬æˆ2è¿›åˆ¶
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%x\n&#34;</span><span class="p">,</span><span class="nx">i1</span><span class="p">)</span>   <span class="c1">//æŠŠåè¿›åˆ¶è½¬æˆ16è¿›åˆ¶
</span><span class="c1"></span>
	 <span class="c1">//å…«è¿›åˆ¶
</span><span class="c1"></span>	 <span class="nx">i2</span> <span class="o">:=</span> <span class="mo">077</span>
	 <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d\n&#34;</span><span class="p">,</span><span class="nx">i2</span><span class="p">)</span>
	 <span class="c1">//åå…­è¿›åˆ¶
</span><span class="c1"></span>	 <span class="nx">i3</span><span class="o">:=</span> <span class="mh">0x123</span>
	 <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d\n&#34;</span><span class="p">,</span><span class="nx">i3</span><span class="p">)</span>

	 <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T\n&#34;</span><span class="p">,</span><span class="nx">i1</span><span class="p">)</span>

	 <span class="c1">//å£°æ˜ä¸€ä¸ªint8ç±»å‹çš„ è¦æ˜ç¡®æŒ‡å®šç±»å‹ï¼Œéƒ½åˆ™å°±æ˜¯intç±»å‹
</span><span class="c1"></span>	 <span class="nx">i4</span><span class="o">:=</span> <span class="nb">int8</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
	 <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">i4</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><p>æµ®ç‚¹å‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="c1">//float
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//maxFloat32 := math.MaxFloat32 æœ€å¤§å€¼
</span><span class="c1"></span>	<span class="nx">f1</span><span class="o">:=</span><span class="mf">1.23</span>
	<span class="c1">//é»˜è®¤goè¯­è¨€ä¸­çš„å°æ•°éƒ½æ˜¯float64ç±»å‹
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T\n&#34;</span><span class="p">,</span><span class="nx">f1</span><span class="p">)</span>

	<span class="c1">//æ˜¾å¼å£°æ˜float32ç±»å‹
</span><span class="c1"></span>	<span class="nx">f2</span><span class="o">:=</span><span class="nb">float32</span><span class="p">(</span><span class="mf">1.23</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T\n&#34;</span><span class="p">,</span><span class="nx">f2</span><span class="p">)</span>

	<span class="nx">f1</span> <span class="p">=</span> <span class="nb">float64</span><span class="p">(</span><span class="nx">f2</span><span class="p">)</span> <span class="c1">//ä¸èƒ½éšå¼è½¬æ¢
</span><span class="c1"></span>
<span class="p">}</span>
</code></pre></div><p>å¸ƒå°”å€¼</p>
<p>goè¯­è¨€ä¸­ä»¥boolç±»å‹è¿›è¡Œå£°æ˜ï¼Œåªæœ‰trueå’Œfalse</p>
<p>æ³¨æ„ï¼š</p>
<ol>
<li>å¸ƒå°”ç±»å‹å˜é‡é»˜è®¤ä¸ºfalse</li>
<li>goè¯­è¨€ä¸­ä¸å…è®¸å°†æ•´å‹å¼ºåˆ¶è½¬æ¢ä¸ºå¸ƒå°”å‹</li>
<li>å¸ƒå°”å‹æ— æ³•å‚ä¸æ•°å€¼è¿ç®—ï¼Œä¹Ÿæ— æ³•ä¸å…¶ä»–ç±»å‹è¿›è¡Œè½¬æ¢</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//å¸ƒå°”å€¼
</span><span class="c1"></span>	<span class="nx">b</span><span class="o">:=</span><span class="kc">true</span>
	<span class="kd">var</span> <span class="nx">b1</span> <span class="kt">bool</span> <span class="p">=</span> <span class="kc">false</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v&#34;</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">()</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v&#34;</span><span class="p">,</span><span class="nx">b1</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">()</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Type:%T,Value:%v&#34;</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div><p>å¤ä¹ </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//fmtå ä½ç¬¦ %s %d %x %o %b %T %v
</span><span class="c1"></span>
	<span class="nx">i</span> <span class="o">:=</span><span class="mi">2</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T\t&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v\t&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%b\t&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d\t&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%o\t&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%x\t&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>

	<span class="nx">s</span><span class="o">:=</span><span class="s">&#34;linjianshu&#34;</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%s\t&#34;</span><span class="p">,</span><span class="nx">s</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v\t&#34;</span><span class="p">,</span><span class="nx">s</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v\t&#34;</span><span class="p">,</span><span class="nx">s</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h3 id="å­—ç¬¦ä¸²">å­—ç¬¦ä¸²</h3>
<p>goè¯­è¨€ä¸­å­—ç¬¦ä¸²æ˜¯ç”¨åŒå¼•å·åŒ…è£¹çš„ï¼</p>
<p>goè¯­è¨€ä¸­å•å¼•å·åŒ…è£¹çš„æ˜¯å­—ç¬¦ï¼ï¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="c1">//å­—ç¬¦ä¸²
</span><span class="c1"></span><span class="nx">s</span><span class="o">:=</span><span class="s">&#34;hello ljs&#34;</span>
<span class="c1">//å•ç‹¬çš„å­—æ¯ã€æ±‰å­—ã€ç¬¦å·è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦
</span><span class="c1"></span><span class="nx">c1</span> <span class="o">:=</span> <span class="sc">&#39;h&#39;</span>
<span class="nx">c2</span> <span class="o">:=</span> <span class="sc">&#39;1&#39;</span>
<span class="nx">c3</span> <span class="o">:=</span> <span class="sc">&#39;å•¥&#39;</span>
<span class="c1">//å­—èŠ‚ï¼š1å­—èŠ‚=8Bitï¼ˆ8ä¸ªäºŒè¿›åˆ¶ä½ï¼‰
</span><span class="c1">//ä¸€ä¸ªå­—ç¬¦ &#39;A&#39; = 1ä¸ªå­—èŠ‚
</span><span class="c1">//ä¸€ä¸ªutf8ç¼–ç çš„æ±‰å­—â€˜å•¥â€™ = ä¸€èˆ¬å 3ä¸ªå­—èŠ‚
</span></code></pre></div><p>å­—ç¬¦ä¸²è½¬ä¹‰ç¬¦</p>
<p>Goè¯­è¨€çš„å­—ç¬¦ä¸²å¸¸è§è½¬ä¹‰ç¬¦åŒ…å«å›è½¦ã€æ¢è¡Œã€å•åŒå¼•å·ã€åˆ¶è¡¨ç¬¦ç­‰</p>
<p>\r \n \t ' \&quot;  \\</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//fmtå ä½ç¬¦ %s %d %x %o %b %T %v
</span><span class="c1"></span>
	<span class="nx">i</span> <span class="o">:=</span><span class="mi">2</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T\t&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v\t&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%b\t&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d\t&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%o\t&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%x\t&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>

	<span class="nx">s</span><span class="o">:=</span><span class="s">&#34;linjianshu&#34;</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%s\t&#34;</span><span class="p">,</span><span class="nx">s</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v\t&#34;</span><span class="p">,</span><span class="nx">s</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v\t&#34;</span><span class="p">,</span><span class="nx">s</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><p>å¤šè¡Œå­—ç¬¦ä¸²</p>
<p>goè¯­è¨€ä¸­è¦å®šä¹‰ä¸€ä¸ªå¤šè¡Œå­—ç¬¦ä¸²æ—¶ï¼Œå°±å¿…é¡»ä½¿ç”¨åå¼•å· å­—ç¬¦``</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">s</span><span class="o">:=</span> <span class="s">`
</span><span class="s">	a
</span><span class="s">	b
</span><span class="s">	c
</span><span class="s">`</span>
</code></pre></div><p>å­—ç¬¦ä¸²çš„å¸¸ç”¨æ“ä½œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nb">len</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="nx">æ±‚é•¿åº¦</span>
<span class="o">+</span><span class="nx">æˆ–è€…fmt</span><span class="p">.</span><span class="nx">Strintf</span>  <span class="nx">æ‹¼æ¥å­—ç¬¦ä¸²</span>
<span class="nx">strings</span><span class="p">.</span><span class="nx">Split</span>  <span class="nx">åˆ†å‰²</span>
<span class="nx">strings</span><span class="p">.</span><span class="nx">contains</span>  <span class="nx">åˆ¤æ–­æ˜¯å¦åŒ…å«</span>
<span class="nx">strings</span><span class="p">.</span><span class="nx">HasPrefix</span><span class="p">,</span> <span class="nx">strings</span><span class="p">.</span><span class="nx">HasSuffx</span>  <span class="nx">å‰ç¼€</span><span class="err">ã€</span><span class="nx">åç¼€åˆ¤æ–­</span>
<span class="nx">strings</span><span class="p">.</span><span class="nf">Index</span><span class="p">(),</span> <span class="nx">strings</span><span class="p">.</span><span class="nx">LastIndex</span>  <span class="nx">å­ä¸²å‡ºç°çš„ä½ç½®</span>
<span class="nx">strings</span><span class="p">.</span><span class="nf">Join</span><span class="p">(</span><span class="nx">a</span><span class="p">[]</span> <span class="kt">string</span> <span class="p">,</span> <span class="nx">sep</span> <span class="kt">string</span><span class="p">)</span>  <span class="nx">joinæ“ä½œ</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="nx">fmt</span> <span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;strings&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">path</span> <span class="o">:=</span> <span class="s">&#34;\&#34;C:\\Users\\Sweetie\\Desktop\\è½¦é—´çº§MES\&#34;&#34;</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%s\t&#34;</span> <span class="p">,</span> <span class="nx">path</span><span class="p">)</span>

	<span class="nx">s</span> <span class="o">:=</span> <span class="s">`
</span><span class="s">	ä¸–æƒ…è–„
</span><span class="s">	äººæƒ…æ¶
</span><span class="s">	é›¨é€é»„æ˜èŠ±æ˜“è½
</span><span class="s">`</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%s\r&#34;</span><span class="p">,</span><span class="nx">s</span><span class="p">)</span>
	<span class="nx">s3</span><span class="o">:=</span><span class="s">`C:\Users\Sweetie\Desktop\è½¦é—´çº§MES`</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%s\n&#34;</span><span class="p">,</span><span class="nx">s3</span><span class="p">)</span>

	<span class="c1">//å­—ç¬¦ä¸²ç›¸å…³æ“ä½œ
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d\n&#34;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="nx">s3</span><span class="p">))</span>

	<span class="c1">//å­—ç¬¦ä¸²æ‹¼æ¥
</span><span class="c1"></span>	<span class="nx">name</span> <span class="o">:=</span> <span class="s">&#34;ljs&#34;</span>
	<span class="nx">world</span> <span class="o">:=</span> <span class="s">&#34;shuaibi&#34;</span>
	<span class="nx">describtion</span> <span class="o">:=</span> <span class="nx">name</span><span class="o">+</span><span class="nx">world</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v\n&#34;</span><span class="p">,</span><span class="nx">describtion</span><span class="p">)</span>
	<span class="nx">describtion1</span> <span class="o">:=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;%s%s&#34;</span><span class="p">,</span><span class="nx">name</span><span class="p">,</span><span class="nx">world</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%s\n&#34;</span><span class="p">,</span><span class="nx">describtion1</span><span class="p">)</span>

	<span class="c1">//åˆ†å‰²
</span><span class="c1"></span>	<span class="nx">s1</span> <span class="o">:=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Split</span><span class="p">(</span><span class="nx">s3</span><span class="p">,</span><span class="s">&#34;\\&#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s1</span><span class="p">)</span>
	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">s1</span><span class="p">);</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s1</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span>
	<span class="p">}</span>

	<span class="c1">//åŒ…å«
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">strings</span><span class="p">.</span><span class="nf">Contains</span><span class="p">(</span><span class="nx">describtion</span><span class="p">,</span> <span class="nx">name</span><span class="p">))</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34; &#39;%s&#39; Contains &#39;%s&#39; ? result:%v&#34;</span><span class="p">,</span><span class="nx">describtion1</span><span class="p">,</span><span class="nx">name</span><span class="p">,</span><span class="nx">strings</span><span class="p">.</span><span class="nf">Contains</span><span class="p">(</span><span class="nx">describtion</span><span class="p">,</span> <span class="nx">name</span><span class="p">))</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">()</span>
	<span class="c1">//å‰ç¼€ã€åç¼€
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">strings</span><span class="p">.</span><span class="nf">HasPrefix</span><span class="p">(</span><span class="nx">describtion</span><span class="p">,</span> <span class="s">&#34;ljs&#34;</span><span class="p">))</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">strings</span><span class="p">.</span><span class="nf">HasSuffix</span><span class="p">(</span><span class="nx">describtion</span><span class="p">,</span> <span class="s">&#34;shuaibi&#34;</span><span class="p">))</span>

	<span class="c1">//ç´¢å¼• æŸ¥æ‰¾
</span><span class="c1"></span>	<span class="nx">s4</span><span class="o">:=</span><span class="s">&#34;abcdeb&#34;</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">strings</span><span class="p">.</span><span class="nf">Index</span><span class="p">(</span><span class="nx">s4</span><span class="p">,</span><span class="s">&#34;b&#34;</span><span class="p">))</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">strings</span><span class="p">.</span><span class="nf">LastIndex</span><span class="p">(</span><span class="nx">s4</span><span class="p">,</span><span class="s">&#34;b&#34;</span><span class="p">))</span>

	<span class="c1">//æ‹¼æ¥
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">sJoin</span> <span class="p">=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Join</span><span class="p">(</span><span class="nx">s1</span><span class="p">,</span><span class="s">&#34;+&#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">sJoin</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><p>byteå’Œruneç±»å‹</p>
<p>ç»„æˆæ¯ä¸ªå­—ç¬¦ä¸²çš„å…ƒç´ å«åšâ€˜å­—ç¬¦â€™ï¼Œå¯ä»¥é€šè¿‡éå†æˆ–è€…å•ä¸ªè·å–å­—ç¬¦ä¸²å…ƒç´ è·å¾—å­—ç¬¦ã€‚å­—ç¬¦ç”¨å•å¼•å·â€˜ åŒ…è£¹èµ·æ¥ï¼Œå¦‚ï¼š</p>
<p>var a:=&lsquo;ä¸­&rsquo;</p>
<p>var b:=&lsquo;x&rsquo;</p>
<p>Goè¯­è¨€çš„å­—ç¬¦æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š</p>
<p>1.uint8ç±»å‹ï¼Œæˆ–è€…å«byteå‹ï¼Œä»£è¡¨äº†asciiç çš„ä¸€ä¸ªå­—ç¬¦</p>
<p>2.runeç±»å‹ï¼Œä»£è¡¨ä¸€ä¸ªutf-8å­—ç¬¦</p>
<p>å½“éœ€è¦å¤„ç†ä¸­æ–‡ã€æ—¥æ–‡æˆ–è€…å…¶ä»–ç¬¦åˆå­—ç¬¦æ—¶ï¼Œåˆ™éœ€è¦ç”¨åˆ°runeç±»å‹ã€‚runeç±»å‹å®é™…æ˜¯ä¸€ä¸ªint32</p>
<p>Goä½¿ç”¨äº†ç‰¹æ®Šçš„runeç±»å‹æ¥å¤„ç†unicodeï¼Œè®©åŸºäºunicodeçš„æ–‡æœ¬å¤„ç†æ›´æ–¹ä¾¿ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨byteå‹è¿›è¡Œé»˜è®¤å­—ç¬¦ä¸²å¤„ç†ï¼Œæ€§èƒ½å’Œæ‰©å±•æ€§éƒ½æœ‰ç…§é¡¾</p>
<p>å› ä¸ºutf8ç¼–ç ä¸‹ä¸€ä¸ªä¸­æ–‡æ±‰å­—ç”±3-4ä¸ªå­—èŠ‚ç»„æˆï¼Œæ‰€æœ‰æˆ‘ä»¬ä¸èƒ½ç®€å•çš„æŒ‰ç…§å­—èŠ‚å»éå†ä¸€ä¸ªåŒ…å«ä¸­æ–‡çš„å­—ç¬¦ä¸²ï¼Œå¦åˆ™å°±ä¼šå‡ºç°ä¸Šé¢è¾“å‡ºä¸­çš„ç¬¬ä¸€è¡Œç»“æœ</p>
<p>å­—ç¬¦ä¸²åº•å±‚æ˜¯ä¸€ä¸ªbyteæ•°æ®ï¼Œæ‰€ä»¥å¯ä»¥å’Œ[]byte ç±»å‹ç›¸äº’è½¬æ¢ï¼Œå­—ç¬¦ä¸²æ˜¯ä¸èƒ½ä¿®æ”¹çš„ å­—ç¬¦æ˜¯ç”±byteå­—èŠ‚ç»„æˆï¼Œæ‰€ä»¥å­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯byteå­—èŠ‚çš„é•¿åº¦ runeç±»å‹ç”¨æ¥è¡¨ç¤ºutf8å­—ç¬¦ï¼Œä¸€ä¸ªruneå­—ç¬¦ç”±ä¸€ä¸ªæˆ–å¤šä¸ªbyteç»„æˆ</p>
<p>ä¿®æ”¹å­—ç¬¦ä¸²</p>
<p><strong>è¦ä¿®æ”¹å­—ç¬¦ä¸²ï¼Œéœ€è¦å…ˆå°†å…¶è½¬æ¢æˆ[]runeæˆ– []byte ï¼Œå®Œæˆåå†è½¬æ¢ä¸ºstring ï¼Œéƒ½ä¼šé‡æ–°åˆ†é…å†…å­˜ï¼Œå¹¶å¤åˆ¶å­—èŠ‚æ•°ç»„</strong></p>
<p>æ³¨:runeæ˜¯ä¸€ä¸ªåˆ«å å®é™…ä¸Šæ˜¯ç±»å‹int32 æ‰€ä»¥ &lsquo;ä¸­&rsquo;çš„ç±»å‹æ˜¯int32</p>
<p>byteæ˜¯ä¸€ä¸ªåˆ«å å®é™…ä¸Šæ˜¯ç±»å‹uint8 æ‰€ä»¥&rsquo;c&rsquo;çš„ç±»å‹æ˜¯uint8</p>
<p>ç±»å‹è½¬æ¢</p>
<p>Goè¯­è¨€ä¸­åªæœ‰å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œæ²¡æœ‰éšå¼ç±»å‹è½¬æ¢ã€‚è¯¥è¯­æ³•åªèƒ½åœ¨ä¸¤ä¸ªç±»å‹ä¹‹é—´æ”¯æŒç›¸äº’è½¬æ¢çš„æ—¶å€™ä½¿ç”¨ã€‚</p>
<p>å¼ºåˆ¶ç±»å‹è½¬æ¢çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p>
<p>T(è¡¨è¾¾å¼)</p>
<p>å…¶ä¸­ï¼ŒTè¡¨ç¤ºè¦è½¬æ¢çš„ç±»å‹ã€‚è¡¨è¾¾å¼åŒ…æ‹¬å˜é‡ã€å¤æ‚ç®—å­å’Œå‡½æ•°è¿”å›å€¼ç­‰</p>
<p>æ¯”å¦‚è®¡ç®—ç›´è§’ä¸‰è§’å½¢çš„æ–œè¾¹é•¿ä½¿ç”¨mathåŒ…çš„sqrt()å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶çš„æ˜¯float64ç±»å‹çš„å‚æ•°ï¼Œè€Œå˜é‡aå’Œbéƒ½æ˜¯intç±»å‹ï¼Œè¿™ä¸ªæ—¶å€™å°±å°†aå’Œbå¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºfloat64ç±»å‹</p>
<p>æ€»ç»“ï¼š</p>
<p>goè¯­è¨€çš„åŸºæœ¬ç±»å‹ï¼š int8 int16 int32 int64 uint8 uint16 uint32 uint64 float32 float64 bool string</p>
<p>ifè¯­å¥</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;strings&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>

	<span class="c1">//if æ¡ä»¶åˆ¤æ–­
</span><span class="c1"></span>	<span class="nx">age</span><span class="o">:=</span><span class="mi">19</span>
	<span class="k">if</span> <span class="nx">age</span><span class="p">&gt;</span><span class="mi">18</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;æ€§æ„Ÿè·å®˜åœ¨çº¿å‘ç‰Œ&#34;</span><span class="p">)</span>
	<span class="p">}</span><span class="k">else</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;å¥½å¥½å­¦ä¹ ï¼Œä»¥åèµŒåš&#34;</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="nx">age</span> <span class="o">&gt;=</span> <span class="mi">35</span> <span class="o">&amp;&amp;</span> <span class="nx">age</span> <span class="p">&lt;</span> <span class="mi">80</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;äººåˆ°ä¸­å¹´ï¼Œä¸å¾—ä¸æœ&#34;</span><span class="p">)</span>
	<span class="p">}</span><span class="k">else</span> <span class="k">if</span> <span class="nx">age</span> <span class="p">&gt;</span> <span class="mi">18</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;å¹´è½»åŠ›å£®ï¼Œä¸æ€•å›°éš¾&#34;</span><span class="p">)</span>
	<span class="p">}</span><span class="k">else</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;å¥½å¥½å­¦ä¹ ï¼Œå°‘åƒç‚¹è‹¦&#34;</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="nx">name</span> <span class="o">:=</span> <span class="s">&#34;linjianshu&#34;</span><span class="p">;</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Contains</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="s">&#34;lin&#34;</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ç¡®å®ç¡®å®&#34;</span><span class="p">)</span>
<span class="p">}</span><span class="k">else</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ä¸æ•¢ä¸æ•¢&#34;</span><span class="p">)</span>
	<span class="p">}</span>	
<span class="p">}</span>
</code></pre></div><p>for range(é”®å€¼å¾ªç¯)</p>
<p>goè¯­è¨€ä¸­å¯ä»¥ä½¿ç”¨for range éå†æ•°æ®ã€åˆ‡ç‰‡ã€å­—ç¬¦ä¸²ã€mapåŠé€šé“channel é€šè¿‡for range éå†è¿”å›å€¼æœ‰ä»¥ä¸‹è§„å¾‹ï¼š</p>
<ol>
<li>æ•°ç»„ã€åˆ‡ç‰‡ã€å­—ç¬¦ä¸²è¿”å›ç´¢å¼•å’Œå€¼</li>
<li>mapè¿”å›é”®å’Œå€¼</li>
<li>é€šé“channel åªè¿”å›é€šé“å†…çš„å€¼</li>
</ol>
<h3 id="å†…å®¹å›é¡¾">å†…å®¹å›é¡¾</h3>
<p>goå®‰è£…</p>
<p>gopath</p>
<p>go env</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210726100638960.png" >
		<img src="/GoLearning.assets/image-20210726100638960.png"
			
			
			
			loading="lazy"
			alt="image-20210726100638960">
	</a>
	
	<figcaption>image-20210726100638960</figcaption>
	
</figure></p>
<p>gopath/bin æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼šgo install å‘½åä¼šæŠŠç”Ÿæˆçš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶æ‹·è´åˆ°gopath/bin</p>
<h4 id="go-å‘½ä»¤">go å‘½ä»¤</h4>
<p>go build ç¼–è¯‘goç¨‹åº</p>
<p>go build -o &ldquo;xxx.exe&rdquo; æŒ‡å®šåç§°</p>
<p>go run main.go åƒæ‰§è¡Œè„šæœ¬ä¸€æ ·æ‰§è¡Œmai.go</p>
<p>go install å…ˆç¼–è¯‘åæ‹·è´</p>
<h5 id="goè¯­è¨€æ–‡ä»¶åŸºç¡€è¯­æ³•">goè¯­è¨€æ–‡ä»¶åŸºç¡€è¯­æ³•</h5>
<p>å­˜æ”¾goæºä»£ç çš„æ–‡ä»¶åç¼€å .go</p>
<p>æ–‡ä»¶ç¬¬ä¸€è¡Œï¼špackage main å£°æ˜åŒ…å</p>
<p>å¦‚æœè¦ç¼–è¯‘å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¿…é¡»è¦æœ‰mainåŒ…å’Œmainå‡½æ•°ï¼ˆå…¥å£å‡½æ•°ï¼‰</p>
<p>å•è¡Œæ³¨é‡Šå’Œå¤šè¡Œæ³¨é‡Š</p>
<p>goè¯­è¨€å‡½æ•°å¤–çš„è¯­å¥å¿…é¡»ä»¥å…³é”®å­—å¼€å¤´</p>
<p>å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡å¿…é¡»ä½¿ç”¨</p>
<h5 id="å˜é‡">å˜é‡</h5>
<p>3ç§å£°æ˜æ–¹å¼ï¼š</p>
<ol>
<li>var name string</li>
<li>name:=&ldquo;ljs&rdquo;</li>
<li>var name = &ldquo;ljs&rdquo; å‡½æ•°å†…éƒ¨ä¸“å±</li>
</ol>
<p>åŒ¿åå˜é‡ï¼ˆå“‘å…ƒå˜é‡ï¼‰</p>
<p>å½“æœ‰äº›æ•°æ®å¿…é¡»ç”¨å˜é‡æ¥æ”¶ä½†æ˜¯åˆä¸ä½¿ç”¨å®ƒæ—¶ï¼Œå°±å¯ä»¥ç”¨<code>_</code> æ¥æ¥æ”¶è¿™ä¸ªå€¼</p>
<h5 id="å¸¸é‡">å¸¸é‡</h5>
<p><code>const</code> PI = 3.1415926</p>
<p><code>const</code> UserNotExistErr  = 1000</p>
<p><code>iota</code> å®ç°æšä¸¾ å®é™…ä¸Šå°±æ˜¯è¡Œç´¢å¼•</p>
<p>ä¸‰ä¸ªè¦ç‚¹ï¼š</p>
<ul>
<li>constå…³é”®å­—å‡ºç°æ—¶é‡ç½®ä¸º0</li>
<li>æ¯æ–°å¢ä¸€è¡Œå¸¸é‡å£°æ˜ï¼Œiotaç´¯åŠ 1</li>
</ul>
<h5 id="æµç¨‹æ§åˆ¶">æµç¨‹æ§åˆ¶</h5>
<p>if</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="k">if</span> <span class="nx">æ¡ä»¶</span> <span class="p">{</span>
    
<span class="p">}</span>
<span class="k">else</span> <span class="k">if</span> <span class="nx">æ¡ä»¶</span><span class="p">{</span>
    
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    
<span class="p">}</span>
</code></pre></div><p>forå¾ªç¯</p>
<ol>
<li>æ ‡å‡†forå¾ªç¯</li>
<li>å˜ç§æ²¡æœ‰iåˆå§‹</li>
<li>å˜ç§æ²¡æœ‰ié™å®š</li>
<li>å˜ç§æ²¡æœ‰iå¢é‡</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go">	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="nx">i</span><span class="o">:=</span><span class="mi">5</span>
	<span class="k">for</span> <span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span><span class="mi">10</span> <span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>

	<span class="kd">var</span> <span class="nx">i1</span> <span class="p">=</span> <span class="mi">3</span>
	<span class="k">for</span> <span class="nx">i1</span><span class="p">&lt;</span><span class="mi">10</span>  <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">i1</span><span class="p">)</span>
		<span class="nx">i1</span><span class="o">++</span>
	<span class="p">}</span>

	<span class="k">for</span>	<span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;hello world&#34;</span><span class="p">)</span>
		<span class="k">break</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="s">&#34;hello world&#34;</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;index:%d\t,value:%c\n&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">v</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="nx">s</span><span class="o">:=</span><span class="s">&#34;hello world&#34;</span>
	<span class="k">for</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">s</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;index:%d\t,value:%c\n&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">s</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span>
	<span class="p">}</span>

	<span class="c1">//å“‘å…ƒå˜é‡ï¼Œä¸æƒ³ç”¨åˆ°çš„éƒ½ç›´æ¥ç»™_
</span><span class="c1"></span>	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">s</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%c\n&#34;</span><span class="p">,</span><span class="nx">v</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span><span class="mi">10</span> <span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="k">for</span> <span class="nx">j</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;=</span><span class="mi">10</span><span class="o">-</span><span class="nx">i</span> <span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">{</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d x %d = %d\t&#34;</span> <span class="p">,</span> <span class="nx">i</span> <span class="p">,</span> <span class="nx">j</span> <span class="p">,</span> <span class="nx">i</span><span class="o">*</span><span class="nx">j</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">()</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="k">for</span> <span class="nx">j</span> <span class="o">:=</span> <span class="nx">i</span><span class="p">;</span> <span class="nx">j</span> <span class="p">&gt;</span><span class="mi">0</span><span class="p">;</span> <span class="nx">j</span><span class="o">--</span> <span class="p">{</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d x %d = %d\t&#34;</span> <span class="p">,</span> <span class="nx">i</span><span class="p">,</span><span class="nx">j</span><span class="p">,</span><span class="nx">i</span><span class="o">*</span><span class="nx">j</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">()</span>
	<span class="p">}</span>
</code></pre></div><h3 id="åŸºæœ¬æ•°æ®ç±»å‹">åŸºæœ¬æ•°æ®ç±»å‹</h3>
<p>æ•´å‹</p>
<p>â€‹	æ— ç¬¦å·æ•´å‹ï¼š<code>uint8</code> <code>uint16</code> <code>uint32</code> <code>uint64</code></p>
<p>â€‹	æœ‰ç¬¦å·æ•´å‹ï¼š<code>int8</code> <code>int16</code> <code>int32</code> <code>int64</code></p>
<p>â€‹	<code>uint</code> <code>int</code> å…·ä½“æ˜¯32ä½è¿˜æ˜¯64ä½çœ‹æ“ä½œç³»ç»Ÿ</p>
<p>â€‹	<code>uintptr</code> è¡¨ç¤ºæŒ‡é’ˆ</p>
<p>å…¶ä»–è¿›åˆ¶æ•°</p>
<p>goè¯­è¨€ä¸­æ²¡åŠæ³•ç›´æ¥å®šä¹‰äºŒè¿›åˆ¶æ•°</p>
<p>å…«è¿›åˆ¶æ•° %o</p>
<p>äºŒè¿›åˆ¶æ•° %b</p>
<p>åå…­è¿›åˆ¶æ•° %x</p>
<p>æµ®ç‚¹å‹ <code>float32</code> <code>float64</code> é»˜è®¤64ä½ï¼Œè½¬æˆ32éœ€è¦å¼ºåˆ¶è½¬æ¢</p>
<p>å¸ƒå°”å‹ true&amp;false ä¸èƒ½å’Œå…¶ä»–çš„ç±»å‹åšè½¬æ¢</p>
<p>å­—ç¬¦ä¸²å‹</p>
<p>å¸¸ç”¨æ–¹æ³•</p>
<p>å­—ç¬¦ä¸²ä¸èƒ½ä¿®æ”¹</p>
<p>å¤æ•°</p>
<p>complex128å’Œcomplex64</p>
<p>byteå’Œruneç±»å‹</p>
<p>æ˜¯ç±»å‹åˆ«å</p>
<h5 id="å­—ç¬¦ä¸²å­—ç¬¦å­—èŠ‚éƒ½æ˜¯ä»€ä¹ˆ">å­—ç¬¦ä¸²ã€å­—ç¬¦ã€å­—èŠ‚éƒ½æ˜¯ä»€ä¹ˆ</h5>
<p>å­—ç¬¦ä¸²ï¼šåŒå¼•å·åŒ…è£¹çš„æ˜¯å­—ç¬¦ä¸²</p>
<p>å­—ç¬¦ï¼šå•å¼•å·åŒ…è£¹çš„æ˜¯å­—ç¬¦ï¼Œå•ä¸ªå­—æ¯ã€æ—¥æ–‡ã€éŸ©æ–‡ã€ä¸­æ–‡ã€å•ä¸ªç¬¦å·</p>
<p>å­—èŠ‚ï¼š 1byte = 8bit</p>
<p>goè¯­è¨€ä¸­å­—ç¬¦ä¸²éƒ½æ˜¯UTF8ç¼–ç ï¼ŒUTF8ç¼–ç ä¸­ä¸€ä¸ªå¸¸ç”¨æ±‰å­—ä¸€èˆ¬å ç”¨3ä¸ªå­—èŠ‚</p>
<h5 id="switch-è¡¨è¾¾å¼">switch è¡¨è¾¾å¼</h5>
<p>switchè¿˜å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼ï¼Œè¿™æ—¶å€™switchè¯­å¥åä¹°å‘¢ä¸éœ€è¦å†è·Ÿåˆ¤æ–­å˜é‡ã€‚ä¾‹å¦‚</p>
<p><code>fallthrough</code> è¯­æ³•å¯ä»¥æ‰§è¡Œæ»¡è¶³æ¡ä»¶çš„caseçš„ä¸‹ä¸€ä¸ªcaseï¼Œæ˜¯ä¸ºäº†å…¼å®¹cè¯­è¨€ä¸­çš„caseè®¾è®¡çš„</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">score</span><span class="o">:=</span><span class="mi">68</span>
	<span class="k">switch</span> <span class="nx">score</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mi">68</span><span class="p">:</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;åŠæ ¼&#34;</span><span class="p">)</span>
	<span class="k">default</span><span class="p">:</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;æœªçŸ¥&#34;</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="c1">//ç®€åŒ–ä»£ç  ä½œç”¨åŸŸé—®é¢˜
</span><span class="c1"></span>	<span class="k">switch</span>  <span class="nx">i</span><span class="o">:=</span><span class="mi">3</span> <span class="p">;</span><span class="nx">i</span><span class="p">{</span>
	<span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;wumingzhi&#34;</span><span class="p">)</span>
	<span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;zhongzhi&#34;</span><span class="p">)</span>
	<span class="k">case</span> <span class="mi">3</span><span class="p">:</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;damuzhi&#34;</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="c1">//åŒæ—¶å£°æ˜å‡ ç§æƒ…å†µ
</span><span class="c1"></span>	<span class="k">switch</span> <span class="nx">i</span><span class="o">:=</span><span class="mi">10</span><span class="p">;</span><span class="nx">i</span><span class="p">{</span>
	<span class="k">case</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;this is å¥‡æ•°&#34;</span><span class="p">)</span>
	<span class="k">case</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;this is å¶æ•°&#34;</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="nx">score1</span><span class="o">:=</span><span class="mi">68</span>
	<span class="k">switch</span>  <span class="p">{</span>
	<span class="k">case</span> <span class="nx">score1</span><span class="p">&gt;</span><span class="mi">60</span><span class="o">&amp;&amp;</span><span class="nx">score1</span><span class="o">&lt;=</span><span class="mi">100</span><span class="p">:</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;åŠæ ¼&#34;</span><span class="p">)</span>
	<span class="k">case</span> <span class="nx">score1</span><span class="p">&lt;</span><span class="mi">60</span><span class="p">:</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;æŒ‚äº†å‘€&#34;</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h5 id="gotoè¡¨è¾¾å¼">gotoè¡¨è¾¾å¼</h5>
<p>breakåªèƒ½é€€å‡ºå½“å‰forè¯­å¥çš„å¾ªç¯</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">flag</span><span class="o">:=</span><span class="kc">false</span>
	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="k">for</span> <span class="nx">j</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="p">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">{</span>
			<span class="k">if</span> <span class="nx">j</span><span class="o">==</span><span class="mi">2</span> <span class="p">{</span>
				<span class="nx">flag</span> <span class="p">=</span> <span class="kc">true</span>
				<span class="k">break</span>
			<span class="p">}</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d-%d\n&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">j</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="nx">flag</span> <span class="p">{</span>
			<span class="k">break</span>
		<span class="p">}</span>
	<span class="p">}</span>


	<span class="c1">//for i := 0; i &lt; 10; i++ {
</span><span class="c1"></span>	<span class="c1">//	for j := 0; j &lt; 10; j++ {
</span><span class="c1"></span>	<span class="c1">//		if j == 2 {
</span><span class="c1"></span>	<span class="c1">//			goto breakTag
</span><span class="c1"></span>	<span class="c1">//		}
</span><span class="c1"></span>	<span class="c1">//		fmt.Printf(&#34;%v-%v\n&#34;,i,j)
</span><span class="c1"></span>	<span class="c1">//	}
</span><span class="c1"></span>	<span class="c1">//}
</span><span class="c1"></span>	<span class="c1">//return
</span><span class="c1"></span>
	<span class="c1">//breakTag:
</span><span class="c1"></span>	<span class="c1">//	fmt.Println(&#34;ç»“æŸforå¾ªç¯&#34;)
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><h5 id="è¿ç®—ç¬¦">è¿ç®—ç¬¦</h5>
<p>goè¯­è¨€å†…ç½®çš„è¿ç®—ç¬¦æœ‰ï¼š</p>
<ol>
<li>ç®—æœ¯è¿ç®—ç¬¦+ - * / %</li>
<li>å…³ç³»è¿ç®—ç¬¦</li>
<li>é€»è¾‘è¿ç®—ç¬¦</li>
<li>ä½è¿ç®—ç¬¦</li>
<li>èµ‹å€¼è¿ç®—ç¬¦</li>
</ol>
<h5 id="å…³ç³»è¿ç®—ç¬¦">å…³ç³»è¿ç®—ç¬¦</h5>
<p>==ã€ï¼= ã€&gt; ã€ &gt;= ã€&lt; ã€ &lt;=</p>
<h5 id="é€»è¾‘è¿ç®—ç¬¦">é€»è¾‘è¿ç®—ç¬¦</h5>
<p>&amp;&amp; || !</p>
<h5 id="ä½è¿ç®—">ä½è¿ç®—</h5>
<p>ä½è¿ç®—ç¬¦å¯¹æ•´æ•°åœ¨å†…å­˜ä¸­çš„äºŒè¿›åˆ¶ä½è¿›è¡Œæ“ä½œã€‚</p>
<p>&amp; å‚ä¸è¿ç®—çš„ä¸¤æ•°å„å¯¹åº”çš„äºŒè¿›åˆ¶ä½ç›¸ä¸</p>
<p>| å‚ä¸è¿ç®—çš„ä¸¤ä½å„å¯¹åº”çš„äºŒè¿›åˆ¶ä½ç›¸æˆ–</p>
<p>^ å‚ä¸è¿ç®—çš„ä¸¤æ•°å„å¯¹åº”çš„äºŒè¿›åˆ¶ä½ç›¸å¼‚æˆ–ï¼Œå½“ä¸¤å¯¹åº”çš„äºŒè¿›åˆ¶ä½ç›¸å¼‚æ—¶ï¼Œç»“æœä¸º1</p>
<p>&laquo; å·¦ç§»nä½å°±æ˜¯ä¹˜ä»¥2çš„næ¬¡æ–¹  é«˜ä½ä¸¢å¼ƒï¼Œä½ä½è¡¥0</p>
<p>ã€‹ã€‹å³ç§»nä½å°±æ˜¯é™¤ä»¥2çš„næ¬¡æ–¹ a&raquo;bå°±æ˜¯aå³ç§»bä½</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>

	<span class="c1">//è¿ç®—ç¬¦
</span><span class="c1"></span>	<span class="kd">var</span><span class="p">(</span>
		<span class="nx">a</span><span class="p">=</span><span class="mi">5</span>
		<span class="nx">b</span><span class="p">=</span><span class="mi">2</span>
	<span class="p">)</span>

	<span class="c1">//ç®—æœ¯è¿ç®—ç¬¦
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="o">+</span><span class="nx">b</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="o">-</span><span class="nx">b</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="o">*</span><span class="nx">b</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="o">/</span><span class="nx">b</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="o">%</span><span class="nx">b</span><span class="p">)</span>
	<span class="nx">a</span><span class="o">++</span> <span class="c1">//å•ç‹¬çš„è¯­å¥ï¼Œä¸èƒ½æ”¾åœ¨=çš„å³è¾¹èµ‹å€¼
</span><span class="c1"></span>	<span class="nx">b</span><span class="o">++</span>


	<span class="c1">//å…³ç³»è¿ç®—ç¬¦
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="o">==</span><span class="nx">b</span><span class="p">)</span> <span class="c1">//goè¯­è¨€æ˜¯å¼ºç±»å‹ï¼Œç›¸åŒç±»å‹çš„å˜é‡æ‰èƒ½æ¯”è¾ƒ
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="o">!=</span><span class="nx">b</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="p">&gt;</span><span class="nx">b</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="p">&lt;</span><span class="nx">b</span><span class="p">)</span>

	<span class="nx">age</span><span class="o">:=</span><span class="mi">22</span>
	<span class="k">if</span> <span class="nx">age</span> <span class="p">&gt;</span> <span class="mi">18</span> <span class="o">&amp;&amp;</span> <span class="nx">age</span> <span class="p">&lt;</span> <span class="mi">60</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ä¸Šç­æ—&#34;</span><span class="p">)</span>
	<span class="p">}</span><span class="k">else</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ä¸ç”¨ä¸Šç­&#34;</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="nx">age</span> <span class="p">&gt;</span> <span class="mi">60</span> <span class="o">||</span> <span class="nx">age</span> <span class="p">&lt;</span> <span class="mi">18</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ä¸ç”¨ä¸Šç­&#34;</span><span class="p">)</span>
	<span class="p">}</span><span class="k">else</span>  <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ä¸Šç­æ—&#34;</span><span class="p">)</span>
	<span class="p">}</span>


	<span class="c1">//notå–å
</span><span class="c1"></span>	<span class="nx">b2</span><span class="o">:=</span><span class="kc">true</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(!</span><span class="nx">b2</span><span class="p">)</span>

	<span class="c1">//ä½è¿ç®—ï¼šé’ˆå¯¹çš„æ˜¯äºŒè¿›åˆ¶æ•°
</span><span class="c1"></span>	<span class="c1">//5çš„äºŒè¿›åˆ¶è¡¨ç¤º 101
</span><span class="c1"></span>	<span class="c1">//2çš„äºŒè¿›åˆ¶è¡¨ç¤º 010
</span><span class="c1"></span>	<span class="c1">//æŒ‰ä½ä¸
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="mi">101</span><span class="o">&amp;</span><span class="mo">010</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="mi">5</span><span class="o">&amp;</span><span class="mi">2</span><span class="p">)</span>
	<span class="c1">//æŒ‰ä½æˆ–
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="mi">101</span><span class="p">|</span><span class="mi">10</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="mi">5</span><span class="p">|</span><span class="mi">2</span><span class="p">)</span>
	<span class="c1">//^æŒ‰ä½å¼‚æˆ–
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="mi">101</span><span class="p">^</span><span class="mo">010</span><span class="p">)</span>  <span class="c1">//è¿™ä¸ªæœ‰ç‚¹å¥‡æ€ª è¿™ä¸ªæ˜¯109ç­”æ¡ˆï¼Ÿï¼Ÿï¼Ÿ
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="mi">5</span><span class="p">^</span><span class="mi">2</span><span class="p">)</span>

	<span class="c1">//å·¦ç§»å³ç§»è¿ç®— *2 å’Œ \2
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="mi">5</span><span class="o">&lt;&lt;</span><span class="mi">2</span><span class="p">)</span>  <span class="c1">//101=&gt;10100
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">10</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="mi">5</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">)</span> <span class="c1">//101=&gt;10
</span><span class="c1"></span>
	<span class="c1">//æ³¨æ„åˆ«æº¢å‡ºäº†
</span><span class="c1"></span>	<span class="nx">m</span><span class="o">:=</span><span class="nb">int8</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">m</span><span class="o">&lt;&lt;</span><span class="mi">10</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">2</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>

	<span class="c1">//192.168.1.1
</span><span class="c1"></span>	<span class="c1">//æƒé™ æ–‡ä»¶æ“ä½œä¼šå°†ä½è¿ç®—å®é™…çš„åº”ç”¨
</span><span class="c1"></span>	<span class="c1">//0644
</span><span class="c1"></span>	<span class="c1">//èµ‹å€¼è¿ç®—ç¬¦ï¼Œç”¨æ¥ç»™å˜é‡èµ‹å€¼çš„
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">x</span> <span class="kt">int</span>
	<span class="nx">x</span> <span class="p">=</span> <span class="mi">10</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
	<span class="nx">x</span><span class="o">+=</span><span class="mi">1</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
	<span class="nx">x</span><span class="o">-=</span><span class="mi">1</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
	<span class="nx">x</span><span class="o">*=</span><span class="mi">2</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
	<span class="nx">x</span><span class="o">/=</span><span class="mi">2</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
	<span class="nx">x</span><span class="o">&lt;&lt;=</span><span class="mi">2</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
	<span class="nx">x</span><span class="o">&gt;&gt;=</span><span class="mi">2</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%b&#34;</span><span class="p">,</span><span class="nx">x</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">()</span>
	<span class="nx">x</span><span class="o">&amp;=</span><span class="mi">2</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%b&#34;</span><span class="p">,</span><span class="nx">x</span><span class="p">)</span>
	<span class="nx">x</span><span class="o">|=</span><span class="mi">2</span>
	<span class="nx">x</span><span class="o">&lt;&lt;=</span><span class="mi">2</span>
	<span class="nx">x</span><span class="o">&gt;&gt;=</span><span class="mi">2</span>
	<span class="nx">x</span><span class="p">^=</span><span class="mi">2</span>
<span class="p">}</span>
</code></pre></div><h5 id="æ•°ç»„">æ•°ç»„</h5>
<p>arrayæ•°ç»„</p>
<p>æ•°ç»„æ˜¯åŒä¸€ç§æ•°æ®ç±»å‹å…ƒç´ çš„é›†åˆã€‚åœ¨goè¯­è¨€ä¸­ï¼Œæ•°ç»„ä»å£°æ˜æ—¶å°±ç¡®å®šï¼Œä½¿ç”¨æ—¶å¯ä»¥ä¿®æ”¹æ•°ç»„æˆå‘˜ï¼Œä½†æ˜¯æ•°ç»„å¤§å°ä¸å¯å˜åŒ–ã€‚åŸºæœ¬è¯­æ³•ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//æ•°ç»„
</span><span class="c1"></span>	<span class="c1">//å­˜æ”¾å…ƒç´ çš„å®¹å™¨
</span><span class="c1"></span>	<span class="c1">//å¿…é¡»æŒ‡å®šå­˜æ”¾çš„å…ƒç´ çš„ç±»å‹å’Œå®¹é‡ï¼ˆé•¿åº¦ï¼‰
</span><span class="c1"></span>	<span class="c1">//æ•°ç»„çš„é•¿åº¦æ˜¯æ•°ç»„ç±»å‹çš„ä¸€éƒ¨åˆ† ä¹Ÿå°±æ˜¯å°½ç®¡ç±»å‹ä¸€è‡´ä½†æ˜¯é•¿åº¦ä¸ä¸€è‡´ä¹Ÿä¸æ˜¯åŒä¸€ä¸ªæ•°ç»„ç±»å‹
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">a1</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="kt">bool</span>
	<span class="kd">var</span> <span class="nx">a2</span> <span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="kt">bool</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;a1:type%T, a2:type%T&#34;</span><span class="p">,</span><span class="nx">a1</span><span class="p">,</span><span class="nx">a2</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">()</span>

	<span class="c1">//æ•°ç»„çš„åˆå§‹åŒ–
</span><span class="c1"></span>	<span class="c1">//å¦‚æœä¸åˆå§‹åŒ–ï¼šé»˜è®¤å…ƒç´ éƒ½æ˜¯é›¶å€¼(å¸ƒå°”å€¼å°±æ˜¯falseï¼Œæ•´å‹å’Œæµ®ç‚¹å‹éƒ½æ˜¯0ï¼Œå­—ç¬¦ä¸²å°±æ˜¯â€œâ€)
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a1</span><span class="p">,</span><span class="nx">a2</span><span class="p">)</span>
	<span class="c1">//1.åˆå§‹åŒ–æ–¹å¼1
</span><span class="c1"></span>	<span class="nx">b1</span> <span class="o">:=</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="kt">bool</span><span class="p">{</span><span class="kc">true</span><span class="p">,</span><span class="kc">true</span><span class="p">,</span><span class="kc">true</span><span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">b1</span><span class="p">)</span>
	<span class="c1">//2.åˆå§‹åŒ–æ–¹å¼2 æ ¹æ®åˆå§‹å€¼è‡ªåŠ¨æ¨æ–­æ•°ç»„çš„é•¿åº¦æ˜¯å¤šå°‘
</span><span class="c1"></span>	<span class="nx">b2</span> <span class="o">:=</span><span class="p">[</span><span class="o">...</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">73</span><span class="p">,</span><span class="mi">12</span><span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">b2</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nx">b2</span><span class="p">))</span>
	<span class="c1">//3.åˆå§‹åŒ–æ–¹å¼3 æ ¹æ®ç´¢å¼•åˆå§‹åŒ–
</span><span class="c1"></span>	<span class="nx">b3</span><span class="o">:=</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">b3</span><span class="p">)</span>
	<span class="nx">b3</span><span class="p">=[</span><span class="mi">5</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">:</span><span class="mi">2</span><span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">b3</span><span class="p">)</span>

	<span class="c1">//æ•°ç»„çš„éå†
</span><span class="c1"></span>	<span class="nx">citys</span> <span class="o">:=</span><span class="p">[</span><span class="o">...</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;åŒ—äº¬&#34;</span><span class="p">,</span><span class="s">&#34;ä¸Šæµ·&#34;</span><span class="p">,</span><span class="s">&#34;æ·±åœ³&#34;</span><span class="p">}</span>
	<span class="c1">//1.for range
</span><span class="c1"></span>	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">citys</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">citys</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">citys</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span>
	<span class="p">}</span>

	<span class="c1">//2.æ ¹æ®ç´¢å¼•éå†
</span><span class="c1"></span>	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">citys</span><span class="p">);</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">citys</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span>
	<span class="p">}</span>

	<span class="c1">//å¤šç»´æ•°ç»„
</span><span class="c1"></span>	<span class="nx">c1</span><span class="o">:=</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">0</span><span class="p">:[</span><span class="mi">2</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">},</span><span class="mi">1</span><span class="p">:[</span><span class="mi">2</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">}}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">c1</span><span class="p">)</span>
	<span class="nx">c2</span><span class="o">:=</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="kt">int</span> <span class="p">{{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">},{</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">}}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">c2</span><span class="p">)</span>

	<span class="c1">//å¤šç»´æ•°ç»„çš„éå†
</span><span class="c1"></span>	<span class="c1">//var b11:=[2][3]string{{&#34;a&#34;,&#34;b&#34;,&#34;c&#34;},{&#34;d&#34;,&#34;e&#34;,&#34;f&#34;}}
</span><span class="c1"></span>	<span class="c1">//å¯ä»¥è¿™ä¹ˆè®° goè¯­è¨€ä¸­ å®é™…æ•°ç»„å±•ç¤ºä½¿ç”¨ç©ºæ ¼æ¥åŒºåˆ†çš„ï¼Œä½†æ˜¯å£°æ˜çš„æ—¶å€™éœ€è¦ç”¨é€—å·éš”å¼€
</span><span class="c1"></span>	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">c1</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span>
		<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">v1</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">v</span> <span class="p">{</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d &#34;</span><span class="p">,</span><span class="nx">v1</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">()</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">c2</span><span class="p">);</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">c2</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span>
		<span class="k">for</span> <span class="nx">j</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="p">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">c2</span><span class="p">[</span><span class="nx">j</span><span class="p">]);</span> <span class="nx">j</span><span class="o">++</span> <span class="p">{</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d &#34;</span><span class="p">,</span><span class="nx">c2</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">])</span>
		<span class="p">}</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">()</span>
	<span class="p">}</span>

	<span class="c1">//æ•°ç»„æ˜¯å€¼ç±»å‹
</span><span class="c1"></span>	<span class="nx">d1</span><span class="o">:=</span><span class="p">[</span><span class="o">...</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span>
	<span class="nx">d2</span><span class="o">:=</span><span class="nx">d1</span>
	<span class="nx">d2</span><span class="p">[</span><span class="mi">0</span><span class="p">]=</span><span class="mi">100</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">d1</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">d2</span><span class="p">)</span>

	<span class="c1">//ç»ƒä¹ 
</span><span class="c1"></span>	<span class="nx">e</span><span class="o">:=</span><span class="p">[</span><span class="o">...</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">}</span>
	<span class="nx">sum</span><span class="o">:=</span><span class="mi">0</span>
	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">e</span> <span class="p">{</span>
		<span class="nx">sum</span><span class="o">+=</span><span class="nx">v</span>
	<span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">sum</span><span class="p">)</span>

	<span class="k">for</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">e</span> <span class="p">{</span>
		<span class="k">for</span> <span class="nx">j</span> <span class="o">:=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="nx">j</span> <span class="p">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span> <span class="nx">j</span><span class="o">++</span> <span class="p">{</span>
			<span class="k">if</span> <span class="nx">e</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">+</span><span class="nx">e</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">8</span> <span class="p">{</span>
				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;(%d %d)&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">j</span><span class="p">)</span>
				<span class="k">break</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">()</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>æ•°ç»„å®šä¹‰ var æ•°ç»„å˜é‡å [å…ƒç´ æ•°é‡]T</p>
<p>[5]int å’Œ [10]int æ˜¯ä¸åŒçš„ç±»å‹</p>
<h5 id="åˆ‡ç‰‡">åˆ‡ç‰‡</h5>
<p>åˆ‡ç‰‡sliceæ˜¯ä¸€ä¸ªæ‹¥æœ‰ç›¸åŒç±»å‹å…ƒç´ çš„å¯å˜é•¿åº¦çš„åºåˆ—ã€‚ä»–æ˜¯åŸºäºæ•°ç»„ç±»å‹åšçš„ä¸€å±‚å°è£…ã€‚ä»–éå¸¸çµæ´»ï¼Œæ”¯æŒè‡ªåŠ¨æ‰©å®¹ã€‚åˆ‡ç‰‡æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œä»–çš„å†…éƒ¨ç»“æ„åŒ…å«<code>åœ°å€</code> ã€ <code>é•¿åº¦</code> å’Œ <code>å®¹é‡</code> ã€‚åˆ‡ç‰‡ä¸€èˆ¬ç”¨äºå¿«é€Ÿåœ°æ“ä½œä¸€å—æ•°æ®é›†åˆã€‚</p>
<p>åˆ‡ç‰‡çš„å®šä¹‰</p>
<p>å£°æ˜åˆ‡ç‰‡ç±»å‹çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">var</span> <span class="nx">name</span> <span class="p">[]</span><span class="nx">T</span> 
</code></pre></div><p>å…¶ä¸­ï¼Œnameæ˜¯å˜é‡åå­—ï¼Œ Tæ˜¯å…ƒç´ ç±»å‹</p>
<h5 id="åˆ‡ç‰‡çš„å®¹é‡å’Œé•¿åº¦">åˆ‡ç‰‡çš„å®¹é‡å’Œé•¿åº¦</h5>
<p>åˆ‡ç‰‡æ‹¥æœ‰è‡ªå·±çš„é•¿åº¦å’Œå®¹é‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨å†…ç½®çš„lenå‡½æ•°æ±‚é•¿åº¦ï¼Œä½¿ç”¨å†…ç½®çš„capå‡½æ•°æ±‚åˆ‡ç‰‡çš„å®¹é‡</p>
<h5 id="åŸºäºæ•°ç»„å®šä¹‰åˆ‡ç‰‡">åŸºäºæ•°ç»„å®šä¹‰åˆ‡ç‰‡</h5>
<p>ç”±äºåˆ‡ç‰‡çš„åº•å±‚å°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åŸºäºæ•°ç»„å®šä¹‰åˆ‡ç‰‡</p>
<p>è¿˜æ”¯æŒå¦‚ä¸‹æ–¹å¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//åˆ‡ç‰‡çš„å®šä¹‰
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">s1</span> <span class="p">[]</span><span class="kt">int</span> <span class="c1">//å®šä¹‰ä¸€ä¸ªå­˜æ”¾intç±»å‹å…ƒç´ çš„åˆ‡ç‰‡
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">s2</span> <span class="p">[]</span><span class="kt">string</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s1</span><span class="p">,</span><span class="nx">s2</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s1</span><span class="o">==</span><span class="kc">nil</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s2</span><span class="o">==</span><span class="kc">nil</span><span class="p">)</span>
	<span class="c1">//åˆå§‹åŒ–
</span><span class="c1"></span>	<span class="nx">s1</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span>
	<span class="nx">s2</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;æ²™æ²³&#34;</span><span class="p">,</span><span class="s">&#34;å¼ æ±Ÿ&#34;</span><span class="p">,</span><span class="s">&#34;å¹³å±±æ‘&#34;</span><span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s1</span><span class="p">,</span><span class="nx">s2</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s1</span><span class="o">==</span><span class="kc">nil</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s2</span><span class="o">==</span><span class="kc">nil</span><span class="p">)</span>
	<span class="c1">//é•¿åº¦å’Œå®¹é‡
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;len:%d,cap:%d\n&#34;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">s1</span><span class="p">),</span> <span class="nb">cap</span><span class="p">(</span><span class="nx">s1</span><span class="p">))</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;len:%d,cap:%d\n&#34;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">s2</span><span class="p">),</span> <span class="nb">cap</span><span class="p">(</span><span class="nx">s2</span><span class="p">))</span>

	<span class="c1">//2.ç”±æ•°ç»„å®šä¹‰åˆ‡ç‰‡
</span><span class="c1"></span>	<span class="nx">a</span> <span class="o">:=</span><span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">13</span><span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">cap</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span>
	<span class="nx">b</span> <span class="o">:=</span><span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>  <span class="c1">//[3 5 7] å·¦é—­å³å¼€ åŸºäºä¸€ä¸ªæ•°ç»„è¿›è¡Œåˆ‡å‰²
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span>
	<span class="nx">b1</span> <span class="o">:=</span><span class="nx">a</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>  <span class="c1">//0-4
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">b1</span><span class="p">)</span>
	<span class="nx">b2</span> <span class="o">:=</span><span class="nx">a</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>  <span class="c1">//
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">b2</span><span class="p">)</span>
	<span class="nx">b3</span> <span class="o">:=</span><span class="nx">a</span><span class="p">[:]</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">b3</span><span class="p">)</span>

	<span class="c1">//åˆ‡ç‰‡çš„é•¿åº¦å°±æ˜¯å…ƒç´ çš„ä¸ªæ•°ï¼Œåˆ‡ç‰‡çš„å®¹é‡å°±æ˜¯åº•å±‚æ•°ç»„ä»åˆ‡ç‰‡ç¬¬ä¸€ä¸ªå…ƒç´ åˆ°æœ€åä¸€ä¸ªå…ƒç´ çš„æ•°é‡
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nb">cap</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span>
	<span class="c1">//3.åˆ‡ç‰‡å†åˆ‡ç‰‡
</span><span class="c1"></span>	<span class="nx">b4</span><span class="o">:=</span><span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="c1">//[5 7] ä½†æ˜¯bçš„å®¹é‡å·²ç»æ˜¯6äº† è¿™æ—¶å€™åˆ‡çš„bä»ç¬¬ä¸€ä½åˆ‡èµ· é‚£ä¹ˆå®¹é‡åº”è¯¥æ˜¯5
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">b4</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">b4</span><span class="p">),</span> <span class="nb">cap</span><span class="p">(</span><span class="nx">b4</span><span class="p">))</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span>
	<span class="nx">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">=</span> <span class="mi">10</span>
	<span class="c1">//è¿™é‡Œè¯´æ˜äº†åˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹ï¼Œéƒ½æŒ‡å‘äº†åº•å±‚çš„æ•°ç»„ï¼Œä¿®æ”¹äº†åº•å±‚æ•°ç»„ï¼Œé‚£ä¹ˆä¸Šå±‚çš„åˆ‡ç‰‡å€¼è‚¯å®šä¼šå˜åŒ–
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">b4</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><p>åˆ‡ç‰‡æŒ‡å‘äº†ä¸€ä¸ªåº•å±‚çš„æ•°ç»„</p>
<p>åˆ‡ç‰‡çš„é•¿åº¦å°±æ˜¯å®ƒå…ƒç´ çš„ä¸ªæ•°</p>
<p>åˆ‡ç‰‡çš„å®¹é‡æ˜¯åº•å±‚æ•°ç»„ä»åˆ‡ç‰‡çš„ç¬¬ä¸€ä¸ªå…ƒç´ åˆ°æœ€åä¸€ä¸ªå…ƒç´ çš„æ•°é‡</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210729000908993.png" >
		<img src="/GoLearning.assets/image-20210729000908993.png"
			
			
			
			loading="lazy"
			alt="image-20210729000908993">
	</a>
	
	<figcaption>image-20210729000908993</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210729000949711.png" >
		<img src="/GoLearning.assets/image-20210729000949711.png"
			
			
			
			loading="lazy"
			alt="image-20210729000949711">
	</a>
	
	<figcaption>image-20210729000949711</figcaption>
	
</figure></p>
<h5 id="ä½¿ç”¨makeå‡½æ•°æ„é€ åˆ‡ç‰‡">ä½¿ç”¨makeå‡½æ•°æ„é€ åˆ‡ç‰‡</h5>
<p>æˆ‘ä»¬ä¸Šé¢éƒ½æ˜¯åŸºäºæ•°ç»„æ¥åˆ›å»ºçš„åˆ‡ç‰‡ï¼Œå¦‚æœéœ€è¦åŠ¨æ€çš„åˆ›å»ºä¸€ä¸ªåˆ‡ç‰‡ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨å†…ç½®çš„makeå‡½æ•°</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nb">make</span><span class="p">([]</span><span class="nx">T</span> <span class="p">,</span> <span class="nx">size</span> <span class="p">,</span><span class="nx">cap</span><span class="p">)</span>
</code></pre></div><p>å…¶ä¸­ï¼šTï¼šåˆ‡ç‰‡çš„å…ƒç´ ç±»å‹ sizeï¼šåˆ‡ç‰‡ä¸­å…ƒç´ çš„æ•°é‡ capï¼šåˆ‡ç‰‡çš„å®¹é‡</p>
<p>ä¸Šé¢çš„ä»£ç ä¸­açš„å†…éƒ¨å­˜å‚¨ç©ºé—´å·²ç»åˆ†é…capä¸ªï¼Œä½†æ˜¯å®é™…ä¸Šåªæ˜¯ä½¿ç”¨äº†lenä¸ªï¼Œå®¹é‡å¹¶ä¸ä¼šå½±å“å½“å‰å…ƒç´ çš„ä¸ªæ•°ï¼Œæ‰€ä»¥lenè¿”å›ä½¿ç”¨äº†å‡ ä¸ªï¼Œcapè¿”å›åˆ‡ç‰‡çš„å®¹é‡</p>
<h5 id="åˆ‡ç‰‡çš„æœ¬è´¨">åˆ‡ç‰‡çš„æœ¬è´¨</h5>
<p>åˆ‡ç‰‡å°±æ˜¯ä¸€ä¸ªæ¡†ï¼Œæ¡†ä½äº†ä¸€å—è¿ç»­çš„å†…å­˜ã€‚å±äºå¼•ç”¨ç±»å‹ï¼ŒçœŸæ­£çš„æ•°æ®éƒ½æ˜¯ä¿å­˜åœ¨åº•å±‚æ•°ç»„é‡Œçš„ã€‚</p>
<h5 id="åˆ‡ç‰‡ä¸èƒ½ç›´æ¥æ¯”è¾ƒ">åˆ‡ç‰‡ä¸èƒ½ç›´æ¥æ¯”è¾ƒ</h5>
<p>åˆ‡ç‰‡ä¹‹é—´æ˜¯ä¸èƒ½æ¯”è¾ƒçš„ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨==æ“ä½œç¬¦æ¥åˆ¤æ–­ä¸¤ä¸ªåˆ‡ç‰‡æ˜¯å¦å«æœ‰å…¨éƒ¨ç›¸ç­‰å…ƒç´ ã€‚åˆ‡ç‰‡å”¯ä¸€åˆæ³•çš„æ¯”è¾ƒæ“ä½œæ˜¯å’Œnilæ¯”è¾ƒã€‚ä¸€ä¸ªnilå€¼çš„åˆ‡ç‰‡å¹¶æ²¡æœ‰åº•å±‚æ•°ç»„ï¼Œä¸€ä¸ªnilå€¼çš„åˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡éƒ½æ˜¯0.ä½†æ˜¯æˆ‘ä»¬ä¸èƒ½è¯´ä¸€ä¸ªé•¿åº¦å’Œå®¹é‡éƒ½æ˜¯0çš„åˆ‡ç‰‡ä¸€å®šæ˜¯nil</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//makeå‡½æ•°åˆ›é€ åˆ‡ç‰‡
</span><span class="c1"></span>	<span class="nx">s1</span><span class="o">:=</span><span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s1=%v,len(s1)=%d,cap(s1)=%d,s1==nil?:%v\n&#34;</span><span class="p">,</span><span class="nx">s1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="nx">s1</span><span class="p">),</span><span class="nb">cap</span><span class="p">(</span><span class="nx">s1</span><span class="p">),</span><span class="nx">s1</span><span class="o">==</span><span class="kc">nil</span><span class="p">)</span>

	<span class="kd">var</span> <span class="nx">s2</span> <span class="p">[]</span><span class="kt">int</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s2=%v,len(s2)=%d,cap(s2)=%d,s2==nil?:%v\n&#34;</span><span class="p">,</span><span class="nx">s2</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="nx">s2</span><span class="p">),</span><span class="nb">cap</span><span class="p">(</span><span class="nx">s2</span><span class="p">),</span><span class="nx">s2</span><span class="o">==</span><span class="kc">nil</span><span class="p">)</span>

	<span class="nx">s3</span><span class="o">:=</span><span class="p">[]</span><span class="kt">int</span><span class="p">{}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s3=%v,len(s3)=%d,cap(s3)=%d,s3==nil?:%v\n&#34;</span><span class="p">,</span><span class="nx">s3</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="nx">s3</span><span class="p">),</span><span class="nb">cap</span><span class="p">(</span><span class="nx">s3</span><span class="p">),</span><span class="nx">s3</span><span class="o">==</span><span class="kc">nil</span><span class="p">)</span>

	<span class="nx">s4</span><span class="o">:=</span><span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s4=%v,len(s4)=%d,cap(s4)=%d,s4==nil?:%v\n&#34;</span><span class="p">,</span><span class="nx">s4</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="nx">s4</span><span class="p">),</span><span class="nb">cap</span><span class="p">(</span><span class="nx">s4</span><span class="p">),</span><span class="nx">s4</span><span class="o">==</span><span class="kc">nil</span><span class="p">)</span>

	<span class="c1">//åˆ‡ç‰‡çš„èµ‹å€¼
</span><span class="c1"></span>	<span class="nx">s5</span><span class="o">:=</span><span class="p">[]</span><span class="kt">int</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">}</span>
	<span class="nx">s6</span><span class="o">:=</span><span class="nx">s5</span> <span class="c1">//s5 å’Œ s6éƒ½æŒ‡å‘äº†åŒä¸€ä¸ªåº•å±‚æ•°ç»„
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s5</span><span class="p">,</span><span class="nx">s6</span><span class="p">)</span>
	<span class="nx">s5</span><span class="p">[</span><span class="mi">0</span><span class="p">]=</span><span class="mi">100</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s5</span><span class="p">,</span><span class="nx">s6</span><span class="p">)</span>

	<span class="c1">//åˆ‡ç‰‡çš„éå†
</span><span class="c1"></span>	<span class="c1">//1.ç´¢å¼•éå†
</span><span class="c1"></span>	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">s5</span><span class="p">);</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d &#34;</span><span class="p">,</span><span class="nx">s5</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span>
	<span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">()</span>
	<span class="c1">//2.forrangeéå†
</span><span class="c1"></span>	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">s5</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d &#34;</span><span class="p">,</span><span class="nx">v</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>æ‰€ä»¥è¦åˆ¤æ–­ä¸€ä¸ªåˆ‡ç‰‡æ˜¯å¦æ˜¯ç©ºçš„ï¼Œè¦ä½¿ç”¨len(s)==0æ¥åˆ¤æ–­</p>
<h5 id="appendæ–¹æ³•ä¸ºåˆ‡ç‰‡æ·»åŠ å…ƒç´ ">appendæ–¹æ³•ä¸ºåˆ‡ç‰‡æ·»åŠ å…ƒç´ </h5>
<p>goè¯­è¨€çš„å†…ç½®å‡½æ•°appendå¯ä»¥ä¸ºåˆ‡ç‰‡åŠ¨æ€æ·»åŠ å…ƒç´ ï¼Œæ¯ä¸ªåˆ‡ç‰‡ä¼šæŒ‡å‘ä¸€ä¸ªåº•å±‚æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„èƒ½å®¹çº³ä¸€å®šæ•°é‡çš„å…ƒç´ ã€‚å½“åº•å±‚æ•°ç»„ä¸èƒ½å®¹çº³æ–°å¢çš„å…ƒç´ æ—¶ï¼Œåˆ‡ç‰‡å°±ä¼šè‡ªåŠ¨æŒ‰ç…§ä¸€å®šçš„ç­–ç•¥è¿›è¡Œæ‰©å®¹ï¼Œæ­¤æ—¶è¯¥åˆ‡ç‰‡æŒ‡å‘çš„åº•å±‚æ•°ç»„å°±ä¼šæ›´æ¢ã€‚æ‰©å®¹æ“ä½œå¾€å¾€å‘ç”Ÿåœ¨appendå‡½æ•°è°ƒç”¨æ—¶ã€‚</p>
<p>åˆ‡ç‰‡çš„æ‰©å®¹ç­–ç•¥å°±ä¸è¯´äº†</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//append ä¸ºåˆ‡ç‰‡è¿½åŠ å…ƒç´ 
</span><span class="c1"></span>	<span class="nx">s1</span><span class="o">:=</span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;åŒ—äº¬&#34;</span><span class="p">,</span><span class="s">&#34;ä¸Šæµ·&#34;</span><span class="p">,</span><span class="s">&#34;æ·±åœ³&#34;</span><span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s1=%v len(s1)=%d cap(s1)=%d\n&#34;</span><span class="p">,</span><span class="nx">s1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="nx">s1</span><span class="p">),</span><span class="nb">cap</span><span class="p">(</span><span class="nx">s1</span><span class="p">))</span>
	<span class="c1">//s1[3] = &#34;å¹¿å·&#34; //é”™è¯¯çš„å†™æ³• ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼šç´¢å¼•è¶Šç•Œ
</span><span class="c1"></span>
	<span class="c1">//è°ƒç”¨appendå‡½æ•°å¿…é¡»ä½¿ç”¨åŸæ¥çš„åˆ‡ç‰‡å˜é‡æ¥æ”¶è¿”å›å€¼
</span><span class="c1"></span>	<span class="nx">s1</span><span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">s1</span><span class="p">,</span> <span class="s">&#34;å¹¿å·&#34;</span><span class="p">)</span> <span class="c1">//appendè¿½åŠ å…ƒç´  åŸæ¥çš„åº•å±‚æ•°ç»„æ”¾ä¸ä¸‹çš„æ—¶å€™ goåº•å±‚å°±ä¼šæŠŠåº•å±‚æ•°ç»„æ¢ä¸€ä¸ª
</span><span class="c1"></span>	<span class="c1">//å¿…é¡»ç”¨å˜é‡æ¥æ”¶appendçš„è¿”å›å€¼
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s1=%v len(s1)=%d cap(s1)=%d\n&#34;</span><span class="p">,</span><span class="nx">s1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="nx">s1</span><span class="p">),</span><span class="nb">cap</span><span class="p">(</span><span class="nx">s1</span><span class="p">))</span>
	<span class="nx">s1</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">s1</span><span class="p">,</span><span class="s">&#34;æ­å·&#34;</span><span class="p">,</span><span class="s">&#34;æˆéƒ½&#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s1=%v len(s1)=%d cap(s1)=%d\n&#34;</span><span class="p">,</span><span class="nx">s1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">s1</span><span class="p">),</span> <span class="nb">cap</span><span class="p">(</span><span class="nx">s1</span><span class="p">))</span>
	<span class="nx">s2</span><span class="o">:=</span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;æ­¦æ±‰&#34;</span><span class="p">,</span><span class="s">&#34;è¥¿å®‰&#34;</span><span class="p">,</span><span class="s">&#34;è‹å·&#34;</span><span class="p">}</span>
	<span class="nx">s1</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">s1</span><span class="p">,</span><span class="nx">s2</span><span class="o">...</span><span class="p">)</span> <span class="c1">//...è¡¨ç¤ºæ‹†å¼€
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s1=%v len(s1)=%d cap(s1)=%d\n&#34;</span><span class="p">,</span><span class="nx">s1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">s1</span><span class="p">),</span> <span class="nb">cap</span><span class="p">(</span><span class="nx">s1</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><h5 id="ä½¿ç”¨copyå¤åˆ¶åˆ‡ç‰‡">ä½¿ç”¨copyå¤åˆ¶åˆ‡ç‰‡</h5>
<p>ç”±äºåˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹ï¼Œaå’Œbå…¶å®æ˜¯æŒ‡å‘äº†åŒä¸€å—å†…å­˜åœ°å€ï¼Œæ‰€ä»¥å¦‚æœå•çº¯çš„èµ‹å€¼çš„è¯ï¼Œä¿®æ”¹äº†bçš„å€¼çš„åŒæ—¶açš„å€¼ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–</p>
<p>goè¯­è¨€å†…å»ºçš„copyå‡½æ•°å¯ä»¥è¿…é€Ÿåœ°å°†ä¸€ä¸ªåˆ‡ç‰‡çš„æ•°æ®å¤åˆ¶åˆ°å¦ä¸€ä¸ªåˆ‡ç‰‡ç©ºé—´</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nf">copy</span> <span class="p">(</span><span class="nx">destSlice</span> <span class="p">,</span> <span class="nx">srcSlice</span><span class="p">[]</span> <span class="nx">T</span><span class="p">)</span>
</code></pre></div><h5 id="ä»åˆ‡ç‰‡ä¸­åˆ é™¤å…ƒç´ ">ä»åˆ‡ç‰‡ä¸­åˆ é™¤å…ƒç´ </h5>
<p>goè¯­è¨€ä¸­å¹¶æ²¡æœ‰åˆ é™¤åˆ‡ç‰‡å…ƒç´ çš„ä¸“ç”¨æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ‡ç‰‡ æœ¬èº«çš„ç‰¹æ€§æ¥åˆ é™¤å…ƒç´ ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">a1</span><span class="o">:=</span><span class="p">[]</span><span class="kt">int</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">}</span>
	<span class="nx">a2</span><span class="o">:=</span><span class="nx">a1</span>
	<span class="kd">var</span> <span class="nx">a3</span><span class="p">=[]</span><span class="kt">int</span><span class="p">{}</span>  <span class="c1">//è¿™æ ·å£°æ˜æ²¡åŠæ³•å¤åˆ¶è¿›å»
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">a4</span> <span class="p">[]</span><span class="kt">int</span>	<span class="c1">//è¿™æ ·å£°æ˜ä¹Ÿæ²¡åŠæ³•å¤åˆ¶è¿›å»
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">a5</span><span class="p">=</span><span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="nx">a1</span><span class="p">),</span> <span class="nb">cap</span><span class="p">(</span><span class="nx">a1</span><span class="p">))</span>
	<span class="nb">copy</span><span class="p">(</span><span class="nx">a3</span><span class="p">,</span><span class="nx">a1</span><span class="p">)</span>
	<span class="nb">copy</span><span class="p">(</span><span class="nx">a4</span><span class="p">,</span><span class="nx">a1</span><span class="p">)</span>
	<span class="nb">copy</span><span class="p">(</span><span class="nx">a5</span><span class="p">,</span><span class="nx">a1</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a1</span><span class="p">,</span><span class="nx">a2</span><span class="p">,</span><span class="nx">a3</span><span class="p">,</span><span class="nx">a4</span><span class="p">,</span><span class="nx">a5</span><span class="p">)</span>

	<span class="nx">a1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">=</span> <span class="mi">100</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a1</span><span class="p">,</span><span class="nx">a2</span><span class="p">,</span><span class="nx">a3</span><span class="p">,</span><span class="nx">a4</span><span class="p">,</span><span class="nx">a5</span><span class="p">)</span>

	<span class="c1">//åˆ é™¤ç¬¬äºŒä¸ªå…ƒç´ 
</span><span class="c1"></span>	<span class="nx">a5</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">a5</span><span class="p">[:</span><span class="mi">1</span><span class="p">],</span><span class="nx">a5</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span><span class="o">...</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a5</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">cap</span><span class="p">(</span><span class="nx">a5</span><span class="p">))</span>


	<span class="c1">//éªŒè¯
</span><span class="c1"></span>	<span class="c1">//1.åˆ‡ç‰‡ä¸ä¿å­˜å…·ä½“çš„å€¼
</span><span class="c1"></span>	<span class="c1">//2.åˆ‡ç‰‡å¯¹åº”ä¸€ä¸ªåº•å±‚æ•°ç»„
</span><span class="c1"></span>	<span class="c1">//3.åº•å±‚æ•°ç»„éƒ½æ˜¯å ç”¨ä¸€å—è¿ç»­çš„å†…å­˜
</span><span class="c1"></span>	<span class="nx">x1</span><span class="o">:=</span><span class="p">[</span><span class="o">...</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">}</span>  <span class="c1">//æ•°ç»„
</span><span class="c1"></span>	<span class="nx">x2</span><span class="o">:=</span><span class="nx">x1</span><span class="p">[:]</span>   <span class="c1">//åˆ‡ç‰‡ åˆ‡ç‰‡æŒ‡å‘åº•å±‚æ•°ç»„
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">x2</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="nx">x2</span><span class="p">),</span><span class="nb">cap</span><span class="p">(</span><span class="nx">x2</span><span class="p">))</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%p\n&#34;</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">x1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
	<span class="nx">x2</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">x1</span><span class="p">[:</span><span class="mi">1</span><span class="p">],</span><span class="nx">x1</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span><span class="o">...</span><span class="p">)</span> <span class="c1">//åˆ‡ç‰‡æˆªå–åº•å±‚æ•°ç»„ é‡æ–°å®šä¹‰äº†åº•å±‚æ•°ç»„çš„ç´¢å¼•çš„å€¼
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%p\n&#34;</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">x2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1">//è¯´æ˜æŒ‡å‘çš„åº•å±‚æ•°ç»„åœ°å€æ²¡å˜ å˜äº†çš„æ˜¯åœ°å€é‡Œçš„å€¼
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">x2</span><span class="p">)</span>  <span class="c1">//åˆ‡ç‰‡çš„ç´¢å¼•çš„å€¼
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">x1</span><span class="p">)</span>  <span class="c1">//è¢«ä¿®æ”¹åçš„åº•å±‚æ•°ç»„çš„ç´¢å¼•å’Œå€¼
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><p>ç»ƒä¹ </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">a1</span><span class="o">:=</span><span class="p">[</span><span class="o">...</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">17</span><span class="p">}</span>
	<span class="nx">a2</span><span class="o">:=</span><span class="nx">a1</span><span class="p">[:]</span>

	<span class="nx">a2</span><span class="p">=</span><span class="nb">append</span><span class="p">(</span><span class="nx">a1</span><span class="p">[:</span><span class="mi">1</span><span class="p">],</span><span class="nx">a1</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span><span class="o">...</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a2</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a1</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h4 id="æŒ‡é’ˆ">æŒ‡é’ˆ</h4>
<p>goè¯­è¨€ä¸­ä¸å­˜åœ¨æŒ‡é’ˆæ“ä½œï¼Œåªéœ€è¦è®°ä½ä¸¤ä¸ªç¬¦å·</p>
<ol>
<li><code>&amp;</code> å–åœ°å€</li>
<li><code>*</code> æ ¹æ®åœ°å€å–å€¼</li>
</ol>
<p>goè¯­è¨€ä¸­çš„æŒ‡é’ˆä¸èƒ½è¿›è¡Œåç§»å’Œè¿ç®—ï¼Œæ˜¯å®‰å…¨æŒ‡é’ˆã€‚</p>
<p>è¦ææ˜ç™½goè¯­è¨€ä¸­çš„æŒ‡é’ˆéœ€è¦å…ˆçŸ¥é“3ä¸ªæ¦‚å¿µï¼ŒæŒ‡é’ˆåœ°å€ï¼ŒæŒ‡é’ˆç±»å‹å’ŒæŒ‡é’ˆå–å€¼</p>
<p>goè¯­è¨€ä¸­çš„å‡½æ•°ä¼ å‚éƒ½æ˜¯å€¼æ‹·è´ï¼Œå½“æˆ‘ä»¬æƒ³è¦ä¿®æ”¹æŸä¸ªå˜é‡çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæŒ‡å‘è¯¥å˜é‡åœ°å€çš„æŒ‡é’ˆå˜é‡ã€‚ä¼ é€’æ•°æ®ä½¿ç”¨æŒ‡é’ˆï¼Œè€Œæ— éœ€æ‹·è´æ•°æ®ã€‚ç±»å‹æŒ‡é’ˆä¸èƒ½è¿›è¡Œåç§»å’Œè¿ç®—ã€‚goè¯­è¨€ä¸­çš„æŒ‡é’ˆæ“ä½œéå¸¸ç®€å•ï¼Œåªéœ€è¦è®°ä½ä¸¤ä¸ªç¬¦å·ï¼š&amp; å–åœ°å€ *æ ¹æ®åœ°å€å–å€¼</p>
<h5 id="æŒ‡é’ˆåœ°å€å’ŒæŒ‡é’ˆç±»å‹">æŒ‡é’ˆåœ°å€å’ŒæŒ‡é’ˆç±»å‹</h5>
<p>æ¯ä¸ªå˜é‡åœ¨è¿è¡Œæ—¶éƒ½æ‹¥æœ‰ä¸€ä¸ªåœ°å€ï¼Œè¿™ä¸ªåœ°å€ä»£è¡¨å˜é‡åœ¨å†…å­˜ä¸­çš„ä½ç½®ã€‚goè¯­è¨€ä¸­ä½¿ç”¨&amp;å­—ç¬¦æ”¾åœ¨å˜é‡å‰é¢å¯¹å˜é‡è¿›è¡Œå–åœ°å€æ“ä½œã€‚goè¯­è¨€ä¸­çš„å€¼ç±»å‹int / float / bool / string / array / struct éƒ½æœ‰å¯¹åº”çš„æŒ‡é’ˆç±»å‹ *int / *int64 / *string</p>
<p>æ€»ç»“ï¼šå–åœ°å€æ“ä½œç¬¦&amp; å’Œå–å€¼æ“ä½œç¬¦*æ˜¯ä¸€å¯¹äº’è¡¥æ“ä½œï¼Œ&amp;å–å‡ºåœ°å€ï¼Œ *æ ¹æ®åœ°å€å–å‡ºåœ°å€æŒ‡å‘çš„å€¼ï¼Œå˜é‡ã€æŒ‡é’ˆåœ°å€ã€æŒ‡é’ˆå˜é‡ã€å–åœ°å€ã€å–å€¼çš„ç›¸äº’å…³ç³»å¦‚ä¸‹</p>
<ul>
<li>å¯¹å˜é‡è¿›è¡Œå–åœ°å€&amp;æ“ä½œï¼Œå¯ä»¥è·å¾—è¿™ä¸ªå˜é‡çš„æŒ‡é’ˆå˜é‡</li>
<li>æŒ‡é’ˆå˜é‡çš„å€¼æ˜¯æŒ‡é’ˆåœ°å€</li>
<li>å¯¹æŒ‡é’ˆå˜é‡è¿›è¡Œå–å€¼*æ“ä½œï¼Œå¯ä»¥è·å¾—æŒ‡é’ˆå˜é‡æŒ‡å‘çš„åŸå˜é‡çš„å€¼</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">//1.&amp;å–åœ°å€
</span><span class="c1"></span>   <span class="c1">//2.*æ ¹æ®åœ°å€å–å€¼
</span><span class="c1"></span>   <span class="nx">n</span><span class="o">:=</span><span class="mi">18</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">n</span><span class="p">)</span>
   <span class="nx">p</span><span class="o">:=&amp;</span><span class="nx">n</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T\n&#34;</span><span class="p">,</span><span class="nx">p</span><span class="p">)</span>  <span class="c1">//*intè¡¨ç¤ºintç±»å‹çš„æŒ‡é’ˆ
</span><span class="c1"></span>   <span class="nx">m</span><span class="o">:=*</span><span class="nx">p</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v\n&#34;</span><span class="p">,</span><span class="nx">m</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T\n&#34;</span><span class="p">,</span><span class="nx">m</span><span class="p">)</span>

   <span class="kd">var</span> <span class="nx">a</span> <span class="o">*</span><span class="kt">int</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>  <span class="c1">//nil èµ‹å€¼ä¼šæŠ¥é”™ ç©ºæŒ‡é’ˆå¼‚å¸¸
</span><span class="c1"></span>   <span class="kd">var</span> <span class="nx">a1</span> <span class="p">=</span> <span class="nb">new</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span>  <span class="c1">//ä½¿ç”¨newå…³é”®å­—ä¼šåˆ†é…å†…å­˜å— ä¸ä¼šé€ æˆç©ºæŒ‡é’ˆ
</span><span class="c1"></span>   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a1</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="o">*</span><span class="nx">a1</span><span class="p">)</span>
   <span class="o">*</span><span class="nx">a1</span> <span class="p">=</span> <span class="mi">100</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="o">*</span><span class="nx">a1</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h5 id="make">make</h5>
<p>makeä¹Ÿæ˜¯ç”¨äºå†…å­˜åˆ†é…çš„ï¼ŒåŒºåˆ«äºnewï¼Œå®ƒåªç”¨äºsliceã€mapä»¥åŠchançš„å†…å­˜åˆ›å»ºï¼Œè€Œä¸”å®ƒè¿”å›çš„ç±»å‹å°±æ˜¯è¿™ä¸‰ä¸ªç±»å‹æœ¬èº«ï¼Œè€Œä¸æ˜¯å¥¹ä»¬çš„æŒ‡é’ˆç±»å‹ï¼Œå› ä¸ºè¿™ä¸‰ç§ç±»å‹å°±æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ²¡æœ‰å¿…è¦è¿”å›å¥¹ä»¬çš„æŒ‡é’ˆäº†ã€‚makeå‡½æ•°çš„å‡½æ•°ç­¾å</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">make</span> <span class="p">(</span><span class="nx">t</span> <span class="nx">Type</span><span class="p">,</span><span class="nx">size</span> <span class="o">...</span> <span class="nx">IntergerType</span><span class="p">)</span> <span class="nx">Type</span>
</code></pre></div><p>makeå‡½æ•°æ˜¯æ— å¯æ›¿ä»£çš„ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨sliceã€mapä»¥åŠchannelçš„æ—¶å€™ï¼Œéƒ½éœ€è¦ä½¿ç”¨makeè¿›è¡Œåˆå§‹åŒ–ï¼Œç„¶åæ‰å¯ä»¥å¯¹å¥¹ä»¬è¿›è¡Œæ“ä½œã€‚è¿™ä¸ªæˆ‘ä»¬åœ¨ä¸Šä¸€ç« ä¸­éƒ½æœ‰è¯´æ˜ï¼Œå…³äºchannelæˆ‘ä»¬ä¼šåœ¨åç»­çš„ç« èŠ‚ä¸­è¯¦ç»†è¯´æ˜</p>
<h5 id="makeå’Œnewçš„åŒºåˆ«">makeå’Œnewçš„åŒºåˆ«</h5>
<ol>
<li>makeå’Œnewéƒ½æ˜¯ç”¨æ¥ç”³è¯·å†…å­˜çš„</li>
<li>newå¾ˆå°‘ç”¨ï¼Œä¸€èˆ¬ç”¨æ¥ç»™åŸºæœ¬æ•°æ®ç±»å‹ç”³è¯·å†…å­˜ï¼Œstring / int è¿”å›çš„æ˜¯å¯¹åº”ç±»å‹çš„æŒ‡é’ˆï¼Œä¾‹å¦‚*string . *intã€‚</li>
<li>makeæ˜¯ç”¨æ¥ç»™slice  ã€ map ã€ chanç”³è¯·å†…å­˜çš„ï¼Œmakeå‡½æ•°è¿”å›çš„æ˜¯å¯¹åº”çš„è¿™ä¸‰ä¸ªç±»å‹æœ¬èº«</li>
</ol>
<h4 id="map">map</h4>
<p>goè¯­è¨€ä¸­æä¾›çš„æ˜ å°„å…³ç³»å®¹å™¨ä¸ºmapï¼Œå…¶å†…éƒ¨ä½¿ç”¨æ•£åˆ—è¡¨hashå®ç°</p>
<p>mapæ˜¯ä¸€ç§æ— åºçš„åŸºäºkey-valueçš„æ•°æ®ç»“æ„ï¼Œgoè¯­è¨€ä¸­çš„mapæ˜¯å¼•ç”¨ç±»å‹ï¼Œå¿…é¡»åˆå§‹åŒ–æ‰èƒ½ä½¿ç”¨</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">map</span><span class="p">[</span><span class="nx">KeyType</span><span class="p">]</span><span class="nx">valueType</span>
</code></pre></div><p>mapç±»å‹çš„å˜é‡é»˜è®¤åˆå§‹å€¼ä¸ºnilï¼Œéœ€è¦ä½¿ç”¨makeå‡½æ•°æ¥åˆ†é…å†…å­˜</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="nx">keyType</span><span class="p">]</span> <span class="nx">valueType</span><span class="p">,[</span><span class="nx">cap</span><span class="p">])</span>
</code></pre></div><h5 id="åˆ¤æ–­æŸä¸ªé”®æ˜¯å¦å­˜åœ¨">åˆ¤æ–­æŸä¸ªé”®æ˜¯å¦å­˜åœ¨</h5>
<p>ç‰¹æ®Šå†™æ³•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">value</span><span class="p">,</span><span class="nx">ok</span><span class="o">:=</span><span class="kd">map</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> 
</code></pre></div><p>éå†map ä½¿ç”¨for rangeå³å¯</p>
<h5 id="ä½¿ç”¨deleteå‡½æ•°åˆ é™¤é”®å€¼å¯¹">ä½¿ç”¨deleteå‡½æ•°åˆ é™¤é”®å€¼å¯¹</h5>
<p>ç±»å‹ä¸ºmapçš„åˆ‡ç‰‡</p>
<p>å€¼çš„ç±»å‹ä¸ºåˆ‡ç‰‡çš„map</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>
<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//mapå’Œsliceçš„ç»„åˆ
</span><span class="c1"></span>	<span class="nx">a</span><span class="o">:=</span><span class="p">[]</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">{}</span>
	<span class="c1">//å…ƒç´ ç±»å‹ä¸ºmapçš„åˆ‡ç‰‡
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">a1</span> <span class="p">=</span> <span class="nb">make</span><span class="p">([]</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
	<span class="c1">//æ²¡æœ‰å¯¹å†…éƒ¨çš„mapåšåˆå§‹åŒ–
</span><span class="c1"></span>	<span class="nx">a1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
	<span class="nx">a1</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#34;ljs&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="mi">9</span>
	<span class="nx">a1</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#34;jwt&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="mi">8</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a1</span><span class="p">)</span>

	<span class="c1">//å€¼ä¸ºåˆ‡ç‰‡ç±»å‹çš„map
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">a2</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
	<span class="nx">a2</span><span class="p">[</span><span class="s">&#34;ljs&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">string</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
	<span class="nx">a2</span><span class="p">[</span><span class="s">&#34;ljs&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;giegie&#34;</span><span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a2</span><span class="p">)</span>
	<span class="nx">a2</span><span class="p">[</span><span class="s">&#34;ljs&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">a2</span><span class="p">[</span><span class="s">&#34;ljs&#34;</span><span class="p">],[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;jiejie&#34;</span><span class="p">,</span><span class="s">&#34;didi&#34;</span><span class="p">}</span><span class="o">...</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a2</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h4 id="å†…å®¹å›é¡¾-1">å†…å®¹å›é¡¾</h4>
<h5 id="è¿ç®—ç¬¦-1">è¿ç®—ç¬¦</h5>
<p>ç®—æœ¯è¿ç®—ç¬¦</p>
<p>é€»è¾‘è¿ç®—ç¬¦</p>
<p>èµ‹å€¼è¿ç®—ç¬¦+= -= *= /= &amp;= |= ^=</p>
<p>ä½è¿ç®—ç¬¦ &raquo; &laquo; | &amp; ^</p>
<p>æ¯”è¾ƒè¿ç®—ç¬¦</p>
<h5 id="æ•°ç»„array">æ•°ç»„array</h5>
<p>[&hellip;]int{3,5} æ•°ç»„åŒ…å«å…ƒç´ çš„ç±»å‹å’Œå…ƒç´ çš„ä¸ªæ•° æ•°ç»„çš„é•¿åº¦å±äºæ•°ç»„ç±»å‹çš„ä¸€éƒ¨åˆ†</p>
<p>æ•°ç»„æ˜¯å€¼ç±»å‹</p>
<p>å¤šç»´æ•°ç»„</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">name</span> <span class="kt">string</span>
	<span class="nx">name</span> <span class="p">=</span> <span class="s">&#34;ljs&#34;</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span>
	<span class="kd">var</span> <span class="nx">ages</span> <span class="p">[</span><span class="mi">30</span><span class="p">]</span><span class="kt">int</span>
	<span class="nx">ages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">=</span> <span class="mi">1</span>
	<span class="nx">ages</span> <span class="p">=</span> <span class="p">[</span><span class="mi">30</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">ages</span><span class="p">)</span>
	<span class="nx">ages1</span><span class="o">:=</span><span class="p">[</span><span class="o">...</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">ages1</span><span class="p">)</span>
	<span class="nx">ages2</span><span class="o">:=</span><span class="p">[</span><span class="o">...</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="mi">99</span><span class="p">:</span><span class="mi">99</span><span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">ages2</span><span class="p">)</span>

	<span class="c1">//äºŒç»´æ•°ç»„
</span><span class="c1"></span>	<span class="nx">a</span><span class="o">:=</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="kt">string</span><span class="p">{}</span>
	<span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">=</span> <span class="s">&#34;ljs&#34;</span>
	<span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">=</span> <span class="s">&#34;jwt&#34;</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>

	<span class="c1">//å¤šç»´æ•°ç»„æ˜¯å€¼ç±»å‹
</span><span class="c1"></span>	<span class="nx">a1</span><span class="o">:=</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="kt">string</span><span class="p">{{</span><span class="s">&#34;ljs&#34;</span><span class="p">,</span><span class="s">&#34;jwt&#34;</span><span class="p">},{</span><span class="s">&#34;fyz&#34;</span><span class="p">,</span><span class="s">&#34;lje&#34;</span><span class="p">}}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a1</span><span class="p">)</span>

	<span class="kd">var</span> <span class="nx">a2</span> <span class="p">=[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="kt">int</span><span class="p">{[</span><span class="mi">2</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">},[</span><span class="mi">2</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">}}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a2</span><span class="p">)</span>

	<span class="c1">//æ•°ç»„æ˜¯å€¼ç±»å‹
</span><span class="c1"></span>	<span class="nx">a3</span><span class="o">:=</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a3</span><span class="p">)</span>
	<span class="nf">f1</span><span class="p">(</span><span class="nx">a3</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a3</span><span class="p">)</span>

	<span class="nx">a4</span><span class="o">:=</span><span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a4</span><span class="p">)</span>
	<span class="nf">f2</span><span class="p">(</span><span class="nx">a4</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a4</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">f1</span><span class="p">(</span><span class="nx">a</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="kt">int</span><span class="p">)</span>  <span class="p">{</span>
	<span class="c1">//goè¯­è¨€ä¸­å‡½æ•°ä¼ é€’çš„éƒ½æ˜¯å€¼ ctrl+c ctrl+v 
</span><span class="c1"></span>	<span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">=</span> <span class="mi">100</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f2</span><span class="p">(</span><span class="nx">a</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">=</span><span class="mi">100</span>
<span class="p">}</span>
</code></pre></div><h5 id="åˆ‡ç‰‡-1">åˆ‡ç‰‡</h5>
<p>åˆ‡ç‰‡ä¸å­˜å€¼ï¼Œåƒä¸€ä¸ªæ¡†ï¼Œåœ¨åº•å±‚çš„æ•°ç»„é‡Œå–å€¼</p>
<p>åˆ‡ç‰‡çš„å®šä¹‰ï¼šæŒ‡é’ˆã€é•¿åº¦ã€å®¹é‡</p>
<p>var name []T</p>
<p>åˆ‡ç‰‡çš„æ‰©å®¹ç­–ç•¥</p>
<ol>
<li>å¦‚æœç”³è¯·çš„å®¹é‡å¤§äºåŸæ¥çš„2å€ï¼Œé‚£å°±ç›´æ¥æ‰©å®¹è‡³æ–°ç”³è¯·çš„å®¹é‡</li>
<li>å¦‚æœå°äº1024ï¼Œé‚£ä¹ˆå°±ç›´æ¥ä¸¤å€</li>
<li>å¦‚æœå¤§äº1024ï¼Œå°±æŒ‰ç…§1.25å€å»æ‰©å®¹</li>
<li>å…·ä½“å­˜å‚¨çš„å€¼ç±»å‹ä¸åŒï¼Œæ‰©å®¹ç­–ç•¥ä¹Ÿæœ‰ä¸€å®šçš„ä¸åŒ</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go">	<span class="nx">a4</span><span class="o">:=</span><span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a4</span><span class="p">)</span>
	<span class="nf">f2</span><span class="p">(</span><span class="nx">a4</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a4</span><span class="p">)</span>

	<span class="c1">//åˆ‡ç‰‡
</span><span class="c1"></span>	<span class="nx">a5</span><span class="o">:=</span><span class="p">[]</span><span class="kt">int</span><span class="p">{}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a5</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a5</span><span class="o">==</span><span class="kc">nil</span><span class="p">)</span>
	<span class="c1">//æ²¡æœ‰åˆ†é…å†…å­˜ é›¶åˆ‡ç‰‡å£°æ˜ nil
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">a6</span> <span class="p">[]</span><span class="kt">int</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a6</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a6</span><span class="o">==</span><span class="kc">nil</span><span class="p">)</span>
	<span class="c1">//makeåˆå§‹åŒ– åˆ†é…å†…å­˜
</span><span class="c1"></span>	<span class="nx">a7</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a7</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a7</span><span class="o">==</span><span class="kc">nil</span><span class="p">)</span>

	<span class="nx">s1</span> <span class="o">:=</span><span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span>
	<span class="nx">s2</span><span class="o">:=</span><span class="nx">s1</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s1</span><span class="p">)</span>
	<span class="nx">s2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">=</span> <span class="mi">100</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s2</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s1</span><span class="p">)</span> <span class="c1">//åˆ‡ç‰‡ä¸å­˜å€¼ æŒ‡å‘åŒä¸€ä¸ªæ•°ç»„
</span><span class="c1"></span>
	<span class="kd">var</span> <span class="nx">s3</span> <span class="p">[]</span><span class="kt">int</span>
	<span class="c1">//appendå°†è‡ªåŠ¨åˆå§‹åŒ–åˆ†é…å†…å­˜+æ‰©å®¹
</span><span class="c1"></span>	<span class="nx">s3</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">s3</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s3</span><span class="p">)</span>

	<span class="kd">var</span> <span class="nx">s4</span> <span class="p">[]</span><span class="kt">int</span>
	<span class="nx">s4</span> <span class="p">=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
	<span class="nb">copy</span><span class="p">(</span><span class="nx">s4</span><span class="p">,</span><span class="nx">s3</span><span class="p">)</span> <span class="c1">//copyå‡½æ•°å¿…é¡»å…ˆå°†deståˆ‡ç‰‡å£°æ˜å¥½å¹¶ä¸”åˆå§‹åŒ–å¥½åˆ†é…å¥½å†…å­˜å’Œé•¿åº¦
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s4</span><span class="p">)</span>
</code></pre></div><h5 id="æŒ‡é’ˆ-1">æŒ‡é’ˆ</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go">	<span class="c1">//æŒ‡é’ˆ
</span><span class="c1"></span>	<span class="c1">//goé‡Œé¢çš„æŒ‡é’ˆåªèƒ½è¯»ä¸èƒ½ä¿®æ”¹
</span><span class="c1"></span>	<span class="nx">addr</span><span class="o">:=</span><span class="s">&#34;æ²™æ²³&#34;</span>
	<span class="nx">addrpointer</span><span class="o">:=&amp;</span><span class="nx">addr</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">addrpointer</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T\n&#34;</span><span class="p">,</span><span class="nx">addrpointer</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="o">*</span><span class="nx">addrpointer</span><span class="p">)</span>
</code></pre></div><h5 id="map-1">map</h5>
<p>mapå­˜å‚¨çš„æ˜¯é”®å€¼å¯¹çš„æ•°æ®ã€‚ä»–ä¹Ÿæ˜¯éœ€è¦ç”³è¯·å†…å­˜çš„</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="c1">//map
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">m</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span>
	<span class="nx">m</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
	<span class="nx">m</span><span class="p">[</span><span class="s">&#34;ljs&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="mi">99</span>
	<span class="nx">m</span><span class="p">[</span><span class="s">&#34;jwt&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="mi">98</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">m</span><span class="p">[</span><span class="s">&#34;jiwuming&#34;</span><span class="p">])</span> <span class="c1">//å¦‚æœä¸å­˜åœ¨key ï¼Œè¿”å›çš„å°†æ˜¯valueç±»å‹çš„é»˜è®¤å€¼
</span><span class="c1"></span>	<span class="nx">score</span><span class="p">,</span><span class="nx">ok</span><span class="o">:=</span><span class="nx">m</span><span class="p">[</span><span class="s">&#34;jiwuming&#34;</span><span class="p">]</span>
	<span class="k">if</span> <span class="nx">ok</span> <span class="p">{</span>
		<span class="nb">println</span><span class="p">(</span><span class="nx">score</span><span class="p">)</span>
	<span class="p">}</span><span class="k">else</span><span class="p">{</span>
		<span class="nb">println</span><span class="p">(</span><span class="s">&#34;æŸ¥æ— æ­¤äºº&#34;</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="nb">delete</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span><span class="s">&#34;lalala&#34;</span><span class="p">)</span>  <span class="c1">//å¦‚æœæ²¡æœ‰çš„è¯ï¼Œä»€ä¹ˆéƒ½ä¸å¹²ï¼Œä¸æŠ¥é”™
</span><span class="c1"></span>	<span class="nb">delete</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="s">&#34;jwt&#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span>
</code></pre></div><h5 id="å¤ä¹ ">å¤ä¹ </h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;strings&#34;</span>
	<span class="s">&#34;unicode&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">s1</span><span class="o">:=</span><span class="s">&#34;helloæ²™æ²³&#34;</span>
	<span class="nx">sum</span><span class="o">:=</span><span class="mi">0</span>
	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">s1</span> <span class="p">{</span>
		<span class="c1">//if v &gt;= 128 {
</span><span class="c1"></span>		<span class="c1">//	sum++
</span><span class="c1"></span>		<span class="c1">//}
</span><span class="c1"></span>
		<span class="k">if</span> <span class="nx">unicode</span><span class="p">.</span><span class="nf">In</span><span class="p">(</span><span class="nx">v</span><span class="p">,</span> <span class="nx">unicode</span><span class="p">.</span><span class="nx">Han</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">sum</span><span class="o">++</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">sum</span><span class="p">)</span>

	<span class="nx">s2</span><span class="o">:=</span><span class="s">&#34;how do you do&#34;</span>
	<span class="nx">s3</span><span class="o">:=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Split</span><span class="p">(</span><span class="nx">s2</span><span class="p">,</span><span class="s">&#34; &#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s3</span><span class="p">)</span>

	<span class="nx">m</span><span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">s3</span> <span class="p">{</span>
		<span class="c1">//if m[v] == 0 {
</span><span class="c1"></span>		<span class="c1">//	m[v] =1
</span><span class="c1"></span>		<span class="c1">//}	else {
</span><span class="c1"></span>		<span class="c1">//	m[v] ++
</span><span class="c1"></span>		<span class="c1">//}
</span><span class="c1"></span>		<span class="k">if</span> <span class="nx">_</span><span class="p">,</span><span class="nx">ok</span> <span class="o">:=</span> <span class="nx">m</span><span class="p">[</span><span class="nx">v</span><span class="p">];!</span><span class="nx">ok</span><span class="p">{</span>
			<span class="nx">m</span><span class="p">[</span><span class="nx">v</span><span class="p">]=</span><span class="mi">1</span>
		<span class="p">}</span><span class="k">else</span> <span class="p">{</span>
			<span class="nx">m</span><span class="p">[</span><span class="nx">v</span><span class="p">]</span><span class="o">++</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span>

	<span class="c1">//å›æ–‡åˆ¤æ–­
</span><span class="c1"></span>	<span class="c1">//å­—ç¬¦ä¸²ä»å·¦å¾€å³è¯»å’Œä»å³å¾€å·¦è¯»æ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯å›æ–‡
</span><span class="c1"></span>	<span class="c1">//é»„å±±è½å¶æ¾å¶è½å±±é»„
</span><span class="c1"></span>	<span class="nx">s4</span><span class="o">:=</span><span class="s">&#34;é»„å±±è½å¶æ¾å¶è½å±±é»„&#34;</span>
	<span class="nx">s5</span><span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">string</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">s4</span><span class="p">))</span>
	<span class="k">for</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">v</span><span class="o">:=</span> <span class="k">range</span> <span class="nx">s4</span> <span class="p">{</span>
		<span class="nx">s5</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="nx">s4</span><span class="p">)</span><span class="o">-</span><span class="nx">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]=</span><span class="nb">string</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span>
		<span class="c1">//fmt.Println(i, string(v))
</span><span class="c1"></span>		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s5</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="kd">var</span> <span class="nx">s6</span> <span class="kt">string</span>
	<span class="nx">s6</span> <span class="p">=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Join</span><span class="p">(</span><span class="nx">s5</span><span class="p">,</span><span class="s">&#34;&#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s6</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s6</span><span class="o">==</span><span class="nx">s4</span><span class="p">)</span>

	<span class="nx">runes</span><span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">rune</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">s4</span><span class="p">))</span>
	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="kt">rune</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">s4</span> <span class="p">{</span>
		<span class="nx">runes</span> <span class="p">=</span><span class="nb">append</span><span class="p">(</span><span class="nx">runes</span><span class="p">,</span> <span class="kt">rune</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;rune[] :&#34;</span><span class="p">,</span><span class="nx">runes</span><span class="p">)</span>
	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">runes</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="k">if</span> <span class="nx">runes</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">!=</span><span class="nx">runes</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="nx">runes</span><span class="p">)</span><span class="o">-</span><span class="nx">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="p">{</span>
			<span class="k">return</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="nb">println</span><span class="p">(</span><span class="s">&#34;å›æ–‡&#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h5 id="å‡½æ•°func">å‡½æ•°func</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nb">println</span><span class="p">(</span><span class="nf">f4</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f1</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;hello æ²™æ²³&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f2</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;hello&#34;</span><span class="p">,</span><span class="nx">name</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f3</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
   <span class="k">return</span> <span class="nx">x</span><span class="o">+</span><span class="nx">y</span>  <span class="c1">//yæ˜¯ä¸€ä¸ªå¯å˜é•¿åº¦çš„åˆ‡ç‰‡ç±»å‹
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">func</span> <span class="nf">f4</span><span class="p">(</span><span class="nx">x</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">y</span> <span class="o">...</span><span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
   <span class="nx">sum</span><span class="o">:=</span><span class="nx">x</span>
   <span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">y</span> <span class="p">{</span>
      <span class="nx">sum</span><span class="o">+=</span><span class="nx">v</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="nx">sum</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f5</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="nx">sum</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">sum</span> <span class="p">=</span> <span class="nx">x</span><span class="o">+</span><span class="nx">y</span>
   <span class="k">return</span> 
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f6</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">x1</span><span class="p">=</span><span class="nx">x</span>
   <span class="nx">y1</span><span class="p">=</span><span class="nx">y</span>
   <span class="k">return</span>
<span class="p">}</span>
</code></pre></div><h5 id="deferè¯­å¥">deferè¯­å¥</h5>
<p>goè¯­è¨€ä¸­çš„deferè¯­å¥ä¼šå°†å…¶åé¢è·Ÿéšçš„è¯­å¥è¿›è¡Œå»¶è¿Ÿå¤„ç†ï¼Œåœ¨deferå½’å±çš„å‡½æ•°å³å°†è¿”å›æ—¶ï¼Œå°†å»¶è¿Ÿå¤„ç†çš„è¯­å¥æŒ‰ç…§deferå®šä¹‰çš„é€†åºè¿›è¡Œæ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´å…ˆè¢«deferçš„è¯­å¥æœ€åè¢«æ‰§è¡Œï¼Œåè¢«deferçš„è¯­å¥æœ€å…ˆè¢«æ‰§è¡Œ</p>
<h5 id="deferæ‰§è¡Œæ—¶æœº">deferæ‰§è¡Œæ—¶æœº</h5>
<p>åœ¨goè¯­è¨€çš„å‡½æ•°ä¸­ï¼Œreturnè¯­å¥åœ¨åº•å±‚å¹¶ä¸æ˜¯åŸå­æ€§æ“ä½œï¼Œä»–åˆ†ä¸ºç»™è¿”å›å€¼èµ‹å€¼å’ŒretæŒ‡ä»¤ä¸¤æ­¥ã€‚è€Œdeferè¯­å¥æ‰§è¡Œçš„å®é™…å°±æ˜¯åœ¨è¿”å›å€¼èµ‹å€¼æ“ä½œåï¼ŒretæŒ‡ä»¤æ‰§è¡Œå‰ï¼Œå…·ä½“å¦‚å›¾</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210731151015069.png" >
		<img src="/GoLearning.assets/image-20210731151015069.png"
			
			
			
			loading="lazy"
			alt="image-20210731151015069">
	</a>
	
	<figcaption>image-20210731151015069</figcaption>
	
</figure></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="c1">//goè¯­è¨€ä¸­çš„å‡½æ•°çš„returnä¸æ˜¯åŸå­æ“ä½œï¼Œåœ¨åº•å±‚æ˜¯åˆ†ä¸ºä¸¤æ­¥æ¥æ‰§è¡Œ
</span><span class="c1">//ç¬¬ä¸€æ­¥ï¼šè¿”å›å€¼èµ‹å€¼
</span><span class="c1">//ç¬¬äºŒæ­¥ï¼šçœŸæ­£çš„returnè¿”å›
</span><span class="c1">//å‡½æ•°ä¸­å¦‚æœå­˜åœ¨deferï¼Œé‚£ä¹ˆdeferæ‰§è¡Œçš„æ—¶æœºæ˜¯åœ¨ç¬¬ä¸€æ­¥å’Œç¬¬äºŒæ­¥ä¹‹é—´
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">f1</span><span class="p">())</span>  <span class="c1">//5
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">f2</span><span class="p">())</span>  <span class="c1">//6
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">f3</span><span class="p">())</span>  <span class="c1">//5
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">f3_1</span><span class="p">())</span>  <span class="c1">//[100 2]
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">func</span> <span class="nf">f1</span><span class="p">()</span> <span class="kt">int</span> <span class="p">{</span>
	<span class="nx">x</span> <span class="o">:=</span><span class="mi">5</span>
	<span class="k">defer</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
		<span class="nx">x</span><span class="o">++</span>  <span class="c1">//ä¿®æ”¹çš„æ˜¯xä¸æ˜¯è¿”å›å€¼
</span><span class="c1"></span>	<span class="p">}()</span>
	<span class="k">return</span> <span class="nx">x</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f2</span><span class="p">()</span> <span class="p">(</span><span class="nx">x</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">defer</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
		<span class="nx">x</span><span class="o">++</span>
	<span class="p">}()</span>
	<span class="k">return</span> <span class="mi">5</span>  <span class="c1">//è¿”å›å€¼æ˜¯x xåˆ++äº† æ‰€ä»¥è¿”å›6
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">func</span> <span class="nf">f3</span><span class="p">()</span> <span class="p">(</span><span class="nx">y</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">x</span><span class="o">:=</span><span class="mi">5</span>
	<span class="k">defer</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
		<span class="nx">x</span><span class="o">++</span>  <span class="c1">//æ˜¯å› ä¸ºintæ˜¯å€¼ç±»å‹ æ‰€ä»¥yæ˜¯æ‹·è´å€¼è€Œä¸æ˜¯æ‹·è´åœ°å€çš„åŸå› å—
</span><span class="c1"></span>	<span class="p">}()</span>
	<span class="k">return</span> <span class="nx">x</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f3_1</span><span class="p">()</span> <span class="p">(</span><span class="nx">y</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">x</span><span class="o">:=</span><span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">}</span>
	<span class="k">defer</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
		<span class="nx">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]=</span><span class="mi">100</span>   <span class="c1">//å› ä¸º[]int åˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹ æ‰€ä»¥yæ‹·è´çš„æ˜¯åœ°å€è€Œä¸æ˜¯å€¼
</span><span class="c1"></span>	<span class="p">}()</span>
	<span class="k">return</span> <span class="nx">x</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f4</span><span class="p">()</span> <span class="p">(</span><span class="nx">x</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">defer</span> <span class="kd">func</span><span class="p">(</span><span class="nx">x</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">x</span><span class="o">++</span>  <span class="c1">//æ”¹å˜çš„æ˜¯å‡½æ•°çš„å‰¯æœ¬
</span><span class="c1"></span>	<span class="p">}(</span><span class="nx">x</span><span class="p">)</span>  <span class="c1">//(x)ä»£è¡¨çš„æ˜¯ä¼ å…¥å‚æ•°
</span><span class="c1"></span>	<span class="k">return</span> <span class="mi">5</span>
<span class="p">}</span>
</code></pre></div><h3 id="å˜é‡-1">å˜é‡</h3>
<h5 id="å…¨å±€å˜é‡">å…¨å±€å˜é‡</h5>
<h5 id="å±€éƒ¨å˜é‡">å±€éƒ¨å˜é‡</h5>
<p>å±€éƒ¨å˜é‡åˆåˆ†ä¸ºä¸¤ç§ï¼Œå‡½æ•°å†…å®šä¹‰çš„å˜é‡æ— æ³•åœ¨è¯¥å‡½æ•°å¤–ä½¿ç”¨</p>
<p>å¦‚æœå±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡é‡åï¼Œä¼˜å…ˆè®¿é—®å±€éƒ¨å˜é‡</p>
<h5 id="è¯­å¥å—ä½œç”¨åŸŸ">è¯­å¥å—ä½œç”¨åŸŸ</h5>
<h4 id="å‡½æ•°ç±»å‹å’Œå˜é‡">å‡½æ•°ç±»å‹å’Œå˜é‡</h4>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨typeå…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ç±»å‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">calculation</span> <span class="kd">func</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="p">)</span> <span class="kt">int</span>
</code></pre></div><p>å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ç±»å‹ï¼Œè¿™ç§å‡½æ•°æ¥æ”¶ä¸¤ä¸ªintç±»å‹çš„å‚æ•°å¹¶ä¸”è¿”å›ä¸€ä¸ªintç±»å‹çš„è¿”å›å€¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T \n&#34;</span><span class="p">,</span><span class="nx">f1</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T \n&#34;</span><span class="p">,</span><span class="nx">f2</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T \n&#34;</span><span class="p">,</span><span class="nx">f3</span><span class="p">)</span>
	<span class="nf">f3</span><span class="p">(</span><span class="nx">f2</span><span class="p">)</span>

	<span class="nx">a</span> <span class="o">:=</span> <span class="nf">f4</span><span class="p">(</span><span class="nx">f2</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T\n&#34;</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f1</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;hello æ²™æ²³&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f2</span><span class="p">()</span> <span class="kt">int</span> <span class="p">{</span>
	<span class="k">return</span> <span class="mi">5</span>
<span class="p">}</span>
<span class="c1">//å‡½æ•°ä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°çš„ç±»å‹
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">f3</span><span class="p">(</span><span class="nx">x</span> <span class="kd">func</span><span class="p">()</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">x</span><span class="p">())</span>
<span class="p">}</span>

<span class="c1">//å‡½æ•°è¿˜å¯ä»¥ä½œä¸ºè¿”å›å€¼çš„ç±»å‹
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">f4</span><span class="p">(</span><span class="nx">x</span> <span class="kd">func</span><span class="p">()</span> <span class="kt">int</span><span class="p">)</span>  <span class="kd">func</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">f5</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f5</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">x</span><span class="o">+</span><span class="nx">y</span>
<span class="p">}</span>
</code></pre></div><h3 id="ä»Šæ—¥å†…å®¹">ä»Šæ—¥å†…å®¹</h3>
<h4 id="å‡½æ•°">å‡½æ•°</h4>
<h5 id="å‡½æ•°çš„å®šä¹‰">å‡½æ•°çš„å®šä¹‰</h5>
<h5 id="åŸºæœ¬æ ¼å¼">åŸºæœ¬æ ¼å¼</h5>
<p>å‚æ•°çš„æ ¼å¼</p>
<p>æœ‰å‚æ•°çš„å‡½æ•°</p>
<p>å‚æ•°ç±»å‹ç®€å†™</p>
<p>å¯å˜å‚æ•°</p>
<h5 id="è¿”å›å€¼çš„æ ¼å¼">è¿”å›å€¼çš„æ ¼å¼</h5>
<p>æœ‰è¿”å›å€¼</p>
<p>æ— è¿”å›å€¼</p>
<p>å‘½åè¿”å›å€¼</p>
<h5 id="å˜é‡çš„ä½œç”¨åŸŸ">å˜é‡çš„ä½œç”¨åŸŸ</h5>
<ol>
<li>å…¨å±€ä½œç”¨åŸŸ</li>
<li>å‡½æ•°ä½œç”¨åŸŸ
<ol>
<li>å…ˆåœ¨å‡½æ•°å†…éƒ¨æ‰¾å˜é‡ï¼Œæ‰¾ä¸åˆ°å¾€å¤–å±‚æ‰¾</li>
<li>å‡½æ•°å†…éƒ¨çš„å˜é‡ï¼Œå¤–éƒ¨è®¿é—®ä¸åˆ°</li>
</ol>
</li>
<li>ä»£ç å—ä½œç”¨åŸŸ</li>
</ol>
<h5 id="é«˜é˜¶å‡½æ•°">é«˜é˜¶å‡½æ•°</h5>
<p>å‡½æ•°ä¹Ÿæ˜¯ä¸€ç§ç±»å‹ï¼Œå®ƒå¯ä»¥ä½œä¸ºä¸€ç§å‚æ•°ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºè¿”å›å€¼</p>
<h5 id="åŒ¿åå‡½æ•°">åŒ¿åå‡½æ•°</h5>
<p>æ²¡æœ‰åå­—çš„å‡½æ•°</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nb">println</span><span class="p">(</span><span class="nf">a</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
   <span class="c1">//ä½†æ˜¯é€šå¸¸åŒ¿åå‡½æ•°ä¸æ˜¯è¿™ä¹ˆç”¨çš„ é€šå¸¸æ˜¯ç”±äºå‡½æ•°å†…éƒ¨ä¸å…è®¸å®šä¹‰å‡½æ•°ï¼Œæ‰€ä»¥ä½¿ç”¨åŒ¿åå‡½æ•°ç°å†™ç°ç”¨
</span><span class="c1"></span>   <span class="nx">a</span><span class="o">:=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">x</span><span class="o">+</span><span class="nx">y</span>
   <span class="p">}</span>
   <span class="nb">println</span><span class="p">(</span><span class="nf">a</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>
   <span class="c1">//å¦‚æœåªæ˜¯è°ƒç”¨ä¸€æ¬¡çš„å‡½æ•°ï¼Œè¿˜å¯ä»¥ç®€å†™æˆç«‹å³æ‰§è¡Œå‡½æ•°
</span><span class="c1"></span>   <span class="nx">i</span> <span class="o">:=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">y</span>
   <span class="p">}(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">a</span> <span class="p">=</span> <span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
   <span class="k">return</span> <span class="nx">x</span>
<span class="p">}</span>
</code></pre></div><h5 id="é—­åŒ…">é—­åŒ…</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nf">f1</span><span class="p">(</span><span class="nf">f3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
	<span class="nf">f1</span><span class="p">(</span><span class="nf">f4</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
	<span class="nf">f1</span><span class="p">(</span><span class="nf">f5</span><span class="p">(</span><span class="nx">f2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f1</span><span class="p">(</span><span class="nx">f</span> <span class="kd">func</span><span class="p">())</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;this is f1&#34;</span><span class="p">)</span>
	<span class="nf">f</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f2</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;this is f2&#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">x</span><span class="o">+</span><span class="nx">y</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">//å¦‚ä½•è®©f1è°ƒç”¨çš„æ—¶å€™æ‰§è¡Œf2 ä¹Ÿå°±æ˜¯ä¸¤ä¸ªåŒäº‹å†™çš„ä»£ç ç›¸äº’å…¼å®¹
</span><span class="c1">//ç”±äºf1çš„å½¢å‚æ˜¯ä¸€ä¸ªæ— å½¢å‚æ— è¿”å›å€¼çš„å‡½æ•°ç±»å‹ï¼Œå› æ­¤éœ€è¦æ„é€ ä¸€ä¸ªå‡½æ•°ï¼Œè®©å…¶è¿”å›å€¼æ˜¯æ— å½¢å‚æ— è¿”å›å€¼çš„å‡½æ•°ç±»å‹f3
</span><span class="c1">//å½“ç„¶ä¸ºäº†å…¼å®¹f2ï¼Œf3çš„å½¢å‚éœ€è¦å’Œf2çš„å½¢å‚ç›¸åŒ¹é…ï¼Œè¿™æ ·ä¸€æ¥åœ¨æ‰§è¡Œf3çš„æ—¶å€™ï¼Œå†…éƒ¨è°ƒç”¨äº†f2ï¼Œå¹¶ä¸”è¿”å›ç±»å‹æ»¡è¶³f1æ‰€éœ€
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">f3</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span> <span class="kt">int</span><span class="p">)</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
	 <span class="kd">func</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span> <span class="kt">int</span><span class="p">)</span>  <span class="p">{</span>
		 <span class="nf">f2</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span>
	<span class="p">}(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span>
	<span class="k">return</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f4</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="kt">int</span><span class="p">)</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
	<span class="k">return</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
		<span class="nf">f2</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f5</span><span class="p">(</span><span class="nx">f</span> <span class="kd">func</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">),</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="kt">int</span><span class="p">)</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//æŠŠåŸæ¥éœ€è¦ä¼ é€’ä¸¤ä¸ªintç±»å‹çš„å‚æ•°åŒ…è£…æˆä¸€ä¸ªä¸éœ€è¦ä¼ å‚çš„å‡½æ•°
</span><span class="c1"></span>	<span class="k">return</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
		<span class="nf">f</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>é—­åŒ…=å‡½æ•° + å¤–éƒ¨å˜é‡çš„å¼•ç”¨</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//é—­åŒ…æ˜¯ä»€ä¹ˆ
</span><span class="c1"></span>	<span class="c1">//é—­åŒ…æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°åŒ…å«äº†ä»–å¤–éƒ¨ä½œç”¨åŸŸçš„ä¸€ä¸ªå˜é‡
</span><span class="c1"></span>	<span class="c1">//åº•å±‚
</span><span class="c1"></span>	<span class="c1">//1.å‡½æ•°å¯ä»¥ä½œä¸ºè¿”å›å€¼
</span><span class="c1"></span>	<span class="c1">//2.å‡½æ•°å†…éƒ¨æŸ¥æ‰¾å˜é‡çš„é¡ºåºï¼Œå…ˆåœ¨è‡ªå·±å†…éƒ¨æ‰¾ï¼Œæ‰¾ä¸åˆ°å¾€å¤–å±‚æ‰¾
</span><span class="c1"></span>	<span class="nx">ret</span> <span class="o">:=</span> <span class="nf">adder</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
	<span class="nx">i</span><span class="o">:=</span> <span class="nf">ret</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">adder</span><span class="p">(</span><span class="nx">x</span> <span class="kt">int</span><span class="p">)</span> <span class="kd">func</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
	<span class="k">return</span> <span class="kd">func</span><span class="p">(</span><span class="nx">y</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
		<span class="nx">x</span> <span class="o">+=</span><span class="nx">y</span>
		<span class="k">return</span> <span class="nx">x</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;strings&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">suffixFunc</span><span class="o">:=</span> <span class="nf">makeSuffixFunc</span><span class="p">(</span><span class="s">&#34;.jpg&#34;</span><span class="p">)</span>
	<span class="nx">f</span> <span class="o">:=</span> <span class="nf">makeSuffixFunc</span><span class="p">(</span><span class="s">&#34;.txt&#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">suffixFunc</span><span class="p">(</span><span class="s">&#34;text&#34;</span><span class="p">))</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">f</span><span class="p">(</span><span class="s">&#34;text&#34;</span><span class="p">))</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">makeSuffixFunc</span><span class="p">(</span><span class="nx">suffix</span> <span class="kt">string</span><span class="p">)</span> <span class="kd">func</span><span class="p">(</span><span class="nx">string2</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span><span class="p">{</span>
	<span class="k">return</span> <span class="kd">func</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">!</span><span class="nx">strings</span><span class="p">.</span><span class="nf">HasSuffix</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">suffix</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span> <span class="nx">name</span><span class="o">+</span><span class="nx">suffix</span>
		<span class="p">}</span>
		<span class="k">return</span> <span class="nx">name</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">f</span><span class="p">,</span> <span class="nx">f2</span> <span class="o">:=</span> <span class="nf">calc</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">f</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="nf">f2</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>   <span class="c1">//11 9
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">f</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="nf">f2</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>	  <span class="c1">//12 8
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">f</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="nf">f2</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>	  <span class="c1">//13 7
</span><span class="c1"></span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">calc</span><span class="p">(</span><span class="nx">base</span> <span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="kt">int</span> <span class="p">,</span><span class="kd">func</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">add</span> <span class="o">:=</span><span class="kd">func</span><span class="p">(</span><span class="nx">i</span> <span class="kt">int</span><span class="p">)</span><span class="kt">int</span><span class="p">{</span>
		<span class="nx">base</span><span class="o">+=</span><span class="nx">i</span>
		<span class="k">return</span> <span class="nx">base</span>
	<span class="p">}</span>
	<span class="nx">sub</span> <span class="o">:=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">i</span> <span class="kt">int</span><span class="p">)</span><span class="kt">int</span><span class="p">{</span>
		<span class="nx">base</span><span class="o">-=</span><span class="nx">i</span>
		<span class="k">return</span> <span class="nx">base</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">add</span><span class="p">,</span><span class="nx">sub</span>

<span class="p">}</span>
</code></pre></div><h5 id="deferè¿›é˜¶">deferè¿›é˜¶</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">a</span><span class="o">:=</span><span class="mi">1</span>
	<span class="nx">b</span><span class="o">:=</span><span class="mi">2</span>
	<span class="k">defer</span> <span class="nf">calc</span><span class="p">(</span><span class="s">&#34;1&#34;</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nf">calc</span><span class="p">(</span><span class="s">&#34;10&#34;</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">))</span>
	<span class="nx">a</span><span class="p">=</span><span class="mi">0</span>
	<span class="k">defer</span> <span class="nf">calc</span><span class="p">(</span><span class="s">&#34;2&#34;</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nf">calc</span><span class="p">(</span><span class="s">&#34;20&#34;</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">))</span>
	<span class="nx">b</span><span class="p">=</span><span class="mi">1</span>
	<span class="c1">//deferä¼šå…ˆæŠŠé¢„å®šçš„å€¼å…ˆç®—å‡ºæ¥ç­‰ç€æœ€åæ‰§è¡Œå‡½æ•°
</span><span class="c1"></span>	<span class="c1">//defer calc(&#34;1&#34;,1,calc(&#34;10&#34;,1,2))
</span><span class="c1"></span>	<span class="c1">//è¾“å‡º &#34;10&#34; 1 2 3
</span><span class="c1"></span>	<span class="c1">//defer calc(&#34;1&#34;,1,3)
</span><span class="c1"></span>	<span class="c1">//a=0
</span><span class="c1"></span>	<span class="c1">//defer calc(&#34;2&#34;,1,calc(&#34;20&#34;,0,2))
</span><span class="c1"></span>	<span class="c1">//è¾“å‡º &#34;20&#34; 0 2 2
</span><span class="c1"></span>	<span class="c1">//defer calc(&#34;2&#34;,0,2)
</span><span class="c1"></span>	<span class="c1">//b=1
</span><span class="c1"></span>	<span class="c1">//ç¨‹åºé€€å‡º
</span><span class="c1"></span>	<span class="c1">//æ‰§è¡Œ defer calc(&#34;2&#34;,0,2)
</span><span class="c1"></span>	<span class="c1">//è¾“å‡º &#34;2&#34; 0 2 2
</span><span class="c1"></span>	<span class="c1">//æ‰§è¡Œ defer calc(&#34;1&#34;,1,3)
</span><span class="c1"></span>	<span class="c1">//è¾“å‡º &#34;1&#34; 1 3 4
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">func</span> <span class="nf">calc</span><span class="p">(</span><span class="nx">index</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
	<span class="nx">ret</span> <span class="o">:=</span><span class="nx">a</span><span class="o">+</span><span class="nx">b</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">ret</span><span class="p">)</span>
	<span class="k">return</span> <span class="nx">ret</span>
<span class="p">}</span>
</code></pre></div><h5 id="å†…ç½®å‡½æ•°ä»‹ç»">å†…ç½®å‡½æ•°ä»‹ç»</h5>
<p>close ä¸»è¦ç”¨æ¥å…³é—­channel</p>
<p>len ç”¨æ¥æ±‚é•¿åº¦ string array slice map channel</p>
<p>new ç”¨æ¥åˆ†é…å†…å­˜ï¼Œä¸»è¦ç”¨æ¥åˆ†é…å€¼ç±»å‹ï¼Œæ¯”å¦‚int struct è¿”å›çš„æ˜¯æŒ‡é’ˆ</p>
<p>make ç”¨æ¥åˆ†é…å†…å­˜ï¼Œä¸»è¦ç”¨æ¥åˆ†é…å¼•ç”¨ç±»å‹ï¼Œæ¯”å¦‚chan map slice</p>
<p>append ç”¨æ¥è¿½åŠ å…ƒç´ åˆ°æ•°ç»„ sliceä¸­</p>
<p>panicå’Œrecover ç”¨æ¥åšé”™è¯¯å¤„ç†</p>
<h5 id="panicrecover">panic/recover</h5>
<p>goè¯­è¨€ä¸­ç›®å‰æ˜¯æ²¡æœ‰å¼‚å¸¸æœºåˆ¶çš„ï¼Œä½†æ˜¯ä½¿ç”¨panic/recoveræ¨¡å¼æ¥å¤„ç†é”™è¯¯ã€‚panicå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å¼•å‘ï¼Œä½†recoveråªæœ‰åœ¨deferè°ƒç”¨çš„å‡½æ•°ä¸­æœ‰æ•ˆã€‚</p>
<p>ç¨‹åºè¿è¡ŒæœŸé—´funcBå¦‚æœå¼•å‘äº†panicå¯¼è‡´çš„ç¨‹åºå´©æºƒï¼Œå¼‚å¸¸é€€å‡ºäº†ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡recoverå°†ç¨‹åºæ¢å¤å›æ¥ï¼Œç»§ç»­å¾€åæ‰§è¡Œã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nf">A</span><span class="p">()</span>
	<span class="nf">B</span><span class="p">()</span>
	<span class="nf">C</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">A</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;A&#34;</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">B</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//å‡è®¾æ­¤æ—¶æ‰“å¼€äº†ä¸ªæ•°æ®åº“è¿æ¥
</span><span class="c1"></span>	<span class="k">defer</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
		<span class="kt">error</span> <span class="o">:=</span> <span class="nb">recover</span><span class="p">()</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="kt">error</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;è¦å°è¯•åœ¨å‡ºé”™çš„æ—¶å€™é‡Šæ”¾æ•°æ®åº“è¿æ¥...&#34;</span><span class="p">)</span>
	<span class="p">}()</span>
	<span class="nb">panic</span><span class="p">(</span><span class="s">&#34;fatal error!&#34;</span><span class="p">)</span>  <span class="c1">//ç¨‹åºå¥”æºƒé€€å‡º
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;B&#34;</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">C</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;C&#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><p>æ³¨æ„ï¼š</p>
<ol>
<li>recoverå¿…é¡»æ­é…deferä½¿ç”¨</li>
<li>deferä¸€å®šè¦åœ¨å¯èƒ½å¼•å‘panicçš„è¯­å¥ä¹‹å‰å®šä¹‰</li>
</ol>
<h4 id="goè¯­è¨€fmtprintfä½¿ç”¨æŒ‡å—">goè¯­è¨€fmt.printfä½¿ç”¨æŒ‡å—</h4>
<h5 id="fmt">fmt</h5>
<p>fmtåŒ…å®ç°äº†ç±»ä¼¼Cè¯­è¨€printfå’Œscanfçš„æ ¼å¼åŒ–I/O ä¸»è¦åˆ†ä¸ºå‘å¤–è¾“å‡ºå†…å®¹å’Œè·å–è¾“å…¥å†…å®¹ä¸¤å¤§éƒ¨åˆ†</p>
<h5 id="å‘å¤–è¾“å‡º">å‘å¤–è¾“å‡º</h5>
<p>print ç›´æ¥è¾“å‡º</p>
<p>printlnè¾“å‡ºå¸¦æ¢è¡Œç¬¦</p>
<p>printfæ ¼å¼åŒ–è¾“å‡º</p>
<table>
<thead>
<tr>
<th>å ä½ç¬¦</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>%v</td>
<td>å€¼çš„é»˜è®¤æ ¼å¼</td>
</tr>
<tr>
<td>%+v</td>
<td>ç±»ä¼¼%v,ä½†è¾“å‡ºç»“æ„ä½“æ—¶ä¼šæ·»åŠ å­—æ®µå</td>
</tr>
<tr>
<td>%#v</td>
<td>å€¼çš„goè¯­æ³•è¡¨ç¤º</td>
</tr>
<tr>
<td>%T</td>
<td>æ‰“å°å€¼çš„ç±»å‹</td>
</tr>
<tr>
<td>%%</td>
<td>ç™¾åˆ†å·</td>
</tr>
<tr>
<td>%t</td>
<td>å¸ƒå°”å€¼</td>
</tr>
<tr>
<td>%b</td>
<td>å¯¹äºæ•´å‹è€Œè¨€ï¼Œæ˜¯äºŒè¿›åˆ¶æ•°ï¼Œå¯¹äºæµ®ç‚¹æ•°è€Œè¨€ï¼Œæ˜¯äºŒè¿›åˆ¶æŒ‡æ•°çš„ç§‘å­¦è®¡æ•°æ³•</td>
</tr>
<tr>
<td>%c</td>
<td></td>
</tr>
<tr>
<td>%d</td>
<td></td>
</tr>
<tr>
<td>%o</td>
<td></td>
</tr>
<tr>
<td>%x</td>
<td></td>
</tr>
<tr>
<td>%X</td>
<td></td>
</tr>
<tr>
<td>%U</td>
<td></td>
</tr>
<tr>
<td>%q</td>
<td></td>
</tr>
<tr>
<td>%e</td>
<td>ç§‘å­¦è®¡æ•°æ³•</td>
</tr>
<tr>
<td>%E</td>
<td>ç§‘å­¦è®¡æ•°æ³•</td>
</tr>
<tr>
<td>%f</td>
<td></td>
</tr>
<tr>
<td>%F</td>
<td></td>
</tr>
<tr>
<td>%g</td>
<td>æ ¹æ®å®é™…æƒ…å†µé‡‡ç”¨%eæˆ–%fæ ¼å¼ï¼ˆä»¥è·å¾—æ›´ç®€æ´ã€å‡†ç¡®çš„è¾“å‡ºï¼‰</td>
</tr>
<tr>
<td>%G</td>
<td></td>
</tr>
<tr>
<td>%s</td>
<td></td>
</tr>
<tr>
<td>%q</td>
<td></td>
</tr>
<tr>
<td>%x</td>
<td>æ¯ä¸ªå­—èŠ‚ç”¨ä¸¤å­—ç¬¦åå…­è¿›åˆ¶æ•°è¡¨ç¤º</td>
</tr>
<tr>
<td>%9f</td>
<td>å®½åº¦9ï¼Œé»˜è®¤ç²¾åº¦</td>
</tr>
<tr>
<td>%9.2f</td>
<td>å®½åº¦9ï¼Œç²¾åº¦2</td>
</tr>
<tr>
<td>%5.2s</td>
<td>ä¸€å…±5ä¸ª ä¿ç•™2ä¸ª</td>
</tr>
<tr>
<td>%-5s</td>
<td>æœ‰ç©ºæ ¼è¡¥åœ¨å‰é¢</td>
</tr>
</tbody>
</table>
<h5 id="è·å–è¾“å…¥">è·å–è¾“å…¥</h5>
<p>fmt.scan fmt.scanf fmt.scanln</p>
<ul>
<li>scanä»æ ‡å‡†è¾“å…¥æ‰«ææ–‡æœ¬ï¼Œè¯»å–ç”±ç©ºç™½ç¬¦åˆ†å‰²çš„å€¼ä¿å­˜åˆ°ä¼ é€’ç»™æœ¬å‡½æ•°çš„å‚æ•°ä¸­ï¼Œæ¢è¡Œç¬¦è§†ä¸ºç©ºç™½ç¬¦</li>
<li>æœ¬å‡½æ•°è¿”å›æˆåŠŸæ‰«æçš„æ•°æ®ä¸ªæ•°å’Œé‡åˆ°çš„ä»»ä½•é”™è¯¯ï¼Œå¦‚æœè¯»å–çš„æ•°æ®ä¸ªæ•°æ¯”æä¾›çš„å‚æ•°å°‘ï¼Œä¼šè¿”å›ä¸€ä¸ªé”™è¯¯æŠ¥å‘ŠåŸå› </li>
</ul>
<p>sprint</p>
<p>sprintç³»åˆ—å‡½æ•°ä¼šæŠŠä¼ å…¥çš„æ•°æ®ç”Ÿæˆå¹¶è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Print</span><span class="p">(</span><span class="s">&#34;hello world&#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;hello world&#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%p&#34;</span><span class="p">,</span><span class="s">&#34;helloworld&#34;</span><span class="p">)</span>

	<span class="c1">//%d åè¿›åˆ¶
</span><span class="c1"></span>	<span class="c1">//%v å€¼
</span><span class="c1"></span>	<span class="c1">//%o å…«è¿›åˆ¶
</span><span class="c1"></span>	<span class="c1">//%x åå…­è¿›åˆ¶
</span><span class="c1"></span>	<span class="c1">//%T ç±»å‹
</span><span class="c1"></span>	<span class="c1">//%s å­—ç¬¦ä¸²
</span><span class="c1"></span>	<span class="c1">//%p æŒ‡é’ˆ
</span><span class="c1"></span>	<span class="c1">//%b äºŒè¿›åˆ¶
</span><span class="c1"></span>	<span class="c1">//%c å­—ç¬¦s
</span><span class="c1"></span>	<span class="c1">//%f æµ®ç‚¹æ•°
</span><span class="c1"></span>	<span class="c1">//%t å¸ƒå°”å€¼
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">()</span>
	<span class="kd">var</span> <span class="nx">m</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span>
	<span class="nx">m</span><span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">)</span>
	<span class="nx">m</span><span class="p">[</span><span class="s">&#34;ljs&#34;</span><span class="p">]=</span><span class="mi">98</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v\n&#34;</span><span class="p">,</span><span class="nx">m</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v\n&#34;</span><span class="p">,</span><span class="nx">m</span><span class="p">)</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%q\n&#34;</span><span class="p">,</span><span class="mi">65</span><span class="p">)</span>
	<span class="nf">printfPersentage</span><span class="p">(</span><span class="mi">98</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%b\n&#34;</span><span class="p">,</span><span class="mf">5.6</span><span class="p">)</span>

	<span class="nx">n</span><span class="o">:=</span><span class="mf">12.34</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%f\n&#34;</span><span class="p">,</span><span class="nx">n</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%9f\n&#34;</span><span class="p">,</span><span class="nx">n</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%.2f\n&#34;</span><span class="p">,</span><span class="nx">n</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%9.2f\n&#34;</span><span class="p">,</span><span class="nx">n</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%9.f\n&#34;</span><span class="p">,</span><span class="nx">n</span><span class="p">)</span>

	<span class="nx">s</span><span class="o">:=</span><span class="s">&#34;å°ç‹å­&#34;</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%s\n&#34;</span><span class="p">,</span><span class="nx">s</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%5s\n&#34;</span><span class="p">,</span><span class="nx">s</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%-5s\n&#34;</span><span class="p">,</span><span class="nx">s</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%5.7s\n&#34;</span><span class="p">,</span><span class="nx">s</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%-5.7s\n&#34;</span><span class="p">,</span><span class="nx">s</span><span class="p">)</span>
	<span class="c1">//ä¸€å…±5ä¸ª åªç•™2ä¸ª
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%5.2s\n&#34;</span><span class="p">,</span><span class="nx">s</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%05s\n&#34;</span><span class="p">,</span><span class="nx">s</span><span class="p">)</span>

	<span class="kd">var</span> <span class="nx">s1</span> <span class="kt">string</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">s1</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s1</span><span class="p">)</span>

	<span class="kd">var</span> <span class="p">(</span>
		<span class="nx">name</span> <span class="kt">string</span>
		<span class="nx">age</span> <span class="kt">int</span>
		<span class="nx">class</span> <span class="kt">string</span>
	<span class="p">)</span>
	<span class="c1">//fmt.Scanf(&#34;%s %d %s\n&#34;,&amp;name,&amp;age,&amp;class)
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%s %d %s\n&#34;</span><span class="p">,</span><span class="nx">name</span><span class="p">,</span><span class="nx">age</span><span class="p">,</span><span class="nx">class</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scanln</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">name</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">age</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">class</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%s %d %s\n&#34;</span><span class="p">,</span><span class="nx">name</span><span class="p">,</span><span class="nx">age</span><span class="p">,</span><span class="nx">class</span><span class="p">)</span>

<span class="p">}</span>

<span class="kd">func</span> <span class="nf">printfPersentage</span><span class="p">(</span><span class="nx">a</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d%%\n&#34;</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h5 id="ä»Šæ—¥éš¾ç‚¹">ä»Šæ—¥éš¾ç‚¹</h5>
<ol>
<li>å‡½æ•°çš„å®šä¹‰</li>
<li>é«˜é˜¶å‡½æ•°</li>
<li>å‡½æ•°ç±»å‹</li>
<li>é—­åŒ…</li>
<li>defer</li>
<li>panic/recover</li>
</ol>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210802002337782.png" >
		<img src="/GoLearning.assets/image-20210802002337782.png"
			
			
			
			loading="lazy"
			alt="image-20210802002337782">
	</a>
	
	<figcaption>image-20210802002337782</figcaption>
	
</figure></p>
<h4 id="ç»“æ„ä½“-struct">ç»“æ„ä½“ struct</h4>
<p>æ–¹æ³•</p>
<p>å®é™…ä¸Šç±»ä¼¼äºç±»</p>
<h4 id="å†…å®¹å›é¡¾-2">å†…å®¹å›é¡¾</h4>
<p>å‡½æ•°çš„å®šä¹‰</p>
<p>func name () è¿”å›å€¼ {}</p>
<p>å‡½æ•°è¿›é˜¶</p>
<ul>
<li>
<p>â€‹	é«˜é˜¶å‡½æ•°ï¼šå‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºè¿”å›å€¼</p>
</li>
<li>
<p>â€‹	é—­åŒ…ï¼šå‡½æ•°å’Œå…¶å¤–éƒ¨å˜é‡çš„å¼•ç”¨</p>
</li>
<li>
<p>â€‹	deferï¼šå»¶è¿Ÿè°ƒç”¨ å¤šç”¨äºå¤„ç†èµ„æºé‡Šæ”¾</p>
</li>
<li>
<p>â€‹	å†…ç½®å‡½æ•°ï¼š</p>
<ul>
<li>â€‹		panic/recover</li>
</ul>
</li>
</ul>
<h5 id="é€’å½’">é€’å½’</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//é€’å½’:è‡ªå·±è°ƒç”¨è‡ªå·±
</span><span class="c1"></span>	<span class="c1">//é€’å½’é€‚åˆå¤„ç†é‚£ç§é—®é¢˜ç›¸åŒä½†æ˜¯è§„æ¨¡è¶Šæ¥è¶Šå°çš„åœºæ™¯
</span><span class="c1"></span>	<span class="c1">//é€’å½’ä¸€å®šè¦æœ‰ä¸€ä¸ªæ˜ç¡®çš„é€€å‡ºæ¡ä»¶
</span><span class="c1"></span>	<span class="nb">println</span><span class="p">(</span><span class="nf">Factorial</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">taijie</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">Factorial</span><span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="nx">result</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">n</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">{</span>
		<span class="k">return</span> <span class="mi">1</span>
	<span class="p">}</span> <span class="k">else</span><span class="p">{</span>
		<span class="nx">result</span> <span class="p">=</span><span class="nx">n</span> <span class="o">*</span> <span class="nf">Factorial</span><span class="p">(</span><span class="nx">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
		<span class="k">return</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="c1">//ä¸Šå°é˜¶é¢è¯•é¢˜
</span><span class="c1">//nä¸ªå°é˜¶ ä¸€æ¬¡å¯ä»¥èµ°1æ­¥ ä¸€æ¬¡å¯ä»¥èµ°2æ­¥ æœ‰å¤šå°‘ç§èµ°æ³•
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">taijie</span><span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="nx">result</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">n</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">{</span>
		<span class="nx">result</span> <span class="p">=</span><span class="mi">1</span>  <span class="c1">//å¦‚æœåªæœ‰1ä¸ªå°é˜¶å°±ä¸€ç§èµ°æ³•
</span><span class="c1"></span>		<span class="k">return</span>
	<span class="p">}</span><span class="k">else</span> <span class="k">if</span> <span class="nx">n</span> <span class="o">==</span> <span class="mi">2</span> <span class="p">{</span>
		<span class="k">return</span> <span class="mi">2</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nf">taijie</span><span class="p">(</span><span class="nx">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="nf">taijie</span><span class="p">(</span><span class="nx">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h5 id="è‡ªå®šä¹‰ç±»å‹å’Œç±»å‹åˆ«å">è‡ªå®šä¹‰ç±»å‹å’Œç±»å‹åˆ«å</h5>
<p>åœ¨goè¯­è¨€ä¸­æœ‰ä¸€äº›åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œå¦‚string bool int floatç­‰æ•°æ®ç±»å‹ï¼Œgoè¯­è¨€ä¸­å¯ä»¥ä½¿ç”¨typeå…³é”®å­—æ¥å®šä¹‰è‡ªå®šä¹‰ç±»å‹</p>
<p>è‡ªå®šä¹‰ç±»å‹æ˜¯å®šä¹‰äº†ä¸€ä¸ªå…¨æ–°çš„ç±»å‹ã€‚æˆ‘ä»¬å¯ä»¥åŸºäºå†…ç½®çš„åŸºæœ¬ç±»å‹å®šä¹‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡structå®šä¹‰</p>
<p>ç±»å‹åˆ«åè§„å®štypealiasåªæ˜¯typeçš„åˆ«åï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç±»å‹ï¼Œè¿™äº›åå­—éƒ½æŒ‡å‘ä¸€ä¸ªç±»å‹</p>
<p>åŒºåˆ« ï¼š è‡ªå®šä¹‰ç±»å‹ç¼–è¯‘åç±»å‹æ˜¯è‡ªå®šä¹‰çš„ ç±»å‹åˆ«ååªä¼šåœ¨ä»£ç ä¸­å­˜åœ¨ï¼Œç¼–è¯‘å®Œæˆåªä¼šæœ‰åŸç±»å‹</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210806225811170.png" >
		<img src="/GoLearning.assets/image-20210806225811170.png"
			
			
			
			loading="lazy"
			alt="image-20210806225811170">
	</a>
	
	<figcaption>image-20210806225811170</figcaption>
	
</figure></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="c1">//typeåé¢è·Ÿçš„æ˜¯ç±»å‹
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">myInt</span> <span class="kt">int</span> <span class="c1">//è‡ªå®šä¹‰ç±»å‹
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">yourInt</span> <span class="p">=</span> <span class="kt">int</span> <span class="c1">//ç±»å‹åˆ«å
</span><span class="c1"></span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//è‡ªå®šä¹‰ç±»å‹å’Œç±»å‹åˆ«å
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">n</span> <span class="nx">myInt</span>
	<span class="nx">n</span> <span class="p">=</span> <span class="mi">100</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T\n&#34;</span><span class="p">,</span><span class="nx">n</span><span class="p">)</span>

	<span class="kd">var</span> <span class="nx">m</span> <span class="nx">yourInt</span>
	<span class="nx">m</span> <span class="p">=</span> <span class="mi">100</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T\n&#34;</span><span class="p">,</span><span class="nx">m</span><span class="p">)</span>

	<span class="kd">var</span> <span class="nx">r</span> <span class="kt">rune</span>
	<span class="nx">r</span> <span class="p">=</span> <span class="sc">&#39;ä¸­&#39;</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%c\n&#34;</span><span class="p">,</span><span class="nx">r</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T\n&#34;</span><span class="p">,</span><span class="nx">r</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h4 id="ç»“æ„ä½“">ç»“æ„ä½“</h4>
<p>goè¯­è¨€ä¸­æ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œä¹Ÿä¸æ”¯æŒç±»çš„ç»§æ‰¿ç­‰é¢å‘å¯¹è±¡çš„æ¦‚å¿µã€‚goè¯­è¨€ä¸­é€šè¿‡ç»“æ„ä½“çš„å†…åµŒå†é…åˆæ¥å£æ¯”é¢å‘å¯¹è±¡å…·æœ‰æ›´é«˜çš„æ‰©å±•æ€§å’Œçµæ´»æ€§ã€‚</p>
<p>goè¯­è¨€ä¸­çš„åŸºç¡€æ•°æ®ç±»å‹å¯ä»¥è¡¨ç¤ºä¸€äº›äº‹åŠ¡çš„åŸºæœ¬å±æ€§ï¼Œä½†æ˜¯å½“æˆ‘ä»¬æƒ³è¡¨è¾¾ä¸€ä¸ªäº‹åŠ¡çš„å…¨éƒ¨æˆ–è€…éƒ¨åˆ†å±æ€§æ—¶ï¼Œè¿™æ—¶å€™å†ç”¨ä¸€äº›åŸºæœ¬æ•°æ®ç±»å‹æ˜æ˜¾å°±æ— æ³•æ»¡è¶³éœ€æ±‚äº†ï¼Œgoè¯­è¨€æä¾›äº†ä¸€ç§è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œå¯ä»¥å°è£…å¤šä¸ªåŸºæœ¬æ•°æ®ç±»å‹ï¼Œè¿™ç§æ•°æ®ç±»å‹å«ç»“æ„ä½“ï¼Œè‹±æ–‡åç§°struct ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡structæ¥å®šä¹‰è‡ªå·±çš„ç±»å‹</p>
<p>goè¯­è¨€ä¸­é€šè¿‡structæ¥å®ç°é¢å‘å¯¹è±¡</p>
<h5 id="ç»“æ„ä½“çš„å®šä¹‰">ç»“æ„ä½“çš„å®šä¹‰</h5>
<p>ä½¿ç”¨typeå’Œstructå…³é”®å­—æ¥å®šä¹‰ç»“æ„ä½“</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="c1">//ç»“æ„ä½“
</span><span class="c1"></span>
<span class="kd">type</span> <span class="nx">person</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">name</span> <span class="kt">string</span>
	<span class="nx">age</span> <span class="kt">int</span>
	<span class="nx">hobby</span> <span class="p">[]</span><span class="kt">string</span>
	<span class="nx">gender</span> <span class="kt">string</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//å£°æ˜ä¸€ä¸ªpersonç±»å‹çš„å˜é‡
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">f</span> <span class="nx">person</span>
	<span class="c1">//é€šè¿‡å­—æ®µèµ‹å€¼
</span><span class="c1"></span>	<span class="nx">f</span><span class="p">.</span><span class="nx">gender</span> <span class="p">=</span> <span class="s">&#34;ç”·&#34;</span>
	<span class="nx">f</span><span class="p">.</span><span class="nx">hobby</span> <span class="p">=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">string</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
	<span class="nx">f</span><span class="p">.</span><span class="nx">hobby</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">=</span><span class="s">&#34;football&#34;</span>
	<span class="nx">f</span><span class="p">.</span><span class="nx">hobby</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">=</span><span class="s">&#34;basketball&#34;</span>
	<span class="nx">f</span><span class="p">.</span><span class="nx">age</span> <span class="p">=</span> <span class="mi">18</span>
	<span class="nx">f</span><span class="p">.</span><span class="nx">name</span> <span class="p">=</span> <span class="s">&#34;ljs&#34;</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T\n&#34;</span><span class="p">,</span><span class="nx">f</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">hobby</span><span class="p">)</span>

	<span class="kd">var</span> <span class="nx">f1</span> <span class="nx">person</span>
	<span class="nx">f1</span><span class="p">.</span><span class="nx">name</span> <span class="p">=</span> <span class="s">&#34;jwt&#34;</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">f1</span><span class="p">)</span>
<span class="p">}</span>

	<span class="c1">//åŒ¿åç»“æ„ä½“  å¤šç”¨äºä¸´æ—¶åœºæ™¯
</span><span class="c1"></span>	<span class="nx">s</span> <span class="o">:=</span> <span class="kd">struct</span> <span class="p">{</span>
		<span class="nx">name</span> <span class="kt">string</span>
		<span class="nx">age</span>  <span class="kt">int</span>
	<span class="p">}{</span><span class="nx">age</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span><span class="nx">name</span><span class="p">:</span> <span class="s">&#34;fyz&#34;</span><span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>

	<span class="kd">var</span> <span class="nx">s1</span> <span class="p">=</span> <span class="kd">struct</span> <span class="p">{</span>
		<span class="nx">name</span> <span class="kt">string</span>
		<span class="nx">sex</span>  <span class="kt">int</span>
	<span class="p">}{</span><span class="nx">sex</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span><span class="nx">name</span><span class="p">:</span><span class="s">&#34;lje&#34;</span><span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s1</span><span class="p">)</span>
</code></pre></div><p>ç»“æ„ä½“æ˜¯å€¼ç±»å‹</p>
<h5 id="åœ¨goè¯­è¨€ä¸­åªå­˜åœ¨å€¼ä¼ é€’è¦ä¹ˆæ˜¯è¯¥å€¼çš„å‰¯æœ¬è¦ä¹ˆæ˜¯æŒ‡é’ˆçš„å‰¯æœ¬ä¸å­˜åœ¨å¼•ç”¨ä¼ é€’ä¹‹æ‰€ä»¥å¯¹äºå¼•ç”¨ç±»å‹çš„ä¼ é€’å¯ä»¥ä¿®æ”¹åŸå†…å®¹æ•°æ®æ˜¯å› ä¸ºåœ¨åº•å±‚é»˜è®¤ä½¿ç”¨è¯¥å¼•ç”¨ç±»å‹çš„æŒ‡é’ˆè¿›è¡Œä¼ é€’ä½†æ˜¯ä¹Ÿæ˜¯ä½¿ç”¨æŒ‡é’ˆçš„å‰¯æœ¬ä¾æ—§æ˜¯å€¼ä¼ é€’">åœ¨Goè¯­è¨€ä¸­åªå­˜åœ¨å€¼ä¼ é€’ï¼ˆè¦ä¹ˆæ˜¯è¯¥å€¼çš„å‰¯æœ¬ï¼Œè¦ä¹ˆæ˜¯æŒ‡é’ˆçš„å‰¯æœ¬ï¼‰ï¼Œä¸å­˜åœ¨å¼•ç”¨ä¼ é€’ã€‚ä¹‹æ‰€ä»¥å¯¹äºå¼•ç”¨ç±»å‹çš„ä¼ é€’å¯ä»¥ä¿®æ”¹åŸå†…å®¹æ•°æ®ï¼Œæ˜¯å› ä¸ºåœ¨åº•å±‚é»˜è®¤ä½¿ç”¨è¯¥å¼•ç”¨ç±»å‹çš„æŒ‡é’ˆè¿›è¡Œä¼ é€’ï¼Œä½†æ˜¯ä¹Ÿæ˜¯ä½¿ç”¨æŒ‡é’ˆçš„å‰¯æœ¬ï¼Œä¾æ—§æ˜¯å€¼ä¼ é€’ã€‚</h5>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210807001149451.png" >
		<img src="/GoLearning.assets/image-20210807001149451.png"
			
			
			
			loading="lazy"
			alt="image-20210807001149451">
	</a>
	
	<figcaption>image-20210807001149451</figcaption>
	
</figure></p>
<ul>
<li>åˆ›å»ºæŒ‡é’ˆç±»å‹ç»“æ„ä½“</li>
<li>å–ç»“æ„ä½“åœ°å€å®ä¾‹åŒ–</li>
<li>ç»“æ„ä½“åˆå§‹åŒ–
<ul>
<li>ä½¿ç”¨é”®å€¼å¯¹åˆå§‹åŒ–</li>
<li>ä½¿ç”¨å€¼çš„åˆ—è¡¨åˆå§‹åŒ–</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
<span class="p">)</span>

<span class="kd">type</span> <span class="nx">person</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">name</span> <span class="kt">string</span>
	<span class="nx">sex</span> <span class="kt">string</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//ç»“æ„ä½“æ˜¯å€¼ç±»å‹
</span><span class="c1"></span>	<span class="nx">p</span> <span class="o">:=</span><span class="nx">person</span><span class="p">{</span>
		<span class="nx">name</span><span class="p">:</span> <span class="s">&#34;ljs&#34;</span><span class="p">,</span>
		<span class="nx">sex</span><span class="p">:</span> <span class="s">&#34;ç”·&#34;</span><span class="p">,</span>
	<span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span>

	<span class="kd">var</span> <span class="nx">p1</span> <span class="nx">person</span>
	<span class="nx">p1</span><span class="p">.</span><span class="nx">name</span> <span class="p">=</span><span class="s">&#34;lje&#34;</span>
	<span class="nx">p1</span><span class="p">.</span><span class="nx">sex</span> <span class="p">=</span> <span class="s">&#34;nan&#34;</span>

	<span class="kd">var</span> <span class="nx">p2</span> <span class="nx">person</span>
	<span class="nx">p2</span> <span class="p">=</span> <span class="nx">p1</span>
	<span class="nx">p2</span><span class="p">.</span><span class="nx">name</span> <span class="p">=</span><span class="s">&#34;fyz&#34;</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">p2</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">p1</span><span class="p">)</span>

	<span class="kd">func</span><span class="p">(</span><span class="nx">x</span> <span class="nx">person</span><span class="p">){</span>
			<span class="nx">x</span><span class="p">.</span><span class="nx">sex</span> <span class="p">=</span> <span class="s">&#34;å¥³&#34;</span>  <span class="c1">//ä¼ çš„æ˜¯å€¼
</span><span class="c1"></span>	<span class="p">}(</span><span class="nx">p2</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">p2</span><span class="p">)</span>

	<span class="kd">func</span><span class="p">(</span><span class="nx">x</span> <span class="o">*</span><span class="nx">person</span><span class="p">){</span>
		<span class="p">(</span><span class="o">*</span><span class="nx">x</span><span class="p">).</span><span class="nx">sex</span> <span class="p">=</span> <span class="s">&#34;nv&#34;</span>  <span class="c1">//ä¼ çš„æ˜¯åœ°å€
</span><span class="c1"></span>		<span class="c1">//x.sex = &#34;nv&#34;  //è¯­æ³•ç³– ä¸€æ ·çš„åŒä¸Š
</span><span class="c1"></span>	<span class="p">}(</span><span class="o">&amp;</span><span class="nx">p2</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">p2</span><span class="p">)</span>

	<span class="c1">//åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆç±»å‹çš„person
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">p3</span> <span class="p">=</span> <span class="nf">new</span> <span class="p">(</span><span class="nx">person</span><span class="p">)</span>   <span class="c1">//new è¿”å›çš„æ˜¯æŒ‡é’ˆåœ°å€ è¿™ä¸ªç±»å‹
</span><span class="c1"></span>	<span class="nx">p3</span><span class="p">.</span><span class="nx">sex</span> <span class="p">=</span> <span class="s">&#34;nan&#34;</span>
	<span class="p">(</span><span class="o">*</span><span class="nx">p3</span><span class="p">).</span><span class="nx">name</span> <span class="p">=</span> <span class="s">&#34;www&#34;</span>  <span class="c1">//è¯­æ³•ç³– ä¸€æ ·çš„åŒä¸Š
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">p3</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T\n&#34;</span><span class="p">,</span><span class="nx">p3</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%p\n&#34;</span><span class="p">,</span><span class="nx">p3</span><span class="p">)</span>  <span class="c1">//è¿”å›çš„æ˜¯è¿™ä¸ªæŒ‡é’ˆçš„å€¼ p3ä¿å­˜çš„å€¼å°±æ˜¯ä¸€ä¸ªå†…å­˜åœ°å€
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v\n&#34;</span><span class="p">,</span><span class="nx">p3</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T\n&#34;</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">p3</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%p\n&#34;</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">p3</span><span class="p">)</span>  <span class="c1">//è¿”å›çš„æ˜¯è¿™ä¸ªæŒ‡é’ˆç±»å‹çš„å€¼çš„åœ°å€
</span><span class="c1"></span>

	<span class="c1">//key value åˆå§‹åŒ–
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">p4</span> <span class="p">=</span><span class="o">&amp;</span><span class="nx">person</span><span class="p">{</span>
		<span class="nx">name</span><span class="p">:</span> <span class="s">&#34;lll&#34;</span><span class="p">,</span>
	<span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">p4</span><span class="p">)</span>

	<span class="c1">//ä½¿ç”¨å€¼ åˆ—è¡¨çš„å½¢å¼åˆå§‹åŒ– é¡ºåºä¿æŒä¸€è‡´
</span><span class="c1"></span>	<span class="nx">p5</span><span class="o">:=</span><span class="nx">person</span><span class="p">{</span>
		 <span class="s">&#34;nv&#34;</span><span class="p">,</span>
		 <span class="s">&#34;slkdjf&#34;</span><span class="p">,</span>
	<span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">p5</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">a</span> <span class="kt">int</span>
	<span class="nx">a</span> <span class="p">=</span> <span class="mi">100</span>
	<span class="nx">b</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">a</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T %p\n&#34;</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">a</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">a</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T %p\n&#34;</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span>  <span class="c1">//bçš„å€¼
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T %v\n&#34;</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span>  <span class="c1">//bçš„å€¼
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T %p\n&#34;</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">b</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">b</span><span class="p">)</span>  <span class="c1">//bçš„å†…å­˜åœ°å€
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><h5 id="ç»“æ„ä½“çš„å†…å­˜å¸ƒå±€">ç»“æ„ä½“çš„å†…å­˜å¸ƒå±€</h5>
<p>å ç”¨è¿ç»­å†…å­˜</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">type</span> <span class="nx">x</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">a</span> <span class="p">,</span><span class="nx">b</span> <span class="p">,</span><span class="nx">c</span> <span class="kt">int8</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//ç»“æ„ä½“å ç”¨ä¸€å—è¿ç»­çš„å†…å­˜ç©ºé—´
</span><span class="c1"></span>	<span class="nx">x</span> <span class="o">:=</span><span class="nx">x</span><span class="p">{</span>
		<span class="nx">a</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
		<span class="nx">b</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
		<span class="nx">c</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%p\n&#34;</span><span class="p">,</span><span class="o">&amp;</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">a</span><span class="p">))</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%p\n&#34;</span><span class="p">,</span><span class="o">&amp;</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">b</span><span class="p">))</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%p\n&#34;</span><span class="p">,</span><span class="o">&amp;</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">c</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><p>ç»“æ„ä½“æ˜¯å€¼ç±»å‹ èµ‹å€¼çš„æ—¶å€™æ˜¯æ‹·è´</p>
<p>æ„é€ å‡½æ•°ï¼šè¿”å›ä¸€ä¸ªç»“æ„ä½“å˜é‡çš„å‡½æ•°</p>
<p>æ„é€ å‡½æ•°å’Œæ–¹æ³•</p>
<h5 id="æ–¹æ³•å’Œæ¥æ”¶è€…">æ–¹æ³•å’Œæ¥æ”¶è€…</h5>
<p>goè¯­è¨€ä¸­çš„æ–¹æ³•methodæ˜¯ä¸€ç§ä½œç”¨äºç‰¹å®šç±»å‹å˜é‡çš„å‡½æ•°ã€‚è¿™ç§ç‰¹å®šç±»å‹å˜é‡å«åšæ¥æ”¶è€…receiver æ¥æ”¶è€…çš„æ¦‚å¿µå°±ç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„thisæˆ–è€…self</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">æ¥æ”¶è€…å˜é‡</span> <span class="nx">æ¥æ”¶è€…ç±»å‹</span><span class="p">)</span> <span class="nx">æ–¹æ³•å</span><span class="p">(</span><span class="nx">å‚æ•°åˆ—è¡¨</span><span class="p">)</span> <span class="p">(</span><span class="nx">è¿”å›å‚æ•°</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">å‡½æ•°ä½“</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="c1">//æ ‡è¯†ç¬¦ï¼šå˜é‡åã€å‡½æ•°åã€ç±»å‹åã€æ–¹æ³•é“­
</span><span class="c1">//goè¯­è¨€ä¸­å¦‚æœæ ‡è¯†ç¬¦é¦–å­—æ¯æ˜¯å¤§å†™çš„ï¼Œå°±è¡¨ç¤ºå¯¹å¤–éƒ¨åŒ…å¯è§ï¼ˆæš´éœ²çš„ï¼Œå…¬æœ‰çš„ï¼‰
</span><span class="c1"></span>
<span class="c1">//Dog è¿™æ˜¯ä¸€ä¸ªç‹—çš„ç»“æ„ä½“æ³¨é‡Š
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">Dog</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">name</span> <span class="kt">string</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">newDog</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="nx">Dog</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">Dog</span><span class="p">{</span>
		<span class="nx">name</span><span class="p">:</span> <span class="nx">name</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">person</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">name</span> <span class="kt">string</span>
	<span class="nx">age</span> <span class="kt">int</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">newPerson</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">age</span> <span class="kt">int</span><span class="p">)</span> <span class="nx">person</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">person</span><span class="p">{</span>
		<span class="nx">name</span><span class="p">:</span> <span class="nx">name</span><span class="p">,</span>
		<span class="nx">age</span><span class="p">:</span> <span class="nx">age</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="c1">//æ–¹æ³•æ˜¯ä½œç”¨äºç‰¹å®šç±»å‹çš„å‡½æ•°
</span><span class="c1">//æ¥å—è€…è¡¨ç¤ºçš„æ˜¯è°ƒç”¨è¯¥æ–¹æ³•çš„å…·ä½“ç±»å‹å˜é‡ï¼Œå¤šç”¨ç±»å‹å˜é‡é¦–å­—æ¯å°å†™è¡¨ç¤º
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">d</span> <span class="nx">Dog</span><span class="p">)</span> <span class="nf">wangwang</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">name</span><span class="o">+</span><span class="s">&#34;æ±ªæ±ªæ±ª&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">//ä½¿ç”¨å€¼æ¥æ”¶è€…ï¼šä¼ æ‹·è´è¿›å»
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="nx">person</span><span class="p">)</span> <span class="nf">guonian</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">p</span><span class="p">.</span><span class="nx">age</span><span class="o">++</span>
<span class="p">}</span>

<span class="c1">//æ“ä½œæŒ‡é’ˆ æŒ‡é’ˆæ¥æ”¶è€…ï¼šä¼ åœ°å€è¿›å»
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">person</span><span class="p">)</span> <span class="nf">guonian1</span><span class="p">()</span> <span class="p">{</span>
	<span class="p">(</span><span class="o">*</span><span class="nx">p</span><span class="p">).</span><span class="nx">age</span><span class="o">++</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nf">newDog</span><span class="p">(</span><span class="s">&#34;jwt&#34;</span><span class="p">).</span><span class="nf">wangwang</span><span class="p">()</span>

	<span class="nx">p</span> <span class="o">:=</span> <span class="nf">newPerson</span><span class="p">(</span><span class="s">&#34;ljs&#34;</span><span class="p">,</span> <span class="mi">18</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">age</span><span class="p">)</span>
	<span class="nx">p</span><span class="p">.</span><span class="nf">guonian</span><span class="p">()</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">age</span><span class="p">)</span>

	<span class="nx">p1</span><span class="o">:=</span><span class="nf">newPerson</span><span class="p">(</span><span class="s">&#34;jwt&#34;</span><span class="p">,</span><span class="mi">19</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">p1</span><span class="p">.</span><span class="nx">age</span><span class="p">)</span>
	<span class="nx">p1</span><span class="p">.</span><span class="nf">guonian1</span><span class="p">()</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">p1</span><span class="p">.</span><span class="nx">age</span><span class="p">)</span>

<span class="p">}</span>
</code></pre></div><h5 id="ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨æŒ‡é’ˆç±»å‹æ¥æ”¶è€…">ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨æŒ‡é’ˆç±»å‹æ¥æ”¶è€…</h5>
<ol>
<li>éœ€è¦ä¿®æ”¹æ¥æ”¶è€…ä¸­çš„å€¼</li>
<li>æ¥æ”¶è€…æ˜¯æ‹·è´ä»£ä»·æ¯”è¾ƒå¤§çš„å¤§å¯¹è±¡</li>
<li>ä¿è¯ä¸€è‡´æ€§ï¼Œå¦‚æœæœ‰æŸä¸ªæ–¹æ³•ä½¿ç”¨äº†æŒ‡é’ˆæ¥æ”¶è€…ï¼Œé‚£ä¹ˆå…¶ä»–çš„æ–¹æ³•ä¹Ÿåº”è¯¥ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…</li>
</ol>
<h5 id="ä»»æ„ç±»å‹æ·»åŠ æ–¹æ³•">ä»»æ„ç±»å‹æ·»åŠ æ–¹æ³•</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="c1">//ç»™è‡ªå®šä¹‰ç±»å‹æ·»åŠ æ–¹æ³•
</span><span class="c1">//ä¸èƒ½ç»™åˆ«çš„åŒ…é‡Œé¢çš„ç±»å‹æ·»åŠ æ–¹æ³•ï¼Œåªèƒ½ç»™è‡ªå·±çš„åŒ…é‡Œçš„ç±»å‹æ·»åŠ æ–¹æ³•
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">myInt</span>  <span class="kt">int</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">i</span> <span class="nx">myInt</span><span class="p">)</span> <span class="nf">hello</span><span class="p">()</span>  <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;this is a int&#34;</span><span class="o">+</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">i</span> <span class="nx">myInt</span>
	<span class="nx">i</span><span class="p">=</span> <span class="mi">10</span>
	<span class="nx">i</span><span class="p">.</span><span class="nf">hello</span><span class="p">()</span>

<span class="p">}</span>
</code></pre></div><h5 id="ç»“æ„ä½“çš„åŒ¿åå­—æ®µ">ç»“æ„ä½“çš„åŒ¿åå­—æ®µ</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="c1">//åŒ¿åå­—æ®µ
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">person</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="kt">string</span>
	<span class="kt">int</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">a</span><span class="o">:=</span><span class="nx">person</span><span class="p">{</span>
		<span class="s">&#34;ljs&#34;</span><span class="p">,</span>
		<span class="mi">10</span><span class="p">,</span>
	<span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="kt">string</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="kt">int</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h5 id="ç»“æ„ä½“åµŒå¥—">ç»“æ„ä½“åµŒå¥—</h5>
<p>å®é™…ä¸Šå°±æ˜¯åŒ…å«å…³ç³»æˆ–è€…ç»§æ‰¿å˜›æ„Ÿè§‰</p>
<h5 id="åŒ¿ååµŒå¥—ç»“æ„ä½“">åŒ¿ååµŒå¥—ç»“æ„ä½“</h5>
<p>åŒ¿ååµŒå¥—ç»“æ„ä½“çš„å­—æ®µå†²çª</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">type</span> <span class="nx">person</span> <span class="kd">struct</span> <span class="p">{</span>
   <span class="nx">name</span> <span class="kt">string</span>
   <span class="nx">age</span> <span class="kt">int</span>
   <span class="nx">addr</span> <span class="nx">address</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">company</span> <span class="kd">struct</span> <span class="p">{</span>
   <span class="nx">name</span> <span class="kt">string</span>
   <span class="nx">address</span>  <span class="c1">//åŒ¿ååµŒå¥—ç»“æ„ä½“ å¯ä»¥ç›´æ¥æ‹¿åˆ°åŒ¿åç»“æ„ä½“é‡Œé¢çš„å­—æ®µ
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">type</span> <span class="nx">address</span> <span class="kd">struct</span> <span class="p">{</span>
   <span class="nx">province</span> <span class="kt">string</span>
   <span class="nx">city</span> <span class="kt">string</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">p1</span><span class="o">:=</span><span class="nx">person</span><span class="p">{</span>
      <span class="nx">name</span><span class="p">:</span> <span class="s">&#34;ljs&#34;</span><span class="p">,</span>
      <span class="nx">age</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span>
      <span class="nx">addr</span><span class="p">:</span> <span class="nx">address</span><span class="p">{</span><span class="nx">city</span><span class="p">:</span> <span class="s">&#34;fuzhou&#34;</span><span class="p">,</span><span class="nx">province</span><span class="p">:</span> <span class="s">&#34;fujian&#34;</span><span class="p">},</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">p1</span><span class="p">.</span><span class="nx">addr</span><span class="p">.</span><span class="nx">province</span><span class="p">)</span>

   <span class="nx">c1</span><span class="o">:=</span><span class="nx">company</span><span class="p">{</span>
      <span class="nx">name</span><span class="p">:</span>    <span class="s">&#34;alibaba&#34;</span><span class="p">,</span>
      <span class="nx">address</span><span class="p">:</span> <span class="nx">address</span><span class="p">{</span><span class="nx">province</span><span class="p">:</span> <span class="s">&#34;zhejiang&#34;</span><span class="p">,</span><span class="nx">city</span><span class="p">:</span> <span class="s">&#34;hangzhou&#34;</span><span class="p">},</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">c1</span><span class="p">.</span><span class="nx">city</span><span class="p">)</span> <span class="c1">//å…ˆåœ¨è‡ªå·±ç»“æ„ä½“æ‰¾è¿™ä¸ªå­—æ®µ æ‰¾ä¸åˆ°å°±å»åŒ¿ååµŒå¥—çš„ç»“æ„ä½“ä¸­æŸ¥æ‰¾è¯¥å­—æ®µ
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><h5 id="ç»“æ„ä½“çš„ç»§æ‰¿">ç»“æ„ä½“çš„â€œç»§æ‰¿â€</h5>
<p>goè¯­è¨€ä¸­ä½¿ç”¨ç»“æ„ä½“ä¹Ÿå¯ä»¥å®ç°å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­é¢å‘å¯¹è±¡çš„ç»§æ‰¿</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">type</span> <span class="nx">animal</span> <span class="kd">struct</span> <span class="p">{</span>
   <span class="nx">name</span> <span class="kt">string</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">animal</span><span class="p">)</span> <span class="nf">move</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span><span class="o">+</span><span class="s">&#34;ä¼šåŠ¨&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">dog</span> <span class="kd">struct</span> <span class="p">{</span>
   <span class="nx">feet</span> <span class="kt">byte</span>
   <span class="nx">animal</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">d</span> <span class="nx">dog</span><span class="p">)</span> <span class="nf">wang</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">name</span><span class="o">+</span><span class="s">&#34;wangwangwang&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">newDog</span><span class="p">(</span><span class="nx">a</span> <span class="nx">animal</span><span class="p">,</span> <span class="nx">feet</span> <span class="kt">byte</span><span class="p">)</span> <span class="nx">dog</span> <span class="p">{</span>
   <span class="k">return</span> <span class="nx">dog</span><span class="p">{</span>
       <span class="nx">feet</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span>
   <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">newAnimal</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="nx">animal</span> <span class="p">{</span>
   <span class="k">return</span> <span class="nx">animal</span><span class="p">{</span><span class="nx">name</span><span class="p">:</span><span class="nx">name</span><span class="p">}</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">//ç»“æ„ä½“æ¨¡æ‹Ÿå®ç°å…¶ä»–è¯­è¨€ä¸­çš„ç»§æ‰¿
</span><span class="c1"></span>   <span class="nf">newDog</span><span class="p">(</span><span class="nf">newAnimal</span><span class="p">(</span><span class="s">&#34;jwt&#34;</span><span class="p">),</span><span class="mi">4</span><span class="p">).</span><span class="nf">wang</span><span class="p">()</span>

   <span class="nx">d1</span><span class="o">:=</span><span class="nx">dog</span><span class="p">{</span>
        <span class="mi">4</span><span class="p">,</span> <span class="nx">animal</span><span class="p">{</span><span class="nx">name</span><span class="p">:</span> <span class="s">&#34;ljs&#34;</span><span class="p">},</span>
   <span class="p">}</span>
   <span class="nx">d1</span><span class="p">.</span><span class="nf">move</span><span class="p">()</span>  <span class="c1">//åªèƒ½åŒ¿ååµŒå¥—ç»“æ„ä½“æ‰èƒ½å®ç°ç±»ä¼¼äºç»§æ‰¿çš„æ•ˆæœ å¦‚æœæœ‰åå­—å¥½åƒå°±è°ƒç”¨ä¸äº†
</span><span class="c1"></span>

<span class="p">}</span>
</code></pre></div><h5 id="ç»“æ„ä½“ä¸json">ç»“æ„ä½“ä¸json</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;encoding/json&#34;</span>
   <span class="s">&#34;fmt&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">//ç»“æ„ä½“ä¸json
</span><span class="c1"></span>   <span class="c1">//1.åºåˆ—åŒ– æŠŠgoè¯­è¨€ä¸­çš„ç»“æ„ä½“å˜é‡ --&gt; jsonæ ¼å¼çš„å­—ç¬¦ä¸²
</span><span class="c1"></span>   <span class="c1">//2.ååºåˆ—åŒ– æŠŠjsonæ ¼å¼çš„å­—ç¬¦ä¸²  --&gt; goè¯­è¨€ä¸­èƒ½å¤Ÿè¯†åˆ«çš„ç»“æ„ä½“å˜é‡
</span><span class="c1"></span>
   <span class="nx">p1</span><span class="o">:=</span><span class="nx">person</span><span class="p">{</span>
      <span class="nx">Name</span><span class="p">:</span> <span class="s">&#34;ljs&#34;</span><span class="p">,</span>
      <span class="nx">Age</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span>
   <span class="p">}</span>

   <span class="c1">//åºåˆ—åŒ–
</span><span class="c1"></span>   <span class="nx">v</span><span class="p">,</span><span class="nx">err</span><span class="o">:=</span><span class="nx">json</span><span class="p">.</span><span class="nf">Marshal</span><span class="p">(</span><span class="nx">p1</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;marshal fail &#34;</span><span class="p">)</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v  %T\n&#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v  %T\n&#34;</span><span class="p">,</span><span class="nb">string</span><span class="p">(</span><span class="nx">v</span><span class="p">),</span><span class="nx">v</span><span class="p">)</span>

   <span class="c1">//ååºåˆ—åŒ–  ä¼ æŒ‡é’ˆè¿›å»
</span><span class="c1"></span>   <span class="kd">var</span> <span class="nx">v1</span> <span class="nx">person</span>
   <span class="nx">err1</span> <span class="o">:=</span> <span class="nx">json</span><span class="p">.</span><span class="nf">Unmarshal</span><span class="p">(</span><span class="nx">v</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">v1</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err1</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err1</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">v1</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">v1</span><span class="p">.</span><span class="nx">Age</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">v1</span><span class="p">.</span><span class="nx">Name</span><span class="p">)</span>

   <span class="nx">s</span><span class="o">:=</span><span class="s">`{&#34;name&#34;:&#34;ljs&#34;,&#34;age&#34;:18}`</span>
   <span class="kd">var</span> <span class="nx">v2</span> <span class="nx">person</span>    <span class="c1">//ä¼ æŒ‡é’ˆè¿›å»
</span><span class="c1"></span>   <span class="nx">json</span><span class="p">.</span><span class="nf">Unmarshal</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">s</span><span class="p">),</span><span class="o">&amp;</span><span class="nx">v2</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v\n&#34;</span><span class="p">,</span><span class="nx">v2</span><span class="p">)</span>

<span class="p">}</span>

<span class="kd">type</span> <span class="nx">person</span> <span class="kd">struct</span> <span class="p">{</span>
   <span class="nx">Name</span> <span class="kt">string</span> <span class="s">`json:&#34;name&#34; db:&#34;dbname&#34;`</span>
   <span class="nx">Age</span> <span class="kt">int</span> <span class="s">`json:&#34;age&#34;`</span>
<span class="p">}</span>
</code></pre></div><h4 id="day05å†…å®¹å›é¡¾">day05å†…å®¹å›é¡¾</h4>
<h5 id="è‡ªå®šä¹‰ç±»å‹å’Œç±»å‹åˆ«å-1">è‡ªå®šä¹‰ç±»å‹å’Œç±»å‹åˆ«å</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">myInt</span> <span class="kt">int</span> <span class="nx">è‡ªå®šä¹‰ç±»å‹</span> 
<span class="kd">type</span> <span class="nx">myInt1</span> <span class="p">=</span> <span class="kt">int</span> <span class="nx">ç±»å‹åˆ«å</span> <span class="nx">åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­</span>
</code></pre></div><p>ç±»å‹åˆ«ååªåœ¨ä»£ç ç¼–å†™è¿‡ç¨‹ä¸­æœ‰æ•ˆï¼Œç¼–è¯‘å®Œä¹‹åå°±ä¸å­˜åœ¨ï¼Œå†…ç½®çš„byteå’Œruneéƒ½å±äºç±»å‹åˆ«å</p>
<h5 id="ç»“æ„ä½“-1">ç»“æ„ä½“</h5>
<p>åŸºæœ¬æ•°æ®ç±»å‹ ï¼šè¡¨ç¤ºç°å®ä¸­çš„ç‰©ä½“æœ‰å±€é™æ€§</p>
<p>ç»“æ„ä½“æ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œä¸€ç§æˆ‘ä»¬å¯ä»¥è‡ªå·±é€ çš„å¯ä»¥ä¿å­˜å¤šä¸ªç»´åº¦çš„ç±»å‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">person</span> <span class="kd">struct</span><span class="p">{</span>
    <span class="nx">name</span> <span class="kt">string</span> 
    <span class="nx">age</span> <span class="kt">int</span> 
    <span class="nx">addr</span> <span class="nx">address</span>
<span class="p">}</span>
</code></pre></div><h5 id="åŒ¿åç»“æ„ä½“">åŒ¿åç»“æ„ä½“</h5>
<p>å¤šç”¨äºäº†ä¸´æ—¶åœºæ™¯</p>
<h5 id="ç»“æ„ä½“çš„åˆå§‹åŒ–">ç»“æ„ä½“çš„åˆå§‹åŒ–</h5>
<h5 id="æ„é€ å‡½æ•°">æ„é€ å‡½æ•°</h5>
<h5 id="æ–¹æ³•å’Œæ¥æ”¶è€…-1">æ–¹æ³•å’Œæ¥æ”¶è€…</h5>
<p>æ–¹æ³•æ˜¯æœ‰æ¥æ”¶è€…çš„å‡½æ•°ï¼Œæ¥æ”¶è€…æŒ‡çš„æ˜¯å“ªä¸ªç±»å‹çš„å˜é‡å¯ä»¥è°ƒç”¨è¿™ä¸ªå‡½æ•°</p>
<h5 id="æ¥æ”¶è€…å¯ä»¥æ˜¯æŒ‡é’ˆ">æ¥æ”¶è€…å¯ä»¥æ˜¯æŒ‡é’ˆ</h5>
<p>ç»“æ„ä½“æ˜¯å€¼ç±»å‹</p>
<h5 id="ç»“æ„ä½“çš„åµŒå¥—">ç»“æ„ä½“çš„åµŒå¥—</h5>
<h5 id="ç»“æ„ä½“çš„åŒ¿åå­—æ®µ-1">ç»“æ„ä½“çš„åŒ¿åå­—æ®µ</h5>
<h5 id="jsonåºåˆ—åŒ–ä¸ååºåˆ—åŒ–">JSONåºåˆ—åŒ–ä¸ååºåˆ—åŒ–</h5>
<p>ç»å¸¸å‡ºç°çš„é—®é¢˜</p>
<ol>
<li>ç»“æ„ä½“å†…éƒ¨çš„å­—æ®µè¦å¤§å†™ ä¸ç„¶åˆ«äººæ˜¯è®¿é—®ä¸åˆ°çš„</li>
<li>ååºåˆ—åŒ–æ—¶è¦ä¼ é€’æŒ‡é’ˆ</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;encoding/json&#34;</span>
   <span class="s">&#34;fmt&#34;</span>
<span class="p">)</span>

<span class="kd">type</span> <span class="nx">temp</span> <span class="kd">struct</span> <span class="p">{</span>
   <span class="nx">X</span> <span class="kt">int</span> <span class="s">`json:&#34;x&#34;`</span>
   <span class="nx">Y</span> <span class="kt">int</span> <span class="s">`json:&#34;y&#34;`</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="kd">var</span> <span class="nx">a</span> <span class="p">=</span> <span class="kd">struct</span> <span class="p">{</span>
      <span class="nx">x</span> <span class="kt">int</span>
      <span class="nx">y</span> <span class="kt">int</span>
   <span class="p">}{</span><span class="nx">x</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="nx">y</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>

   <span class="kd">var</span> <span class="nx">a1</span> <span class="nx">temp</span>
   <span class="nx">a1</span><span class="p">.</span><span class="nx">X</span> <span class="p">=</span> <span class="mi">1</span>
   <span class="nx">a1</span><span class="p">.</span><span class="nx">Y</span> <span class="p">=</span> <span class="mi">2</span>

   <span class="nx">a2</span><span class="o">:=</span><span class="nx">temp</span><span class="p">{</span>
      <span class="nx">X</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">Y</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a2</span><span class="p">)</span>

   <span class="c1">//è°ƒç”¨æ„é€ å‡½æ•°
</span><span class="c1"></span>   <span class="nx">a3</span><span class="o">:=</span><span class="nf">newTemp</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a3</span><span class="p">)</span>

   <span class="nx">a3</span><span class="p">.</span><span class="nf">dream</span><span class="p">()</span>
   <span class="nx">a3</span><span class="p">.</span><span class="nf">exchange</span><span class="p">()</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a3</span><span class="p">)</span>

   <span class="nx">marshal</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">json</span><span class="p">.</span><span class="nf">Marshal</span><span class="p">(</span><span class="nx">a3</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">marshal</span><span class="p">))</span>

   <span class="nx">s1</span><span class="o">:=</span><span class="s">`{&#34;x&#34;:2,&#34;y&#34;:4}`</span>
   <span class="kd">var</span> <span class="nx">a4</span> <span class="nx">temp</span>
   <span class="nx">err1</span> <span class="o">:=</span> <span class="nx">json</span><span class="p">.</span><span class="nf">Unmarshal</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">s1</span><span class="p">),</span> <span class="o">&amp;</span><span class="nx">a4</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err1</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err1</span><span class="p">)</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a4</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">//æ„é€ å‡½æ•° è¿”å›å€¼æ˜¯å¯¹åº”çš„ç»“æ„ä½“ç±»å‹
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">newTemp</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="kt">int</span><span class="p">)</span> <span class="nx">temp</span> <span class="p">{</span>
   <span class="k">return</span> <span class="nx">temp</span><span class="p">{</span>
      <span class="nx">X</span><span class="p">:</span> <span class="nx">x</span><span class="p">,</span>
      <span class="nx">Y</span><span class="p">:</span> <span class="nx">y</span><span class="p">,</span>
   <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//æ¥æ”¶è€…æ˜¯ç”¨å¯¹åº”ç±»å‹çš„é¦–å­—æ¯å°å†™
</span><span class="c1">//æŒ‡å®šæ¥æ”¶è€…ä¹‹å åªæœ‰è¯¥ç±»å‹çš„å˜é‡æ‰æœ‰èµ„æ ¼è°ƒç”¨
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">t</span> <span class="nx">temp</span><span class="p">)</span> <span class="nf">dream</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;tempä¹Ÿæœ‰æ¢¦æƒ³&#34;</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">X</span><span class="o">+</span><span class="nx">t</span><span class="p">.</span><span class="nx">Y</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">//æŒ‡é’ˆæ¥æ”¶è€…
</span><span class="c1">//1.éœ€è¦ä¿®æ”¹ç»“æ„ä½“å˜é‡çš„å€¼æ—¶éœ€è¦ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…
</span><span class="c1">//2.ç»“æ„ä½“æœ¬èº«æ¯”è¾ƒå¤§ï¼Œæ‹·è´çš„å†…å­˜å¼€é”€æ¯”è¾ƒå¤§æ—¶ä¹Ÿè¦ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…
</span><span class="c1">//3.ä¿æŒä¸€è‡´æ€§ï¼šå¦‚æœæœ‰ä¸€ä¸ªæ–¹æ³•ä½¿ç”¨äº†æŒ‡é’ˆæ¥æ”¶è€…ï¼Œå…¶ä»–çš„æ–¹æ³•ä¸ºäº†ç»Ÿä¸€ä¹Ÿè¦ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">temp</span><span class="p">)</span> <span class="nf">exchange</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">temp</span><span class="o">:=</span><span class="nx">t</span><span class="p">.</span><span class="nx">X</span>
   <span class="nx">t</span><span class="p">.</span><span class="nx">X</span> <span class="p">=</span> <span class="nx">t</span><span class="p">.</span><span class="nx">Y</span>
   <span class="nx">t</span><span class="p">.</span><span class="nx">Y</span> <span class="p">=</span> <span class="nx">temp</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">addr</span> <span class="kd">struct</span> <span class="p">{</span>
   <span class="nx">city</span> <span class="p">,</span> <span class="nx">province</span> <span class="kt">string</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">student</span> <span class="kd">struct</span> <span class="p">{</span>
   <span class="nx">name</span> <span class="kt">string</span>
    <span class="nx">addr</span>  <span class="c1">//åŒ¿ååµŒå¥—ç»“æ„ä½“ï¼Œå°±æ˜¯ç”¨ç±»å‹åå­—ä½œä¸ºåç§°
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><h5 id="æ¥å£interface">æ¥å£interface</h5>
<p>æ¥å£æ˜¯ä¸€ç§ç±»å‹ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»å‹ï¼Œä»–è§„å®šäº†å˜é‡æœ‰å“ªäº›æ–¹æ³•</p>
<p>åœ¨ç¼–ç¨‹ä¸­ä¼šé‡åˆ°ä¸€ä¸‹åœºæ™¯</p>
<p>æˆ‘ä¸å…³å¿ƒä¸€ä¸ªå˜é‡æ˜¯ä»€ä¹ˆç±»å‹ï¼Œæˆ‘åªå…³å¿ƒèƒ½è°ƒç”¨ä»–çš„ä»€ä¹ˆæ–¹æ³•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="c1">//å¼•å‡ºæ¥å£çš„å®ä¾‹
</span><span class="c1"></span>
<span class="kd">type</span> <span class="nx">cat</span> <span class="kd">struct</span> <span class="p">{</span>

<span class="p">}</span>

<span class="kd">type</span> <span class="nx">dog</span> <span class="kd">struct</span> <span class="p">{</span>

<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="nx">cat</span><span class="p">)</span> <span class="nf">speak</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;miaomiaomiao~&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">d</span> <span class="nx">dog</span><span class="p">)</span> <span class="nf">speak</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;wangwangwang~&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">speaker</span> <span class="kd">interface</span> <span class="p">{</span>
   <span class="nf">speak</span><span class="p">()</span>  <span class="c1">//åªè¦å®ç°äº†speakæ–¹æ³•çš„å˜é‡éƒ½æ˜¯speakerç±»å‹
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">func</span> <span class="nf">fuck</span><span class="p">(</span><span class="nx">a</span> <span class="nx">speaker</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">a</span><span class="p">.</span><span class="nf">speak</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">c</span><span class="o">:=</span><span class="nx">cat</span><span class="p">{}</span>
   <span class="nx">d</span><span class="o">:=</span><span class="nx">dog</span><span class="p">{}</span>
   <span class="nf">fuck</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span>
   <span class="nf">fuck</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span>

   <span class="kd">var</span> <span class="nx">ss1</span> <span class="nx">speaker</span>  <span class="c1">//å®šä¹‰ä¸€ä¸ªæ¥å£ç±»å‹ ï¼šspeakerçš„å˜é‡
</span><span class="c1"></span>   <span class="nx">ss1</span><span class="p">=</span><span class="nx">d</span>
   <span class="nx">ss1</span><span class="p">.</span><span class="nf">speak</span><span class="p">()</span>

   <span class="nx">ss</span><span class="o">:=</span><span class="nf">speaker</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span>
   <span class="nx">ss</span><span class="p">.</span><span class="nf">speak</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div><h5 id="æ¥å£çš„å®šä¹‰">æ¥å£çš„å®šä¹‰</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">name</span> <span class="kd">interface</span><span class="p">{</span>
    <span class="nf">methodname</span><span class="p">(</span><span class="nx">å‚æ•°1</span><span class="err">ï¼Œ</span><span class="nx">å‚æ•°2</span><span class="p">)</span> <span class="p">(</span><span class="nx">è¿”å›å€¼1</span><span class="err">ï¼Œ</span><span class="nx">è¿”å›å€¼2</span><span class="p">)</span>
    <span class="o">...</span>
<span class="p">}</span>
</code></pre></div><p>ç”¨æ¥ç»™å˜é‡/å‚æ•°/è¿”å›å€¼ ç­‰è®¾ç½®ç±»å‹</p>
<h5 id="æ¥å£çš„å®ç°">æ¥å£çš„å®ç°</h5>
<p>ä¸€ä¸ªå˜é‡å¦‚æœå®ç°äº†æ¥å£ä¸­è§„å®šçš„æ‰€æœ‰çš„æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡å°±å®ç°äº†è¿™ä¸ªæ¥å£ï¼Œå¯ä»¥ç†è§£ç§°ä¸ºæ¥å£ç±»å‹çš„å˜é‡ã€‚</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210808151410287.png" >
		<img src="/GoLearning.assets/image-20210808151410287.png"
			
			
			
			loading="lazy"
			alt="image-20210808151410287">
	</a>
	
	<figcaption>image-20210808151410287</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210808151514714.png" >
		<img src="/GoLearning.assets/image-20210808151514714.png"
			
			
			
			loading="lazy"
			alt="image-20210808151514714">
	</a>
	
	<figcaption>image-20210808151514714</figcaption>
	
</figure></p>
<h5 id="æ¥å£ç±»å‹çš„å˜é‡">æ¥å£ç±»å‹çš„å˜é‡</h5>
<p>æ¥å£ç±»å‹å˜é‡èƒ½å¤Ÿå­˜å‚¨æ‰€æœ‰å®ç°äº†è¯¥æ¥å£çš„å®ä¾‹</p>
<h5 id="å€¼æ¥æ”¶è€…å’ŒæŒ‡é’ˆæ¥æ”¶è€…å®ç°æ¥å£çš„åŒºåˆ«">å€¼æ¥æ”¶è€…å’ŒæŒ‡é’ˆæ¥æ”¶è€…å®ç°æ¥å£çš„åŒºåˆ«</h5>
<p>å‰è€…å¯ä»¥ä¼ å€¼ï¼Œä¹Ÿå¯ä»¥ä¼ æŒ‡é’ˆ</p>
<p>åè€…åªèƒ½ä¼ æŒ‡é’ˆ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
<span class="p">)</span>

<span class="c1">//ä½¿ç”¨å€¼æ¥æ”¶è€…å’ŒæŒ‡é’ˆæ¥æ”¶è€…çš„åŒºåˆ«
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">animal</span> <span class="kd">interface</span> <span class="p">{</span>
   <span class="nf">move</span><span class="p">()</span>
   <span class="nf">eat</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">cat</span> <span class="kd">struct</span> <span class="p">{</span>
   <span class="nx">name</span> <span class="kt">string</span>
   <span class="nx">feet</span> <span class="kt">int</span>
<span class="p">}</span>

<span class="c1">////ä½¿ç”¨å€¼æ¥æ”¶è€…å®ç°äº†æ¥å£çš„æ‰€æœ‰æ–¹æ³•
</span><span class="c1">//func (c cat) move() {
</span><span class="c1">// fmt.Println(&#34;èµ°çŒ«æ­¥&#34;)
</span><span class="c1">//}
</span><span class="c1">//
</span><span class="c1">//func (c cat) eat(a string) {
</span><span class="c1">// fmt.Println(&#34;çŒ«åƒ&#34;+a)
</span><span class="c1">//}
</span><span class="c1"></span>
<span class="c1">//ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…å®ç°äº†æ¥å£çš„æ‰€æœ‰æ–¹æ³•
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">cat</span><span class="p">)</span> <span class="nf">move</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;èµ°çŒ«æ­¥&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">cat</span><span class="p">)</span> <span class="nf">eat</span><span class="p">(</span><span class="nx">a</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;çŒ«åƒ&#34;</span><span class="o">+</span><span class="nx">a</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="kd">var</span> <span class="nx">a1</span> <span class="nx">animal</span>
   <span class="nx">c1</span><span class="o">:=</span><span class="nx">cat</span><span class="p">{</span>
      <span class="nx">name</span><span class="p">:</span> <span class="s">&#34;tom&#34;</span><span class="p">,</span>
      <span class="nx">feet</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
   <span class="p">}</span>
   <span class="nx">c2</span><span class="o">:=&amp;</span><span class="nx">cat</span><span class="p">{</span>
      <span class="nx">name</span><span class="p">:</span> <span class="s">&#34;å‡è€ç»ƒ&#34;</span><span class="p">,</span>
      <span class="nx">feet</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
   <span class="p">}</span>

   <span class="nx">a1</span><span class="p">=</span><span class="o">&amp;</span><span class="nx">c1</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a1</span><span class="p">)</span>
   <span class="nx">a1</span><span class="p">.</span><span class="nf">eat</span><span class="p">(</span><span class="s">&#34;bianbian&#34;</span><span class="p">)</span>

   <span class="nx">a1</span><span class="p">=</span><span class="nx">c2</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a1</span><span class="p">)</span>
   <span class="nx">a1</span><span class="p">.</span><span class="nf">eat</span><span class="p">(</span><span class="s">&#34;å¤§ä¾¿ä¾¿&#34;</span><span class="p">)</span>

<span class="p">}</span>
</code></pre></div><h5 id="ç±»å‹ä¸æ¥å£çš„å…³ç³»">ç±»å‹ä¸æ¥å£çš„å…³ç³»</h5>
<p>å¤šä¸ªç±»å‹å¯ä»¥å®ç°åŒä¸€ä¸ªæ¥å£</p>
<p>ä¸€ä¸ªç±»å‹å¯ä»¥å®ç°å¤šä¸ªæ¥å£</p>
<p>æ¥å£å¯ä»¥åµŒå¥—æ¥å£</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>


<span class="c1">//æ¥å£è¿˜å¯ä»¥åµŒå¥—
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">animal</span> <span class="kd">interface</span> <span class="p">{</span>
   <span class="nx">mover</span>
   <span class="nx">eater</span>
<span class="p">}</span>

<span class="c1">//åŒä¸€ä¸ªç»“æ„ä½“å¯ä»¥å®ç°å¤šä¸ªæ¥å£
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">mover</span> <span class="kd">interface</span> <span class="p">{</span>
   <span class="nf">move</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">eater</span> <span class="kd">interface</span> <span class="p">{</span>
   <span class="nf">eat</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">cat</span> <span class="kd">struct</span> <span class="p">{</span>
   <span class="nx">name</span> <span class="kt">string</span>
   <span class="nx">feet</span> <span class="kt">byte</span>
<span class="p">}</span>

<span class="c1">//ä¸€ä¸ªç»“æ„ä½“å¯ä»¥å®ç°å¤šä¸ªæ¥å£
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">cat</span><span class="p">)</span> <span class="nf">move</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">name</span><span class="o">+</span><span class="s">&#34; is moving&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">cat</span><span class="p">)</span> <span class="nf">eat</span><span class="p">(</span><span class="nx">something</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">name</span><span class="o">+</span><span class="s">&#34; is eating &#34;</span><span class="o">+</span><span class="nx">something</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">c1</span><span class="o">:=</span><span class="nx">cat</span><span class="p">{</span>
      <span class="nx">name</span><span class="p">:</span> <span class="s">&#34;tom&#34;</span><span class="p">,</span>
      <span class="nx">feet</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
   <span class="p">}</span>
   <span class="nx">mover</span><span class="p">.</span><span class="nf">move</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">c1</span><span class="p">)</span>
   <span class="nx">eater</span><span class="p">.</span><span class="nf">eat</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">c1</span><span class="p">,</span><span class="s">&#34;çŒ«ç²®&#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h5 id="ç©ºæ¥å£">ç©ºæ¥å£</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">xxx</span> <span class="kd">interface</span><span class="p">{</span>
    
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">interface</span><span class="p">{}</span>  <span class="c1">//æ—¢ç„¶æ˜¯ç©ºæ¥å£ é‚£å°±ä¸éœ€è¦åå­—äº†
</span></code></pre></div><p>æ‰€æœ‰çš„ç±»å‹éƒ½å®ç°äº†ç©ºæ¥å£è¿™ç§ç±»å‹ï¼Œä¹Ÿå°±æ˜¯ä»»æ„ç±»å‹çš„å˜é‡éƒ½èƒ½ä¿å­˜åˆ°ç©ºæ¥å£ä¸­ã€‚</p>
<p>ç©ºæ¥å£çš„åº”ç”¨</p>
<ul>
<li>ä½œä¸ºå‡½æ•°çš„å‚æ•°</li>
<li>ä½œä¸ºmapçš„å€¼</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="c1">//ç©ºæ¥å£
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">m1</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kd">interface</span><span class="p">{}]</span><span class="kd">interface</span><span class="p">{},</span><span class="mi">10</span><span class="p">)</span>
   <span class="nx">m1</span><span class="p">[</span><span class="mi">1</span><span class="p">]=</span><span class="s">&#34;hello world&#34;</span>
   <span class="nx">m1</span><span class="p">[</span><span class="s">&#34;hello world&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="mi">1</span>
   <span class="nx">m1</span><span class="p">[</span><span class="kc">false</span><span class="p">]</span> <span class="p">=[</span><span class="o">...</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;1&#34;</span><span class="p">,</span><span class="s">&#34;2&#34;</span><span class="p">,</span><span class="s">&#34;3&#34;</span><span class="p">}</span>
   <span class="nx">m1</span><span class="p">[[</span><span class="o">...</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">}]=[]</span><span class="kt">bool</span><span class="p">{</span><span class="kc">true</span><span class="p">,</span><span class="kc">false</span><span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">m1</span><span class="p">)</span>

   <span class="nf">show</span><span class="p">(</span><span class="nx">m1</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">show</span><span class="p">(</span><span class="nx">a</span> <span class="kd">interface</span><span class="p">{})</span> <span class="p">{</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T  %v\n&#34;</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h5 id="ç±»å‹æ–­è¨€">ç±»å‹æ–­è¨€</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
<span class="p">)</span>

<span class="c1">//ç±»å‹æ–­è¨€
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nf">assert</span><span class="p">(</span><span class="s">&#34;100&#34;</span><span class="p">)</span>
   <span class="nf">assert</span><span class="p">(</span><span class="nb">float32</span><span class="p">(</span><span class="mf">32.1</span><span class="p">))</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">assert</span><span class="p">(</span><span class="nx">a</span> <span class="kd">interface</span><span class="p">{})</span> <span class="p">{</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T %v\n&#34;</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span>
   <span class="nx">s</span><span class="p">,</span><span class="nx">ok</span> <span class="o">:=</span> <span class="nx">a</span><span class="p">.(</span><span class="kt">string</span><span class="p">)</span>  <span class="c1">//ç±»å‹æ–­è¨€
</span><span class="c1"></span>   <span class="k">if</span> <span class="p">!</span><span class="nx">ok</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;error &#34;</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>

   <span class="k">switch</span> <span class="nx">i</span><span class="o">:=</span><span class="nx">a</span><span class="p">.(</span><span class="kd">type</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">case</span> <span class="kt">string</span><span class="p">:</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;this is a string %T %v\n&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
   <span class="k">case</span> <span class="kt">int</span><span class="p">:</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;this is a int %T %v\n&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
   <span class="k">case</span> <span class="kt">bool</span><span class="p">:</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;this is a bool %T %v\n&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
   <span class="k">case</span> <span class="kt">float64</span><span class="p">,</span><span class="kt">float32</span><span class="p">:</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;this is a float %T %v\n&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>

   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h5 id="æ¥å£çš„æ³¨æ„äº‹é¡¹">æ¥å£çš„æ³¨æ„äº‹é¡¹</h5>
<p>åªæœ‰å½“æœ‰ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„å…·ä½“ç±»å‹å¿…é¡»ä»¥ç›¸åŒçš„æ–¹å¼è¿›è¡Œå¤„ç†æ—¶æ‰éœ€è¦å®šä¹‰æ¥å£ã€‚ä¸è¦ä¸ºäº†æ¥å£è€Œå†™æ¥å£ï¼Œé‚£æ ·åªä¼šå¢åŠ ä¸å¿…è¦çš„æŠ½è±¡ï¼Œå¯¼è‡´ä¸å¿…è¦çš„è¿è¡Œæ—¶æ¶ˆè€—</p>
<h5 id="åŒ…package">åŒ…package</h5>
<p>åŒ…æ˜¯å¤šä¸ªgoæºç çš„é›†åˆï¼Œæ˜¯ä¸€ç§é«˜çº§çš„ä»£ç å¤ç”¨æ–¹æ¡ˆï¼Œgoè¯­è¨€ä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¤šå†…ç½®åŒ…ï¼Œå¦‚fmtã€osã€ioç­‰</p>
<p>å®šä¹‰åŒ…</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">åŒ…å</span>
</code></pre></div><p>æ³¨æ„ï¼š</p>
<ul>
<li>ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹åªèƒ½æœ‰ä¸€ä¸ªåŒ…ï¼ŒåŒæ ·ä¸€ä¸ªåŒ…çš„æ–‡ä»¶ä¸èƒ½åœ¨å¤šä¸ªæ–‡ä»¶å¤¹ä¸‹</li>
<li>åŒ…åå¯ä»¥ä¸å’Œæ–‡ä»¶å¤¹çš„åå­—ä¸€æ ·ï¼ŒåŒ…åä¸èƒ½åŒ…å«ç¬¦å· -</li>
<li>åŒ…åä¸ºmainçš„åŒ…ä¸ºç¨‹åºçš„å…¥å£åŒ…ï¼Œç¼–è¯‘æ—¶ä¸åŒ…å«mainåŒ…çš„æºä»£ç æ˜¯ä¸ä¼šå¾—åˆ°å¯æ‰§è¡Œæ–‡ä»¶çš„</li>
</ul>
<h5 id="åŒ…çš„å¯¼å…¥">åŒ…çš„å¯¼å…¥</h5>
<ul>
<li>importå¯¼å…¥è¯­å¥é€šå¸¸æ”¾åœ¨æ–‡ä»¶å¼€å¤´åŒ…å£°æ˜è¯­å¥çš„ä¸‹é¢</li>
<li>å¯¼å…¥çš„åŒ…åéœ€è¦ä½¿ç”¨åŒå¼•å·åŒ…è£¹èµ·æ¥</li>
<li>åŒ…åæ˜¯ä» $gopath/src/åå¼€å§‹è®¡ç®—çš„ ï¼Œ ä½¿ç”¨ / è·¯å¾„è¿›è¡Œåˆ†å‰²</li>
<li>goè¯­è¨€ç¦æ­¢å¾ªç¯å¯¼å…¥åŒ…</li>
</ul>
<p>å•è¡Œå¯¼å…¥ ã€ å¤šè¡Œå¯¼å…¥ã€è‡ªå®šä¹‰å¯¼å…¥ã€åŒ¿åå¯¼å…¥åŒ… _</p>
<h5 id="initåˆå§‹åŒ–å‡½æ•°">init()åˆå§‹åŒ–å‡½æ•°</h5>
<p>åœ¨goè¯­è¨€ç¨‹åºæ‰§è¡Œæ—¶å¯¼å…¥åŒ…è¯­å¥ä¼šè‡ªåŠ¨è§¦å‘åŒ…å†…éƒ¨initï¼ˆï¼‰å‡½æ•°çš„è°ƒç”¨</p>
<p>init()å‡½æ•°æ²¡æœ‰å‚æ•°ä¹Ÿå’©æœ‰è¿”å›å€¼ init()å‡½æ•°åœ¨ç¨‹åºè¿è¡Œæ—¶è‡ªåŠ¨è¢«è°ƒç”¨æ‰§è¡Œ ä¸èƒ½åœ¨ä»£ç ä¸­ä¸»åŠ¨è°ƒç”¨å®ƒ</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210808175802083.png" >
		<img src="/GoLearning.assets/image-20210808175802083.png"
			
			
			
			loading="lazy"
			alt="image-20210808175802083">
	</a>
	
	<figcaption>image-20210808175802083</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210808175917585.png" >
		<img src="/GoLearning.assets/image-20210808175917585.png"
			
			
			
			loading="lazy"
			alt="image-20210808175917585">
	</a>
	
	<figcaption>image-20210808175917585</figcaption>
	
</figure></p>
<h5 id="æ–‡ä»¶æ“ä½œ">æ–‡ä»¶æ“ä½œ</h5>
<p>è‡ªå·±å†™ä¸€ä¸ªæ—¥å¿—åº“</p>
<p>æ¥å£ï¼šç”¨å¤„ï¼Ÿæ—¥å¿—å¯ä»¥è¾“å‡ºåˆ°ç»ˆç«¯ï¼Œå¯ä»¥è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œè¾“å‡ºåˆ°å¡å¤«å¡</p>
<p>æ–‡ä»¶æ“ä½œ</p>
<h5 id="æ‰“å¼€å’Œå…³é—­æ–‡ä»¶">æ‰“å¼€å’Œå…³é—­æ–‡ä»¶</h5>
<p>os.Openå‡½æ•°èƒ½å¤Ÿæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ è¿”å›ä¸€ä¸ª*File å’Œä¸€ä¸ªerr ï¼Œå¯¹å¾—åˆ°çš„æ–‡ä»¶å®ä¾‹è°ƒç”¨close()æ–¹æ³•èƒ½å¤Ÿå…³é—­æ–‡ä»¶</p>
<p>ä¸ºäº†é˜²æ­¢æ–‡ä»¶å¿˜è®°å…³é—­ æˆ‘ä»¬é€šå¸¸ä½¿ç”¨deferæ³¨å†Œæ–‡ä»¶å…³é—­è¯­å¥</p>
<h5 id="fileread">file.Read()</h5>
<h5 id="bufioè¯»å–æ–‡ä»¶">bufioè¯»å–æ–‡ä»¶</h5>
<h5 id="ioutilè¯»å–æ•´ä¸ªæ–‡ä»¶">ioutilè¯»å–æ•´ä¸ªæ–‡ä»¶</h5>
<h5 id="æ–‡ä»¶å†™å…¥æ“ä½œ">æ–‡ä»¶å†™å…¥æ“ä½œ</h5>
<p>os.openfile()å‡½æ•°èƒ½å¤Ÿä»¥æŒ‡å®šæ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼Œä»è€Œå®ç°æ–‡ä»¶å†™å…¥ç›¸å…³åŠŸèƒ½</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">OpenFile</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span> <span class="p">,</span> <span class="nx">flag</span> <span class="kt">int</span> <span class="p">,</span> <span class="nx">perm</span> <span class="nx">FileMode</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">File</span><span class="p">,</span><span class="kt">error</span><span class="p">){</span>
    
<span class="p">}</span>
</code></pre></div><p>flagæ˜¯æ–‡ä»¶æ‰“å¼€çš„æ¨¡å¼</p>
<ul>
<li>os.O_WRONLY</li>
<li>os.O_CREATE</li>
<li>os.O_RDONLY</li>
<li>os.O_RDWR</li>
<li>os.O_TURNC</li>
<li>os.O_APPEND</li>
</ul>
<p>permï¼šæ–‡ä»¶æƒé™ï¼Œä¸€ä¸ªå…«è¿›åˆ¶æ•°ã€‚rè¯» o4 wå†™ o2 xæ‰§è¡Œ o1</p>
<p>file.write</p>
<p>file.writestring</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">writer</span><span class="o">:=</span> <span class="nx">bufio</span><span class="p">.</span><span class="nf">NewWriter</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span>
</code></pre></div><pre><code>ioutil.WriteFile
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;bufio&#34;</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;io&#34;</span>
	<span class="s">&#34;io/ioutil&#34;</span>
	<span class="s">&#34;os&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">readFromFile1</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fileObj</span><span class="p">,</span><span class="nx">err</span><span class="o">:=</span><span class="nx">os</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="s">&#34;./main.go&#34;</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;open file failed...&#34;</span><span class="p">)</span>
		<span class="k">return</span>
	<span class="p">}</span>

	<span class="c1">//è®°å¾—å…³é—­æ–‡ä»¶
</span><span class="c1"></span>	<span class="k">defer</span> <span class="nx">fileObj</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
	<span class="kd">var</span> <span class="nx">b</span> <span class="p">=</span><span class="nb">make</span><span class="p">([]</span><span class="kt">byte</span><span class="p">,</span><span class="mi">128</span><span class="p">)</span>
	<span class="k">for</span> <span class="p">{</span>
		<span class="nx">n</span><span class="p">,</span><span class="nx">err</span><span class="o">:=</span><span class="nx">fileObj</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span>
		<span class="k">if</span> <span class="nx">err</span> <span class="o">==</span> <span class="nx">io</span><span class="p">.</span><span class="nx">EOF</span> <span class="p">{</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;è¯»å®Œäº†&#34;</span><span class="p">)</span>
			<span class="k">return</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;read from file failed , error&#34;</span><span class="p">)</span>
			<span class="k">return</span>
		<span class="p">}</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span>
		<span class="k">if</span> <span class="nx">n</span> <span class="p">&lt;</span><span class="mi">128</span> <span class="p">{</span>
			<span class="k">return</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="c1">//åˆ©ç”¨bufioè¿™ä¸ªåŒ…è¯»å–æ–‡ä»¶
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">readFromFileByBufio</span><span class="p">()</span>  <span class="p">{</span>
	<span class="nx">fileObjFile</span><span class="p">,</span><span class="nx">err</span> <span class="o">:=</span><span class="nx">os</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="s">&#34;./main.go&#34;</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;err, %v&#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
		<span class="k">return</span>
	<span class="p">}</span>
	<span class="k">defer</span> <span class="nx">fileObjFile</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>

	<span class="nx">reader</span><span class="o">:=</span><span class="nx">bufio</span><span class="p">.</span><span class="nf">NewReader</span><span class="p">(</span><span class="nx">fileObjFile</span><span class="p">)</span>
	<span class="k">for</span> <span class="p">{</span>
		<span class="kt">string</span><span class="p">,</span><span class="nx">err</span><span class="o">:=</span><span class="nx">reader</span><span class="p">.</span><span class="nf">ReadString</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">)</span>
		<span class="k">if</span> <span class="nx">err</span><span class="o">==</span><span class="nx">io</span><span class="p">.</span><span class="nx">EOF</span> <span class="p">{</span>
			<span class="k">return</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;read line failed , err : %v&#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
			<span class="k">return</span>
		<span class="p">}</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Print</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">readFromFileByIoutil</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">file</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadFile</span><span class="p">(</span><span class="s">&#34;./main.go&#34;</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;err , cause: %v\n&#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">file</span><span class="p">))</span>
<span class="p">}</span>


<span class="c1">//æ‰“å¼€æ–‡ä»¶
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//readFromFile1()
</span><span class="c1"></span>	<span class="c1">//readFromFileByBufio()
</span><span class="c1"></span>	<span class="nf">readFromFileByIoutil</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;bufio&#34;</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;io/ioutil&#34;</span>
	<span class="s">&#34;os&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">write</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fileObj</span> <span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span><span class="nx">os</span><span class="p">.</span><span class="nf">OpenFile</span><span class="p">(</span><span class="s">&#34;./xx.txt&#34;</span><span class="p">,</span><span class="nx">os</span><span class="p">.</span><span class="nx">O_WRONLY</span><span class="p">|</span><span class="nx">os</span><span class="p">.</span><span class="nx">O_CREATE</span><span class="p">|</span><span class="nx">os</span><span class="p">.</span><span class="nx">O_TRUNC</span><span class="p">,</span><span class="mo">0644</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;err cause: %v\n&#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
		<span class="k">return</span>
	<span class="p">}</span>

	<span class="c1">//write
</span><span class="c1"></span>	<span class="nx">fileObj</span><span class="p">.</span><span class="nf">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="mi">97</span><span class="p">,</span><span class="mi">98</span><span class="p">,</span><span class="mi">99</span><span class="p">})</span>
	<span class="nx">fileObj</span><span class="p">.</span><span class="nf">Write</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;this is a b c &#34;</span><span class="p">))</span>
	<span class="nx">fileObj</span><span class="p">.</span><span class="nf">WriteString</span><span class="p">(</span><span class="s">&#34;hello world!&#34;</span><span class="p">)</span>
	<span class="k">defer</span> <span class="nx">fileObj</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">writeByBufIo</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">file</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">OpenFile</span><span class="p">(</span><span class="s">&#34;./xx.txt&#34;</span><span class="p">,</span> <span class="nx">os</span><span class="p">.</span><span class="nx">O_WRONLY</span><span class="p">|</span><span class="nx">os</span><span class="p">.</span><span class="nx">O_CREATE</span><span class="p">|</span><span class="nx">os</span><span class="p">.</span><span class="nx">O_TRUNC</span><span class="p">,</span> <span class="mo">0644</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;err cause : %v\n&#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
		<span class="k">return</span>
	<span class="p">}</span>

	<span class="nx">writer</span><span class="o">:=</span> <span class="nx">bufio</span><span class="p">.</span><span class="nf">NewWriter</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span>
	<span class="nx">writer</span><span class="p">.</span><span class="nf">WriteString</span><span class="p">(</span><span class="s">&#34;comeon baby!&#34;</span><span class="p">)</span>   <span class="c1">//bufioæ˜¯åšäº†ä¸€ä¸ªç¼“å­˜
</span><span class="c1"></span>	<span class="nx">writer</span><span class="p">.</span><span class="nf">Flush</span><span class="p">()</span>
	<span class="k">defer</span> <span class="nx">file</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">writeByIoutil</span><span class="p">()</span>  <span class="p">{</span>
	<span class="nx">str</span><span class="o">:=</span><span class="s">&#34;hello åŒ—äº¬&#34;</span>
	<span class="nx">err</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">WriteFile</span><span class="p">(</span><span class="s">&#34;./xx.txt&#34;</span><span class="p">,</span> <span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">str</span><span class="p">),</span> <span class="mo">0666</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;error cause : %v\n&#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
		<span class="k">return</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//write()
</span><span class="c1"></span>	<span class="c1">//writeByBufIo()
</span><span class="c1"></span>	<span class="nf">writeByIoutil</span><span class="p">()</span>
	
<span class="p">}</span>
</code></pre></div><p>æ‹·è´æ–‡ä»¶ å¯ä»¥å€ŸåŠ©io.copy()å®ç°ä¸€ä¸ªæ‹·è´æ–‡ä»¶å‡½æ•°</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;io/ioutil&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nf">copyFile</span><span class="p">(</span><span class="s">&#34;./xxcopy.txt&#34;</span><span class="p">,</span><span class="s">&#34;./xx.txt&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">copyFile</span><span class="p">(</span><span class="nx">dstName</span><span class="p">,</span><span class="nx">srcName</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">written</span> <span class="kt">int64</span><span class="p">,</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
	<span class="c1">//ä»¥è¯»çš„æ–¹å¼æ‰“å¼€æ–‡ä»¶
</span><span class="c1"></span>	<span class="c1">//file, err := os.OpenFile(srcName, os.O_RDONLY, 0644)
</span><span class="c1"></span>	<span class="c1">//if err != nil {
</span><span class="c1"></span>	<span class="c1">//	return 0, err
</span><span class="c1"></span>	<span class="c1">//}
</span><span class="c1"></span>	<span class="c1">//reader:= bufio.NewReader(file)
</span><span class="c1"></span>	<span class="nx">readFile</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadFile</span><span class="p">(</span><span class="nx">srcName</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">err</span>
	<span class="p">}</span>

	<span class="nx">err1</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">WriteFile</span><span class="p">(</span><span class="nx">dstName</span><span class="p">,</span> <span class="nx">readFile</span><span class="p">,</span> <span class="mo">0644</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err1</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">err1</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="mi">1</span><span class="p">,</span><span class="kc">nil</span>

<span class="p">}</span>
</code></pre></div><p>é€šè¿‡æ–‡ä»¶æ“ä½œè·å–ç»ˆç«¯è¾“å…¥</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;bufio&#34;</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;os&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//useScan()
</span><span class="c1"></span>	<span class="nf">ioscan</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">useScan</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;è¯·è¾“å…¥å†…å®¹ï¼&#34;</span><span class="p">)</span>
	<span class="kd">var</span> <span class="nx">s</span> <span class="kt">string</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scanln</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">s</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;ä½ è¾“å…¥çš„å†…å®¹æ˜¯ %v\n&#34;</span><span class="p">,</span><span class="nx">s</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">ioscan</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;è¯·è¾“å…¥å†…å®¹ï¼&#34;</span><span class="p">)</span>
	<span class="kd">var</span> <span class="nx">s</span> <span class="kt">string</span>
	<span class="nx">reader</span> <span class="o">:=</span> <span class="nx">bufio</span><span class="p">.</span><span class="nf">NewReader</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">Stdin</span><span class="p">)</span>
	<span class="nx">s</span><span class="p">,</span><span class="nx">_</span><span class="p">=</span><span class="nx">reader</span><span class="p">.</span><span class="nf">ReadString</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h5 id="æ—¥å¿—åº“ä½œä¸š">æ—¥å¿—åº“ä½œä¸š</h5>
<p>éœ€æ±‚ï¼š</p>
<ol>
<li>å¯ä»¥å¾€ä¸åŒçš„è¾“å‡ºä½ç½®è®°å½•æ—¥å¿—</li>
<li>æ—¥å¿—å¯ä»¥åˆ†ä¸ºäº”ç§çº§åˆ«</li>
</ol>
<h4 id="å†…å®¹å›é¡¾-3">å†…å®¹å›é¡¾</h4>
<h5 id="åŒ…">åŒ…</h5>
<p>åŒ…çš„å®šä¹‰ packageï¼ŒåŒ…åé€šå¸¸æ˜¯å’Œç›®å½•åä¸€è‡´ï¼Œä¸èƒ½åŒ…å«-</p>
<ul>
<li>ä¸€ä¸ªæ–‡ä»¶å¤¹å°±æ˜¯ä¸€ä¸ªåŒ…</li>
<li>æ–‡ä»¶å¤¹é‡Œé¢æ”¾çš„éƒ½æ˜¯.goæ–‡ä»¶</li>
</ul>
<p>åŒ…çš„å¯¼å…¥ import</p>
<ul>
<li>â€‹	å•è¡Œå¯¼å…¥ å’Œ å¤šè¡Œå¯¼å…¥</li>
<li>â€‹    åŒ…å¯¼å…¥è·¯å¾„æ˜¯ä»gopath\srcåé¢çš„è·¯å¾„å¼€å§‹å†™èµ·</li>
<li>â€‹    ç»™å¯¼å…¥çš„åŒ…èµ·åˆ«å</li>
<li>åŒ¿åå¯¼å…¥ &mdash;&gt; sqlåŒ…å¯¼å…¥æ—¶ä¼šè®²</li>
<li>ä¸æ”¯æŒå¾ªç¯å¯¼å…¥</li>
</ul>
<p>åŒ…ä¸­æ ‡è¯†ç¬¦(å˜é‡åã€å‡½æ•°åã€ç»“æ„ä½“ã€æ¥å£ã€å¸¸é‡&hellip;) å¯è§æ€§ æ ‡è¯†ç¬¦é¦–å­—æ¯å¤§å†™</p>
<p><code>init()</code></p>
<ul>
<li>åŒ…å¯¼å…¥çš„æ—¶å€™ä¼šè‡ªåŠ¨æ‰§è¡Œ</li>
<li>ä¸€ä¸ªåŒ…é‡Œåªæœ‰ä¸€ä¸ªinit()</li>
<li>init()æ²¡æœ‰å‚æ•°ä¹Ÿæ²¡æœ‰è¿”å›å€¼ä¹Ÿä¸èƒ½è°ƒç”¨ä»–</li>
<li>å¤šä¸ªåŒ…çš„initæ‰§è¡Œé¡ºåº</li>
<li>ä¸€èˆ¬ç”¨äºåˆå§‹åŒ–æ“ä½œ&hellip;</li>
</ul>
<h5 id="æ¥å£">æ¥å£</h5>
<p>æ¥å£æ˜¯ä¸€ç§ç±»å‹ï¼Œä¸€ç§æŠ½è±¡çš„ç±»å‹</p>
<p>æ¥å£å°±æ˜¯ä½ è¦å®ç°çš„æ–¹æ³•çš„æ¸…å•</p>
<h5 id="æ¥å£çš„å®šä¹‰-1">æ¥å£çš„å®šä¹‰</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">mover</span> <span class="kd">interface</span><span class="p">{</span>
    <span class="nx">æ–¹æ³•ç­¾å</span><span class="p">(</span><span class="nx">å‚æ•°</span><span class="p">)(</span><span class="nx">è¿”å›å€¼</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h5 id="æ¥å£çš„å®ç°-1">æ¥å£çš„å®ç°</h5>
<p>å®ç°äº†æ¥å£çš„æ‰€æœ‰æ–¹æ³•å°±å®ç°äº†è¿™ä¸ªæ¥å£</p>
<p>å®ç°äº†æ¥å£å°±å¯ä»¥å½“æˆè¿™ä¸ªæ¥å£ç±»å‹çš„å˜é‡</p>
<h5 id="æ¥å£çš„å˜é‡">æ¥å£çš„å˜é‡</h5>
<p>å®ç°äº†ä¸€ä¸ªå˜é‡ï¼Œå¯ä»¥ä¿å­˜æ‰€æœ‰å®ç°äº†æˆ‘è¿™ä¸ªæ¥å£ç±»å‹çš„å€¼</p>
<p>é€šå¸¸ä½œä¸ºå‡½æ•°çš„å‚æ•°å‡ºç°</p>
<h5 id="ç©ºæ¥å£-1">ç©ºæ¥å£</h5>
<p>æ¥å£ä¸­æ²¡æœ‰å®šä¹‰ä»»ä½•æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯æ‰€ä»»æ„ç±»å‹éƒ½å®ç°äº†ç©ºæ¥å£==&gt;ä»»ä½•ç±»å‹çš„å˜é‡éƒ½å¯ä»¥å­˜åˆ°è¿™ä¸ªç©ºæ¥å£å˜é‡ä¸­</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">interface</span> <span class="p">{}</span>
</code></pre></div><p>ä½œä¸ºå‡½æ•°å‚æ•°fmt.println()</p>
<p>map[string]interface{}</p>
<h5 id="æ¥å£åº•å±‚">æ¥å£åº•å±‚</h5>
<ul>
<li>åŠ¨æ€ç±»å‹</li>
<li>åŠ¨æ€å€¼</li>
</ul>
<h5 id="ç±»å‹æ–­è¨€-1">ç±»å‹æ–­è¨€</h5>
<p>åšç±»å‹æ–­è¨€çš„å‰ææ˜¯ ä¸€å®šè¦æ˜¯ä¸€ä¸ªæ¥å£ç±»å‹çš„å˜é‡</p>
<p>x.(T)</p>
<p>ä½¿ç”¨switchæ¥åšç±»å‹æ–­è¨€</p>
<h5 id="æ–‡ä»¶æ“ä½œ-1">æ–‡ä»¶æ“ä½œ</h5>
<h5 id="æ‰“å¼€æ–‡ä»¶å’Œå…³é—­æ–‡ä»¶">æ‰“å¼€æ–‡ä»¶å’Œå…³é—­æ–‡ä»¶</h5>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210810185410507.png" >
		<img src="/GoLearning.assets/image-20210810185410507.png"
			
			
			
			loading="lazy"
			alt="image-20210810185410507">
	</a>
	
	<figcaption>image-20210810185410507</figcaption>
	
</figure></p>
<p>ç¼“å†²åŒº</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210810185806983.png" >
		<img src="/GoLearning.assets/image-20210810185806983.png"
			
			
			
			loading="lazy"
			alt="image-20210810185806983">
	</a>
	
	<figcaption>image-20210810185806983</figcaption>
	
</figure></p>
<p>read</p>
<p>bufio</p>
<p>ioutil</p>
<h5 id="å†™æ–‡ä»¶">å†™æ–‡ä»¶</h5>
<p>os.openfile()</p>
<p>write å’Œ writestring</p>
<p>bufio.newwriter</p>
<p>ioutil</p>
<p>åœ¨æ–‡ä»¶ä¸­æ’å…¥ä¸œä¸œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;os&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//OpenFile()
</span><span class="c1"></span>	<span class="nf">InsertFile</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">InsertFile</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//æ‰“å¼€æ–‡ä»¶
</span><span class="c1"></span>	<span class="nx">file</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">OpenFile</span><span class="p">(</span><span class="s">&#34;./sb.txt&#34;</span><span class="p">,</span> <span class="nx">os</span><span class="p">.</span><span class="nx">O_RDWR</span><span class="p">,</span> <span class="mo">0644</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;err cause : %v\n&#34;</span><span class="p">,</span><span class="nx">file</span><span class="p">)</span>
		<span class="k">return</span>
	<span class="p">}</span>
	<span class="k">defer</span> <span class="nx">file</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>

	<span class="c1">//è¯»é¦–ä¸¤ä¸ªå­—èŠ‚
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">b</span> <span class="p">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="kt">byte</span><span class="p">{}</span>
	<span class="nx">n</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">file</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="nx">b</span><span class="p">[:])</span>

	<span class="c1">//åˆ›å»ºæ–‡ä»¶ å†™é¦–ä¸¤ä¸ªå­—èŠ‚
</span><span class="c1"></span>	<span class="nx">openFile</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">OpenFile</span><span class="p">(</span><span class="s">&#34;./sbinsert.txt&#34;</span><span class="p">,</span> <span class="nx">os</span><span class="p">.</span><span class="nx">O_CREATE</span><span class="p">|</span><span class="nx">os</span><span class="p">.</span><span class="nx">O_WRONLY</span><span class="p">,</span> <span class="mo">0644</span><span class="p">)</span>
	<span class="nx">openFile</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="nx">b</span><span class="p">[:</span><span class="nx">n</span><span class="p">])</span>
	<span class="k">defer</span> <span class="nx">openFile</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>

	<span class="c1">//å°è¯•ç§»åŠ¨å…‰æ ‡
</span><span class="c1"></span>	<span class="nx">_</span><span class="p">,</span> <span class="nx">err1</span> <span class="o">:=</span> <span class="nx">file</span><span class="p">.</span><span class="nf">Seek</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1">//å…‰æ ‡ç§»åŠ¨
</span><span class="c1"></span>	<span class="k">if</span> <span class="nx">err1</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="k">return</span>
	<span class="p">}</span>

	<span class="c1">//å°è¯•å†™è¦æ’å…¥çš„æ•°æ®
</span><span class="c1"></span>	<span class="nx">openFile</span><span class="p">.</span><span class="nf">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="sc">&#39;c&#39;</span><span class="p">})</span>

	<span class="c1">//å°è¯•è¯»å…‰æ ‡ä¸‹ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">a</span> <span class="p">[</span><span class="mi">128</span><span class="p">]</span><span class="kt">byte</span>
	<span class="nx">read</span><span class="p">,</span> <span class="nx">err2</span> <span class="o">:=</span> <span class="nx">file</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="nx">a</span><span class="p">[:])</span>
	<span class="k">if</span> <span class="nx">err2</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="k">return</span>
	<span class="p">}</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">a</span><span class="p">[:</span><span class="nx">read</span><span class="p">]))</span>

	<span class="nx">openFile</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="nx">a</span><span class="p">[:</span><span class="nx">read</span><span class="p">])</span>

	<span class="nx">os</span><span class="p">.</span><span class="nf">Rename</span><span class="p">(</span><span class="s">&#34;./sbinsert.txt&#34;</span><span class="p">,</span><span class="s">&#34;./sb.txt&#34;</span><span class="p">)</span>
	<span class="c1">//writer := bufio.NewWriter(file)
</span><span class="c1"></span>	<span class="c1">//writer.WriteString(&#34;c&#34;)
</span><span class="c1"></span>	<span class="c1">//writer.Flush()
</span><span class="c1"></span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">OpenFile</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">open</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="s">&#34;./xx.txt&#34;</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;err cause: %v\n&#34;</span><span class="p">,</span><span class="nx">open</span><span class="p">)</span>
		<span class="k">return</span>
	<span class="p">}</span>
	<span class="k">defer</span> <span class="nx">open</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
	<span class="kd">var</span> <span class="nx">b</span> <span class="p">[</span><span class="mi">128</span><span class="p">]</span><span class="kt">byte</span>
	<span class="k">for</span> <span class="p">{</span>
		<span class="nx">read</span><span class="p">,</span> <span class="nx">err1</span> <span class="o">:=</span> <span class="nx">open</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="nx">b</span><span class="p">[:])</span>
		<span class="k">if</span> <span class="nx">err1</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;read err cause: %v\n&#34;</span><span class="p">,</span><span class="nx">err1</span><span class="p">)</span>
			<span class="k">return</span>
		<span class="p">}</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">b</span><span class="p">[:]))</span>
		<span class="k">if</span> <span class="nx">read</span> <span class="p">&lt;</span><span class="mi">128</span> <span class="p">{</span>
			<span class="k">return</span>
		<span class="p">}</span>
	<span class="p">}</span>


<span class="p">}</span>
</code></pre></div><h4 id="ä»Šæ—¥å†…å®¹-1">ä»Šæ—¥å†…å®¹</h4>
<h5 id="timeæ ‡å‡†åº“">timeæ ‡å‡†åº“</h5>
<p>æ—¶é—´ç±»å‹</p>
<p>time.timeç±»å‹è¡¨ç¤ºæ—¶é—´ æˆ‘ä»¬å¯ä»¥é€šè¿‡time.now() å‡½æ•°è·å–å½“å‰çš„æ—¶é—´å¯¹è±¡ ç„¶åè·å–æ—¶é—´å¯¹è±¡çš„å¹´æœˆæ—¥æ—¶åˆ†ç§’ç­‰ä¿¡æ¯ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<h5 id="æ—¶é—´æˆ³">æ—¶é—´æˆ³</h5>
<h5 id="æ—¶é—´é—´éš”">æ—¶é—´é—´éš”</h5>
<h5 id="add">add</h5>
<h5 id="sub">sub</h5>
<h5 id="equal">equal</h5>
<h5 id="before">before</h5>
<h5 id="after">after</h5>
<h5 id="å®šæ—¶å™¨timetick">å®šæ—¶å™¨time.tick</h5>
<h5 id="æ—¶é—´æ ¼å¼åŒ–">æ—¶é—´æ ¼å¼åŒ–</h5>
<p>æ—¶é—´ç±»å‹æœ‰ä¸€ä¸ªè‡ªå¸¦çš„æ–¹æ³•Formatè¿›è¡Œæ ¼å¼åŒ–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯goè¯­è¨€ä¸­æ ¼å¼åŒ–æ—¶é—´æ¨¡ç‰ˆä¸æ˜¯å¸¸è§çš„y-m-d h:/m:/s è€Œæ˜¯ä½¿ç”¨goè¯ç”Ÿçš„æ—¶é—´2006 1 2 3 4</p>
<p>è¡¥å……ï¼šå¦‚æœæƒ³è¦æ ¼å¼åŒ–ä¸º12å°æ—¶æ–¹å¼ï¼Œéœ€è¦æŒ‡å®šPM</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;time&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nf">f2</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f1</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">now</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">()</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v \n&#34;</span><span class="p">,</span><span class="nx">now</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v \n&#34;</span><span class="p">,</span><span class="nx">now</span><span class="p">.</span><span class="nf">Year</span><span class="p">())</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v \n&#34;</span><span class="p">,</span><span class="nx">now</span><span class="p">.</span><span class="nf">Month</span><span class="p">())</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v \n&#34;</span><span class="p">,</span><span class="nx">now</span><span class="p">.</span><span class="nf">Day</span><span class="p">())</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v \n&#34;</span><span class="p">,</span><span class="nx">now</span><span class="p">.</span><span class="nf">Hour</span><span class="p">())</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v \n&#34;</span><span class="p">,</span><span class="nx">now</span><span class="p">.</span><span class="nf">Minute</span><span class="p">())</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v \n&#34;</span><span class="p">,</span><span class="nx">now</span><span class="p">.</span><span class="nf">Second</span><span class="p">())</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">now</span><span class="p">.</span><span class="nf">Date</span><span class="p">())</span>

   <span class="c1">//æ—¶é—´æˆ³
</span><span class="c1"></span>   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">now</span><span class="p">.</span><span class="nf">Unix</span><span class="p">())</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">now</span><span class="p">.</span><span class="nf">UnixNano</span><span class="p">())</span>
   <span class="c1">//time.Unix()
</span><span class="c1"></span>   <span class="nx">unix</span><span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Unix</span><span class="p">(</span><span class="nx">now</span><span class="p">.</span><span class="nf">Unix</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">unix</span><span class="p">)</span>
   <span class="c1">//æ—¶é—´é—´éš”
</span><span class="c1"></span>   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
   <span class="c1">//now +24 hours
</span><span class="c1"></span>   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Add</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Hour</span><span class="o">*</span><span class="mi">24</span><span class="p">))</span>
   <span class="c1">//å®šæ—¶å™¨
</span><span class="c1"></span>   <span class="c1">//tick := time.Tick(time.Second)
</span><span class="c1"></span>   <span class="c1">//for  i := range tick {
</span><span class="c1"></span>   <span class="c1">// fmt.Println(i)
</span><span class="c1"></span>   <span class="c1">//}
</span><span class="c1"></span>
   <span class="c1">//æ ¼å¼åŒ–æ—¶é—´ æŠŠè¯­è¨€ä¸­æ—¶é—´å¯¹è±¡ è½¬æ¢æˆå­—ç¬¦ä¸²ç±»å‹çš„æ—¶é—´
</span><span class="c1"></span>   <span class="c1">//2021/08/10
</span><span class="c1"></span>   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006/01/02&#34;</span><span class="p">))</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006-1-2 15:04:05&#34;</span><span class="p">))</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006-1-2 03:04:05&#34;</span><span class="p">))</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006-1-2 15:04:05 PM&#34;</span><span class="p">))</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006:01:02 15:04:05.000 PM&#34;</span><span class="p">))</span>

   <span class="c1">//æŒ‰ç…§å¯¹åº”çš„æ ¼å¼ è§£æå­—ç¬¦ä¸²ç±»å‹çš„æ—¶é—´
</span><span class="c1"></span>   <span class="nx">value</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Parse</span><span class="p">(</span><span class="s">&#34;2006-01-02&#34;</span><span class="p">,</span> <span class="s">&#34;2019-05-20&#34;</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span> <span class="s">&#34; err &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span>

   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Sub</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Add</span><span class="p">(</span><span class="o">-</span><span class="nx">time</span><span class="p">.</span><span class="nx">Hour</span><span class="p">)))</span>

   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;beginning&#34;</span><span class="p">)</span>
   <span class="c1">//sleep
</span><span class="c1"></span>   <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ending...&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f2</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">now</span><span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">()</span>
   <span class="c1">//è·å–çš„æ˜¯å½“å‰æ—¶åŒºçš„æ—¶é—´
</span><span class="c1"></span>   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">now</span><span class="p">)</span>
   <span class="c1">//æŒ‰ç…§ä¸œå…«åŒºçš„æ—¶åŒºå’Œæ ¼å¼è§£æä¸€ä¸ªå­—ç¬¦ä¸²æ ¼å¼çš„æ—¶é—´
</span><span class="c1"></span>   <span class="nx">time</span><span class="p">.</span><span class="nf">Parse</span><span class="p">(</span><span class="s">&#34;2006-01-02 15:04:05&#34;</span><span class="p">,</span> <span class="s">&#34;2021-08-11 21:33:05&#34;</span><span class="p">)</span>
   <span class="c1">//æ ¹æ®å­—ç¬¦åŠ è½½æ—¶åŒº
</span><span class="c1"></span>   <span class="nx">location</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">LoadLocation</span><span class="p">(</span><span class="s">&#34;Asia/Shanghai&#34;</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span><span class="o">!=</span><span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;load loc failed , err :%v\n&#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="c1">//æŒ‰ç…§æŒ‡å®šæ—¶åŒºè§£ææ—¶é—´
</span><span class="c1"></span>   <span class="nx">parseInLocation</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">ParseInLocation</span><span class="p">(</span><span class="s">&#34;2006-01-02 15:05:05&#34;</span><span class="p">,</span> <span class="s">&#34;2021-08-11 21:33:05&#34;</span><span class="p">,</span> <span class="nx">location</span><span class="p">)</span>

   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Sub</span><span class="p">(</span><span class="nx">parseInLocation</span><span class="p">))</span>

<span class="p">}</span>
</code></pre></div><h5 id="æ—¥å¿—åº“">æ—¥å¿—åº“</h5>
<p>éœ€æ±‚åˆ†æ</p>
<ol>
<li>
<p>æ”¯æŒå¾€ä¸åŒçš„åœ°æ–¹è¾“å‡ºæ—¥å¿—</p>
</li>
<li>
<p>åˆ†çº§åˆ«è¾“å‡º</p>
<ol>
<li>debug</li>
<li>info</li>
<li>warning</li>
<li>error</li>
<li>fatal</li>
</ol>
</li>
<li>
<p>æ—¥å¿—è¦æ”¯æŒå¼€å…³æ§åˆ¶ï¼Œæ¯”å¦‚è¯´å¼€å‘çš„æ—¶å€™ä»€ä¹ˆçº§åˆ«çš„æ—¥å¿—éƒ½èƒ½è¾“å‡ºï¼Œä½†æ˜¯ä¸Šçº¿ä¹‹ååªæœ‰INFOçº§åˆ«å¾€ä¸‹æ‰èƒ½è¾“å‡º</p>
</li>
<li>
<p>å®Œæ•´çš„æ—¥å¿—è®°å½•è¦åŒ…å«æ—¥å¿—è¦æœ‰æ—¶é—´ã€è¡Œå·ã€æ–‡ä»¶åã€æ—¥å¿—çº§åˆ«ã€æ—¥å¿—ä¿¡æ¯</p>
</li>
<li>
<p>æ—¥å¿—æ–‡ä»¶è¦åˆ‡å‰²</p>
<ol>
<li>æŒ‰æ–‡ä»¶å¤§å°åˆ‡å‰²
<ol>
<li>æ¯æ¬¡è®°å½•æ—¥å¿—ä¹‹å‰éƒ½åˆ¤æ–­ä¸€ä¸‹å½“å‰å†™çš„è¿™ä¸ªæ–‡ä»¶çš„æ–‡ä»¶å¤§å°</li>
</ol>
</li>
<li>æŒ‰æ—¥æœŸåˆ‡å‰²
<ol>
<li>åœ¨æ—¥å¿—ç»“æ„ä½“ä¸­è®¾ç½®ä¸€ä¸ªå­—æ®µè®°å½•ä¸Šä¸€æ¬¡åˆ‡å‰²çš„å°æ—¶æ•°</li>
<li>åœ¨å†™æ—¥å¿—ä¹‹å‰æ£€æŸ¥ä¸€ä¸‹å½“å‰æ—¶é—´çš„å°æ—¶æ•°å’Œä¹‹å‰ä¿å­˜çš„æ˜¯å¦ä¸€è‡´ï¼Œä¸ä¸€è‡´å°±è¦åˆ‡å‰²</li>
</ol>
</li>
</ol>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;os&#34;</span>
	<span class="s">&#34;path&#34;</span>
	<span class="s">&#34;runtime&#34;</span>
	<span class="s">&#34;strconv&#34;</span>
	<span class="s">&#34;time&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">consoleLogger</span> <span class="o">:=</span> <span class="nf">NewConsoleLogger</span><span class="p">(</span><span class="nx">ERROR</span><span class="p">)</span>
	<span class="nx">Logger</span><span class="p">.</span><span class="nf">Debug</span><span class="p">(</span><span class="nx">consoleLogger</span><span class="p">,</span><span class="s">&#34;hello world&#34;</span><span class="p">)</span>
	<span class="nx">Logger</span><span class="p">.</span><span class="nf">Info</span><span class="p">(</span><span class="nx">consoleLogger</span><span class="p">,</span><span class="s">&#34;hello world&#34;</span><span class="p">)</span>
	<span class="nx">Logger</span><span class="p">.</span><span class="nf">Warning</span><span class="p">(</span><span class="nx">consoleLogger</span><span class="p">,</span><span class="s">&#34;hello world&#34;</span><span class="p">)</span>
	<span class="nx">Logger</span><span class="p">.</span><span class="nf">Error</span><span class="p">(</span><span class="nx">consoleLogger</span><span class="p">,</span><span class="s">&#34;hello world%d&#34;</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
	<span class="nx">Logger</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">consoleLogger</span><span class="p">,</span><span class="s">&#34;hello world&#34;</span><span class="p">)</span>

	<span class="nx">fileLogger</span> <span class="o">:=</span> <span class="nf">NewFileLogger</span><span class="p">(</span><span class="nx">ERROR</span><span class="p">,</span> <span class="s">&#34;.&#34;</span><span class="p">,</span> <span class="s">&#34;logdemo.txt&#34;</span><span class="p">,</span> <span class="s">&#34;logdemoerr.txt&#34;</span><span class="p">,</span> <span class="mi">128</span><span class="p">)</span>
	<span class="nf">Logger</span><span class="p">(</span><span class="nx">fileLogger</span><span class="p">).</span><span class="nf">Debug</span><span class="p">(</span><span class="s">&#34;hello world %d&#34;</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
	<span class="nf">Logger</span><span class="p">(</span><span class="nx">fileLogger</span><span class="p">).</span><span class="nf">Error</span><span class="p">(</span><span class="s">&#34;fatal error %v&#34;</span><span class="p">,</span><span class="s">&#34;æŸæ ‘è¢«æ¦¨å¹²äº†...&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">Logger</span> <span class="kd">interface</span> <span class="p">{</span>
	<span class="nf">Debug</span><span class="p">(</span><span class="kt">string</span><span class="p">,</span><span class="o">...</span><span class="kd">interface</span><span class="p">{})</span>
	<span class="nf">Info</span><span class="p">(</span><span class="kt">string</span><span class="p">,</span><span class="o">...</span><span class="kd">interface</span><span class="p">{})</span>
	<span class="nf">Warning</span><span class="p">(</span><span class="kt">string</span><span class="p">,</span><span class="o">...</span><span class="kd">interface</span><span class="p">{})</span>
	<span class="nf">Error</span><span class="p">(</span><span class="kt">string</span><span class="p">,</span><span class="o">...</span><span class="kd">interface</span><span class="p">{})</span>
	<span class="nf">Fatal</span><span class="p">(</span><span class="kt">string</span><span class="p">,</span><span class="o">...</span><span class="kd">interface</span><span class="p">{})</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">ConsoleLogger</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">LogLevel</span> <span class="nx">MODE</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">MODE</span> <span class="p">=</span> <span class="kt">int</span>

<span class="kd">const</span> <span class="p">(</span>
	<span class="nx">DEBUG</span> <span class="nx">MODE</span> <span class="p">=</span><span class="kc">iota</span>
	<span class="nx">INFO</span>
	<span class="nx">WARNING</span>
	<span class="nx">ERROR</span>
	<span class="nx">FATAL</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">NewConsoleLogger</span><span class="p">(</span><span class="nx">logLevel</span> <span class="nx">MODE</span><span class="p">)</span> <span class="nx">ConsoleLogger</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">ConsoleLogger</span><span class="p">{</span>
		<span class="nx">LogLevel</span><span class="p">:</span> <span class="nx">logLevel</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="nx">ConsoleLogger</span><span class="p">)</span> <span class="nf">Debug</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">,</span><span class="nx">a</span><span class="o">...</span><span class="kd">interface</span><span class="p">{})</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">m</span><span class="p">.</span><span class="nx">LogLevel</span><span class="o">&gt;=</span><span class="nx">DEBUG</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">msg</span> <span class="kt">string</span>
		<span class="k">if</span> <span class="nx">a</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
			<span class="nx">msg</span><span class="p">=</span><span class="nx">s</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="nx">msg</span><span class="p">=</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;[%v] [DEBUG] this is a debug log, value :%v\n&#34;</span><span class="p">,</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006-01-02 15-04-05&#34;</span><span class="p">),</span><span class="nx">msg</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">getInfo</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="nx">ConsoleLogger</span><span class="p">)</span> <span class="nf">Info</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">,</span><span class="nx">a</span> <span class="o">...</span><span class="kd">interface</span><span class="p">{})</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">m</span><span class="p">.</span><span class="nx">LogLevel</span><span class="o">&gt;=</span><span class="nx">INFO</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">msg</span> <span class="kt">string</span>
		<span class="k">if</span> <span class="nx">a</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
			<span class="nx">msg</span><span class="p">=</span><span class="nx">s</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="nx">msg</span><span class="p">=</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;[%v] [INFO] this is a info log, value :%v\n&#34;</span><span class="p">,</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006-01-02 15-04-05&#34;</span><span class="p">),</span> <span class="nx">msg</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">getInfo</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="nx">ConsoleLogger</span><span class="p">)</span> <span class="nf">Warning</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span> <span class="p">,</span> <span class="nx">a</span> <span class="o">...</span><span class="kd">interface</span><span class="p">{})</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">m</span><span class="p">.</span><span class="nx">LogLevel</span><span class="o">&gt;=</span><span class="nx">WARNING</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">msg</span> <span class="kt">string</span>
		<span class="k">if</span> <span class="nx">a</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
			<span class="nx">msg</span><span class="p">=</span><span class="nx">s</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="nx">msg</span><span class="p">=</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;[%v] [WARNING] this is a warning log, value :%v\n&#34;</span><span class="p">,</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006-01-02 15-04-05&#34;</span><span class="p">),</span> <span class="nx">msg</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">getInfo</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="nx">ConsoleLogger</span><span class="p">)</span> <span class="nf">Error</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">,</span><span class="nx">a</span> <span class="o">...</span><span class="kd">interface</span><span class="p">{})</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">m</span><span class="p">.</span><span class="nx">LogLevel</span><span class="o">&gt;=</span><span class="nx">ERROR</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">msg</span> <span class="kt">string</span>
		<span class="k">if</span> <span class="nx">a</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
			<span class="nx">msg</span><span class="p">=</span><span class="nx">s</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="nx">msg</span><span class="p">=</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;[%v] [ERROR] this is a error log, value :%v \n&#34;</span><span class="p">,</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006-01-02 15-04-05&#34;</span><span class="p">),</span> <span class="nx">msg</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">getInfo</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="nx">ConsoleLogger</span><span class="p">)</span> <span class="nf">Fatal</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">,</span><span class="nx">a</span><span class="o">...</span><span class="kd">interface</span><span class="p">{})</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">m</span><span class="p">.</span><span class="nx">LogLevel</span><span class="o">&gt;=</span><span class="nx">FATAL</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">msg</span> <span class="kt">string</span>
		<span class="k">if</span> <span class="nx">a</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
			<span class="nx">msg</span><span class="p">=</span><span class="nx">s</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="nx">msg</span><span class="p">=</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;[%v] [FATAL] this is a fatal log, value :%v\n&#34;</span><span class="p">,</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006-01-02 15-04-05&#34;</span><span class="p">),</span> <span class="nx">msg</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">getInfo</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">getInfo</span><span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
	<span class="nx">caller</span><span class="p">,</span> <span class="nx">file</span><span class="p">,</span> <span class="nx">line</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">runtime</span><span class="p">.</span><span class="nf">Caller</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span>
	<span class="k">if</span> <span class="p">!</span><span class="nx">ok</span> <span class="p">{</span>
		<span class="k">return</span> <span class="s">&#34;error&#34;</span>
	<span class="p">}</span>
	<span class="nx">name</span><span class="o">:=</span> <span class="nx">runtime</span><span class="p">.</span><span class="nf">FuncForPC</span><span class="p">(</span><span class="nx">caller</span><span class="p">).</span><span class="nf">Name</span><span class="p">()</span>
	<span class="k">return</span> <span class="s">&#34;fileLocation: &#34;</span><span class="o">+</span><span class="nx">path</span><span class="p">.</span><span class="nf">Base</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span><span class="o">+</span><span class="s">&#34;, method: &#34;</span><span class="o">+</span><span class="nx">name</span><span class="o">+</span><span class="s">&#34;, line: &#34;</span><span class="o">+</span><span class="nx">strconv</span><span class="p">.</span><span class="nf">Itoa</span><span class="p">(</span><span class="nx">line</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">FileLogger</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">LogLevel</span> <span class="nx">MODE</span>
	<span class="nx">fileName</span> <span class="kt">string</span>  <span class="c1">//æ—¥å¿—æ–‡ä»¶çš„åç§°
</span><span class="c1"></span>	<span class="nx">filePath</span> <span class="kt">string</span>	 <span class="c1">//æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„
</span><span class="c1"></span>	<span class="nx">errFileName</span> <span class="kt">string</span> 	<span class="c1">//é”™è¯¯æ—¥å¿—å•ç‹¬è®°å½•
</span><span class="c1"></span>	<span class="nx">maxFileSize</span> <span class="kt">int64</span>
	<span class="nx">fileObj</span> <span class="o">*</span><span class="nx">os</span><span class="p">.</span><span class="nx">File</span>
	<span class="nx">errFileObj</span> <span class="o">*</span><span class="nx">os</span><span class="p">.</span><span class="nx">File</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">NewFileLogger</span><span class="p">(</span><span class="nx">logLevel</span> <span class="nx">MODE</span><span class="p">,</span><span class="nx">filePath</span><span class="p">,</span> <span class="nx">fileName</span> <span class="p">,</span> <span class="nx">errFileName</span> <span class="kt">string</span> <span class="p">,</span> <span class="nx">maxFileSize</span> <span class="kt">int64</span><span class="p">)</span><span class="o">*</span><span class="nx">FileLogger</span>  <span class="p">{</span>
	<span class="nx">file</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">OpenFile</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nf">Join</span><span class="p">(</span><span class="nx">filePath</span><span class="p">,</span><span class="nx">fileName</span><span class="p">),</span> <span class="nx">os</span><span class="p">.</span><span class="nx">O_CREATE</span><span class="p">|</span><span class="nx">os</span><span class="p">.</span><span class="nx">O_APPEND</span><span class="p">|</span><span class="nx">os</span><span class="p">.</span><span class="nx">O_WRONLY</span><span class="p">,</span> <span class="mo">0644</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
		<span class="k">return</span> <span class="kc">nil</span>
	<span class="p">}</span>

	<span class="nx">errfile</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">OpenFile</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nf">Join</span><span class="p">(</span><span class="nx">filePath</span><span class="p">,</span><span class="nx">errFileName</span><span class="p">),</span><span class="nx">os</span><span class="p">.</span><span class="nx">O_CREATE</span><span class="p">|</span><span class="nx">os</span><span class="p">.</span><span class="nx">O_APPEND</span><span class="p">|</span><span class="nx">os</span><span class="p">.</span><span class="nx">O_WRONLY</span><span class="p">,</span><span class="mo">0644</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="k">return</span> <span class="kc">nil</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="o">&amp;</span><span class="nx">FileLogger</span><span class="p">{</span>
		<span class="nx">LogLevel</span><span class="p">:</span> <span class="nx">logLevel</span><span class="p">,</span>
		<span class="nx">fileName</span><span class="p">:</span>    <span class="nx">fileName</span><span class="p">,</span>
		<span class="nx">filePath</span><span class="p">:</span>    <span class="nx">filePath</span><span class="p">,</span>
		<span class="nx">errFileName</span><span class="p">:</span> <span class="nx">errFileName</span><span class="p">,</span>
		<span class="nx">maxFileSize</span><span class="p">:</span> <span class="nx">maxFileSize</span><span class="p">,</span>
		<span class="nx">fileObj</span><span class="p">:</span> <span class="nx">file</span><span class="p">,</span>
		<span class="nx">errFileObj</span><span class="p">:</span> <span class="nx">errfile</span> <span class="p">,</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">FileLogger</span><span class="p">)</span> <span class="nf">Close</span><span class="p">()</span>  <span class="p">{</span>
	<span class="nx">f</span><span class="p">.</span><span class="nx">fileObj</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
	<span class="nx">f</span><span class="p">.</span><span class="nx">errFileObj</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">FileLogger</span><span class="p">)</span> <span class="nf">checkSize</span><span class="p">(</span><span class="nx">fileObj</span> <span class="o">*</span><span class="nx">os</span><span class="p">.</span><span class="nx">File</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
	<span class="nx">stat</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">fileObj</span><span class="p">.</span><span class="nf">Stat</span><span class="p">()</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="k">return</span> <span class="kc">false</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="nx">stat</span><span class="p">.</span><span class="nf">Size</span><span class="p">()</span> <span class="p">&gt;</span> <span class="nx">f</span><span class="p">.</span><span class="nx">maxFileSize</span> <span class="p">{</span>
		<span class="k">return</span> <span class="kc">true</span>
	<span class="p">}</span><span class="k">else</span><span class="p">{</span>
		<span class="k">return</span> <span class="kc">false</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">FileLogger</span><span class="p">)</span><span class="nf">SplitLogFile</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">//éœ€è¦åˆ‡å‰²æ–‡ä»¶
</span><span class="c1"></span>	<span class="c1">//1.å…³é—­å½“å‰æ–‡ä»¶
</span><span class="c1"></span>	<span class="nx">f</span><span class="p">.</span><span class="nx">fileObj</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
	<span class="c1">//2.rename å¤‡ä»½ä¸€ä¸‹ xx.log -&gt; xx.log.bak201908031709
</span><span class="c1"></span>	<span class="nx">nowStr</span><span class="o">:=</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;20060102150405000&#34;</span><span class="p">)</span>
	<span class="nx">bakFilePath</span> <span class="o">:=</span> <span class="nx">path</span><span class="p">.</span><span class="nf">Join</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">filePath</span><span class="p">,</span> <span class="nx">f</span><span class="p">.</span><span class="nx">fileName</span><span class="p">)</span><span class="o">+</span><span class="s">&#34;.bak&#34;</span><span class="o">+</span><span class="nx">nowStr</span>
	<span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Rename</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nf">Join</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">filePath</span><span class="p">,</span> <span class="nx">f</span><span class="p">.</span><span class="nx">fileName</span><span class="p">),</span> <span class="nx">bakFilePath</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="k">return</span>
	<span class="p">}</span>
	<span class="c1">//3.æ‰“å¼€ä¸€ä¸ªæ–°çš„æ—¥å¿—æ–‡ä»¶
</span><span class="c1"></span>	<span class="nx">newFile</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">OpenFile</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nf">Join</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">filePath</span><span class="p">,</span> <span class="nx">f</span><span class="p">.</span><span class="nx">fileName</span><span class="p">),</span> <span class="nx">os</span><span class="p">.</span><span class="nx">O_CREATE</span><span class="p">|</span><span class="nx">os</span><span class="p">.</span><span class="nx">O_APPEND</span><span class="p">|</span><span class="nx">os</span><span class="p">.</span><span class="nx">O_WRONLY</span><span class="p">,</span> <span class="mo">0644</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="k">return</span>
	<span class="p">}</span>
	<span class="c1">//4.å°†æ‰“å¼€çš„æ–°æ—¥å¿—æ–‡ä»¶å¯¹è±¡èµ‹å€¼ç»™ f.fileObj
</span><span class="c1"></span>	<span class="nx">f</span><span class="p">.</span><span class="nx">fileObj</span> <span class="p">=</span> <span class="nx">newFile</span>

<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">FileLogger</span><span class="p">)</span> <span class="nf">Debug</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">a</span> <span class="o">...</span><span class="kd">interface</span><span class="p">{})</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">f</span><span class="p">.</span><span class="nx">LogLevel</span><span class="o">&gt;=</span><span class="nx">DEBUG</span> <span class="p">{</span>
		<span class="k">if</span> <span class="nx">f</span><span class="p">.</span><span class="nf">checkSize</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">fileObj</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">f</span><span class="p">.</span><span class="nf">SplitLogFile</span><span class="p">()</span>
		<span class="p">}</span>
		<span class="nx">msg</span> <span class="o">:=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span>
		<span class="nx">msg</span> <span class="p">=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;[%v] [DEBUG] this is a debug log, value :%v&#34;</span><span class="p">,</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006-01-02 15-04-05&#34;</span><span class="p">),</span> <span class="nx">msg</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">fileObj</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">fileObj</span><span class="p">,</span><span class="nx">msg</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">fileObj</span><span class="p">,</span><span class="nf">getInfo</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
		<span class="nx">f</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">FileLogger</span><span class="p">)</span> <span class="nf">Info</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">a</span> <span class="o">...</span><span class="kd">interface</span><span class="p">{})</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">f</span><span class="p">.</span><span class="nx">LogLevel</span><span class="o">&gt;=</span><span class="nx">INFO</span> <span class="p">{</span>

		<span class="nx">msg</span> <span class="o">:=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span>
		<span class="nx">msg</span> <span class="p">=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;[%v] [INFO] this is a info log, value :%v&#34;</span><span class="p">,</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006-01-02 15-04-05&#34;</span><span class="p">),</span> <span class="nx">msg</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">fileObj</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">fileObj</span><span class="p">,</span><span class="nx">msg</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">fileObj</span><span class="p">,</span><span class="nf">getInfo</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
		<span class="nx">f</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">FileLogger</span><span class="p">)</span> <span class="nf">Warning</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">a</span> <span class="o">...</span><span class="kd">interface</span><span class="p">{})</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">f</span><span class="p">.</span><span class="nx">LogLevel</span><span class="o">&gt;=</span><span class="nx">WARNING</span> <span class="p">{</span>

		<span class="nx">msg</span> <span class="o">:=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span>
		<span class="nx">msg</span> <span class="p">=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;[%v] [WARNING] this is a warning log, value :%v&#34;</span><span class="p">,</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006-01-02 15-04-05&#34;</span><span class="p">),</span> <span class="nx">msg</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">fileObj</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">fileObj</span><span class="p">,</span><span class="nx">msg</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">fileObj</span><span class="p">,</span><span class="nf">getInfo</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
		<span class="nx">f</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">FileLogger</span><span class="p">)</span> <span class="nf">Error</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">a</span> <span class="o">...</span><span class="kd">interface</span><span class="p">{})</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">f</span><span class="p">.</span><span class="nx">LogLevel</span><span class="o">&gt;=</span><span class="nx">ERROR</span> <span class="p">{</span>

		<span class="nx">msg</span> <span class="o">:=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span>
		<span class="nx">msg</span> <span class="p">=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;[%v] [ERROR] this is a error log, value :%v&#34;</span><span class="p">,</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006-01-02 15-04-05&#34;</span><span class="p">),</span> <span class="nx">msg</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">fileObj</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">fileObj</span><span class="p">,</span><span class="nx">msg</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">fileObj</span><span class="p">,</span><span class="nf">getInfo</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>

		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">errFileObj</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">errFileObj</span><span class="p">,</span><span class="nx">msg</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">errFileObj</span><span class="p">,</span><span class="nf">getInfo</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
		<span class="nx">f</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">FileLogger</span><span class="p">)</span> <span class="nf">Fatal</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">a</span> <span class="o">...</span><span class="kd">interface</span><span class="p">{})</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">f</span><span class="p">.</span><span class="nx">LogLevel</span><span class="o">&gt;=</span><span class="nx">FATAL</span> <span class="p">{</span>

		<span class="nx">msg</span> <span class="o">:=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span>
		<span class="nx">msg</span> <span class="p">=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;[%v] [FATAL] this is a Fatal log, value :%v&#34;</span><span class="p">,</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006-01-02 15-04-05&#34;</span><span class="p">),</span> <span class="nx">msg</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">fileObj</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">fileObj</span><span class="p">,</span><span class="nx">msg</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">fileObj</span><span class="p">,</span><span class="nf">getInfo</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>

		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">errFileObj</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">errFileObj</span><span class="p">,</span><span class="nx">msg</span><span class="p">)</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">errFileObj</span><span class="p">,</span><span class="nf">getInfo</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
		<span class="nx">f</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h5 id="åå°„">åå°„</h5>
<p>åå°„æ˜¯æŒ‡åœ¨ç¨‹åºè¿è¡ŒæœŸé—´å¯¹ç¨‹åºæœ¬èº«è¿›è¡Œè®¿é—®å’Œä¿®æ”¹çš„èƒ½åŠ›ã€‚ç¨‹åºåœ¨ç¼–è¯‘æ—¶ï¼Œå˜é‡è¢«è½¬æ¢ä¸ºå†…å­˜åœ°å€ï¼Œå˜é‡åä¸ä¼šè¢«ç¼–è¯‘å™¨å†™å…¥åˆ°å¯æ‰§è¡Œéƒ¨åˆ†ã€‚åœ¨è¿è¡Œç¨‹åºæ—¶ï¼Œç¨‹åºæ— æ³•è·å–è‡ªèº«çš„ä¿¡æ¯ã€‚</p>
<p>æ”¯æŒåå°„çš„è¯­è¨€å¯ä»¥åœ¨ç¨‹åºç¼–è¯‘æœŸå°†å˜é‡çš„åå°„ä¿¡æ¯ï¼Œå¦‚å­—æ®µåç§°ã€ç±»å‹åç§°ã€ç»“æ„ä½“ä¿¡æ¯ç­‰æ•´åˆåˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œå¹¶ç»™ç¨‹åºæä¾›æ¥å£è®¿é—®åå°„ä¿¡æ¯ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ç¨‹åºè¿è¡ŒæœŸè·å–ç±»å‹çš„åå°„ä¿¡æ¯ï¼Œå¹¶ä¸”æœ‰èƒ½åŠ›ä¿®æ”¹å¥¹ä»¬ã€‚</p>
<p>goç¨‹åºåœ¨è¿è¡ŒæœŸä½¿ç”¨reflectåŒ…è®¿é—®ç¨‹åºçš„åå°„ä¿¡æ¯ã€‚</p>
<p>ç©ºæ¥å£å¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„å˜é‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•çŸ¥é“ç©ºæ¥å£ä¿å­˜çš„æ•°æ®æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿåå°„å°±æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€çš„è·å–ä¸€ä¸ªå˜é‡çš„ç±»å‹ä¿¡æ¯å’Œå€¼ä¿¡æ¯ã€‚</p>
<h5 id="reflectåŒ…">reflectåŒ…</h5>
<p>åœ¨goè¯­è¨€çš„åå°„æœºåˆ¶ä¸­ï¼Œä»»ä½•æ¥å£å€¼éƒ½æ˜¯ç”±ä¸€ä¸ªå…·ä½“ç±»å‹å’Œå…·ä½“ç±»å‹çš„å€¼ä¸¤éƒ¨åˆ†ç»„æˆçš„ã€‚åœ¨goè¯­è¨€ä¸­åå°„çš„ç›¸å…³åŠŸèƒ½æœ‰å†…ç½®çš„reflectåŒ…æä¾›ï¼Œä»»æ„æ¥å£å€¼åœ¨åå°„ä¸­éƒ½å¯ä»¥ç†è§£ä¸ºæœ‰reflect.Type å’Œ reflect.Value ä¸¤éƒ¨åˆ†ç»„æˆï¼Œå¹¶ä¸”reflectåŒ…æä¾›äº†reflect.TypeOf å’Œ reflect.ValueOfä¸¤ä¸ªå‡½æ•°æ¥è·å–ä»»æ„å¯¹è±¡çš„valueå’Œtype</p>
<p>typeof</p>
<p>valueof</p>
<h5 id="type-name-å’Œ-type-kind">type name å’Œ type kind</h5>
<p>åœ¨åå°„ä¸­å…³äºç±»å‹è¿˜åˆ’åˆ†ä¸ºä¸¤ç§ï¼šç±»å‹typeå’Œç§ç±»kind åœ¨goè¯­è¨€ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨typeå…³é”®å­—æ„é€ å¾ˆå¤šç§è‡ªå®šä¹‰ç±»Iå‹é‚£ä¸ªï¼Œè€Œç§ç±»kindå°±æ˜¯æŒ‡åº•å±‚çš„ç±»å‹ï¼Œä½†åœ¨åå°„ä¸­ï¼Œå½“éœ€è¦åŒºåˆ†æŒ‡é’ˆã€ç»“æ„ä½“ç­‰å¤§å“ç§çš„ç±»å‹æ—¶ï¼Œå°±ä¼šç”¨åˆ°ç§ç±»kind</p>
<h5 id="valueof">valueof</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;reflect&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nf">reflectType</span><span class="p">(</span><span class="nb">int64</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span>
   <span class="nf">reflectType</span><span class="p">(</span><span class="nb">int32</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span>
   <span class="nf">reflectType</span><span class="p">(</span><span class="s">&#34;hello world&#34;</span><span class="p">)</span>
   <span class="nf">reflectType</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kd">interface</span><span class="p">{}]</span><span class="kd">interface</span><span class="p">{}{</span><span class="mi">1</span><span class="p">:</span><span class="s">&#34;hello&#34;</span> <span class="p">,</span> <span class="s">&#34;hello world&#34;</span><span class="p">:[]</span><span class="kt">bool</span><span class="p">{</span><span class="kc">true</span><span class="p">}})</span>
   <span class="nf">reflectType</span><span class="p">(</span><span class="nx">cat</span><span class="p">{</span><span class="nx">name</span><span class="p">:</span> <span class="s">&#34;tomcat&#34;</span><span class="p">})</span>

   <span class="nf">reflectValue</span><span class="p">(</span><span class="nb">int64</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span>

   <span class="nx">b</span><span class="o">:=</span><span class="nb">int64</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
   <span class="c1">//reflectSetValue1(b)  //è¿™æ ·ä¸è¡Œä¼šå¼•å‘panicé”™è¯¯
</span><span class="c1"></span>   <span class="nf">reflectSetValue2</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">b</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span>

   <span class="kd">var</span> <span class="nx">a</span> <span class="o">*</span><span class="kt">int</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">reflect</span><span class="p">.</span><span class="nf">ValueOf</span><span class="p">(</span><span class="nx">a</span><span class="p">).</span><span class="nf">IsNil</span><span class="p">())</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">reflect</span><span class="p">.</span><span class="nf">ValueOf</span><span class="p">(</span><span class="nx">a</span><span class="p">).</span><span class="nf">IsValid</span><span class="p">())</span>
   <span class="nx">c</span> <span class="o">:=</span> <span class="nx">cat</span><span class="p">{</span><span class="nx">name</span><span class="p">:</span> <span class="s">&#34;tomcat&#34;</span><span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">reflect</span><span class="p">.</span><span class="nf">ValueOf</span><span class="p">(</span><span class="nx">c</span><span class="p">).</span><span class="nf">FieldByName</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">))</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">reflect</span><span class="p">.</span><span class="nf">ValueOf</span><span class="p">(</span><span class="nx">c</span><span class="p">).</span><span class="nf">MethodByName</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">).</span><span class="nf">IsValid</span><span class="p">())</span>

   <span class="nx">m</span><span class="o">:=</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="s">&#34;å¨œæ‰&#34;</span><span class="p">:</span><span class="mi">1</span><span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">reflect</span><span class="p">.</span><span class="nf">ValueOf</span><span class="p">(</span><span class="nx">m</span><span class="p">).</span><span class="nf">MapIndex</span><span class="p">(</span><span class="nx">reflect</span><span class="p">.</span><span class="nf">ValueOf</span><span class="p">(</span><span class="s">&#34;å¨œæ‰&#34;</span><span class="p">)).</span><span class="nf">IsValid</span><span class="p">())</span>

<span class="p">}</span>
<span class="kd">func</span> <span class="nf">reflectType</span><span class="p">(</span><span class="nx">a</span> <span class="kd">interface</span><span class="p">{})</span> <span class="p">{</span>
   <span class="nx">v</span> <span class="o">:=</span> <span class="nx">reflect</span><span class="p">.</span><span class="nf">TypeOf</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T %v\n&#34;</span><span class="p">,</span><span class="nx">v</span><span class="p">,</span><span class="nx">v</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;type %v  kind %v \n&#34;</span><span class="p">,</span><span class="nx">v</span><span class="p">.</span><span class="nf">Name</span><span class="p">(),</span><span class="nx">v</span><span class="p">.</span><span class="nf">Kind</span><span class="p">())</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">reflectValue</span><span class="p">(</span><span class="nx">a</span> <span class="kd">interface</span><span class="p">{})</span>  <span class="p">{</span>
   <span class="nx">v</span><span class="o">:=</span><span class="nx">reflect</span><span class="p">.</span><span class="nf">ValueOf</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
   <span class="nx">kind</span> <span class="o">:=</span> <span class="nx">v</span><span class="p">.</span><span class="nf">Kind</span><span class="p">()</span>
   <span class="k">switch</span> <span class="nx">kind</span> <span class="p">{</span>
   <span class="k">case</span> <span class="nx">reflect</span><span class="p">.</span><span class="nx">Int64</span><span class="p">:</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;type is int64,value is %d\n&#34;</span><span class="p">,</span><span class="nb">int64</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nf">Int</span><span class="p">()))</span>
   <span class="k">case</span> <span class="nx">reflect</span><span class="p">.</span><span class="nx">Float32</span><span class="p">:</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;type is float32, value is %f\n&#34;</span><span class="p">,</span><span class="nb">float32</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nf">Float</span><span class="p">()))</span>
   <span class="p">}</span>

<span class="p">}</span>
<span class="kd">func</span> <span class="nf">reflectSetValue1</span><span class="p">(</span><span class="nx">x</span> <span class="kd">interface</span><span class="p">{})</span> <span class="p">{</span>
   <span class="nx">value</span> <span class="o">:=</span> <span class="nx">reflect</span><span class="p">.</span><span class="nf">ValueOf</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">value</span><span class="p">.</span><span class="nf">Kind</span><span class="p">()</span> <span class="o">==</span> <span class="nx">reflect</span><span class="p">.</span><span class="nx">Int64</span> <span class="p">{</span>
      <span class="nx">value</span><span class="p">.</span><span class="nf">SetInt</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>  <span class="c1">//ä¿®æ”¹çš„æ˜¯å‰¯æœ¬ reflectåŒ…ä¼šå¼•å‘panic
</span><span class="c1"></span>   <span class="p">}</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">reflectSetValue2</span><span class="p">(</span><span class="nx">x</span> <span class="kd">interface</span><span class="p">{})</span> <span class="p">{</span>
   <span class="nx">value</span> <span class="o">:=</span><span class="nx">reflect</span><span class="p">.</span><span class="nf">ValueOf</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">value</span><span class="p">.</span><span class="nf">Elem</span><span class="p">().</span><span class="nf">Kind</span><span class="p">()</span> <span class="o">==</span> <span class="nx">reflect</span><span class="p">.</span><span class="nx">Int64</span> <span class="p">{</span>
      <span class="nx">value</span><span class="p">.</span><span class="nf">Elem</span><span class="p">().</span><span class="nf">SetInt</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
   <span class="p">}</span>
<span class="p">}</span>
<span class="kd">type</span> <span class="nx">cat</span> <span class="kd">struct</span> <span class="p">{</span>
   <span class="nx">name</span> <span class="kt">string</span>
<span class="p">}</span>
</code></pre></div><h5 id="é€šè¿‡åå°„è®¾ç½®å˜é‡çš„å€¼">é€šè¿‡åå°„è®¾ç½®å˜é‡çš„å€¼</h5>
<p>æƒ³è¦åœ¨å‡½æ•°ä¸­é€šè¿‡åå°„ä¿®æ”¹å˜é‡çš„å€¼ï¼Œéœ€è¦æ³¨æ„å‡½æ•°å‚æ•°ä¼ é€’çš„æ˜¯å€¼æ‹·è´ï¼Œå¿…é¡»ä¼ é€’å˜é‡åœ°å€æ‰èƒ½ä¿®æ”¹å˜é‡å€¼ã€‚è€Œåå°„ä¸­ä½¿ç”¨ä¸“æœ‰çš„elem()æ–¹æ³•æ¥è·å–æŒ‡é’ˆå¯¹åº”çš„å€¼</p>
<h5 id="isnilå’Œisvalid">isNilå’ŒisValid</h5>
<p>æŠ¥å‘ŠæŒæœ‰çš„å€¼æ˜¯å¦ä¸ºnilï¼ŒæŒæœ‰çš„å€¼çš„åˆ†ç±»å¿…é¡»æ˜¯é€šé“ã€å‡½æ•°ã€æ¥å£ã€æ˜ å°„ã€æŒ‡é’ˆã€åˆ‡ç‰‡ä¹‹ä¸€ï¼Œå¦åˆ™ä¼šå¯¼è‡´panic</p>
<p>isvalidè¿”å›væ˜¯å¦æŒæœ‰ä¸€ä¸ªå€¼ï¼Œå¦‚æœvæ˜¯valueçš„é›¶å€¼å°±ä¼šè¿”å›å‡ï¼Œå¦‚æœvé™¤äº†isvalidã€stringã€kindä¹‹å¤–çš„æ–¹æ³•éƒ½ä¼šå¯¼è‡´panic</p>
<h5 id="åŒºåˆ«">åŒºåˆ«</h5>
<p>isnilå¸¸è¢«ç”¨äºåˆ¤æ–­æŒ‡é’ˆæ˜¯å¦ä¸ºç©ºï¼Œisvalidå¸¸è¢«ç”¨äºåˆ¤å®šè¿”å›å€¼æ˜¯å¦æœ‰æ•ˆ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="nx">json2</span> <span class="s">&#34;encoding/json&#34;</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;reflect&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">s</span><span class="o">:=</span><span class="nx">student</span><span class="p">{</span>
      <span class="nx">Name</span><span class="p">:</span>  <span class="s">&#34;xwz&#34;</span><span class="p">,</span>
      <span class="nx">Score</span><span class="p">:</span> <span class="s">&#34;90&#34;</span><span class="p">,</span>
   <span class="p">}</span>
<span class="c1">//æœ€ç»ˆè¦å¾—åˆ° {&#34;name&#34;:&#34;xwz&#34;,&#34;score&#34;:90}
</span><span class="c1"></span>   <span class="nx">typeof</span> <span class="o">:=</span> <span class="nx">reflect</span><span class="p">.</span><span class="nf">TypeOf</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
   <span class="nx">json</span><span class="o">:=</span><span class="s">`{`</span>
   <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">typeof</span><span class="p">.</span><span class="nf">NumField</span><span class="p">();</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">typeof</span><span class="p">.</span><span class="nf">FieldByIndex</span><span class="p">([]</span><span class="kt">int</span><span class="p">{</span><span class="nx">i</span><span class="p">}).</span><span class="nx">Name</span><span class="p">)</span>
      <span class="c1">//fmt.Println(typeof.Field(i).Name)
</span><span class="c1"></span>      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">typeof</span><span class="p">.</span><span class="nf">FieldByIndex</span><span class="p">([]</span><span class="kt">int</span><span class="p">{</span><span class="nx">i</span><span class="p">}).</span><span class="nx">Tag</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="s">&#34;json&#34;</span><span class="p">))</span>
      <span class="nx">json</span><span class="o">+=</span><span class="s">&#34;\&#34;&#34;</span><span class="o">+</span><span class="nx">typeof</span><span class="p">.</span><span class="nf">Field</span><span class="p">(</span><span class="nx">i</span><span class="p">).</span><span class="nx">Tag</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="s">&#34;json&#34;</span><span class="p">)</span><span class="o">+</span><span class="s">&#34;\&#34;&#34;</span><span class="o">+</span><span class="s">&#34;:&#34;</span>
      <span class="nx">structField</span><span class="p">,</span> <span class="nx">b</span> <span class="o">:=</span> <span class="nx">typeof</span><span class="p">.</span><span class="nf">FieldByName</span><span class="p">(</span><span class="nx">typeof</span><span class="p">.</span><span class="nf">Field</span><span class="p">(</span><span class="nx">i</span><span class="p">).</span><span class="nx">Name</span><span class="p">)</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">structField</span><span class="p">.</span><span class="nx">Name</span><span class="p">)</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">structField</span><span class="p">.</span><span class="nx">Type</span><span class="p">)</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">structField</span><span class="p">.</span><span class="nx">Index</span><span class="p">)</span>
      <span class="nx">valueof</span><span class="o">:=</span> <span class="nx">reflect</span><span class="p">.</span><span class="nf">ValueOf</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">valueof</span><span class="p">.</span><span class="nf">Field</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
      <span class="nx">sprint</span> <span class="o">:=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprint</span><span class="p">(</span><span class="nx">valueof</span><span class="p">.</span><span class="nf">Field</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
      <span class="k">if</span> <span class="nx">b</span> <span class="p">{</span>
         <span class="nx">json</span><span class="o">+=</span><span class="s">&#34;\&#34;&#34;</span><span class="o">+</span><span class="nx">sprint</span><span class="o">+</span><span class="s">&#34;\&#34;&#34;</span><span class="o">+</span><span class="s">&#34;,&#34;</span>
      <span class="p">}</span>
   <span class="p">}</span>
   <span class="nx">s2</span> <span class="o">:=</span> <span class="nx">json</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="nx">json</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
   <span class="nx">json</span> <span class="p">=</span> <span class="nx">s2</span>
   <span class="nx">json</span><span class="o">+=</span><span class="s">&#34;}&#34;</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">json</span><span class="p">)</span>

   <span class="kd">var</span> <span class="nx">s1</span> <span class="nx">student</span>
   <span class="nx">json2</span><span class="p">.</span><span class="nf">Unmarshal</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">json</span><span class="p">),</span><span class="o">&amp;</span><span class="nx">s1</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s1</span><span class="p">)</span>
   <span class="c1">//ååºåˆ—åŒ–å®ä¾‹
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">type</span> <span class="nx">student</span> <span class="kd">struct</span> <span class="p">{</span>
   <span class="nx">Name</span> <span class="kt">string</span> <span class="s">`json:&#34;name&#34;`</span>
   <span class="nx">Score</span> <span class="kt">string</span> <span class="s">`json:&#34;score&#34;`</span>
<span class="p">}</span>
</code></pre></div><h5 id="å†…å®¹å›é¡¾-4">å†…å®¹å›é¡¾</h5>
<h5 id="time">time</h5>
<h5 id="æ—¶é—´ç±»å‹">æ—¶é—´ç±»å‹</h5>
<ul>
<li>time.Time : Time.Now()</li>
<li>æ—¶é—´æˆ³:
<ul>
<li>time.Now().Unix()</li>
<li>time.Now().UnixNano():1971.1.1åˆ°ç°åœ¨çš„çº³ç§’æ•°</li>
</ul>
</li>
</ul>
<h5 id="æ—¶é—´é—´éš”ç±»å‹">æ—¶é—´é—´éš”ç±»å‹</h5>
<ul>
<li>time.Duration ï¼šæ—¶é—´é—´éš”ç±»å‹
<ul>
<li>time.Second</li>
<li>time.Hour</li>
<li>time.Minute</li>
</ul>
</li>
</ul>
<h5 id="æ—¶é—´æ“ä½œ">æ—¶é—´æ“ä½œ</h5>
<p>æ—¶é—´å¯¹è±¡+-ä¸€ä¸ªæ—¶é—´é—´éš”å¯¹è±¡</p>
<p>after ã€ before</p>
<h5 id="æ—¶é—´æ ¼å¼åŒ–-1">æ—¶é—´æ ¼å¼åŒ–</h5>
<p>format</p>
<h5 id="å®šæ—¶å™¨">å®šæ—¶å™¨</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="c1">//å®šæ—¶å™¨
</span><span class="c1">//tick := time.Tick(time.Second)
</span><span class="c1">//for  i := range tick {
</span><span class="c1">// fmt.Println(i)
</span><span class="c1">//}
</span></code></pre></div><h5 id="è§£æå­—ç¬¦ä¸²æ ¼å¼çš„æ—¶é—´æ—¶åŒº">è§£æå­—ç¬¦ä¸²æ ¼å¼çš„æ—¶é—´ï¼ˆæ—¶åŒºï¼‰</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">now</span><span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">()</span>
<span class="c1">//è·å–çš„æ˜¯å½“å‰æ—¶åŒºçš„æ—¶é—´
</span><span class="c1"></span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">now</span><span class="p">)</span>
<span class="c1">//æŒ‰ç…§ä¸œå…«åŒºçš„æ—¶åŒºå’Œæ ¼å¼è§£æä¸€ä¸ªå­—ç¬¦ä¸²æ ¼å¼çš„æ—¶é—´
</span><span class="c1"></span><span class="nx">time</span><span class="p">.</span><span class="nf">Parse</span><span class="p">(</span><span class="s">&#34;2006-01-02 15:04:05&#34;</span><span class="p">,</span> <span class="s">&#34;2021-08-11 21:33:05&#34;</span><span class="p">)</span>
<span class="c1">//æ ¹æ®å­—ç¬¦åŠ è½½æ—¶åŒº
</span><span class="c1"></span><span class="nx">location</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">LoadLocation</span><span class="p">(</span><span class="s">&#34;Asia/Shanghai&#34;</span><span class="p">)</span>
<span class="k">if</span> <span class="nx">err</span><span class="o">!=</span><span class="kc">nil</span> <span class="p">{</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;load loc failed , err :%v\n&#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
   <span class="k">return</span>
<span class="p">}</span>
<span class="c1">//æŒ‰ç…§æŒ‡å®šæ—¶åŒºè§£ææ—¶é—´
</span><span class="c1"></span><span class="nx">parseInLocation</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">ParseInLocation</span><span class="p">(</span><span class="s">&#34;2006-01-02 15:05:05&#34;</span><span class="p">,</span> <span class="s">&#34;2021-08-11 21:33:05&#34;</span><span class="p">,</span> <span class="nx">location</span><span class="p">)</span>

<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Sub</span><span class="p">(</span><span class="nx">parseInLocation</span><span class="p">))</span>
</code></pre></div><h5 id="æ—¥å¿—åº“-1">æ—¥å¿—åº“</h5>
<p>time</p>
<p>æ–‡ä»¶æ“ä½œ</p>
<p>runtime.caller()</p>
<h5 id="åå°„-1">åå°„</h5>
<p>æ¥å£ç±»å‹çš„å˜é‡åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼ŒåŠ¨æ€ç±»å‹å’ŒåŠ¨æ€å€¼ã€‚</p>
<p>åå°„çš„åº”ç”¨ï¼šjsonç­‰æ•°æ®è§£æ ORMç­‰å·¥å…·&hellip;</p>
<h5 id="åå°„çš„ä¸¤ä¸ªæ–¹æ³•">åå°„çš„ä¸¤ä¸ªæ–¹æ³•ï¼š</h5>
<ul>
<li>reflect.Typeof()</li>
<li>reflect.Valueof()</li>
</ul>
<h4 id="ä»Šæ—¥å†…å®¹-2">ä»Šæ—¥å†…å®¹</h4>
<h5 id="strconvæ ‡å‡†åº“ä»‹ç»">strconvæ ‡å‡†åº“ä»‹ç»</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;strconv&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">str</span><span class="o">:=</span><span class="s">&#34;1000&#34;</span>
   <span class="nx">parseInt</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">strconv</span><span class="p">.</span><span class="nf">ParseInt</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">64</span><span class="p">)</span> <span class="c1">//10è¿›åˆ¶ int64
</span><span class="c1"></span>   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T %v\n&#34;</span><span class="p">,</span><span class="nx">parseInt</span><span class="p">,</span><span class="nx">parseInt</span><span class="p">)</span>

   <span class="nx">parseInt1</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">strconv</span><span class="p">.</span><span class="nf">ParseInt</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%T %v\n&#34;</span><span class="p">,</span><span class="nx">parseInt1</span><span class="p">,</span><span class="nx">parseInt1</span><span class="p">)</span>

   <span class="nx">atoi</span><span class="p">,</span><span class="nx">_</span><span class="o">:=</span><span class="nx">strconv</span><span class="p">.</span><span class="nf">Atoi</span><span class="p">(</span><span class="s">&#34;1000&#34;</span><span class="p">)</span><span class="c1">//goè¯­è¨€ç»§æ‰¿cè¯­è¨€è€Œæ¥çš„ aæ˜¯array å› ä¸ºstringåº•å±‚å®é™…ä¸Šæ˜¯arrayçš„byteæ•°ç»„ iæ˜¯int
</span><span class="c1"></span>   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">atoi</span><span class="p">)</span>

   <span class="nx">i</span> <span class="o">:=</span><span class="mi">97</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>  <span class="c1">//a
</span><span class="c1"></span>   <span class="nx">sprint</span> <span class="o">:=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprint</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="c1">//97
</span><span class="c1"></span>
   <span class="c1">//å­—ç¬¦ä¸²ä¸­è§£æå‡ºboolå€¼
</span><span class="c1"></span>   <span class="nx">s2</span><span class="o">:=</span><span class="s">&#34;true&#34;</span>
   <span class="nx">parseBool</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">strconv</span><span class="p">.</span><span class="nf">ParseBool</span><span class="p">(</span><span class="nx">s2</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">parseBool</span><span class="p">)</span>

   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">strconv</span><span class="p">.</span><span class="nf">ParseFloat</span><span class="p">(</span><span class="s">&#34;2.14&#34;</span><span class="p">,</span><span class="mi">32</span><span class="p">))</span>

   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">sprint</span><span class="p">)</span>

<span class="p">}</span>
</code></pre></div><h5 id="å¹¶å‘">å¹¶å‘</h5>
<p>å¹¶å‘æ˜¯ç¼–ç¨‹é‡Œé¢ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼Œgoè¯­è¨€åœ¨è¯­è¨€å±‚é¢å¤©ç”Ÿæ”¯æŒå¹¶å‘ï¼Œè¿™ä¹Ÿæ˜¯goè¯­è¨€æµè¡Œçš„ä¸€ä¸ªå¾ˆé‡è¦çš„åŸå› ã€‚</p>
<h5 id="goè¯­è¨€çš„å¹¶å‘ç¼–ç¨‹">goè¯­è¨€çš„å¹¶å‘ç¼–ç¨‹</h5>
<h5 id="å¹¶å‘ä¸å¹¶è¡Œ">å¹¶å‘ä¸å¹¶è¡Œ</h5>
<p>å¹¶å‘ï¼šåŒä¸€æ—¶é—´æ®µå†…æ‰§è¡Œå¤šä¸ªä»»åŠ¡</p>
<p>å¹¶è¡Œï¼šåŒä¸€æ—¶åˆ»æ‰§è¡Œå¤šä¸ªä»»åŠ¡</p>
<p>goè¯­è¨€çš„å¹¶å‘é€šè¿‡goroutineå®ç°ã€‚goroutineç±»ä¼¼äºçº¿ç¨‹ï¼Œå±äºç”¨æˆ·æ€çš„çº¿ç¨‹.æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦åˆ›å»ºæˆåƒä¸Šä¸‡ä¸ªgoroutineä¸ªå¹¶å‘å·¥ä½œã€‚goroutineç”±goè¯­è¨€çš„è¿è¡Œæ—¶runtimeè°ƒåº¦å®Œæˆï¼Œè€Œçº¿ç¨‹æ˜¯ç”±æ“ä½œç³»ç»Ÿè°ƒåº¦å®Œæˆçš„ã€‚</p>
<p>goè¯­è¨€è¿˜æä¾›channelåœ¨å¤šä¸ªgoroutineé—´è¿›è¡Œé€šä¿¡ã€‚goroutineå’Œchannelæ˜¯goè¯­è¨€ç§‰æ‰¿CSP communication sequential  process å¹¶å‘æ¨¡å¼çš„é‡è¦å®ç°åŸºç¡€.</p>
<h5 id="goutine">goutine</h5>
<p>åœ¨javaå’Œc++ä¸­æˆ‘ä»¬è¦å®ç°å¹¶å‘ç¼–ç¨‹çš„æ—¶å€™,æˆ‘ä»¬é€šå¸¸è¦è‡ªå·±ç»´æŠ¤ä¸€ä¸ªçº¿ç¨‹æ± ,å¹¶ä¸”éœ€è¦è‡ªå·±å»åŒ…è£…ä¸€ä¸ªåˆä¸€ä¸ªä»»åŠ¡,åŒæ—¶éœ€è¦è‡ªå·±å»è°ƒåº¦çº¿ç¨‹æ‰§è¡Œä»»åŠ¡å¹¶ç»´æŠ¤ä¸Šä¸‹æ–‡åˆ‡æ¢,è¿™ä¸€åˆ‡é€šå¸¸ä¼šè€—è´¹ç¨‹åºå‘˜å¤§é‡çš„å¿ƒæ™º.é‚£ä¹ˆèƒ½ä¸èƒ½æœ‰ä¸€ç§æœºåˆ¶,ç¨‹åºå‘˜åªéœ€è¦å®šä¹‰å¾ˆå¤šä¸ªä»»åŠ¡,è®©ç³»ç»Ÿå»å¸®åŠ©æˆ‘ä»¬å§è¿™äº›ä»»åŠ¡åˆ†é…åˆ°CPUä¸Šå®ç°å¹¶å‘æ‰§è¡Œå‘¢?</p>
<p>goè¯­è¨€ä¸­çš„goroutineå°±æ˜¯è¿™æ ·ä¸€ç§æœºåˆ¶,goroutineçš„æ¦‚å¿µç±»ä¼¼äºçº¿ç¨‹,ä½†goroutineæ˜¯ç”±goçš„è¿è¡Œæ—¶runtimeè°ƒåº¦å’Œç®¡ç†çš„.goç¨‹åºä¼šæ™ºèƒ½åœ°å°†goroutineä¸­çš„ä»»åŠ¡åˆç†çš„åˆ†é…ç»™æ¯ä¸ªcpu.goè¯­è¨€ä¹‹æ‰€ä»¥è¢«æˆä¸ºç°ä»£åŒ–çš„ç¼–ç¨‹è¯­è¨€,å°±æ˜¯å› ä¸ºä»–åœ¨è¯­è¨€å±‚é¢å·²ç»å†…ç½®äº†è°ƒåº¦å’Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„æœºåˆ¶.</p>
<p>åœ¨goè¯­è¨€å˜æˆä¸­ä½ ä¸éœ€è¦è‡ªå·±å»å†™è¿›çº¿ç¨‹/çº¿ç¨‹/åç¨‹,ä½ çš„æŠ€èƒ½åŒ…é‡Œåªæœ‰ä¸€ä¸ªæŠ€èƒ½ &mdash;- goroutine,å½“ä½ éœ€è¦è®©æŸä¸ªä»»åŠ¡å¹¶å‘æ‰§è¡Œçš„æ—¶å€™,ä½ åªéœ€è¦æŠŠè¿™ä¸ªä»»åŠ¡åŒ…è£…æˆä¸€ä¸ªå‡½æ•°,å¼€å¯ä¸€ä¸ªgoroutineå»æ‰§è¡Œè¿™ä¸ªå‡½æ•°å°±å¯ä»¥äº†,å°±æ˜¯è¿™ä¹ˆç®€å•ç²—æš´.</p>
<h5 id="ä½¿ç”¨goroutine">ä½¿ç”¨goroutine</h5>
<p>goè¯­è¨€ä¸­ä½¿ç”¨goroutineéå¸¸ç®€å•,åªéœ€è¦åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™åœ¨å‰é¢åŠ ä¸Šgoå…³é”®å­—,å°±å¯ä»¥ä¸ºä¸€ä¸ªå‡½æ•°åˆ›å»ºä¸€ä¸ªgoroutine</p>
<p>ä¸€ä¸ªgoroutineå¿…å®šå¯¹åº”ä¸€ä¸ªå‡½æ•°,å¯ä»¥åˆ›å»ºå¤šä¸ªgoroutineå»æ‰§è¡Œç›¸åŒçš„å‡½æ•°</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;time&#34;</span>
<span class="p">)</span>

<span class="c1">//ç¨‹åºå¯åŠ¨ä¹‹åä¼šåˆ›å»ºä¸€ä¸ªä¸»goroutineå»æ‰§è¡Œ
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
      <span class="c1">//go hello(i)  //å¼€å¯ä¸€ä¸ªå•ç‹¬çš„goroutineå»æ‰§è¡Œhelloå‡½æ•°ï¼ˆä»»åŠ¡ï¼‰
</span><span class="c1"></span>
      <span class="c1">//åŒ¿å
</span><span class="c1"></span>      <span class="c1">//go func() {
</span><span class="c1"></span>      <span class="c1">// fmt.Println(i)
</span><span class="c1"></span>      <span class="c1">//}()  //é—­åŒ… ä¼šå‡ºç°iå¤–å±‚æ˜¯1 å†…éƒ¨è¾“å‡º1 å¤–éƒ¨è¿™æ—¶å€™å·²ç»è·‘åˆ°10äº† é‚£ä¹ˆè¿™æ—¶å€™å†…éƒ¨å°±è¾“å‡º10
</span><span class="c1"></span>
      <span class="c1">//
</span><span class="c1"></span>      <span class="k">go</span> <span class="kd">func</span><span class="p">(</span><span class="nx">i</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>  <span class="c1">//ç”¨çš„æ˜¯å‡½æ•°å‚æ•°çš„é‚£ä¸ªi ï¼Œ ä¸å†æ˜¯å¤–é¢çš„é‚£ä¸ªiäº†
</span><span class="c1"></span>      <span class="p">}(</span><span class="nx">i</span><span class="p">)</span>


   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">)</span>
   <span class="c1">//mainå‡½æ•°ç»“æŸäº† ç”±mainå‡½æ•°å¯åŠ¨çš„goroutineä¹Ÿéƒ½ç»“æŸäº†
</span><span class="c1"></span>   <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">hello</span><span class="p">(</span><span class="nx">i</span> <span class="kt">int</span><span class="p">)</span>  <span class="p">{</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;hello&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h5 id="goroutineä»€ä¹ˆæ—¶å€™ç»“æŸ">goroutineä»€ä¹ˆæ—¶å€™ç»“æŸ</h5>
<p>goroutineå¯¹åº”çš„å‡½æ•°æ‰§è¡Œç»“æŸ goroutineå°±ç»“æŸäº†</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;math/rand&#34;</span>
   <span class="s">&#34;sync&#34;</span>
   <span class="s">&#34;time&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">//waitGroup
</span><span class="c1"></span>   <span class="c1">//f1()
</span><span class="c1"></span>   <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span><span class="mi">10</span> <span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
      <span class="nx">wg</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
      <span class="k">go</span> <span class="nf">f2</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
   <span class="p">}</span>

   <span class="c1">//å¦‚ä½•çŸ¥é“è¿™10ä¸ªgoroutineéƒ½ç»“æŸäº†
</span><span class="c1"></span>   <span class="nx">wg</span><span class="p">.</span><span class="nf">Wait</span><span class="p">()</span>  <span class="c1">//ç­‰å¾…wgçš„è®¡æ•°å™¨å‡ä¸º0
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">var</span> <span class="nx">wg</span> <span class="nx">sync</span><span class="p">.</span><span class="nx">WaitGroup</span>

<span class="kd">func</span> <span class="nf">f1</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">rand</span><span class="p">.</span><span class="nf">Seed</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">UnixNano</span><span class="p">())</span>
   <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
      <span class="nx">i1</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Int</span><span class="p">()</span>
      <span class="nx">i2</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Intn</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>  <span class="c1">//å·¦å¼€å³é—­
</span><span class="c1"></span>      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">i1</span><span class="p">,</span><span class="nx">i2</span><span class="p">)</span>
   <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f2</span><span class="p">(</span><span class="nx">i</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Millisecond</span><span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nf">Duration</span><span class="p">(</span><span class="nx">rand</span><span class="p">.</span><span class="nf">Intn</span><span class="p">(</span><span class="mi">300</span><span class="p">)))</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
   <span class="k">defer</span> <span class="nx">wg</span><span class="p">.</span><span class="nf">Done</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div><h5 id="rand">rand</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">f1</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">rand</span><span class="p">.</span><span class="nf">Seed</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">UnixNano</span><span class="p">())</span>
   <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
      <span class="nx">i1</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Int</span><span class="p">()</span>
      <span class="nx">i2</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Intn</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>  <span class="c1">//å·¦å¼€å³é—­
</span><span class="c1"></span>      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">i1</span><span class="p">,</span><span class="nx">i2</span><span class="p">)</span>

   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h4 id="goroutineä¸çº¿ç¨‹">goroutineä¸çº¿ç¨‹</h4>
<h5 id="å¯å¢é•¿çš„æ ˆ">å¯å¢é•¿çš„æ ˆ</h5>
<p>OSçº¿ç¨‹ï¼ˆæ“ä½œç³»ç»Ÿçº¿ç¨‹ï¼‰ä¸€èˆ¬éƒ½æœ‰å›ºå®šçš„æ ˆå†…å­˜ï¼ˆé€šå¸¸ä¸º2MBï¼‰ï¼Œä¸€ä¸ªgoroutineçš„æ ˆåœ¨å…¶ç”Ÿå‘½å‘¨æœŸå¼€å§‹æ—¶åªæœ‰å¾ˆå°çš„æ ˆï¼ˆå…¸å‹æƒ…å†µä¸‹2KBï¼‰ï¼Œgoroutineçš„æ ˆä¸æ˜¯å›ºå®šçš„ï¼Œä»–å¯ä»¥æŒ‰éœ€å¢å¤§å’Œå‡å°ï¼Œgoroutineçš„æ ˆå¤§å°é™åˆ¶å¯ä»¥è¾¾åˆ°1GBï¼Œè™½ç„¶æå°‘ä¼šç”¨åˆ°è¿™ä¹ˆå¤§ï¼Œæ‰€ä»¥åœ¨goè¯­è¨€ä¸­ä¸€æ¬¡åˆ›å»º10wå·¦å³çš„goroutineä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<h5 id="goroutineè°ƒåº¦">goroutineè°ƒåº¦</h5>
<p>GMPæ˜¯goè¯­è¨€è¿è¡Œæ—¶runtimeå±‚é¢çš„å®ç°ï¼Œæ˜¯goè¯­è¨€è‡ªå·±å®ç°çš„ä¸€å¥—è°ƒåº¦ç³»ç»Ÿã€‚åŒºåˆ«ä¸æ“ä½œç³»ç»Ÿè°ƒåº¦OSçº¿ç¨‹ã€‚</p>
<ul>
<li>Gå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯ä¸ªgoroutineçš„ï¼Œé‡Œé¢é™¤äº†å­˜æ”¾goroutineä¿¡æ¯å¤– è¿˜æœ‰ä¸æ‰€åœ¨Pçš„ç»‘å®šç­‰ä¿¡æ¯</li>
<li>M machineæ˜¯Goè¿è¡Œæ—¶runtineå¯¹æ“ä½œç³»ç»Ÿå†…æ ¸çº¿ç¨‹çš„è™šæ‹Ÿï¼ŒMä¸å†…æ ¸çº¿ç¨‹ä¸€èˆ¬æ˜¯ä¸€ä¸€æ˜ å°„çš„å…³ç³»ï¼Œä¸€ä¸ªgoroutineæœ€ç»ˆæ˜¯è¦æ”¾åˆ°Mä¸Šæ‰§è¡Œçš„</li>
<li>Pç®¡ç†ç€ä¸€ç»„goroutineé˜Ÿåˆ—ï¼ŒPé‡Œé¢ä¼šå­˜å‚¨å½“å‰goroutineè¿è¡Œçš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼ˆå‡½æ•°æŒ‡é’ˆã€å †æ ˆåœ°å€åŠåœ°å€è¾¹ç•Œï¼‰ï¼ŒPä¼šå¯¹è‡ªå·±ç®¡ç†çš„goroutineé˜Ÿåˆ—åšä¸€äº›è°ƒåº¦ï¼ˆæ¯”å¦‚æŠŠå ç”¨CPUæ—¶é—´è¾ƒé•¿çš„goroutineæš‚åœã€è¿è¡Œåç»­çš„goroutineç­‰ç­‰ï¼‰å½“è‡ªå·±çš„é˜Ÿåˆ—æ¶ˆè´¹å®Œäº†å°±å»å…¨å±€é˜Ÿåˆ—é‡Œå–ï¼Œå¦‚æœå…¨å±€é˜Ÿåˆ—é‡Œä¹Ÿæ¶ˆè´¹å®Œäº†ä¼šå»å…¶ä»–Pçš„é˜Ÿåˆ—é‡ŒæŠ¢ä»»åŠ¡ã€‚</li>
</ul>
<p>Pä¸Mä¸€èˆ¬ä¹Ÿæ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚å¥¹ä»¬å…³ç³»æ˜¯ï¼šPç®¡ç†ç€ä¸€ç»„GæŒ‚è½½åœ¨Mä¸Šè¿è¡Œã€‚å½“ä¸€ä¸ªGé•¿ä¹…çš„é˜»å¡åœ¨ä¸€ä¸ªMä¸Šæ—¶ï¼Œruntimeä¼šæ–°å»ºä¸€ä¸ªMï¼Œé˜»å¡Gæ‰€åœ¨çš„Pä¼šæŠŠå…¶ä»–çš„GæŒ‚è½½åœ¨æ–°å»ºçš„Mä¸Šã€‚å½“æ—§çš„Gé˜»å¡å®Œæˆæˆ–è€…è®¤ä¸ºå…¶å·²ç»æ­»æ‰æ—¶ï¼Œå›æ”¶æ‰æ—§çš„M</p>
<p>Pçš„ä¸ªæ•°æ˜¯é€šè¿‡runtime.GOMAXPROCSè®¾å®šçš„ï¼Œæœ€å¤§ä¸º256 go1.5ç‰ˆæœ¬ä¹‹åé»˜è®¤ä¸ºç‰©ç†çº¿ç¨‹æ•°ã€‚åœ¨å¹¶å‘é‡å¤§çš„æ—¶å€™ä¼šå¢åŠ ä¸€äº›På’ŒMï¼Œä½†ä¸ä¼šå¤ªå¤šï¼Œåˆ‡æ¢å¤ªé¢‘ç¹çš„è¯ä¼šå¾—ä¸å¿å¤±</p>
<p>å•ä»çº¿ç¨‹è°ƒåº¦è®²ï¼ŒGoè¯­è¨€ç›¸æ¯”èµ·æ¥å…¶ä»–è¯­è¨€çš„ä¼˜åŠ¿åœ¨äºOSçº¿ç¨‹æ˜¯æœ‰OSå†…æ ¸æ¥è°ƒåº¦çš„ã€‚goroutineåˆ™æ˜¯ç”±Goè¿è¡Œæ—¶ runtimeè‡ªå·±çš„è°ƒåº¦å™¨è°ƒåº¦çš„ã€‚è¿™ä¸ªè°ƒåº¦å™¨ä½¿ç”¨ä¸€ä¸ªæˆä¸ºmï¼šnè°ƒåº¦æŠ€æœ¯ï¼ˆå¤ç”¨/è°ƒåº¦mä¸ªgoroutineåˆ°nä¸ªOSçº¿ç¨‹ï¼‰å…¶ä¸€å¤§ç‰¹ç‚¹æ˜¯goroutineçš„è°ƒåº¦æ˜¯åœ¨ç”¨æˆ·æ€ä¸‹å®Œæˆçš„ï¼Œä¸æ¶‰åŠå†…æ ¸æ€ä¸ç”¨æˆ·æ€ä¹‹é—´çš„é¢‘ç¹åˆ‡æ¢ï¼ŒåŒ…æ‹¬å†…å­˜çš„åˆ†é…ä¸é‡Šæ”¾éƒ½æ˜¯åœ¨ç”¨æˆ·æ€ç»´æŠ¤ç€ä¸€å¤§å—çš„å†…å­˜æ± ï¼Œä¸ç›´æ¥è°ƒç”¨ç³»ç»Ÿçš„mallocå‡½æ•°ï¼ˆé™¤éå†…å­˜æ± éœ€è¦æ”¹å˜ï¼‰ï¼Œæˆæœ¬æ¯”è°ƒåº¦OSçº¿ç¨‹ä½å¾ˆå¤šã€‚å¦ä¸€æ–¹é¢å……åˆ†åˆ©ç”¨äº†å¤šæ ¸çš„ç¡¬ä»¶èµ„æºï¼Œè¿‘ä¼¼çš„å§è‹¥å¹²goroutineå‡åˆ†åœ¨ç‰©ç†çº¿ç¨‹ä¸Šï¼Œå†åŠ ä¸Šæœ¬èº«goroutineçš„è¶…è½»é‡ï¼Œä»¥ä¸Šç§ç§ä¿è¯äº†goè°ƒåº¦æ–¹é¢çš„æ€§èƒ½ã€‚</p>
<h5 id="gomaxprocs">GOMAXPROCS</h5>
<p>goè¿è¡Œæ—¶çš„è°ƒåº¦ä½¿ç”¨gomaxprocså‚æ•°æ¥ç¡®å®šéœ€è¦ä½¿ç”¨å¤šå°‘ä¸ªOSçº¿ç¨‹æ¥åŒæ—¶æ‰§è¡Œgoä»£ç ã€‚é»˜è®¤å€¼æ˜¯æœºå™¨ä¸Šçš„CPUæ ¸å¿ƒæ•°ã€‚ä¾‹å¦‚åœ¨ä¸€ä¸ª8æ ¸å¿ƒçš„æœºå™¨ä¸Šï¼Œè°ƒåº¦å™¨ä¼šæŠŠgoä»£ç åŒæ—¶è°ƒåº¦åˆ°8ä¸ªOSçº¿ç¨‹ä¸Š(GOMAXPROCSæ˜¯mï¼šnè°ƒåº¦ä¸­çš„n)</p>
<p>goè¯­è¨€ä¸­å¯ä»¥é€šè¿‡runtime.gomaxprocs()å‡½æ•°æ¥è®¾å®šå½“å‰ç¨‹åºå¹¶å‘æ—¶å ç”¨çš„CPUé€»è¾‘æ ¸å¿ƒæ•°</p>
<p>go1.5ç‰ˆæœ¬ä¹‹å‰ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯å•æ ¸å¿ƒæ‰§è¡Œã€‚go1.5ç‰ˆæœ¬ä¹‹åï¼Œé»˜è®¤ä½¿ç”¨å…¨éƒ¨çš„CPUé€»è¾‘æ ¸å¿ƒæ•°</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;runtime&#34;</span>
   <span class="s">&#34;sync&#34;</span>
<span class="p">)</span>
<span class="kd">var</span> <span class="nx">wg</span> <span class="nx">sync</span><span class="p">.</span><span class="nx">WaitGroup</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">runtime</span><span class="p">.</span><span class="nf">GOMAXPROCS</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1">//é»˜è®¤CPUçš„é€»è¾‘æ ¸å¿ƒæ•°ï¼Œé»˜è®¤è·‘æ»¡æ•´ä¸ªCPU
</span><span class="c1"></span>   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">runtime</span><span class="p">.</span><span class="nf">NumCPU</span><span class="p">())</span>
   <span class="nx">wg</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
   <span class="k">go</span> <span class="nf">a</span><span class="p">()</span>
   <span class="k">go</span> <span class="nf">b</span><span class="p">()</span>
   <span class="nx">wg</span><span class="p">.</span><span class="nf">Wait</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">a</span><span class="p">()</span> <span class="p">{</span>
   <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;A:%d\n&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
   <span class="p">}</span>
   <span class="k">defer</span> <span class="nx">wg</span><span class="p">.</span><span class="nf">Done</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">b</span><span class="p">()</span> <span class="p">{</span>
   <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;B:%d\n&#34;</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
   <span class="p">}</span>
   <span class="k">defer</span> <span class="nx">wg</span><span class="p">.</span><span class="nf">Done</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div><h5 id="goè¯­è¨€ä¸­çš„æ“ä½œç³»ç»Ÿçº¿ç¨‹å’Œgoroutineçš„å…³ç³»">goè¯­è¨€ä¸­çš„æ“ä½œç³»ç»Ÿçº¿ç¨‹å’Œgoroutineçš„å…³ç³»</h5>
<ol>
<li>ä¸€ä¸ªæ“ä½œç³»ç»Ÿçº¿ç¨‹å¯¹åº”ç”¨æˆ·æ€å¤šä¸ªgoroutine</li>
<li>goç¨‹åºå¯ä»¥åŒæ—¶ä½¿ç”¨å¤šä¸ªæ“ä½œç³»ç»Ÿçº¿ç¨‹</li>
<li>goroutineå’ŒOSçº¿ç¨‹æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ï¼Œå³m:n</li>
</ol>
<h5 id="goroutineè°ƒåº¦æ¨¡å‹">goroutineè°ƒåº¦æ¨¡å‹</h5>
<p>GMP</p>
<p>mï¼šn</p>
<p>goroutineåˆå§‹æ ˆçš„å¤§å°æ˜¯2k</p>
<h5 id="channel">channel</h5>
<p>å•çº¯åœ°å°†å‡½æ•°å¹¶å‘æ‰§è¡Œæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚å‡½æ•°ä¸å‡½æ•°é—´éœ€è¦äº¤æ¢æ•°æ®æ‰èƒ½ä½“ç°å¹¶å‘æ‰§è¡Œçš„æ„ä¹‰</p>
<p>è™½ç„¶å¯ä»¥ä½¿ç”¨å…±äº«å†…å­˜è¿›è¡Œæ•°æ®äº¤æ¢ï¼Œä½†æ˜¯å…±äº«å†…å­˜åœ¨ä¸åŒçš„goroutineä¸­å®¹æ˜“å‘ç”Ÿç«æ€é—®é¢˜ã€‚ä¸ºäº†ä¿è¯æ•°æ®äº¤æ¢çš„æ­£ç¡®æ€§ï¼Œå¿…é¡»ä½¿ç”¨äº’æ–¥é‡å¯¹å†…å­˜è¿›è¡ŒåŠ é”ï¼Œä½†è¿™ç§åšæ³•åŠ¿å¿…é€ æˆæ€§èƒ½é—®é¢˜ã€‚</p>
<p>goè¯­è¨€çš„å¹¶å‘æ¨¡å‹æ˜¯CSP communication sequential processes æå€¡é€šè¿‡é€šä¿¡å…±äº«å†…å­˜è€Œä¸æ˜¯é€šè¿‡å…±äº«å†…å­˜è€Œå®ç°é€šä¿¡</p>
<p>å¦‚æœè¯´goroutineæ˜¯goç¨‹åºå¹¶å‘çš„æ‰§è¡Œä½“ï¼Œchannelå°±æ˜¯ä»–ä»¬ä¹‹é—´çš„è¿æ¥ã€‚channelæ˜¯å¯ä»¥è®©ä¸€ä¸ªgoroutineå‘é€ç‰¹å®šå€¼åˆ°å¦ä¸€ä¸ªgoroutineçš„é€šä¿¡æœºåˆ¶</p>
<p>goè¯­è¨€ä¸­çš„é€šé“channelæ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»å‹ã€‚é€šé“åƒä¸€ä¸ªä¼ é€å¸¦æˆ–è€…é˜Ÿåˆ—ï¼Œæ€»æ˜¯éµå¾ªå…ˆå…¥å…ˆå‡ºfifoçš„è§„åˆ™ï¼Œä¿è¯æ”¶å‘æ•°æ®çš„é¡ºåºã€‚æ¯ä¸€ä¸ªé€šé“éƒ½æ˜¯å…·ä½“ç±»å‹çš„å¯¼ç®¡ï¼Œä¹Ÿå°±æ˜¯å£°æ˜channelçš„æ—¶å€™éœ€è¦ä¸ºå…¶æŒ‡å®šå…ƒç´ ç±»å‹ã€‚</p>
<h5 id="channelç±»å‹">channelç±»å‹</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">var</span> <span class="nx">å˜é‡</span> <span class="kd">chan</span> <span class="nx">å…ƒç´ ç±»å‹</span>
</code></pre></div><p>é€šé“å¿…é¡»ä½¿ç”¨makeå‡½æ•°åˆå§‹åŒ–æ‰èƒ½ä½¿ç”¨</p>
<h5 id="å‘é€">å‘é€</h5>
<p>å°†ä¸€ä¸ªå€¼å‘é€åˆ°é€šé“ä¸­</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">ch</span> <span class="o">&lt;-</span> <span class="mi">10</span> <span class="c1">//æŠŠ10å‘é€åˆ°ch
</span></code></pre></div><h5 id="æ¥æ”¶">æ¥æ”¶</h5>
<p>ä»ä¸€ä¸ªé€šé“æ¥æ”¶å€¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">x</span> <span class="o">:=</span> <span class="o">&lt;-</span> <span class="nx">ch</span>  <span class="c1">//ä»chä¸­æ¥æ”¶å€¼å¹¶èµ‹å€¼
</span><span class="c1"></span><span class="o">&lt;-</span> <span class="nx">ch</span> <span class="c1">//ä»chä¸­æ¥æ”¶å€¼ï¼Œå¿½ç•¥ç»“æœ
</span></code></pre></div><h5 id="å…³é—­">å…³é—­</h5>
<p>æˆ‘ä»¬é€šè¿‡è°ƒç”¨å†…ç½®çš„closeå‡½æ•°æ¥å…³é—­é€šé“</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nb">close</span><span class="p">(</span><span class="nx">ch</span><span class="p">)</span>
</code></pre></div><p>å…³äºå…³é—­é€šé“éœ€è¦æ³¨æ„çš„äº‹æƒ…æ˜¯ï¼Œåªæœ‰åœ¨é€šçŸ¥æ¥æ”¶æ–¹goroutineæ‰€æœ‰çš„æ•°æ®éƒ½å‘é€å®Œæ¯•çš„æ—¶å€™æ‰éœ€è¦å…³é—­é€šé“ã€‚é€šé“æ˜¯å¯ä»¥è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶çš„ï¼Œä»–å’Œå…³é—­æ–‡ä»¶ä¸ä¸€æ ·ï¼Œåœ¨ç»“æŸæ“ä½œä¹‹åå…³é—­æ–‡ä»¶æ˜¯å¿…é¡»è¦åšçš„ï¼Œä½†å…³é—­é€šé“ä¸æ˜¯å¿…é¡»çš„ã€‚</p>
<p>å…³é—­åçš„é€šé“æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ol>
<li>å¯¹ä¸€ä¸ªå…³é—­çš„é€šé“å†å‘é€å€¼å°±ä¼šå¯¼è‡´panic</li>
<li>å¯¹ä¸€ä¸ªå…³é—­çš„é€šé“è¿›è¡Œæ¥æ”¶å°±ä¼šä¸€ç›´è·å–ç›´åˆ°é€šé“ä¸ºç©º</li>
<li>å¯¹ä¸€ä¸ªå…³é—­çš„å¹¶ä¸”æ²¡æœ‰å€¼çš„é€šé“æ‰§è¡Œæ¥æ”¶æ“ä½œä¼šå¾—åˆ°å¯¹åº”ç±»å‹çš„é›¶å€¼</li>
<li>å…³é—­ä¸€ä¸ªå·²ç»å…³é—­çš„é€šé“ä¼šå¯¼è‡´panic</li>
</ol>
<h5 id="æ— ç¼“å†²é€šé“">æ— ç¼“å†²é€šé“</h5>
<p>æ— ç¼“å†²çš„é€šé“åˆç§°ä¸ºé˜»å¡çš„é€šé“ã€‚æ— ç¼“å†²çš„é€šé“åªåœ¨æœ‰äººæ¥æ”¶å€¼çš„æ—¶å€™æ‰èƒ½å‘é€å€¼ã€‚æ— ç¼“å†²é€šé“ä¸Šçš„å‘é€æ“ä½œä¼šé˜»å¡ï¼Œç›´åˆ°å¦ä¸€ä¸ªgoroutineåœ¨è¯¥é€šé“ä¸Šæ‰§è¡Œæ¥æ”¶æ“ä½œï¼Œè¿™ä¸ªå€¼æ‰èƒ½å‘é€æˆåŠŸï¼Œä¸¤ä¸ªgoroutineå°†ç»§ç»­æ‰§è¡Œã€‚ç›¸åï¼Œå¦‚æœæ¥æ”¶æ“ä½œå…ˆæ‰§è¡Œï¼Œæ¥æ”¶æ–¹çš„goroutineå°†é˜»å¡ï¼Œç›´åˆ°å¦ä¸€ä¸ªgoroutineåœ¨è¯¥é€šé“ä¸Šå‘é€ä¸€ä¸ªå€¼ã€‚ä½¿ç”¨æ— ç¼“å†²é€šé“è¿›è¡Œé€šä¿¡å°†å¯¼è‡´å‘é€å’Œæ¥æ”¶çš„goroutineåŒæ­¥åŒ–ã€‚å› æ­¤ï¼Œæ— ç¼“å†²é€šé“ä¹Ÿè¢«æˆä¸ºåŒæ­¥é€šé“</p>
<h5 id="æœ‰ç¼“å†²é€šé“">æœ‰ç¼“å†²é€šé“</h5>
<p>åœ¨ä½¿ç”¨makeåˆå§‹åŒ–çš„æ—¶å€™ä¸ºå…¶æŒ‡å®šé€šé“çš„å®¹é‡</p>
<p>åªè¦é€šé“çš„å®¹é‡å¤§äºé›¶ï¼Œé‚£ä¹ˆè¯¥é€šé“å°±æ˜¯æœ‰ç¼“å†²çš„é€šé“ï¼Œé€šé“çš„å®¹é‡è¡¨ç¤ºé€šé“ä¸­èƒ½å­˜æ”¾å…ƒç´ çš„æ•°é‡ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†…ç½®çš„lenå‡½æ•°è·å–é€šé“å†…å…ƒç´ çš„æ•°é‡ï¼Œä½¿ç”¨capå‡½æ•°è·å–é€šé“çš„å®¹é‡</p>
<h5 id="å¦‚ä½•ä¼˜é›…çš„ä»é€šé“å¾ªç¯å–å€¼">å¦‚ä½•ä¼˜é›…çš„ä»é€šé“å¾ªç¯å–å€¼</h5>
<p>å½“é€šè¿‡é€šé“å‘é€æœ‰é™çš„æ•°æ®æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡closeå‡½æ•°å…³é—­é€šé“æ¥å‘ŠçŸ¥ä»è¯¥é€šé“æ¥æ”¶å€¼çš„goroutineåœæ­¢ç­‰å¾…ã€‚å½“é€šé“è¢«å…³é—­æ—¶ï¼Œå¾€è¯¥é€šé“å‘é€å€¼ä¼šå¼•å‘panicï¼Œä»è¯¥é€šé“é‡Œæ¥æ”¶çš„å€¼ä¸€ç›´éƒ½æ˜¯ç±»å‹çš„é›¶å€¼ã€‚é‚£ä¹ˆå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªé€šé“æ˜¯å¦è¢«å…³é—­äº†å‘¢ï¼Ÿ</p>
<h5 id="å•å‘é€šé“">å•å‘é€šé“</h5>
<p>æœ‰çš„æ—¶å€™æˆ‘ä»¬ä¼šå°†é€šé“ä½œä¸ºå‚æ•°åœ¨å¤šä¸ªä»»åŠ¡å‡½æ•°é—´ä¼ é€’ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬åœ¨ä¸åŒçš„ä»»åŠ¡å‡½æ•°ä¸­ä½¿ç”¨é€šé“éƒ½ä¼šå¯¹å…¶è¿›è¡Œé™åˆ¶ï¼Œæ¯”å¦‚åªèƒ½å‘é€æˆ–åªèƒ½æ¥æ”¶ã€‚goè¯­è¨€ä¸­æä¾›äº†å•å‘é€šé“æ¥å¤„ç†è¿™ç§æƒ…å†µã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">var</span> <span class="nx">ch1</span> <span class="o">&lt;-</span><span class="kd">chan</span> <span class="c1">//åªèƒ½å–å€¼
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">ch2</span> <span class="kd">chan</span><span class="o">&lt;-</span> <span class="c1">//åªèƒ½å­˜å€¼
</span></code></pre></div><p><figure 
	>
	<a href="/GoLearning.assets/image-20210813220847452.png" >
		<img src="/GoLearning.assets/image-20210813220847452.png"
			
			
			
			loading="lazy"
			alt="image-20210813220847452">
	</a>
	
	<figcaption>image-20210813220847452</figcaption>
	
</figure></p>
<h5 id="worker-pool-goroutineæ± ">worker pool ï¼ˆgoroutineæ± ï¼‰</h5>
<p>ç¼–å†™ä»£ç å®ç°ä¸€ä¸ªè®¡ç®—éšæœºæ•°çš„æ¯ä¸ªä½ç½®æ•°å­—ä¹‹å’Œçš„ç¨‹åºã€‚è¦æ±‚ä½¿ç”¨goroutineå’Œchannelæ„å»ºç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼ï¼Œå¯ä»¥æŒ‡å®šå¯åŠ¨çš„goroutineæ•°é‡-worker poolæ¨¡å¼</p>
<p>åœ¨å·¥ä½œä¸­æˆ‘ä»¬é€šå¸¸ä¼šç”¨worker poolæ¨¡å¼ï¼Œæ§åˆ¶goroutineæ•°é‡ï¼Œé˜²æ­¢goroutineæ³„æ¼å’Œæš´æ¶¨</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;time&#34;</span>
<span class="p">)</span>

<span class="kd">var</span> <span class="nx">jobs</span> <span class="kd">chan</span> <span class="kt">int</span>
<span class="kd">var</span> <span class="nx">results</span> <span class="kd">chan</span> <span class="kt">int</span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">jobs</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span> <span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
   <span class="nx">results</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span> <span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
   <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
      <span class="k">go</span> <span class="nf">worker</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span><span class="nx">jobs</span><span class="p">,</span><span class="nx">results</span><span class="p">)</span>
   <span class="p">}</span>
   <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
      <span class="nx">jobs</span><span class="o">&lt;-</span><span class="nx">i</span>
   <span class="p">}</span>
   <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
      <span class="o">&lt;-</span><span class="nx">results</span>
   <span class="p">}</span>
   <span class="c1">//for result := range results {
</span><span class="c1"></span>   <span class="c1">// fmt.Println(result)
</span><span class="c1"></span>   <span class="c1">//}
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">func</span> <span class="nf">worker</span><span class="p">(</span><span class="nx">id</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">jobs</span> <span class="o">&lt;-</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">results</span> <span class="kd">chan</span><span class="o">&lt;-</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">for</span> <span class="nx">j</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">jobs</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;worker &#34;</span><span class="p">,</span><span class="nx">id</span><span class="p">,</span><span class="s">&#34; start job &#34;</span><span class="p">,</span><span class="nx">j</span><span class="p">)</span>
      <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
      <span class="nx">results</span><span class="o">&lt;-</span><span class="mi">2</span><span class="o">*</span><span class="nx">j</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;worker &#34;</span><span class="p">,</span><span class="nx">id</span><span class="p">,</span><span class="s">&#34; end job&#34;</span> <span class="p">,</span> <span class="nx">j</span><span class="p">)</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h5 id="ç»ƒä¹ ">ç»ƒä¹ </h5>
<h5 id="selectå¤šè·¯å¤ç”¨">selectå¤šè·¯å¤ç”¨</h5>
<p>åœ¨æŸäº›åœºæ™¯ä¸‹æˆ‘ä»¬éœ€è¦åŒæ—¶ä»å¤šä¸ªé€šé“æ¥æ”¶æ•°æ®ã€‚é€šé“åœ¨æ¥æ”¶æ•°æ®æ—¶ï¼Œå¦‚æœæ²¡æœ‰æ•°æ®å¯ä»¥æ¥æ”¶å°†ä¼šå‘ç”Ÿé˜»å¡ã€‚ä½ ä¹Ÿè®¸ä¼šå†™å‡ºå¦‚ä¸‹ä»£ç ä½¿ç”¨éå†çš„æ–¹å¼æ¥å®ç°</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210813232439809.png" >
		<img src="/GoLearning.assets/image-20210813232439809.png"
			
			
			
			loading="lazy"
			alt="image-20210813232439809">
	</a>
	
	<figcaption>image-20210813232439809</figcaption>
	
</figure></p>
<p>è¿™ç§æ–¹å¼è™½ç„¶å¯ä»¥å®ç°ä»å¤šä¸ªé€šé“æ¥æ”¶å€¼çš„è¦æ±‚ï¼Œä½†æ˜¯è¿è¡Œæ€§èƒ½ä¼šå·®å¾ˆå¤šã€‚ä¸ºäº†åº”å¯¹è¿™ç§åœºæ™¯ï¼Œgoå†…ç½®äº†selectå…³é”®å­—ï¼Œå¯ä»¥åŒæ—¶å“åº”å¤šä¸ªé€šé“çš„æ“ä½œã€‚selectçš„ä½¿ç”¨ç±»ä¼¼äºswitchè¯­å¥ï¼Œä»–æœ‰ä¸€äº›caseåˆ†æ”¯å’Œä¸€ä¸ªé»˜è®¤çš„åˆ†æ”¯ã€‚æ¯ä¸ªcaseä¼šå¯¹åº”ä¸€ä¸ªé€šé“çš„é€šä¿¡ï¼ˆæ¥æ”¶æˆ–å‘é€ï¼‰è¿‡ç¨‹ã€‚selectä¼šä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°æŸä¸ªcaseçš„é€šä¿¡æ“ä½œå®Œæˆæ—¶ï¼Œå°±ä¼šæ‰§è¡Œcaseåˆ†æ”¯å¯¹åº”çš„è¯­å¥ã€‚</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210813232707904.png" >
		<img src="/GoLearning.assets/image-20210813232707904.png"
			
			
			
			loading="lazy"
			alt="image-20210813232707904">
	</a>
	
	<figcaption>image-20210813232707904</figcaption>
	
</figure></p>
<p>ä½¿ç”¨selectè¯­å¥èƒ½æé«˜å¯è¯»æ€§</p>
<ul>
<li>å¯å¤„ç†ä¸€ä¸ªæˆ–å¤šä¸ªchannelçš„å‘é€/æ¥æ”¶æ“ä½œ</li>
<li>å¦‚æœæœ‰å¤šä¸ªcaseåŒæ—¶æ»¡è¶³ï¼Œselectä¼šéšæœºé€‰æ‹©ä¸€ä¸ª</li>
<li>å¯¹äºæ²¡æœ‰caseçš„select{}ä¼šä¸€ç›´ç­‰å¾…ï¼Œå¯ç”¨äºé˜»å¡mainå‡½æ•°</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">ch</span><span class="o">:=</span><span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span> <span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
   <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
      <span class="k">select</span> <span class="p">{</span>
      <span class="k">case</span> <span class="nx">x</span><span class="o">:=&lt;-</span><span class="nx">ch</span><span class="p">:</span>
         <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
      <span class="k">case</span> <span class="nx">ch</span><span class="o">&lt;-</span><span class="nx">i</span><span class="p">:</span>
      <span class="k">default</span><span class="p">:</span>
         <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;hiahiahia&#34;</span><span class="p">)</span>
      <span class="p">}</span>
   <span class="p">}</span>

<span class="p">}</span>
</code></pre></div><h5 id="å¹¶å‘å®‰å…¨å’Œé”">å¹¶å‘å®‰å…¨å’Œé”</h5>
<h5 id="ä½œä¸š">ä½œä¸š</h5>
<ol>
<li>æ—¥å¿—åº“ä¸­channelæ€ä¹ˆç”¨</li>
<li>ä»€ä¹ˆæ—¶å€™èµ·åå°çš„goroutineå»å†™æ—¥å¿—åˆ°æ–‡ä»¶ä¸­</li>
</ol>
<h4 id="day08">day08</h4>
<h5 id="ä»Šæ—¥å†…å®¹-3">ä»Šæ—¥å†…å®¹</h5>
<h5 id="å¹¶å‘ã®goroutine">å¹¶å‘ã®goroutine</h5>
<p>å¹¶å‘å’Œå¹¶è¡Œçš„åŒºåˆ«</p>
<p>goroutineçš„å¯åŠ¨  <code>go</code></p>
<p>å°†å¹¶å‘æ‰§è¡Œçš„ä»»åŠ¡åŒ…è£…æˆä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨å‡½æ•°çš„æ—¶å€™å‰é¢åŠ ä¸Šgoå…³é”®å­—ï¼Œå°±èƒ½å¤Ÿå¼€å¯ä¸€ä¸ªgoroutineå»æ‰§è¡Œè¯¥å‡½æ•°</p>
<p>goroutineå¯¹åº”çš„å‡½æ•°æ‰§è¡Œå®Œï¼Œè¯¥goroutineå°±ç»“æŸäº†</p>
<p>ç¨‹åºå¯åŠ¨çš„æ—¶å€™ä¼šè‡ªåŠ¨çš„åˆ›å»ºä¸€ä¸ªgoroutineå»æ‰§è¡Œmainå‡½æ•°ï¼Œmainå‡½æ•°ç»“æŸäº†é‚£ä¹ˆç¨‹åºå°±ç»“æŸäº†æ‰€æœ‰å¼€å¯çš„goroutineä¹Ÿéƒ½ç»“æŸäº†</p>
<p>sync.waitGroup ç­‰å¾…ç»„</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">var</span> <span class="nx">wg</span> <span class="nx">waitGroup</span>
<span class="nx">wg</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span><span class="nx">è®¡æ•°å™¨</span><span class="o">+</span><span class="mi">1</span>
<span class="nx">wg</span><span class="p">.</span><span class="nf">done</span><span class="p">()</span><span class="err">ï¼š</span><span class="nx">è®¡æ•°å™¨</span><span class="o">-</span><span class="mi">1</span>
<span class="nx">wg</span><span class="p">.</span><span class="nf">wait</span><span class="p">()</span><span class="err">ï¼š</span><span class="nx">ç­‰å¾…</span>
</code></pre></div><h5 id="goroutineçš„æœ¬è´¨">goroutineçš„æœ¬è´¨</h5>
<p>goroutineçš„è°ƒåº¦æ¨¡å‹GMP</p>
<p>mï¼šn æŠŠmä¸ªgoroutineåˆ†é…ç»™nä¸ªæ“ä½œç³»ç»Ÿçš„çº¿ç¨‹</p>
<h5 id="goroutineä¸æ“ä½œç³»ç»Ÿçº¿ç¨‹osçš„åŒºåˆ«">goroutineä¸æ“ä½œç³»ç»Ÿçº¿ç¨‹ï¼ˆOSï¼‰çš„åŒºåˆ«</h5>
<p>goroutineæ˜¯ç”¨æˆ·æ€çš„çº¿ç¨‹ï¼Œæ¯”å†…æ ¸æ€çš„çº¿ç¨‹æ›´è½»é‡çº§ä¸€ç‚¹ï¼Œåˆå§‹å€¼2Kb</p>
<h5 id="runtimegomaxprocs">runtime.GOMAXPROCS()</h5>
<p>go1.5ä¹‹åæ¨¡å¼å°±æ˜¯æ“ä½œç³»ç»Ÿçš„é€»è¾‘æ ¸å¿ƒæ•°,é»˜è®¤è·‘æ»¡cpu</p>
<p>runtime.GOMAXPROCS(1)åªå ç”¨ä¸€ä¸ªæ ¸å¿ƒ</p>
<h5 id="work-pool-æ¨¡å¼">work pool æ¨¡å¼</h5>
<p>å¼€å¯ä¸€å®šæ•°æ®çš„goroutineå»å¹²æ´»ã€‚</p>
<h5 id="channelä¸ºä»€ä¹ˆéœ€è¦">channelä¸ºä»€ä¹ˆéœ€è¦</h5>
<p>æƒ³é€šè¿‡channelå®ç°å¤šä¸ªgoroutineçš„é€šä¿¡</p>
<p>CSP ï¼šé€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜</p>
<p>channelæ˜¯ä¸€ç§ç±»å‹ï¼Œä¸€ç§å¼•ç”¨ç±»å‹ã€‚makeå‡½æ•°åˆå§‹åŒ–æ‰èƒ½ä½¿ç”¨ï¼ˆslice  / map /channelï¼‰</p>
<p>channelçš„å£°æ˜ var ch chan int</p>
<p>channelçš„åˆå§‹åŒ– make(chan å…ƒç´ ç±»å‹ï¼Œ[ç¼“å†²åŒºå¤§å°])</p>
<p>channelçš„æ“ä½œï¼š</p>
<ul>
<li>
<p>å‘é€&lt;-</p>
</li>
<li>
<p>æ¥æ”¶&lt;-</p>
</li>
<li>
<p>å…³é—­close</p>
</li>
</ul>
<p>å¸¦ç¼“å†²åŒºçš„é€šé“å’Œæ— ç¼“å†²åŒºçš„é€šé“</p>
<h5 id="å•å‘é€šé“-1">å•å‘é€šé“</h5>
<p>é€šå¸¸æ˜¯ç”¨åšå‡½æ•°çš„å‚æ•°ï¼Œåªè¯»å’Œåªå†™</p>
<h5 id="select">select</h5>
<p>åŒä¸€æ—¶åˆ»æœ‰å¤šä¸ªé€šé“è¦æ“ä½œçš„åœºæ™¯ï¼Œä½¿ç”¨select</p>
<h4 id="syncåŒ…">syncåŒ…</h4>
<h5 id="äº’æ–¥é”">äº’æ–¥é”</h5>
<p>äº’æ–¥é”æ˜¯ä¸€ç§å¸¸ç”¨çš„æ§åˆ¶å…±äº«èµ„æºè®¿é—®çš„æ–¹æ³•ï¼Œä»–èƒ½å¤Ÿä¿è¯åŒæ—¶åªæœ‰ä¸€ä¸ªgoroutineå¯ä»¥è®¿é—®èµ„æºï¼Œgoè¯­è¨€ä¸­ä½¿ç”¨syncåŒ…çš„mutexç±»å‹æ¥å®ç°äº’æ–¥é”ã€‚ä½¿ç”¨äº’æ–¥é”æ¥ä¿®å¤ä¸Šé¢çš„ä»£ç </p>
<p>ä½¿ç”¨äº’æ–¥é”èƒ½å¤Ÿä¿è¯åŒä¸€æ—¶é—´æœ‰ä¸”åªæœ‰ä¸€ä¸ªgoroutineè¿›å…¥ä¸´ç•ŒåŒºï¼Œå…¶ä»–çš„goroutineåˆ™åœ¨ç­‰å¾…é”ï¼Œå½“äº’æ–¥é”é‡Šæ”¾åï¼Œç­‰å¾…çš„goroutineæ‰å¯ä»¥è·å–é”è¿›å…¥ä¸´ç•ŒåŒºï¼Œå¤šä¸ªgoroutineåŒæ—¶ç­‰å¾…ä¸€ä¸ªé”æ—¶ï¼Œå”¤é†’çš„ç­–ç•¥æ˜¯éšæœºçš„</p>
<h5 id="è¯»å†™äº’æ–¥é”">è¯»å†™äº’æ–¥é”</h5>
<p>äº’æ–¥é”æ˜¯å®Œå…¨äº’æ–¥çš„ï¼Œä½†æ˜¯å¾ˆå¤šå®é™…åœºæ™¯ä¸‹æ˜¯è¯»å¤šå†™å°‘çš„ï¼Œå½“æˆ‘ä»¬å¹¶å‘çš„å»è¯»å–ä¸€ä¸ªèµ„æºä¸æ¶‰åŠèµ„æºä¿®æ”¹çš„æ—¶å€™æ˜¯æ²¡æœ‰å¿…è¦åŠ é”çš„ï¼Œè¿™ç§åœºæ™¯ä¸‹ä½¿ç”¨è¯»å†™é”æ˜¯æ›´å¥½çš„ä¸€ç§é€‰æ‹©ã€‚è¯»å†™é”åœ¨goè¯­è¨€ä¸­ä½¿ç”¨syncåŒ…ä¸­çš„rwmutexç±»å‹ã€‚</p>
<p>è¯»å†™é”åˆ†ä¸ºä¸¤ç§ï¼šè¯»é”å’Œå†™é”ã€‚å½“ä¸€ä¸ªgoroutineè·å–è¯»é”ä¹‹åï¼Œå…¶ä»–çš„goroutineå¦‚æœæ˜¯è·å–è¯»é”ä¼šç»§ç»­è·å–é”ï¼Œå¦‚æœæ˜¯è·å–å†™é”å°±ä¼šç­‰å¾…ï¼›å½“ä¸€ä¸ªgoroutineè·å–å†™é”ä¹‹åï¼Œå…¶ä»–çš„goroutineæ— è®ºæ˜¯è·å–è¯»é”è¿˜æ˜¯å†™é”éƒ½ä¼šç­‰å¾…ã€‚</p>
<h5 id="syncwaitgroup">sync.waitgroup</h5>
<p>åœ¨ä»£ç ä¸­ç”Ÿç¡¬çš„ä½¿ç”¨time.sleepè‚¯å®šæ˜¯ä¸åˆé€‚çš„ï¼Œgoè¯­è¨€ä¸­å¯ä»¥ä½¿ç”¨sync.waitgroupæ¥å®ç°å¹¶å‘ä»»åŠ¡çš„åŒæ­¥</p>
<p>wg.add</p>
<p>wg.done</p>
<p>wg.wait</p>
<p>sync.waitgroupå†…éƒ¨ç»´æŠ¤ç€ä¸€ä¸ªè®¡æ•°å™¨ï¼Œè®¡æ•°å™¨çš„å€¼å¯ä»¥å¢åŠ å’Œå‡å°‘ã€‚å½“æˆ‘ä»¬å¯åŠ¨äº†nä¸ªå¹¶å‘ä»»åŠ¡ï¼Œå°±å°†è®¡æ•°å™¨å¢åŠ nï¼Œæ¯ä¸ªä»»åŠ¡å®Œæˆæ—¶é€šè¿‡è°ƒç”¨doneæ–¹æ³•å°†è®¡æ•°å™¨å‡ä¸€ï¼Œé€šè¿‡è°ƒç”¨waitæ¥ç­‰å¾…å¹¶å‘ä»»åŠ¡æ‰§è¡Œå®Œï¼Œå½“è®¡æ•°å™¨ä¸º0æ—¶ï¼Œè¡¨ç¤ºæ‰€æœ‰å¹¶å‘ä»»åŠ¡å·²ç»å®Œæˆã€‚</p>
<h5 id="synconce">sync.once</h5>
<p>åœ¨ç¼–ç¨‹çš„å¾ˆå¤šåœºæ™¯ä¸‹æˆ‘ä»¬éœ€è¦ç¡®ä¿æŸäº›æ“ä½œåœ¨é«˜å¹¶å‘çš„åœºæ™¯ä¸‹åªæ‰§è¡Œä¸€æ¬¡ï¼Œä¾‹å¦‚åªåŠ è½½ä¸€æ¬¡é…ç½®æ–‡ä»¶ã€åªå…³é—­ä¸€æ¬¡é€šé“ç­‰</p>
<p>goè¯­è¨€ä¸­çš„syncåŒ…ä¸­æä¾›äº†ä¸€ä¸ªé’ˆå¯¹åªæ‰§è¡Œä¸€æ¬¡åœºæ™¯çš„è§£å†³æ–¹æ¡ˆ&ndash;sync.once</p>
<p>sync.onceåªæœ‰ä¸€ä¸ªdoæ–¹æ³•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">o</span> <span class="o">*</span><span class="nx">Once</span><span class="p">)</span> <span class="nf">Do</span> <span class="p">(</span><span class="nx">f</span> <span class="kd">func</span><span class="p">())</span> <span class="p">{}</span>
</code></pre></div><p>å¤‡æ³¨ï¼šå¦‚æœè¦æ‰§è¡Œçš„å‡½æ•°féœ€è¦ä¼ é€’å‚æ•°å°±éœ€è¦æ­é…é—­åŒ…æ¥ä½¿ç”¨</p>
<h5 id="syncmap">sync.map</h5>
<p>mapå¹¶å‘å¤šäº†ä¹‹åæ‰§è¡Œå°±ä¼šæŠ¥fatal error: concurrent map writes é”™è¯¯</p>
<p>åƒè¿™ç§åœºæ™¯ä¸‹å°±éœ€è¦ä¸ºmapåŠ é”æ¥ä¿è¯å¹¶å‘çš„å®‰å…¨æ€§äº†ï¼Œgoè¯­è¨€çš„suncåŒ…ä¸­æä¾›äº†ä¸€ä¸ªå¼€ç®±å³ç”¨çš„å¹¶å‘å®‰å…¨ç‰ˆmap&mdash;-sync.map å¼€ç®±å³ç”¨è¡¨ç¤ºä¸ç”¨å‘å†…ç½®mapä¸€æ ·ä½¿ç”¨makeå‡½æ•°åˆå§‹åŒ–å°±èƒ½ç›´æ¥ä½¿ç”¨ã€‚åŒæ—¶sync.mapå†…ç½®äº†è¯¸å¦‚store ã€ load ã€ loadorstore ã€ delete ã€ rangeç­‰æ“ä½œæ–¹æ¡ˆ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;strconv&#34;</span>
   <span class="s">&#34;sync&#34;</span>
<span class="p">)</span>

<span class="kd">var</span> <span class="nx">wg</span> <span class="p">=</span> <span class="nx">sync</span><span class="p">.</span><span class="nx">WaitGroup</span><span class="p">{}</span>
<span class="kd">var</span> <span class="nx">m</span> <span class="p">=</span> <span class="nx">sync</span><span class="p">.</span><span class="nx">Map</span><span class="p">{}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">20</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
      <span class="nx">wg</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
      <span class="k">go</span> <span class="kd">func</span><span class="p">(</span><span class="nx">i</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">key</span><span class="o">:=</span><span class="nx">strconv</span><span class="p">.</span><span class="nf">Itoa</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
         <span class="nf">set</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>    <span class="c1">//å¿…é¡»ä½¿ç”¨sync.mapå†…ç½®çš„storeæ–¹æ³•è®¾ç½®é”®å€¼å¯¹
</span><span class="c1"></span>         <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;k=%v v=%v\n&#34;</span><span class="p">,</span><span class="nx">key</span><span class="p">,</span><span class="nf">get</span><span class="p">(</span><span class="nx">key</span><span class="p">))</span> <span class="c1">//å¿…é¡»ä½¿ç”¨sync.mapå†…ç½®çš„loadæ–¹æ³•æ ¹æ®keyå–å€¼
</span><span class="c1"></span>         <span class="nx">wg</span><span class="p">.</span><span class="nf">Done</span><span class="p">()</span>
      <span class="p">}(</span><span class="nx">i</span><span class="p">)</span>
   <span class="p">}</span>
   <span class="nx">wg</span><span class="p">.</span><span class="nf">Wait</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">set</span><span class="p">(</span><span class="nx">key</span> <span class="kt">string</span> <span class="p">,</span> <span class="nx">value</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">m</span><span class="p">.</span><span class="nf">Store</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span><span class="nx">value</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">get</span><span class="p">(</span><span class="nx">key</span> <span class="kt">string</span><span class="p">)</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">{</span>
    <span class="nx">value</span><span class="p">,</span><span class="nx">_</span><span class="o">:=</span><span class="nx">m</span><span class="p">.</span><span class="nf">Load</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span>
    <span class="k">return</span> <span class="nx">value</span>
<span class="p">}</span>
</code></pre></div><h5 id="atomicåŒ…">atomicåŒ…</h5>
<p>func loadint32</p>
<p>func storeint32</p>
<p>func addint32</p>
<p>func swapint32</p>
<p>func compareandswapint32</p>
<h4 id="ç½‘ç»œç¼–ç¨‹">ç½‘ç»œç¼–ç¨‹</h4>
<p>å¦‚ä½•æ‰èƒ½è®©æˆ‘ä»¬çš„ç¨‹åºé€šè¿‡ç½‘ç»œäº’ç›¸é€šä¿¡å‘¢ï¼Ÿæœ¬æ–‡åªæ˜¯æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨netåŒ…è¿›è¡Œtcpå’Œudpé€šä¿¡ã€‚</p>
<h5 id="äº’è”ç½‘åè®®ä»‹ç»">äº’è”ç½‘åè®®ä»‹ç»</h5>
<p>äº’è”ç½‘çš„æ ¸å¿ƒæ˜¯ä¸€ç³»åˆ—åè®®ï¼Œæ€»ç§°ä¸ºäº’è”ç½‘åè®®internet protocol suite ï¼Œ æ­£æ˜¯è¿™äº›åè®®è§„å®šäº†ç”µè„‘å¦‚ä½•è¿æ¥å’Œç»„ç½‘ã€‚æˆ‘ä»¬ç†è§£äº†è¿™äº›åè®®ï¼Œå°±ç†è§£äº†äº’è”ç½‘çš„åŸç†ã€‚ç”±äºè¿™äº›åè®®å¤ªè¿‡å¤æ‚å’Œåºå¤§ï¼Œåªèƒ½ä»‹ç»æ—¥å¸¸å¼€å‘ä¸­æ¥è§¦è¾ƒå¤šçš„å‡ ä¸ªåè®®</p>
<h5 id="äº’è”ç½‘åˆ†å±‚æ¨¡å‹">äº’è”ç½‘åˆ†å±‚æ¨¡å‹</h5>
<p>äº’è”ç½‘çš„é€»è¾‘å®ç°è¢«åˆ†ä¸ºå¥½å‡ å±‚ã€‚æ¯ä¸€å±‚éƒ½æœ‰è‡ªå·±çš„åŠŸèƒ½ã€‚äº’è”ç½‘æŒ‰ç…§ä¸åŒçš„æ¨¡å‹åˆ’åˆ†ä¼šæœ‰ä¸åŒçš„åˆ†å±‚ï¼Œä½†æ˜¯ä¸è®ºæ˜¯æŒ‰ç…§ä»€ä¹ˆæ¨¡å‹å»åˆ’åˆ†ï¼Œè¶Šå¾€ä¸Šçš„å±‚è¶Šé è¿‘ç”¨æˆ·ï¼Œè¶Šå¾€ä¸‹çš„å±‚è¶Šé ç»ç¡¬ä»¶ã€‚åœ¨è½¯ä»¶å¼€å‘ä¸­æˆ‘ä»¬ä½¿ç”¨æœ€å¤šçš„æ˜¯å°†äº’è”ç½‘åˆ’åˆ†ä¸ºäº”ä¸ªåˆ†å±‚çš„æ¨¡å‹ã€‚</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210815154839385.png" >
		<img src="/GoLearning.assets/image-20210815154839385.png"
			
			
			
			loading="lazy"
			alt="image-20210815154839385">
	</a>
	
	<figcaption>image-20210815154839385</figcaption>
	
</figure></p>
<h5 id="ç‰©ç†å±‚">ç‰©ç†å±‚</h5>
<p>æˆ‘ä»¬çš„ç”µè„‘è¦ä¸å¤–ç•Œäº’è”ç½‘é€šä¿¡ï¼Œéœ€è¦å…ˆæŠŠç”µè„‘è¿æ¥ç½‘ç»œï¼Œæˆ‘ä»¬å¯ä»¥ç”¨åŒç»çº¿ã€å…‰çº¤ã€ æ— çº¿ç”µæ³¢ç­‰æ–¹å¼ã€‚è¿™å°±å«åšâ€œå®ç‰©ç†å±‚â€ï¼Œä»–å°±æ˜¯æŠŠç”µè„‘è¿æ¥èµ·æ¥çš„ç‰©ç†æ‰‹æ®µã€‚ä»–ä¸»è¦è§„å®šäº†ç½‘ç»œçš„ä¸€äº›ç”µæ°”ç‰¹æ€§ï¼Œä½œç”¨æ˜¯è´Ÿè´£ä¼ é€0å’Œ1çš„ç”µä¿¡å·ã€‚</p>
<h5 id="æ•°æ®é“¾è·¯å±‚">æ•°æ®é“¾è·¯å±‚</h5>
<p>å•çº¯çš„0å’Œ1æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨è€…ä¼šä¸ºå…¶èµ‹äºˆä¸€äº›ç‰¹å®šçš„å«ä¹‰ï¼Œè§„å®šè§£è¯»ç”µä¿¡å·çš„æ–¹å¼ï¼šå¤šå°‘ä¸ªç”µä¿¡å·ç®—ä¸€ç»„ï¼Ÿæ¯ä¸ªä¿¡å·ä¸ºæœ‰ä½•æ„ä¹‰ï¼Ÿè¿™å°±æ˜¯æ•°æ®é“¾è·¯å±‚çš„åŠŸèƒ½ï¼Œä»–åœ¨ç‰©ç†å±‚çš„ä¸Šæ–¹ï¼Œç¡®å®šäº†ç‰©ç†å±‚ä¼ è¾“0å’Œ1çš„åˆ†ç»„æ–¹å¼åŠä»£è¡¨çš„æ„ä¹‰ã€‚æ—©èµ·çš„æ—¶å€™ï¼Œæ¯å®¶å…¬å¸éƒ½æœ‰è‡ªå·±çš„ç”µä¿¡å·åˆ†ç»„æ–¹å¼ã€‚é€æ¸çš„ï¼Œä¸€ç§å«åšä»¥å¤ªç½‘ethernetçš„åè®®å æ®äº†ä¸»å¯¼åœ°ä½ã€‚</p>
<p>ä»¥å¤ªç½‘è§„å®šï¼Œä¸€ç»„ç”µä¿¡å·æ„æˆä¸€ä¸ªæ•°æ®åŒ…ï¼Œå«åšå¸§frameã€‚æ¯ä¸€å¸§åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šæ ‡å¤´headå’Œæ•°æ®dataã€‚å…¶ä¸­è¡¨å¤´åŒ…å«æ•°æ®åŒ…çš„ä¸€äº›è¯´æ˜é¡¹ï¼Œæ¯”å¦‚å‘é€è€…ã€æ¥æ”¶è€…ã€æ•°æ®ç±»å‹ç­‰ç­‰ã€‚æ•°æ®åˆ™æ˜¯æ•°æ®åŒ…çš„å…·ä½“å†…å®¹ã€‚æ ‡å¤´çš„é•¿åº¦å›ºå®šä¸º18å­—èŠ‚ã€‚æ•°æ®çš„é•¿åº¦æœ€çŸ­ä¸º46å­—èŠ‚ï¼Œæœ€é•¿ä¸º1600å­—èŠ‚ã€‚å› æ­¤ï¼Œæ•´ä¸ªå¸§æœ€çŸ­ä¸º64å­—èŠ‚ï¼Œæœ€é•¿ä¸º1518å­—èŠ‚ã€‚å¦‚æœæ•°æ®å¾ˆé•¿ï¼Œå°±å¿…é¡»åˆ†å‰²æˆå¤šä¸ªå¸§è¿›è¡Œå‘é€ã€‚</p>
<p>é‚£ä¹ˆï¼Œå‘é€è€…å’Œæ¥æ”¶è€…æ˜¯å¦‚ä½•æ ‡è¯†çš„å‘¢ï¼Ÿä»¥å¤ªç½‘è§„å®šï¼Œè¿å…¥ç½‘ç»œçš„æ‰€æœ‰è®¾å¤‡éƒ½å¿…é¡»å…·æœ‰ç½‘å¡æ¥å£ã€‚æ•°æ®åŒ…å¿…é¡»æ˜¯ä»ä¸€å—ç½‘å¡ï¼Œä¼ é€åˆ°å¦ä¸€å—ç½‘å¡ã€‚ç½‘å¡çš„åœ°å€ï¼Œå°±æ˜¯æ•°æ®åŒ…çš„å‘é€åœ°å€å’Œæ¥æ”¶åœ°å€ï¼Œè¿™å«åšMACåœ°å€ã€‚æ¯å—ç½‘å¡å‡ºå‚çš„æ—¶å€™ï¼Œéƒ½æœ‰ä¸€ä¸ªå…¨ä¸–ç•Œç‹¬ä¸€æ— äºŒçš„MACåœ°å€ï¼Œé•¿åº¦æ˜¯48ä¸ªäºŒè¿›åˆ¶ä½ï¼Œé€šå¸¸ç”¨12ä¸ªåå…­è¿›åˆ¶æ•°æ¥è¡¨ç¤ºã€‚å‰6ä¸ªåå…­è¿›åˆ¶æ˜¯å‚å•†ç¼–å·ï¼Œå6ä¸ªæ˜¯è¯¥å‚å•†çš„ç½‘å¡æµæ°´å·ã€‚æœ‰äº†MACåœ°å€ï¼Œå°±å¯ä»¥å®šä½ç½‘å¡å’Œæ•°æ®åŒ…çš„è·¯å¾„äº†ã€‚</p>
<p>æˆ‘ä»¬ä¼šé€šè¿‡ARPåè®®æ¥è·å–æ¥æ”¶æ–¹çš„MACåœ°å€ï¼Œæœ‰äº†MACåœ°å€ä¹‹åï¼Œå¦‚ä½•æŠŠæ•°æ®å‡†ç¡®çš„å‘é€ç»™æ¥æ”¶æ–¹å‘¢ï¼Ÿ å…¶å®è¿™é‡Œä»¥å¤ªç½‘é‡‡ç”¨äº†ä¸€ç§å¾ˆåŸå§‹çš„æ–¹å¼ï¼Œä»–ä¸æ˜¯æŠŠæ•°æ®å‡†ç¡®çš„é€åˆ°æ¥æ”¶æ–¹ï¼Œè€Œæ˜¯å‘æœ¬ç½‘ç»œå†…æ‰€æœ‰çš„è®¡ç®—æœºéƒ½å‘é€ï¼Œè®©æ¯å°è®¡ç®—æœºè¯»å–è¿™ä¸ªåŒ…çš„æ ‡å¤´ï¼Œæ‰¾åˆ°æ¥æ”¶æ–¹çš„MACåœ°å€ï¼Œç„¶åä¸è‡ªèº«çš„MACåœ°å€ç›¸æ¯”è¾ƒï¼Œå¦‚æœä¸¤è€…ç›¸åŒï¼Œå°±æ¥å—è¿™ä¸ªåŒ…ï¼Œåšè¿›ä¸€æ­¥å¤„ç†ï¼Œå¦åˆ™å°±ä¸¢å¼ƒè¿™ä¸ªåŒ…ã€‚è¿™ç§å‘é€æ–¹å¼å°±å«åšå¹¿æ’­broadcast</p>
<h5 id="ç½‘ç»œå±‚">ç½‘ç»œå±‚</h5>
<p>æŒ‰ç…§ä»¥å¤ªç½‘åè®®çš„è§„åˆ™æˆ‘ä»¬å¯ä»¥ä¾é MAC åœ°å€æ¥å‘å¤–å‘é€æ•°æ®ã€‚ç†è®ºä¸Šä¾é MACåœ°å€ï¼Œä½ ç”µè„‘çš„ç½‘å¡å°±å¯ä»¥æ‰¾åˆ°èº«åœ¨å¸ˆå§å¦ä¸€ä¸ªå„¿è§’è½çš„æŸå°ç”µè„‘çš„ç½‘å¡äº†ï¼Œä½†æ˜¯è¿™ç§åšæ³•æœ‰ä¸€ä¸ªé‡å¤§ç¼ºé™·å°±æ˜¯ä»¥å¤ªç½‘é‡‡ç”¨å¹¿æ’­æ–¹å¼å‘é€æ•°æ®åŒ…ï¼Œæ‰€æœ‰æˆå‘˜äººæ‰‹ä¸€åŒ…ï¼Œä¸ä»…æ•ˆç‡ä½ï¼Œè€Œä¸”å‘é€çš„æ•°æ®åªèƒ½å±€é™åœ¨å‘é€è€…æ‰€åœ¨çš„å­ç½‘ç»œã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœä¸¤å°è®¡ç®—æœºä¸åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œå¹¿æ’­æ˜¯ä¼ ä¸è¿‡å»çš„ã€‚è¿™ç§è®¾è®¡æ˜¯åˆç†ä¸”å¿…è¦çš„ï¼Œå› ä¸ºå¦‚æœäº’è”ç½‘ä¸Šæ¯ä¸€å°è®¡ç®—æœºéƒ½ä¼šæ”¶åˆ°äº’è”ç½‘ä¸Šæ”¶å‘çš„æ‰€æœ‰æ•°æ®åŒ…ï¼Œé‚£æ˜¯ä¸ç°å®çš„ã€‚</p>
<p>å› æ­¤ï¼Œå¿…é¡»æ‰¾åˆ°ä¸€ç§æ–¹æ³•åŒºåˆ†é‚£äº›MACåœ°å€å±äºåŒä¸€ä¸ªå­ç½‘ç»œï¼Œé‚£äº›ä¸æ˜¯ã€‚å¦‚æœæ˜¯åŒä¸€ä¸ªå­ç½‘ç»œï¼Œå°±é‡‡ç”¨å¹¿æ’­æ–¹å¼å‘é€ï¼Œå¦åˆ™å°±é‡‡ç”¨è·¯ç”±æ–¹å¼å‘é€ã€‚è¿™å°±å¯¼è‡´äº†ç½‘ç»œå±‚çš„è¯ç”Ÿã€‚ä»–çš„ä½œç”¨æ˜¯å¼•è¿›ä¸€å¥—æ–°çš„åœ°å€ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½å¤ŸåŒºåˆ†ä¸åŒè®¡ç®—æœºæ˜¯å¦å±äºåŒä¸€ä¸ªå­ç½‘ç»œã€‚è¿™å¥—åœ°å€å°±å«åšç½‘ç»œåœ°å€ï¼Œç®€ç§°ç½‘å€</p>
<p>ç½‘ç»œå±‚å‡ºç°ä»¥åï¼Œæ¯å°è®¡ç®—æœºæœ‰äº†ä¸¤ç§åœ°å€ï¼Œä¸€ç§æ˜¯MACåœ°å€ï¼Œå¦ä¸€ç§æ˜¯ç½‘å€ã€‚ä¸¤ç§åœ°å€ä¹‹é—´æ²¡æœ‰ä»»ä½•è”ç³»ï¼ŒMACåœ°å€æ˜¯ç»‘å®šåœ¨ç½‘å¡ä¸Šçš„ï¼Œç½‘ç»œåœ°å€åˆ™æ˜¯ç½‘ç»œç®¡ç†å‘˜åˆ†é…çš„ã€‚ç½‘ç»œåœ°å€å¸®åŠ©æˆ‘ä»¬ç¡®å®šè®¡ç®—æœºæ‰€åœ¨çš„å­ç½‘ç»œ,MACåœ°å€åˆ™å°†æ•°æ®åŒ…å‘é€åˆ°è¯¥å­ç½‘ç»œä¸­çš„ç›®æ ‡ç½‘å¡ä¸Šã€‚å› æ­¤ï¼Œä»é€»è¾‘ä¸Šå¯ä»¥æ¨æ–­ï¼Œå¿…å®šæ˜¯å…ˆå¤„ç†ç½‘ç»œåœ°å€ï¼Œç„¶ååœ¨å¤„ç†MACåœ°å€ã€‚</p>
<p>è§„å®šç½‘ç»œåœ°å€çš„åè®®ï¼Œå«åšIPåè®®ã€‚å®ƒæ‰€å®šä¹‰çš„åœ°å€ï¼Œå°±è¢«ç§°ä¸ºIPåœ°å€ã€‚ç›®å‰ï¼Œå¹¿æ³›é‡‡ç”¨çš„æ˜¯IPåè®®ç¬¬å››ç‰ˆï¼Œç®€ç§°IPv4.IPv4è¿™ä¸ªç‰ˆæœ¬è§„å®šï¼Œç½‘ç»œåœ°å€ç”±32ä¸ªäºŒè¿›åˆ¶ä¸ºç»„æˆï¼Œæˆ‘ä»¬é€šå¸¸ä¹ æƒ¯ç”¨åˆ†æˆå››æ®µçš„åè¿›åˆ¶æ•°è¡¨ç¤ºIPåœ°å€ï¼Œä»0.0.0.0ä¸€ç›´åˆ°255.255.255.255</p>
<p>æ ¹æ®IPåè®®å‘é€çš„æ•°æ®ï¼Œå°±å«åšIPæ•°æ®åŒ…ã€‚IPæ•°æ®åŒ…ä¹Ÿåˆ†ä¸ºæ ‡å¤´å’Œæ•°æ®ä¸¤ä¸ªéƒ¨åˆ†ï¼šæ ‡å¤´éƒ¨åˆ†ä¸»è¦åŒ…æ‹¬ç‰ˆæœ¬ã€é•¿åº¦ã€IPåœ°å€ç­‰ä¿¡æ¯ï¼Œæ•°æ®éƒ¨åˆ†åˆ™æ˜¯IPæ•°æ®åŒ…çš„å…·ä½“å†…å®¹ï¼ŒIPæ•°æ®åŒ…çš„æ ‡å¤´éƒ¨åˆ†çš„é•¿åº¦ä¸º20åˆ°60å­—èŠ‚ï¼Œæ•´ä¸ªæ•°æ®åŒ…çš„æ€»é•¿åº¦æœ€å¤§ä¸º65535å­—èŠ‚ã€‚</p>
<h5 id="ä¼ è¾“å±‚">ä¼ è¾“å±‚</h5>
<p>æœ‰äº†MACåœ°å€å’ŒIPåœ°å€ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥åœ¨äº’è”ç½‘ä¸Šä»»æ„ä¸¤å°ä¸»æœºä¸Šå»ºç«‹é€šä¿¡ã€‚ä½†é—®é¢˜æ˜¯åŒä¸€å°ä¸»æœºä¼šæœ‰è®¸å¤šç¨‹åºéƒ½éœ€è¦ç”¨ç½‘ç»œæ”¶å‘æ•°æ®ï¼Œæ¯”å¦‚QQå’Œæµè§ˆå™¨è¿™ä¸¤ä¸ªç¨‹åºéƒ½éœ€è¦è¿æ¥äº’è”ç½‘å¹¶æ”¶å‘æ•°æ®ï¼Œæˆ‘ä»¬å¦‚ä½•åŒºåˆ†æŸä¸ªæ•°æ®åŒ…åˆ°åº•æ˜¯å½’å“ªä¸ªç¨‹åºå‘¢ï¼Ÿä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¿™ä¸ªæ•°æ®åŒ…åˆ°åº•ä¾›å“ªä¸ªç¨‹åºï¼ˆè¿›ç¨‹ï¼‰ä½¿ç”¨ã€‚è¿™ä¸ªå‚æ•°å°±å«åšç«¯å£portï¼Œä»–å…¶å®æ˜¯æ¯ä¸€ä¸ªä½¿ç”¨ç½‘å¡çš„ç¨‹åºçš„ç¼–å·ã€‚æ¯ä¸ªæ•°æ®åŒ…éƒ½å‘åˆ°ä¸»æœºçš„ç‰¹å®šç«¯å£ï¼Œæ‰€ä»¥ä¸åŒçš„ç¨‹åºå°±èƒ½å–åˆ°è‡ªå·±æ‰€éœ€è¦çš„æ•°æ®ã€‚</p>
<p>ç«¯å£æ˜¯0åˆ°65535ä¹‹é—´çš„æ•´æ•°ï¼Œæ­£å¥½æ˜¯16ä¸ªäºŒè¿›åˆ¶ä½ã€‚0åˆ°1023çš„ç«¯å£è¢«ç³»ç»Ÿå ç”¨ï¼Œç”¨æˆ·åªèƒ½é€‰ç”¨å¤§äº1023çš„ç«¯å£ã€‚ æœ‰äº†IPå’Œç«¯å£æˆ‘ä»¬å°±èƒ½å®ç°å”¯ä¸€ç¡®å®šäº’è”ç½‘ä¸Šçš„ä¸€ä¸ªç¨‹åºï¼Œè¿›è€Œå®ç°ç½‘ç»œé—´çš„ç¨‹åºé€šä¿¡ã€‚</p>
<p>æˆ‘ä»¬å¿…é¡»åœ¨æ•°æ®åŒ…ä¸­åŠ å…¥ç«¯å£ä¿¡æ¯ï¼Œè¿™å°±æ˜¯éœ€è¦æ–°çš„åè®®ã€‚æœ€ç®€å•çš„å®ç°å«åšUDPåè®®ï¼Œä»–çš„æ ¼å¼å‡ ä¹å°±æ˜¯åœ¨æ•°æ®çš„å‰é¢ï¼ŒåŠ ä¸Šç«¯å£å·ã€‚UDPæ•°æ®åŒ…ï¼Œä¹Ÿå°±æ˜¯ç”±æ ‡å¤´å’Œæ•°æ®ä¸¤éƒ¨åˆ†ç»„æˆï¼šæ ‡å¤´éƒ¨åˆ†ä¸»è¦å®šä¹‰äº†å‘å‡ºç«¯å£å’Œæ¥æ”¶ç«¯å£ï¼Œæ•°æ®éƒ¨åˆ†å°±æ˜¯å…·ä½“çš„å†…å®¹ã€‚UDPæ•°æ®åŒ…éå¸¸ç®€å•ï¼Œæ ‡å¤´éƒ¨åˆ†ä¸€å…±åªæœ‰8ä¸ªå­—èŠ‚ï¼Œæ€»é•¿åº¦ä¸è¶…è¿‡65535å­—èŠ‚ï¼Œæ­£å¥½æ”¾è¿›ä¸€ä¸ªIPæ•°æ®åŒ…ã€‚</p>
<p>UDPåè®®çš„ä¼˜ç‚¹æ˜¯æ¯”è¾ƒç®€å•ï¼Œå®¹æ˜“å®ç°ï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯å¯é æ€§è¾ƒå·®ï¼Œä¸€æ—¦æ•°æ®åŒ…å‘å‡ºï¼Œæ— æ³•çŸ¥é“å¯¹æ–¹æ˜¯å¦æ”¶åˆ°ã€‚ä¸ºäº†è§£å†³è¿™ç§é—®é¢˜ï¼Œæé«˜ç½‘ç»œå¯é æ€§ï¼ŒTCPåè®®å°±è¯ç”Ÿäº†ã€‚TCPåè®®èƒ½å¤Ÿç¡®ä¿æ•°æ®ä¸ä¼šé—å¤±ã€‚ä»–çš„ç¼ºç‚¹æ˜¯è¿‡ç¨‹å¤æ‚ã€å®ç°å›°éš¾ã€æ¶ˆè€—è¾ƒå¤šçš„èµ„æºã€TCPæ•°æ®åŒ…æ²¡æœ‰é•¿åº¦é™åˆ¶ï¼Œç†è®ºä¸Šå¯ä»¥æ— é™é•¿ï¼Œä½†æ˜¯ä¸ºäº†ä¿è¯ç½‘ç»œçš„æ•ˆç‡ï¼Œé€šå¸¸TCPæ•°æ®åŒ…çš„é•¿åº¦ä¸ä¼šè¶…è¿‡IPæ•°æ®åŒ…çš„é•¿åº¦ï¼Œä»¥ç¡®ä¿å•ä¸ªTCPæ•°æ®åŒ…ä¸å¿…å†åˆ†å‰²ã€‚</p>
<h5 id="åº”ç”¨å±‚">åº”ç”¨å±‚</h5>
<p>åº”ç”¨ç¨‹åºæ”¶åˆ°ä¼ è¾“å±‚çš„æ•°æ®ï¼Œæ¥ä¸‹æ¥å°±è¦å¯¹æ•°æ®è¿›è¡Œè§£åŒ…ã€‚ç”±äºäº’è”ç½‘æ˜¯å¼€æ”¾æ¶æ„ï¼Œæ•°æ®æ¥æºäº”èŠ±å…«é—¨ï¼Œå¿…é¡»äº‹å…ˆè§„å®šå¥½é€šä¿¡çš„æ•°æ®æ ¼å¼ï¼Œå¦åˆ™æ¥æ”¶æ–¹æ ¹æœ¬æ— æ³•è·å¾—çœŸæ­£å‘é€çš„æ•°æ®å†…å®¹ã€‚åº”ç”¨å±‚çš„ä½œç”¨å°±æ˜¯è§„å®šåº”ç”¨ç¨‹åºä½¿ç”¨çš„æ•°æ®æ ¼å¼ï¼Œä¾‹å¦‚æˆ‘ä»¬TCPåè®®ä¹‹ä¸Šå¸¸è§çš„Emailã€HTTPã€FTPç­‰åè®®ï¼Œè¿™äº›åè®®å°±ç»„æˆäº†äº’è”ç½‘åè®®çš„åº”ç”¨å±‚ã€‚</p>
<p>å¦‚å›¾ï¼Œå‘é€æ–¹çš„HTTPæ•°æ®ç»è¿‡äº’è”ç½‘çš„ä¼ è¾“è¿‡ç¨‹ä¸­ä¼šä¾æ¬¡æ·»åŠ å„å±‚åè®®çš„æ ‡å¤´ä¿¡æ¯ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°æ•°æ®åŒ…ä¹‹åå†ä¾æ¬¡æ ¹æ®åè®®è§£åŒ…å¾—åˆ°æ•°æ®ã€‚<figure 
	>
	<a href="/GoLearning.assets/image-20210815163841064.png" >
		<img src="/GoLearning.assets/image-20210815163841064.png"
			
			
			
			loading="lazy"
			alt="image-20210815163841064">
	</a>
	
	<figcaption>image-20210815163841064</figcaption>
	
</figure></p>
<h4 id="socketç¼–ç¨‹">socketç¼–ç¨‹</h4>
<p>socketæ˜¯BSD UNIXçš„è¿›ç¨‹é€šä¿¡æœºåˆ¶ï¼Œé€šå¸¸ä¹Ÿç§°ä¸ºå¥—æ¥å­—ï¼Œç”¨äºæè¿°IPåœ°å€å’Œç«¯å£ï¼Œæ˜¯ä¸€ä¸ªé€šä¿¡é“¾çš„å¥æŸ„ã€‚socketå¯ä»¥ç†è§£ä¸ºTCP/IPç½‘ç»œçš„APIï¼Œå®ƒå®šä¹‰äº†è®¸å¤šå‡½æ•°æˆ–ä¾‹ç¨‹ï¼Œç¨‹åºå‘˜å¯ä»¥ç”¨å®ƒä»¬æ¥å¼€å‘TCP/IPç½‘ç»œä¸Šçš„åº”ç”¨ç¨‹åºã€‚ç”µè„‘ä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åºé€šå¸¸é€šè¿‡å¥—æ¥å­—å‘ç½‘ç»œå‘å‡ºè¯·æ±‚æˆ–è€…åº”ç­”ç½‘ç»œçš„è¯·æ±‚ã€‚</p>
<h5 id="socketå›¾è§£">socketå›¾è§£</h5>
<p>socketæ˜¯åº”ç”¨å±‚ä¸TCP/IPåè®®æ—é€šä¿¡çš„ä¸­é—´è½¯ä»¶æŠ½è±¡å±‚ã€‚åœ¨è®¾è®¡æ¨¡å¼ä¸­ï¼Œsocketå…¶å®å°±æ˜¯ä¸€ä¸ªé—¨é¢æ¨¡å¼ï¼Œä»–æŠŠå¤æ‚çš„TCP/IPåè®®æ—éšè—åœ¨socketåé¢ï¼Œå¯¹ç”¨æˆ·æ¥è¯´åªéœ€è¦è°ƒç”¨socketè§„å®šçš„ç›¸å…³å‡½æ•°ï¼Œè®©socketå»ç»„ç»‡ç¬¦åˆæŒ‡å®šçš„åè®®æ•°æ®ç„¶åè¿›è¡Œé€šä¿¡ã€‚</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210815165946914.png" >
		<img src="/GoLearning.assets/image-20210815165946914.png"
			
			
			
			loading="lazy"
			alt="image-20210815165946914">
	</a>
	
	<figcaption>image-20210815165946914</figcaption>
	
</figure></p>
<h4 id="goè¯­è¨€å®ç°tcpé€šä¿¡">goè¯­è¨€å®ç°TCPé€šä¿¡</h4>
<h5 id="tcpåè®®">TCPåè®®</h5>
<p>TCP/IP transmission control protocol ã€ internet protocolå³ä¼ è¾“æ§åˆ¶åè®®/ç½‘é—´åè®®ï¼Œæ˜¯ä¸€ç§é¢å‘è¿æ¥ï¼ˆè¿æ¥å¯¼å‘ï¼‰çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚ï¼ˆTransport layerï¼‰é€šä¿¡åè®®ï¼Œå› ä¸ºæ˜¯é¢å‘è¿æ¥çš„åè®®ï¼Œæ•°æ®å°±åƒæ°´æµä¸€æ ·ä¼ è¾“ï¼Œä¼šå­˜åœ¨ç²˜åŒ…é—®é¢˜ã€‚</p>
<h5 id="tcpæœåŠ¡ç«¯">TCPæœåŠ¡ç«¯</h5>
<p>ä¸€ä¸ªTCPæœåŠ¡ç«¯å¯ä»¥åŒæ—¶è¿æ¥å¾ˆå¤šä¸ªå®¢æˆ·ç«¯ï¼Œä¾‹å¦‚ä¸–ç•Œå„åœ°çš„ç”¨æˆ·ä½¿ç”¨è‡ªå·±ç”µè„‘ä¸Šçš„æµè§ˆå™¨è®¿é—®æ·˜å®ç½‘ã€‚å› ä¸ºgoè¯­è¨€ä¸­åˆ›å»ºå¤šä¸ªgoroutineå®ç°å¹¶å‘éå¸¸æ–¹ä¾¿å’Œé«˜æ•ˆï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ¯å»ºç«‹ä¸€æ¬¡é“¾æ¥å°±åˆ›å»ºä¸€ä¸ªgoroutineå»å¤„ç†ã€‚</p>
<p>TCPæœåŠ¡ç«¯ç¨‹åºçš„å¤„ç†æµç¨‹ï¼š</p>
<ol>
<li>ç›‘å¬ç«¯å£</li>
<li>æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚å»ºç«‹é“¾æ¥</li>
<li>åˆ›å»ºgoroutineå¤„ç†è¿æ¥</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;net&#34;</span>
<span class="p">)</span>

<span class="c1">//tcp serverç«¯
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">//1.æœ¬åœ°ç«¯å£å¯åŠ¨æœåŠ¡
</span><span class="c1"></span>   <span class="nx">listen</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">Listen</span><span class="p">(</span><span class="s">&#34;tcp&#34;</span><span class="p">,</span> <span class="s">&#34;127.0.0.1:20000&#34;</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;start server on 127.0.0.1:20000 failed , err : &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>

   <span class="k">for</span> <span class="p">{</span>
      <span class="c1">//2.ç­‰å¾…åˆ«äººæ¥è·Ÿæˆ‘è¿æ¥
</span><span class="c1"></span>      <span class="nx">accept</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">listen</span><span class="p">.</span><span class="nf">Accept</span><span class="p">()</span>
      <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
         <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;build connect failed , err : &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
         <span class="k">return</span>
      <span class="p">}</span>

      <span class="k">go</span> <span class="kd">func</span><span class="p">(</span><span class="nx">conn</span> <span class="nx">net</span><span class="p">.</span><span class="nx">Conn</span><span class="p">)</span> <span class="p">{</span>
         <span class="k">for</span> <span class="p">{</span>
            <span class="c1">//3.ä¸å®¢æˆ·ç«¯é€šä¿¡
</span><span class="c1"></span>            <span class="kd">var</span> <span class="nx">temp</span> <span class="p">[</span><span class="mi">128</span><span class="p">]</span><span class="kt">byte</span>
            <span class="nx">read</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">conn</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="nx">temp</span><span class="p">[:])</span>
            <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
               <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;attemp read failed , err : &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
               <span class="k">return</span>
            <span class="p">}</span>
            <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">temp</span><span class="p">[:</span><span class="nx">read</span><span class="p">]))</span>
         <span class="p">}</span>
      <span class="p">}(</span><span class="nx">accept</span><span class="p">)</span>

   <span class="p">}</span>

<span class="p">}</span>
</code></pre></div><p>client</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;bufio&#34;</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;net&#34;</span>
   <span class="s">&#34;os&#34;</span>
<span class="p">)</span>

<span class="c1">//tcp client
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">//1.ä¸serverå»ºç«‹è¿æ¥
</span><span class="c1"></span>   <span class="nx">dial</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">Dial</span><span class="p">(</span><span class="s">&#34;tcp&#34;</span><span class="p">,</span> <span class="s">&#34;127.0.0.1:20000&#34;</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;dial 127.0.0.1:20000 failed , err : &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="c1">//2.å‘é€æ•°æ®
</span><span class="c1"></span>   <span class="c1">//var write1 = make([]byte,100)
</span><span class="c1"></span>   <span class="c1">//if len(os.Args)&lt;2 {
</span><span class="c1"></span>   <span class="c1">// write1 = []byte(&#34;hello world&#34;)
</span><span class="c1"></span>   <span class="c1">//}else {
</span><span class="c1"></span>   <span class="c1">// write1 = []byte(os.Args[1])
</span><span class="c1"></span>   <span class="c1">//}
</span><span class="c1"></span>
   <span class="k">for</span> <span class="p">{</span>
      <span class="nx">reader</span> <span class="o">:=</span> <span class="nx">bufio</span><span class="p">.</span><span class="nf">NewReader</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">Stdin</span><span class="p">)</span>
      <span class="c1">//dial.Write(write1)
</span><span class="c1"></span>      <span class="nx">line</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">reader</span><span class="p">.</span><span class="nf">ReadString</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">)</span>
      <span class="k">if</span> <span class="nb">string</span><span class="p">(</span><span class="nx">line</span><span class="p">)</span><span class="o">==</span><span class="s">&#34;exit&#34;</span> <span class="p">{</span>
         <span class="k">break</span>
      <span class="p">}</span>
      <span class="nx">dial</span><span class="p">.</span><span class="nf">Write</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">line</span><span class="p">))</span>
   <span class="p">}</span>

   <span class="nx">dial</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div><h5 id="tcpé»åŒ…">TCPé»åŒ…</h5>
<p>é»åŒ…å¯å‘ç”Ÿåœ¨å‘é€ç«¯ä¹Ÿå¯å‘ç”Ÿåœ¨æ¥æ”¶ç«¯ï¼š</p>
<ol>
<li>ç”±Nagleç®—æ³•é€ æˆçš„å‘é€ç«¯çš„é»åŒ…ï¼šnagleç®—æ³•æ˜¯ä¸€ç§æ”¹å–„ç½‘ç»œä¼ è¾“æ•ˆç‡çš„ç®—æ³•ã€‚ç®€å•æ¥è¯´å°±æ˜¯å½“æˆ‘ä»¬æäº¤ä¸€æ®µæ•°æ®ç»™TCPå‘é€æ—¶ï¼ŒTCPå¹¶ä¸ç«‹åˆ»å‘é€æ­¤æ®µæ•°æ®ï¼Œè€Œæ˜¯ç­‰å¾…ä¸€å°æ®µæ—¶é—´çœ‹çœ‹åœ¨ç­‰å¾…æœŸé—´æ˜¯å¦è¿˜æœ‰è¦å‘é€çš„æ•°æ®ï¼Œå¦‚æœ‰ä¼šä¸€æ¬¡æŠŠè¿™ä¸¤æ®µæ•°æ®å‘é€å‡ºå»ã€‚</li>
<li>æ¥æ”¶ç«¯æ¥æ”¶ä¸åŠæ—¶é€ æˆçš„æ¥æ”¶ç«¯é»åŒ…ï¼šTCPä¼šæŠŠæ¥æ”¶åˆ°çš„æ•°æ®å­˜åœ¨è‡ªå·±çš„ç¼“å†²åŒºä¸­ï¼Œç„¶åé€šçŸ¥åº”ç”¨å±‚å–æ•°æ®ã€‚å½“åº”ç”¨å±‚ç”±äºæŸäº›åŸå› ä¸èƒ½åŠæ—¶çš„æŠŠTCPçš„æ•°æ®å–å‡ºæ¥ï¼Œå°±ä¼šé€ æˆTCPç¼“å†²åŒºä¸­å­˜æ”¾äº†å‡ æ®µæ•°æ®ã€‚ <figure 
	>
	<a href="/GoLearning.assets/image-20210816200320281.png" >
		<img src="/GoLearning.assets/image-20210816200320281.png"
			
			
			
			loading="lazy"
			alt="image-20210816200320281">
	</a>
	
	<figcaption>image-20210816200320281</figcaption>
	
</figure></li>
</ol>
<p>server</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;net&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">dial</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">Dial</span><span class="p">(</span><span class="s">&#34;tcp&#34;</span><span class="p">,</span> <span class="s">&#34;127.0.0.1:30000&#34;</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;dial failed , error : &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="k">defer</span> <span class="nx">dial</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>

   <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">20</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
      <span class="nx">dial</span><span class="p">.</span><span class="nf">Write</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;how are you , hello !&#34;</span><span class="p">))</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>server</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;io&#34;</span>
   <span class="s">&#34;net&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">listen</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">Listen</span><span class="p">(</span><span class="s">&#34;tcp&#34;</span><span class="p">,</span> <span class="s">&#34;127.0.0.1:30000&#34;</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;listen port failed , err : &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="k">defer</span> <span class="nx">listen</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>

   <span class="k">for</span> <span class="p">{</span>
      <span class="nx">accept</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">listen</span><span class="p">.</span><span class="nf">Accept</span><span class="p">()</span>
      <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
         <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;connect accept failed , err :&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
         <span class="k">return</span>
      <span class="p">}</span>

      <span class="k">go</span> <span class="kd">func</span><span class="p">(</span><span class="nx">conn</span> <span class="nx">net</span><span class="p">.</span><span class="nx">Conn</span><span class="p">)</span> <span class="p">{</span>
         <span class="k">defer</span> <span class="nx">conn</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
         <span class="k">for</span>  <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">b</span>  <span class="p">[</span><span class="mi">1024</span><span class="p">]</span><span class="kt">byte</span>
            <span class="nx">read</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">conn</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="nx">b</span><span class="p">[:])</span>
            <span class="k">if</span> <span class="nx">err</span> <span class="o">==</span> <span class="nx">io</span><span class="p">.</span><span class="nx">EOF</span> <span class="p">{</span>
               <span class="k">break</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
               <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;try to read failed , err : &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
               <span class="k">return</span>
            <span class="p">}</span>
            <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;received data : &#34;</span><span class="p">,</span><span class="nb">string</span><span class="p">(</span><span class="nx">b</span><span class="p">[:</span><span class="nx">read</span><span class="p">]))</span>
         <span class="p">}</span>

      <span class="p">}(</span><span class="nx">accept</span><span class="p">)</span>

   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h5 id="è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³•</h5>
<p>å‡ºç°é»åŒ…çš„å…³é”®åœ¨äºæ¥æ”¶æ–¹ä¸ç¡®å®šå°†è¦ä¼ è¾“çš„æ•°æ®åŒ…çš„å¤§å°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å¯¹æ•°æ®åŒ…è¿›è¡Œå°åŒ…å’Œæ‹†åŒ…çš„æ“ä½œã€‚</p>
<p>å°åŒ…ï¼šå°åŒ…å°±æ˜¯ç»™ä¸€æ®µæ•°æ®åŠ ä¸ŠåŒ…å¤´ï¼Œè¿™æ ·ä¸€æ¥æ•°æ®åŒ…å°±åˆ†ä¸ºåŒ…å¤´å’ŒåŒ…ä½“ä¸¤éƒ¨åˆ†å†…å®¹äº†ï¼ˆè¿‡æ»¤éæ³•åŒ…æ—¶å°åŒ…ä¼šåŠ å…¥â€åŒ…å°¾â€œå†…å®¹ï¼‰ã€‚åŒ…å¤´éƒ¨åˆ†çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œå¹¶ä¸”ä»–å­˜å‚¨äº†åŒ…ä½“çš„é•¿åº¦ï¼Œæ ¹æ®åŒ…å¤´é•¿åº¦å›ºå®šä»¥åŠåŒ…å¤´ä¸­å«æœ‰åŒ…ä½“é•¿åº¦çš„å˜é‡å°±èƒ½æ­£ç¡®çš„æ‹†åˆ†å‡ºä¸€ä¸ªå®Œæ•´çš„æ•°æ®åŒ…ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è‡ªå·±å®šä¹‰ä¸€ä¸ªåè®®ï¼Œæ¯”å¦‚æ•°æ®åŒ…çš„å‰å››ä¸ªå­—èŠ‚ä¸ºåŒ…å¤´ï¼Œé‡Œé¢å­˜å‚¨çš„æ˜¯å‘é€çš„æ•°æ®çš„é•¿åº¦ã€‚</p>
<p>å¤§ç«¯å°ç«¯æ¨¡å¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;net&#34;</span>
   <span class="s">&#34;src/code.oldboyedu.com/day8/11nianbao_jiejue/protocol&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">dial</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">Dial</span><span class="p">(</span><span class="s">&#34;tcp&#34;</span><span class="p">,</span> <span class="s">&#34;127.0.0.1:30000&#34;</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;dial failed , error : &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="k">defer</span> <span class="nx">dial</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>

   <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">20</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
      <span class="nx">encode</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">protocol</span><span class="p">.</span><span class="nf">Encode</span><span class="p">(</span><span class="s">&#34;how are you , hello!&#34;</span><span class="p">)</span>
      <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
         <span class="k">return</span>
      <span class="p">}</span>
      <span class="nx">dial</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="nx">encode</span><span class="p">)</span>
      <span class="c1">//dial.Write([]byte(&#34;how are you , hello !&#34;))
</span><span class="c1"></span>   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>protocol</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">protocol</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;bufio&#34;</span>
   <span class="s">&#34;bytes&#34;</span>
   <span class="s">&#34;encoding/binary&#34;</span>
<span class="p">)</span>

<span class="c1">//Encode å°†æ¶ˆæ¯ç¼–ç 
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">Encode</span><span class="p">(</span><span class="nx">message</span> <span class="kt">string</span> <span class="p">)([]</span><span class="kt">byte</span><span class="p">,</span><span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">//è¯»å–æ¶ˆæ¯çš„é•¿åº¦ï¼Œè½¬æ¢ä¸ºint32
</span><span class="c1"></span>   <span class="nx">length</span> <span class="o">:=</span> <span class="nb">int32</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nx">message</span><span class="p">))</span>
   <span class="nx">pkg</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">bytes</span><span class="p">.</span><span class="nx">Buffer</span><span class="p">)</span>
   <span class="c1">//å†™å…¥æ¶ˆæ¯å¤´
</span><span class="c1"></span>   <span class="nx">err</span> <span class="o">:=</span> <span class="nx">binary</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="nx">pkg</span><span class="p">,</span> <span class="nx">binary</span><span class="p">.</span><span class="nx">LittleEndian</span><span class="p">,</span> <span class="nx">length</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
   <span class="p">}</span>
   <span class="c1">//å†™å…¥æ¶ˆæ¯ä½“
</span><span class="c1"></span>   <span class="nx">err1</span> <span class="o">:=</span> <span class="nx">binary</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="nx">pkg</span><span class="p">,</span> <span class="nx">binary</span><span class="p">.</span><span class="nx">LittleEndian</span><span class="p">,</span> <span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">message</span><span class="p">))</span>
   <span class="k">if</span> <span class="nx">err1</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err1</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="nx">pkg</span><span class="p">.</span><span class="nf">Bytes</span><span class="p">(),</span><span class="nx">err</span>
<span class="p">}</span>

<span class="c1">//Decode è§£ç æ¶ˆæ¯
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">Decode</span><span class="p">(</span><span class="nx">reader</span> <span class="o">*</span><span class="nx">bufio</span><span class="p">.</span><span class="nx">Reader</span><span class="p">)</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">//è¯»å–æ¶ˆæ¯çš„é•¿åº¦
</span><span class="c1"></span>   <span class="nx">peek</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">reader</span><span class="p">.</span><span class="nf">Peek</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="nx">err</span>
   <span class="p">}</span> <span class="c1">//è¯»å–å‰å››ä¸ªå­—èŠ‚çš„æ•°æ®
</span><span class="c1"></span>   <span class="nx">buffer</span> <span class="o">:=</span> <span class="nx">bytes</span><span class="p">.</span><span class="nf">NewBuffer</span><span class="p">(</span><span class="nx">peek</span><span class="p">)</span>
   <span class="kd">var</span> <span class="nx">length</span> <span class="kt">int32</span>
   <span class="nx">err1</span> <span class="o">:=</span> <span class="nx">binary</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="nx">buffer</span><span class="p">,</span> <span class="nx">binary</span><span class="p">.</span><span class="nx">LittleEndian</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">length</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err1</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="nx">err1</span>
   <span class="p">}</span>
   <span class="c1">//Buffered è¿”å›ç¼“å†²åŒºä¸­ç°æœ‰çš„å¯è¯»å–çš„å­—èŠ‚æ•°
</span><span class="c1"></span>   <span class="k">if</span> <span class="nb">int32</span><span class="p">(</span><span class="nx">reader</span><span class="p">.</span><span class="nf">Buffered</span><span class="p">())</span> <span class="p">&lt;</span> <span class="nx">length</span><span class="o">+</span><span class="mi">4</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s">&#34;&#34;</span> <span class="p">,</span> <span class="nx">err</span>
   <span class="p">}</span>
   <span class="c1">//è¯»å–çœŸæ­£çš„æ¶ˆæ¯æ•°æ®
</span><span class="c1"></span>   <span class="nx">pack</span><span class="o">:=</span><span class="nb">make</span><span class="p">([]</span><span class="kt">byte</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="mi">4</span><span class="o">+</span><span class="nx">length</span><span class="p">))</span>
   <span class="nx">_</span><span class="p">,</span><span class="nx">err2</span><span class="o">:=</span><span class="nx">reader</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="nx">pack</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err2</span><span class="o">!=</span><span class="kc">nil</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s">&#34;&#34;</span><span class="p">,</span><span class="nx">err2</span>
   <span class="p">}</span>

   <span class="k">return</span> <span class="nb">string</span><span class="p">(</span><span class="nx">pack</span><span class="p">[</span><span class="mi">4</span><span class="p">:]),</span><span class="kc">nil</span>


<span class="p">}</span>
</code></pre></div><p>server</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;bufio&#34;</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;net&#34;</span>
   <span class="s">&#34;src/code.oldboyedu.com/day8/11nianbao_jiejue/protocol&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">listen</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">Listen</span><span class="p">(</span><span class="s">&#34;tcp&#34;</span><span class="p">,</span> <span class="s">&#34;127.0.0.1:30000&#34;</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;listen port failed , err : &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="k">defer</span> <span class="nx">listen</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>

   <span class="k">for</span> <span class="p">{</span>
      <span class="nx">accept</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">listen</span><span class="p">.</span><span class="nf">Accept</span><span class="p">()</span>
      <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
         <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;connect accept failed , err :&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
         <span class="k">return</span>
      <span class="p">}</span>

      <span class="k">go</span> <span class="kd">func</span><span class="p">(</span><span class="nx">conn</span> <span class="nx">net</span><span class="p">.</span><span class="nx">Conn</span><span class="p">)</span> <span class="p">{</span>
         <span class="k">defer</span> <span class="nx">conn</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
         <span class="k">for</span>  <span class="p">{</span>
            <span class="nx">reader</span> <span class="o">:=</span> <span class="nx">bufio</span><span class="p">.</span><span class="nf">NewReader</span><span class="p">(</span><span class="nx">conn</span><span class="p">)</span>
            <span class="nx">decode</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">protocol</span><span class="p">.</span><span class="nf">Decode</span><span class="p">(</span><span class="nx">reader</span><span class="p">)</span>
            <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
               <span class="k">return</span>
            <span class="p">}</span>
            <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;received data : &#34;</span><span class="p">,</span><span class="nx">decode</span><span class="p">)</span>
         <span class="p">}</span>

      <span class="p">}(</span><span class="nx">accept</span><span class="p">)</span>

   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h5 id="udpåè®®">UDPåè®®</h5>
<p>UDPåè®® user datagram protocolä¸­æ–‡åç§°æ˜¯ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼Œæ˜¯OSI open system interconnection ï¼Œ å¼€æ”¾å¼ç³»ç»Ÿäº’è”ï¼Œå‚è€ƒæ¨¡å‹ä¸­ä¸€ç§æ— è¿æ¥çš„ä¼ è¾“å±‚åè®®ï¼Œä¸éœ€è¦å»ºç«‹è¿æ¥å°±èƒ½ç›´æ¥è¿›è¡Œæ•°æ®å‘é€å’Œæ¥æ”¶ï¼Œå±äºä¸å¯é çš„ï¼Œæ²¡æœ‰æ—¶åºçš„é€šä¿¡ï¼Œä½†æ˜¯UDPåè®®çš„å®æ—¶æ€§æ¯”è¾ƒå¥½ï¼Œé€šå¸¸ç”¨äºè§†é¢‘ç›´æ’­ç›¸å…³é¢†åŸŸ</p>
<h5 id="udpæœåŠ¡ç«¯">UDPæœåŠ¡ç«¯</h5>
<p>server</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;net&#34;</span>
   <span class="s">&#34;strings&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">udp</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">ListenUDP</span><span class="p">(</span><span class="s">&#34;udp&#34;</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">net</span><span class="p">.</span><span class="nx">UDPAddr</span><span class="p">{</span>
      <span class="nx">IP</span><span class="p">:</span>   <span class="nx">net</span><span class="p">.</span><span class="nf">IPv4</span><span class="p">(</span><span class="mi">127</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
      <span class="nx">Port</span><span class="p">:</span> <span class="mi">40000</span><span class="p">,</span>
   <span class="p">})</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;listen failed , error : &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span> 
   <span class="p">}</span>
   <span class="c1">//ä¸éœ€è¦å»ºç«‹é“¾æ¥ï¼Œç›´æ¥æ”¶å‘æ•°æ®
</span><span class="c1"></span>   <span class="kd">var</span> <span class="nx">b</span> <span class="p">[</span><span class="mi">1024</span><span class="p">]</span><span class="kt">byte</span>
   <span class="k">defer</span> <span class="nx">udp</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
   <span class="k">for</span>  <span class="p">{</span>
      <span class="nx">n</span><span class="p">,</span> <span class="nx">addr</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">udp</span><span class="p">.</span><span class="nf">ReadFromUDP</span><span class="p">(</span><span class="nx">b</span><span class="p">[:])</span>
      <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
         <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;read from udp failed , err: &#34;</span> <span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
         <span class="k">return</span>
      <span class="p">}</span>

      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">b</span><span class="p">[:</span><span class="nx">n</span><span class="p">])</span>
      <span class="nx">reply</span><span class="o">:=</span><span class="nx">strings</span><span class="p">.</span><span class="nf">ToUpper</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">b</span><span class="p">[:</span><span class="nx">n</span><span class="p">]))</span>
      <span class="c1">//å‘é€æ•°æ®
</span><span class="c1"></span>      <span class="nx">udp</span><span class="p">.</span><span class="nf">WriteToUDP</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">reply</span><span class="p">),</span><span class="nx">addr</span><span class="p">)</span>
   <span class="p">}</span>

<span class="p">}</span>
</code></pre></div><p>client</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;bufio&#34;</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;net&#34;</span>
   <span class="s">&#34;os&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">//UDP client
</span><span class="c1"></span>   <span class="nx">socket</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">DialUDP</span><span class="p">(</span><span class="s">&#34;udp&#34;</span><span class="p">,</span><span class="kc">nil</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">net</span><span class="p">.</span><span class="nx">UDPAddr</span><span class="p">{</span>
      <span class="nx">IP</span><span class="p">:</span>   <span class="nx">net</span><span class="p">.</span><span class="nf">IPv4</span><span class="p">(</span><span class="mi">127</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
      <span class="nx">Port</span><span class="p">:</span> <span class="mi">40000</span><span class="p">,</span>
   <span class="p">})</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;dial failed , error : &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>

   <span class="k">defer</span>  <span class="nx">socket</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
   <span class="nx">reader</span> <span class="o">:=</span> <span class="nx">bufio</span><span class="p">.</span><span class="nf">NewReader</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">Stdin</span><span class="p">)</span>
   <span class="kd">var</span> <span class="nx">reply</span> <span class="p">[</span><span class="mi">1024</span><span class="p">]</span><span class="kt">byte</span>
   <span class="k">for</span> <span class="p">{</span>
      <span class="nx">readString</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">reader</span><span class="p">.</span><span class="nf">ReadString</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">)</span>
      <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
         <span class="k">return</span>
      <span class="p">}</span>
      <span class="nx">socket</span><span class="p">.</span><span class="nf">Write</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">readString</span><span class="p">))</span>
      <span class="c1">//æ”¶å›å¤çš„æ•°æ®
</span><span class="c1"></span>      <span class="nx">n</span><span class="p">,</span> <span class="nx">adder</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">socket</span><span class="p">.</span><span class="nf">ReadFromUDP</span><span class="p">(</span><span class="nx">reply</span><span class="p">[:])</span>
      <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
         <span class="k">return</span>
      <span class="p">}</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;received data: ,addr :    &#34;</span><span class="p">,</span><span class="nb">string</span><span class="p">(</span><span class="nx">reply</span><span class="p">[:</span><span class="nx">n</span><span class="p">]),</span><span class="nx">adder</span><span class="p">)</span>
   <span class="p">}</span>

<span class="p">}</span>
</code></pre></div><h4 id="day09">day09</h4>
<p>æ—¥å¿—æ”¶é›†é¡¹ç›®</p>
<p>ginæ¡†æ¶å’Œå¾®æœåŠ¡</p>
<p>dockerå’Œk8s</p>
<h4 id="ä»Šæ—¥åˆ†äº«">ä»Šæ—¥åˆ†äº«</h4>
<p>æ³¨é‡Š/æ—¥å¿—/å•å…ƒæµ‹è¯•</p>
<h4 id="ä»Šæ—¥å†…å®¹-4">ä»Šæ—¥å†…å®¹</h4>
<p>context</p>
<p>å•å…ƒæµ‹è¯•</p>
<p>pprofè°ƒè¯•å·¥å…·</p>
<h4 id="å†…å®¹å›é¡¾-5">å†…å®¹å›é¡¾</h4>
<h5 id="äº’æ–¥é”-1">äº’æ–¥é”</h5>
<p>sync.mutex</p>
<p>æ˜¯ä¸€ä¸ªç»“æ„ä½“ æ˜¯å€¼ç±»å‹ ã€‚ç»™å‡½æ•°ä¼ å‚æ•°çš„æ—¶å€™è¦ä¼ æŒ‡é’ˆ</p>
<p>lock å’Œ unlock</p>
<h5 id="ä¸ºä»€ä¹ˆè¦ç”¨é”">ä¸ºä»€ä¹ˆè¦ç”¨é”</h5>
<p>é˜²æ­¢åŒä¸€æ—¶åˆ»å¤šä¸ªgoroutineæ“ä½œåŒä¸€èµ„æº</p>
<h5 id="è¯»å†™äº’æ–¥é”-1">è¯»å†™äº’æ–¥é”</h5>
<p>é€‚ç”¨äºè¯»å¤šå†™å°‘çš„åœºæ™¯ä¸‹,æ‰èƒ½æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡</p>
<p>ç‰¹ç‚¹:</p>
<ol>
<li>å¦‚æœæ˜¯è¯»çš„äººæ¥è·å–çš„æ˜¯è¯»é”,åç»­çš„goroutineèƒ½è¯»ä¸èƒ½å†™</li>
<li>å¦‚æœæ˜¯å†™çš„goroutineæ¥äº†,è·å–çš„æ˜¯å†™é”,åç»­çš„goroutineä¸ç®¡æ˜¯è¯»è¿˜æ˜¯å†™,éƒ½è¦ç­‰å¾…è·å–é”</li>
</ol>
<p>rwlock.rlock()</p>
<p>rwlock.wlock()</p>
<p>rwlock.lock()</p>
<p>rwlock.unlock()</p>
<h5 id="ç­‰å¾…ç»„">ç­‰å¾…ç»„</h5>
<p>sync.waitgroup</p>
<p>ç”¨æ¥ç­‰goroutineæ‰§è¡Œå®Œå†ç»§ç»­</p>
<p>æ˜¯ä¸€ä¸ªç»“æ„ä½“,æ˜¯å€¼ç±»å‹,ç»™å‡½æ•°ä¼ å‚æ•°çš„æ—¶å€™è¦ä¼ æŒ‡é’ˆ</p>
<p>wg.add()</p>
<p>wg.done()</p>
<p>wg.wait()</p>
<h5 id="synconce-1">sync.Once</h5>
<p>ä½¿ç”¨åœºæ™¯</p>
<p>æŸäº›å‡½æ•°åªéœ€è¦æ‰§è¡Œä¸€æ¬¡çš„æ—¶å€™ï¼Œå°±å¯ä»¥ä½¿ç”¨sync.once</p>
<p>once.Do(func ( ) )</p>
<p>æ¥æ”¶æ— å‚æ•°æ— è¿”å›å€¼çš„å‡½æ•°å‚æ•°</p>
<h5 id="syncmap-1">sync.Map</h5>
<p>ä½¿ç”¨åœºæ™¯</p>
<p>å¹¶å‘æ“ä½œä¸€ä¸ªmapçš„æ—¶å€™ï¼Œå†…ç½®çš„mapä¸æ˜¯å¹¶å‘å®‰å…¨çš„</p>
<p>ä½¿ç”¨ï¼Œæ˜¯ä¸€ä¸ªå¼€ç®±å³ç”¨çš„(ä¸éœ€è¦makeï¼‰å¹¶å‘å®‰å…¨çš„map</p>
<p>var map sync.Map</p>
<p>load()</p>
<p>store()</p>
<p>loadorstore()</p>
<p>delete()</p>
<p>range()</p>
<h5 id="åŸå­æ“ä½œ">åŸå­æ“ä½œ</h5>
<p>goè¯­è¨€å†…ç½®äº†ä¸€äº›é’ˆå¯¹å†…ç½®çš„åŸºæœ¬æ•°æ®ç±»å‹çš„ä¸€äº›å¹¶å‘å®‰å…¨çš„æ“ä½œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">var</span> <span class="nx">i</span> <span class="kt">int64</span> <span class="p">=</span><span class="mi">10</span>
<span class="nx">atomic</span><span class="p">.</span><span class="nf">addint64</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">i</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div><h5 id="ç½‘ç»œç¼–ç¨‹-1">ç½‘ç»œç¼–ç¨‹</h5>
<h5 id="äº’è”ç½‘åè®®">äº’è”ç½‘åè®®</h5>
<p>OISä¸ƒå±‚æ¨¡å‹</p>
<p>åº”ç”¨å±‚ è¡¨ç¤ºå±‚  ä¼šè¯å±‚ ä¼ è¾“å±‚ ç½‘ç»œå±‚ æ•°æ®é“¾è·¯å±‚ ç‰©ç†å±‚</p>
<h4 id="httpå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯">HTTPå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯</h4>
<p>goè¯­è¨€å†…ç½®çš„net/httpåŒ…æä¾›äº†httpå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„å®ç°</p>
<h5 id="httpåè®®">HTTPåè®®</h5>
<p>è¶…æ–‡æœ¬ä¼ è¾“åè®®HTTP hypertext transfer protocol æ˜¯äº’è”ç½‘ä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§ç½‘ç»œä¼ è¾“åè®®ï¼Œæ‰€æœ‰wwwæ–‡ä»¶éƒ½å¿…é¡»éµå®ˆè¿™ä¸ªæ ‡å‡†ã€‚è®¾è®¡HTTPæœ€åˆçš„ç›®çš„æ˜¯ä¸ºäº†æä¾›ä¸€ç§å‘å¸ƒå’Œæ¥æ”¶HTMLé¡µé¢çš„æ–¹æ³•ã€‚</p>
<h5 id="httpå®¢æˆ·ç«¯">HTTPå®¢æˆ·ç«¯</h5>
<p>ä½¿ç”¨net / http åŒ…ç¼–å†™ä¸€ä¸ªç®€å•çš„å‘é€HTTPè¯·æ±‚çš„clientç«¯</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210817000221229.png" >
		<img src="/GoLearning.assets/image-20210817000221229.png"
			
			
			
			loading="lazy"
			alt="image-20210817000221229">
	</a>
	
	<figcaption>image-20210817000221229</figcaption>
	
</figure></p>
<p>HTTPï¼šè¶…æ–‡æœ¬ä¼ è¾“åè®®</p>
<p>è§„å®šäº†ï¼šæµè§ˆå™¨å’Œç½‘ç«™æœåŠ¡å™¨ä¹‹é—´é€šä¿¡çš„è§„åˆ™</p>
<p>HTMLï¼šè¶…æ–‡æœ¬æ ‡è®°è¯­è¨€</p>
<p>å­¦çš„å°±æ˜¯æ ‡è®°çš„ç¬¦å·ã€æ ‡ç­¾</p>
<p>CSSï¼šå±‚å æ ·å¼è¡¨</p>
<p>è§„å®šäº†HTMLä¸­æ ‡ç­¾çš„å…·ä½“æ ·å¼ï¼ˆé¢œè‰²ã€èƒŒæ™¯ã€å¤§å°ã€ä½ç½®ã€æµ®åŠ¨&hellip;ï¼‰</p>
<p>JSï¼šä¸€ç§è·‘åœ¨æµè§ˆå™¨ä¸Šçš„ç¼–ç¨‹è¯­è¨€</p>
<p>http_server</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;io/ioutil&#34;</span>
	<span class="s">&#34;net/http&#34;</span>
<span class="p">)</span>

<span class="c1">//net / http server
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">http</span><span class="p">.</span><span class="nf">HandleFunc</span><span class="p">(</span><span class="s">&#34;/posts/go/15_socket/&#34;</span><span class="p">,</span><span class="nx">f1</span><span class="p">)</span>
	<span class="nx">http</span><span class="p">.</span><span class="nf">HandleFunc</span><span class="p">(</span><span class="s">&#34;/xxx/&#34;</span><span class="p">,</span><span class="nx">f2</span><span class="p">)</span>
	<span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;127.0.0.1:9090&#34;</span><span class="p">,</span><span class="kc">nil</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f2</span><span class="p">(</span><span class="nx">writer</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">request</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
	<span class="c1">//å¯¹äºgetè¯·æ±‚ å‚æ•°éƒ½æ”¾åœ¨URLä¸Š ï¼ˆquery paramï¼‰è¯·æ±‚ä½“ä¸­æ˜¯æ²¡æœ‰æ•°æ®çš„
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">URL</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">Method</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadAll</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">Body</span><span class="p">))</span>
	<span class="nx">writer</span><span class="p">.</span><span class="nf">Write</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;ok!&#34;</span><span class="p">))</span>

	<span class="nx">queryParam</span> <span class="o">:=</span><span class="nx">request</span><span class="p">.</span><span class="nx">URL</span><span class="p">.</span><span class="nf">Query</span><span class="p">()</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">queryParam</span><span class="p">)</span>
	<span class="nx">name</span><span class="o">:=</span><span class="nx">queryParam</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span>
	<span class="nx">age</span><span class="o">:=</span><span class="nx">queryParam</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="s">&#34;age&#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">age</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">f1</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">file</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadFile</span><span class="p">(</span><span class="s">&#34;./xx.txt&#34;</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">w</span><span class="p">.</span><span class="nf">Write</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;%v&#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)))</span>
		<span class="k">return</span>
	<span class="p">}</span>
	<span class="nx">w</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><p>http_client</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;io/ioutil&#34;</span>
   <span class="s">&#34;net/http&#34;</span>
   <span class="s">&#34;net/url&#34;</span>
<span class="p">)</span>

<span class="c1">//net/http client
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nf">f1</span><span class="p">()</span>
   <span class="nf">f2</span><span class="p">()</span>
   <span class="nf">f3</span><span class="p">()</span>
<span class="p">}</span>

<span class="c1">//æ„é€ ä¸€ä¸ªclient
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">client</span><span class="p">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">Client</span><span class="p">{</span> <span class="nx">Transport</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">http</span><span class="p">.</span><span class="nx">Transport</span><span class="p">{</span>
            <span class="nx">DisableKeepAlives</span><span class="p">:</span><span class="kc">false</span><span class="p">}}</span>

<span class="kd">func</span> <span class="nf">f3</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">//æ„é€ å‚æ•°
</span><span class="c1"></span>   <span class="nx">urlparams</span> <span class="o">:=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">Values</span><span class="p">{}</span>
   <span class="nx">urlparams</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">,</span><span class="s">&#34;ljs&#34;</span><span class="p">)</span>
   <span class="nx">urlparams</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">&#34;score&#34;</span><span class="p">,</span><span class="s">&#34;100&#34;</span><span class="p">)</span>
   <span class="c1">//æ„é€ å¤´éƒ¨
</span><span class="c1"></span>   <span class="nx">urlParse</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">url</span><span class="p">.</span><span class="nf">ParseRequestURI</span><span class="p">(</span><span class="s">&#34;http://127.0.0.1:9090/xxx&#34;</span><span class="p">)</span>
   <span class="c1">//æ‹¼æ¥url
</span><span class="c1"></span>   <span class="nx">urlParse</span><span class="p">.</span><span class="nx">RawQuery</span> <span class="p">=</span> <span class="nx">urlparams</span><span class="p">.</span><span class="nf">Encode</span><span class="p">()</span>
   <span class="c1">//æ„é€ ä¸€ä¸ªè¯·æ±‚ request
</span><span class="c1"></span>   <span class="nx">request</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">NewRequest</span><span class="p">(</span><span class="s">&#34;get&#34;</span><span class="p">,</span> <span class="nx">urlParse</span><span class="p">.</span><span class="nf">String</span><span class="p">(),</span> <span class="kc">nil</span><span class="p">)</span>
   <span class="nx">response</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">client</span><span class="p">.</span><span class="nf">Do</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span>
   <span class="k">defer</span> <span class="nx">response</span><span class="p">.</span><span class="nx">Body</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
   <span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadAll</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">Body</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f2</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">//æ„é€ è¯·æ±‚
</span><span class="c1"></span>   <span class="nx">uri</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">url</span><span class="p">.</span><span class="nf">ParseRequestURI</span><span class="p">(</span><span class="s">&#34;http://127.0.0.1:9090/xxx&#34;</span><span class="p">)</span>
   <span class="nx">data</span><span class="o">:=</span><span class="nx">url</span><span class="p">.</span><span class="nx">Values</span><span class="p">{}</span>
   <span class="nx">data</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">,</span><span class="s">&#34;æ—ã®æ ‘&#34;</span><span class="p">)</span>
   <span class="nx">data</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;age&#34;</span><span class="p">,</span><span class="s">&#34;18&#34;</span><span class="p">)</span>
   <span class="nx">urlStr</span> <span class="o">:=</span> <span class="nx">data</span><span class="p">.</span><span class="nf">Encode</span><span class="p">()</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">urlStr</span><span class="p">)</span>
   <span class="nx">uri</span><span class="p">.</span><span class="nx">RawQuery</span><span class="p">=</span><span class="nx">urlStr</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">uri</span><span class="p">)</span>
   <span class="nx">request</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">NewRequest</span><span class="p">(</span><span class="s">&#34;Get&#34;</span><span class="p">,</span> <span class="nx">uri</span><span class="p">.</span><span class="nf">String</span><span class="p">(),</span> <span class="kc">nil</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;request failed ,error : &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="c1">//å‘è¯·æ±‚
</span><span class="c1"></span>   <span class="nx">response</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">DefaultClient</span><span class="p">.</span><span class="nf">Do</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="k">return</span>
   <span class="p">}</span>

   <span class="k">defer</span> <span class="nx">response</span><span class="p">.</span><span class="nx">Body</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>  <span class="c1">//ä¸€å®šè¦è®°å¾—å…³é—­resp.body
</span><span class="c1"></span>   <span class="nx">all</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadAll</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">Body</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">all</span><span class="p">))</span>

<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f1</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">response</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="s">&#34;http://127.0.0.1:9090/xxx?name=ljs&amp;age=18&#34;</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;get failed , error : &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="c1">//ä»responseä¸­å§æœåŠ¡ç«¯è¿”å›çš„æ•°æ®è¯»å‡ºæ¥
</span><span class="c1"></span>   <span class="nx">read</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadAll</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">Body</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;read failed , error : &#34;</span><span class="p">,</span><span class="nx">err</span> <span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>

   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">read</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><p>http.get</p>
<p>http.post</p>
<p>http.postform</p>
<h5 id="å•å…ƒæµ‹è¯•">å•å…ƒæµ‹è¯•</h5>
<p>å¼€å‘è‡ªå·±ç»™è‡ªå·±çš„ä»£ç å†™æµ‹è¯•</p>
<p>goè¯­è¨€ä¸­çš„æµ‹è¯•ä¾èµ–go testå‘½ä»¤ã€‚ç¼–å†™æµ‹è¯•ä»£ç å’Œç¼–å†™æ™®é€šçš„goä»£ç è¿‡ç¨‹æ˜¯ç±»ä¼¼çš„ï¼Œå¹¶ä¸éœ€è¦å­¦ä¹ æ–°çš„è¯­æ³•ã€è§„åˆ™æˆ–å·¥å…·ã€‚</p>
<p>go testå‘½ä»¤æ˜¯ä¸€ä¸ªæŒ‰ç…§ä¸€å®šçº¦å®šå’Œç»„ç»‡çš„æµ‹è¯•ä»£ç çš„é©±åŠ¨ç¨‹åºã€‚åœ¨åŒ…ç›®å½•å†…ï¼Œæ‰€æœ‰ä»¥_test.goä¸ºåç¼€åçš„æºä»£ç æ–‡ä»¶éƒ½æ˜¯go testæµ‹è¯•çš„ä¸€éƒ¨åˆ†ï¼Œä¸ä¼šè¢«go build ç¼–è¯‘åˆ°æœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚</p>
<p>åœ¨*_test.goæ–‡ä»¶ä¸­æœ‰ä¸‰ç§ç±»å‹çš„å‡½æ•°ï¼Œå•å…ƒæµ‹è¯•å‡½æ•°ã€åŸºå‡†æµ‹è¯•å‡½æ•°å’Œç¤ºä¾‹å‡½æ•°ã€‚</p>
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>æ ¼å¼</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>æµ‹è¯•å‡½æ•°</td>
<td>å‡½æ•°åå‰ç¼€ä¸ºtest</td>
<td>æµ‹è¯•ç¨‹åºçš„ä¸€äº›é€»è¾‘è¡Œä¸ºæ˜¯å¦æ­£ç¡®</td>
</tr>
<tr>
<td>åŸºå‡†å‡½æ•°</td>
<td>å‡½æ•°åå‰ç¼€ä¸ºbenchmark</td>
<td>æµ‹è¯•å‡½æ•°çš„æ€§èƒ½</td>
</tr>
<tr>
<td>ç¤ºä¾‹å‡½æ•°</td>
<td>å‡½æ•°åå‰ç¼€ä¸ºexample</td>
<td>ä¸ºæ–‡æ¡£æä¾›å®åŠ›æ–‡æ¡£</td>
</tr>
</tbody>
</table>
<p>go testå‘½ä»¤ä¼šéå†æ‰€æœ‰çš„*_test.goæ–‡ä»¶ä¸­ç¬¦åˆä¸Šè¿°å‘½åè§„åˆ™çš„å‡½æ•°ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªä¸´æ—¶çš„mainåŒ…ç”¨äºè°ƒç”¨ç›¸åº”çš„æµ‹è¯•å‡½æ•°ï¼Œç„¶åæ„å»ºå¹¶è¿è¡Œã€æŠ¥å‘Šæµ‹è¯•ç»“æœï¼Œæœ€åæ¸…ç†æµ‹è¯•ä¸­ç”Ÿæˆçš„ä¸´æ—¶æ–‡ä»¶</p>
<h5 id="æµ‹è¯•å‡½æ•°">æµ‹è¯•å‡½æ•°</h5>
<p>æµ‹è¯•å‡½æ•°çš„æ ¼å¼ æ¯ä¸ªæµ‹è¯•å‡½æ•°å¿…é¡»å¯¼å…¥testingåŒ…ï¼ŒåŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">TestName</span> <span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span>
<span class="p">{</span>
    
<span class="p">}</span>
<span class="c1">//testing.Tæ‹¥æœ‰çš„æ–¹æ³•å¦‚ä¸‹
</span><span class="c1"></span><span class="nx">Error</span>
<span class="nx">Errorf</span>
<span class="nx">Fail</span>
<span class="nx">FailNow</span>
<span class="nx">Failed</span>
<span class="nx">Fatal</span>
<span class="nx">Fatalf</span>
<span class="nx">Log</span>
<span class="nx">Logf</span>
<span class="nx">Name</span>
<span class="nx">Parallel</span>
<span class="nx">Run</span>
<span class="nx">Skip</span>
<span class="nx">SkipNow</span>
<span class="nx">Skipf</span>
<span class="nx">Skipped</span>
</code></pre></div><h5 id="æµ‹è¯•ç”¨ä¾‹å’Œæµ‹è¯•ç»„å’Œå­æµ‹è¯•">æµ‹è¯•ç”¨ä¾‹å’Œæµ‹è¯•ç»„å’Œå­æµ‹è¯•</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;strings&#34;</span>
<span class="p">)</span>
<span class="kd">var</span> <span class="nx">m</span> <span class="p">=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">string</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>

<span class="c1">//Split åˆ‡å‰²å­—ç¬¦ä¸² a b c =&gt; [a c]
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">Split</span><span class="p">(</span><span class="nx">str</span> <span class="p">,</span><span class="nx">sep</span> <span class="kt">string</span><span class="p">)</span> <span class="p">[]</span><span class="kt">string</span> <span class="p">{</span>
      <span class="nx">i</span><span class="o">:=</span><span class="mi">0</span>
      <span class="nf">judge</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span><span class="nx">sep</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span>
      <span class="k">return</span> <span class="nx">m</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">judge</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">,</span><span class="nx">sep</span> <span class="kt">string</span><span class="p">,</span><span class="nx">i</span> <span class="kt">int</span><span class="p">)</span>  <span class="p">{</span>
   <span class="k">if</span> <span class="p">!</span><span class="nx">strings</span><span class="p">.</span><span class="nf">Contains</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span><span class="nx">sep</span><span class="p">){</span>
      <span class="k">return</span>
   <span class="p">}</span>

   <span class="nx">index</span><span class="o">:=</span><span class="nx">strings</span><span class="p">.</span><span class="nf">Index</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span><span class="nx">sep</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">s</span><span class="p">[:</span><span class="nx">index</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#34;&#34;</span> <span class="p">{</span>
      <span class="nx">m</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">=</span> <span class="nx">s</span><span class="p">[:</span><span class="nx">index</span><span class="p">]</span>
   <span class="p">}</span><span class="k">else</span> <span class="p">{</span>
      <span class="nx">m</span><span class="p">[</span><span class="nx">i</span><span class="p">]=</span><span class="nx">s</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
   <span class="p">}</span>
   <span class="k">if</span> <span class="nx">s</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span><span class="o">!=</span><span class="s">&#34;&#34;</span> <span class="p">{</span>
      <span class="nx">m</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="p">=</span> <span class="nx">s</span><span class="p">[</span><span class="nx">index</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
   <span class="p">}</span>
   <span class="nf">judge</span><span class="p">(</span><span class="nx">m</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span><span class="nx">sep</span><span class="p">,</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">got</span><span class="o">:=</span><span class="nf">Split</span><span class="p">(</span><span class="s">&#34;abcb&#34;</span><span class="p">,</span><span class="s">&#34;b&#34;</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">got</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><p>æµ‹è¯•ç”¨ä¾‹å†™</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;reflect&#34;</span>
   <span class="s">&#34;testing&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">TestSplit</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">got</span><span class="o">:=</span><span class="nf">Split</span><span class="p">(</span><span class="s">&#34;abcb&#34;</span><span class="p">,</span><span class="s">&#34;b&#34;</span><span class="p">)</span>
   <span class="nx">want</span><span class="o">:=</span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;a&#34;</span><span class="p">,</span><span class="s">&#34;c&#34;</span><span class="p">,</span><span class="s">&#34; &#34;</span><span class="p">}</span>
   <span class="k">if</span> <span class="p">!</span><span class="nx">reflect</span><span class="p">.</span><span class="nf">DeepEqual</span><span class="p">(</span><span class="nx">got</span><span class="p">,</span> <span class="nx">want</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;æµ‹è¯•ç”¨ä¾‹å¤±è´¥&#34;</span><span class="p">)</span>
      <span class="nx">t</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;want %v but got %v\n&#34;</span><span class="p">,</span><span class="nx">want</span><span class="p">,</span><span class="nx">got</span><span class="p">)</span>
   <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">TestSplit2</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">got</span><span class="o">:=</span><span class="nf">Split</span><span class="p">(</span><span class="s">&#34;a:b:c&#34;</span><span class="p">,</span><span class="s">&#34;:&#34;</span><span class="p">)</span>
   <span class="nx">want</span><span class="o">:=</span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;a&#34;</span><span class="p">,</span><span class="s">&#34;b&#34;</span><span class="p">,</span><span class="s">&#34;c&#34;</span><span class="p">}</span>
   <span class="k">if</span> <span class="p">!</span><span class="nx">reflect</span><span class="p">.</span><span class="nf">DeepEqual</span><span class="p">(</span><span class="nx">got</span><span class="p">,</span> <span class="nx">want</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">t</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;want %v but got %v\n&#34;</span><span class="p">,</span><span class="nx">want</span><span class="p">,</span><span class="nx">got</span><span class="p">)</span>
   <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//æµ‹è¯•ç»„
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">TestSplitGroup</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
   <span class="kd">type</span> <span class="nx">TestCase</span> <span class="kd">struct</span> <span class="p">{</span>
      <span class="nx">str</span> <span class="kt">string</span>
      <span class="nx">sep</span> <span class="kt">string</span>
      <span class="nx">got</span> <span class="kt">string</span>
      <span class="nx">want</span> <span class="p">[]</span><span class="kt">string</span>
   <span class="p">}</span>
   <span class="nx">testCase</span> <span class="o">:=</span><span class="p">[]</span><span class="nx">TestCase</span><span class="p">{</span>
      <span class="p">{</span>
         <span class="nx">str</span><span class="p">:</span>  <span class="s">&#34;abcb&#34;</span><span class="p">,</span>
         <span class="nx">sep</span><span class="p">:</span>  <span class="s">&#34;b&#34;</span><span class="p">,</span>
         <span class="nx">want</span><span class="p">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;a&#34;</span><span class="p">,</span><span class="s">&#34;c&#34;</span><span class="p">,</span><span class="s">&#34;&#34;</span><span class="p">},</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="nx">str</span><span class="p">:</span><span class="s">&#34;a:b:c&#34;</span><span class="p">,</span>
         <span class="nx">sep</span><span class="p">:</span> <span class="s">&#34;:&#34;</span><span class="p">,</span>
         <span class="nx">want</span><span class="p">:[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;a&#34;</span><span class="p">,</span><span class="s">&#34;b&#34;</span><span class="p">,</span><span class="s">&#34;c&#34;</span><span class="p">},</span>
      <span class="p">},</span>
   <span class="p">}</span>
   <span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">testCase</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">!</span><span class="nx">reflect</span><span class="p">.</span><span class="nf">DeepEqual</span><span class="p">(</span><span class="nf">Split</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">str</span><span class="p">,</span><span class="nx">v</span><span class="p">.</span><span class="nx">sep</span><span class="p">),</span><span class="nx">v</span><span class="p">.</span><span class="nx">want</span><span class="p">){</span>
         <span class="nx">t</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;want %v but got %v\n&#34;</span><span class="p">,</span><span class="nx">v</span><span class="p">.</span><span class="nx">want</span><span class="p">,</span><span class="nf">Split</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">str</span><span class="p">,</span><span class="nx">v</span><span class="p">.</span><span class="nx">sep</span><span class="p">))</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">TestSingle</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
   <span class="kd">type</span> <span class="nx">TestCase</span> <span class="kd">struct</span> <span class="p">{</span>
      <span class="nx">str</span> <span class="kt">string</span>
      <span class="nx">sep</span> <span class="kt">string</span>
      <span class="nx">got</span> <span class="kt">string</span>
      <span class="nx">want</span> <span class="p">[]</span><span class="kt">string</span>
   <span class="p">}</span>
   <span class="nx">testCase</span><span class="o">:=</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="nx">TestCase</span><span class="p">{</span>
      <span class="s">&#34;case1&#34;</span><span class="p">:{</span>
         <span class="nx">str</span><span class="p">:</span>  <span class="s">&#34;abcb&#34;</span><span class="p">,</span>
         <span class="nx">sep</span><span class="p">:</span>  <span class="s">&#34;b&#34;</span><span class="p">,</span>
         <span class="nx">want</span><span class="p">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;a&#34;</span><span class="p">,</span><span class="s">&#34;c&#34;</span><span class="p">,</span><span class="s">&#34;&#34;</span><span class="p">},</span>
      <span class="p">},</span>
      <span class="s">&#34;case2&#34;</span><span class="p">:{</span>
         <span class="nx">str</span><span class="p">:</span><span class="s">&#34;a:b:c&#34;</span><span class="p">,</span>
         <span class="nx">sep</span><span class="p">:</span> <span class="s">&#34;:&#34;</span><span class="p">,</span>
         <span class="nx">want</span><span class="p">:[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;a&#34;</span><span class="p">,</span><span class="s">&#34;b&#34;</span><span class="p">,</span><span class="s">&#34;c&#34;</span><span class="p">},</span>
      <span class="p">},</span>
   <span class="p">}</span>

   <span class="k">for</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">testCase</span> <span class="p">{</span>
      <span class="nx">t</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">got</span><span class="o">:=</span><span class="nf">Split</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">str</span><span class="p">,</span><span class="nx">v</span><span class="p">.</span><span class="nx">sep</span><span class="p">)</span>
         <span class="k">if</span> <span class="p">!</span><span class="nx">reflect</span><span class="p">.</span><span class="nf">DeepEqual</span><span class="p">(</span><span class="nx">got</span><span class="p">,</span> <span class="nx">v</span><span class="p">.</span><span class="nx">want</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">t</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;want %v but got %v\n&#34;</span><span class="p">,</span><span class="nx">v</span><span class="p">.</span><span class="nx">want</span><span class="p">,</span><span class="nx">got</span><span class="p">)</span>
         <span class="p">}</span>
      <span class="p">})</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">å°è¯•æ–°çš„è·¨å¹³å° PowerShell https://aka.ms/pscore6

PS E:<span class="se">\p</span>roject<span class="se">\G</span>Oproject<span class="se">\s</span>rc<span class="se">\c</span>ode.oldboyedu.com<span class="se">\d</span>ay9<span class="se">\0</span>2splitString&gt; go <span class="nb">test</span> -run<span class="o">=</span>TestSingle/case2
--- FAIL: TestSingle <span class="o">(</span>0.00s<span class="o">)</span>
    --- FAIL: TestSingle/case2 <span class="o">(</span>0.00s<span class="o">)</span>
        split_test.go:77: want <span class="o">[</span>a b c<span class="o">]</span> but got <span class="o">[</span>a b c <span class="o">]</span>
FAIL
<span class="nb">exit</span> status <span class="m">1</span>
FAIL    src/code.oldboyedu.com/day9/02splitString       0.240s
</code></pre></div><h5 id="æµ‹è¯•è¦†ç›–ç‡">æµ‹è¯•è¦†ç›–ç‡</h5>
<p>go test -cover</p>
<p>å‡½æ•°è¦†ç›–ç‡100%</p>
<p>ä»£ç è¦†ç›–ç‡60%</p>
<h5 id="åŸºå‡†æµ‹è¯•">åŸºå‡†æµ‹è¯•</h5>
<p>åŸºå‡†æµ‹è¯•å°±æ˜¯åœ¨ä¸€å®šçš„å·¥ä½œè´Ÿè½½ä¹‹ä¸‹æ£€æµ‹ç¨‹åºæ€§èƒ½çš„ä¸€ç§æ–¹æ³•ã€‚åŸºå‡†æµ‹è¯•çš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š</p>
<p>func BenchName(b *testing.B)</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210818211645228.png" >
		<img src="/GoLearning.assets/image-20210818211645228.png"
			
			
			
			loading="lazy"
			alt="image-20210818211645228">
	</a>
	
	<figcaption>image-20210818211645228</figcaption>
	
</figure></p>
<h5 id="æ€§èƒ½æ¯”è¾ƒæµ‹è¯•">æ€§èƒ½æ¯”è¾ƒæµ‹è¯•</h5>
<p>é»˜è®¤æƒ…å†µä¸‹æ¯ä¸ªåŸºå‡†æµ‹è¯•è‡³å°‘è¿è¡Œ1sï¼Œå¦‚æœåœ¨benchmarkå‡½æ•° è¿”å›æ—¶æ²¡æœ‰åˆ°1sï¼Œåˆ™b.Nçš„å€¼ä¼šæŒ‰1,2,5,50&hellip;å¢åŠ ,å¹¶ä¸”å‡½æ•°å†æ¬¡è¿è¡Œ</p>
<p>å¯ä»¥æŒ‡å®šbenchtime</p>
<h5 id="é‡ç½®æ—¶é—´">é‡ç½®æ—¶é—´</h5>
<p>b.ResetTimerä¹‹å‰çš„å¤„ç†ä¸ä¼šæ”¾åˆ°æ‰§è¡Œæ—¶é—´é‡Œï¼Œä¹Ÿä¸ä¼šè¾“å‡ºåˆ°æŠ¥å‘Šä¸­ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ä¹‹å‰åšä¸€äº›ä¸è®¡åˆ’ä½œä¸ºæµ‹è¯•æŠ¥å‘Šçš„æ“ä½œã€‚</p>
<h5 id="å¹¶è¡Œæµ‹è¯•">å¹¶è¡Œæµ‹è¯•</h5>
<p>runparallelä¼šä»¥å¹¶è¡Œçš„æ–¹å¼æ‰§è¡Œç»™å®šçš„åŸºå‡†æµ‹è¯•</p>
<p>å¯ä»¥è°ƒç”¨setparallelismæ¥ç¡®å®šcpuæ ¸æ•°</p>
<h5 id="setupå’Œteardown">setUpå’Œteardown</h5>
<p>æµ‹è¯•ç¨‹åºæœ‰æ—¶éœ€è¦åœ¨æµ‹è¯•ä¹‹å‰è¿›è¡Œé¢å¤–çš„è®¾ç½®setupæˆ–è€…åœ¨æµ‹è¯•ä¹‹åè¿›è¡Œæ‹†å¸teardown</p>
<h5 id="ç¤ºä¾‹å‡½æ•°">ç¤ºä¾‹å‡½æ•°</h5>
<p>ExampleName</p>
<h5 id="profè°ƒè¯•å·¥å…·">profè°ƒè¯•å·¥å…·</h5>
<p>goè¯­è¨€é¡¹ç›®ä¸­çš„æ€§èƒ½ä¼˜åŒ–ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li>CPU profileï¼šæŠ¥å‘Šç¨‹åºçš„CPUä½¿ç”¨æƒ…å†µï¼ŒæŒ‰ç…§ä¸€å®šé¢‘ç‡å»é‡‡é›†åº”ç”¨ç¨‹åºåœ¨CPUå’Œå¯„å­˜å™¨ä¸Šé¢çš„æ•°æ®</li>
<li>Memory Profile (Heap Profile) :æŠ¥å‘Šç¨‹åºçš„å†…å­˜ä½¿ç”¨æƒ…å†µ</li>
<li>Block Profiling: æŠ¥å‘Šgoroutinesä¸åœ¨è¿è¡ŒçŠ¶æ€çš„æƒ…å†µï¼Œå¯ä»¥ç”¨æ¥åˆ†æå’ŒæŸ¥æ‰¾æ­»é”ç­‰æ€§èƒ½ç“¶é¢ˆ</li>
<li>Goroutine Profiling:æŠ¥å‘Šgoroutinesçš„ä½¿ç”¨æƒ…å†µï¼Œæœ‰é‚£äº›goroutineï¼Œå¥¹ä»¬çš„è°ƒç”¨å…³ç³»æ˜¯æ€ä¹ˆæ ·çš„</li>
</ul>
<h5 id="é‡‡é›†æ€§èƒ½æ•°æ®">é‡‡é›†æ€§èƒ½æ•°æ®</h5>
<p>goè¯­è¨€å†…ç½®äº†è·å–ç¨‹åºçš„è¿è¡Œæ•°æ®çš„å·¥å…·ï¼ŒåŒ…æ‹¬ä¸€ä¸‹ä¸¤ä¸ªæ ‡å‡†åº“</p>
<ul>
<li>runtime/pprof:é‡‡é›†å·¥å…·å‹åº”ç”¨è¿è¡Œæ•°æ®è¿›è¡Œåˆ†æ</li>
<li>net/http/pprof:é‡‡é›†æœåŠ¡å‹åº”ç”¨è¿è¡Œæ—¶æ•°æ®è¿›è¡Œåˆ†æ</li>
</ul>
<p>pprofå¼€æœºåï¼Œæ¯ä¸ªä¸€æ®µæ—¶é—´10mså°±ä¼šæ”¶é›†å½“å‰çš„å †æ ˆä¿¡æ¯ï¼Œè·å–å„ä¸ªå‡½æ•°å ç”¨çš„cpuä»¥åŠå†…å­˜èµ„æºï¼›æœ€åé€šè¿‡å¯¹è¿™äº›é‡‡æ ·æ•°æ®è¿›è¡Œåˆ†æï¼Œå½¢æˆä¸€ä¸ªæ€§èƒ½åˆ†ææŠ¥å‘Šã€‚</p>
<p>æ³¨æ„ï¼Œæˆ‘ä»¬åªåº”è¯¥åœ¨æ€§èƒ½æµ‹è¯•çš„æ—¶å€™æ‰åœ¨ä»£ç ä¸­å¼•å…¥pprof</p>
<h5 id="cpuæ€§èƒ½åˆ†æ">CPUæ€§èƒ½åˆ†æ</h5>
<p>pprof.StartCPUProfile(w io.Writer)</p>
<p>pprof.stopCPUPorfile()</p>
<p>åº”ç”¨æ‰§è¡Œç»“æŸåï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªæ–‡ä»¶ï¼Œä¿å­˜äº†æˆ‘ä»¬çš„CPUprofilingæ•°æ®ã€‚å¾—åˆ°é‡‡æ ·æ•°æ®ä¹‹åï¼Œä½¿ç”¨go tool pprofå·¥å…·è¿›è¡ŒCPUæ€§èƒ½åˆ†æ</p>
<p>ç­‰å¾…30s</p>
<h5 id="å†…å­˜æ€§èƒ½ä¼˜åŒ–">å†…å­˜æ€§èƒ½ä¼˜åŒ–</h5>
<p>pprof.WriteHeapProfile(w io.Writer)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;flag&#34;</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;os&#34;</span>
   <span class="s">&#34;runtime/pprof&#34;</span>
   <span class="s">&#34;time&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="kd">var</span> <span class="nx">isCPUPprof</span> <span class="kt">bool</span>  <span class="c1">//æ˜¯å¦å¼€å¯cpuprofileæ ‡å¿—ä½
</span><span class="c1"></span>   <span class="kd">var</span> <span class="nx">isMemPprof</span> <span class="kt">bool</span>    <span class="c1">//æ˜¯å¦å¼€å¯å†…å­˜profileæ ‡å¿—ä½
</span><span class="c1"></span>
   <span class="nx">flag</span><span class="p">.</span><span class="nf">BoolVar</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">isCPUPprof</span><span class="p">,</span><span class="s">&#34;cpu&#34;</span><span class="p">,</span><span class="kc">false</span><span class="p">,</span><span class="s">&#34;turn cpu pprof on&#34;</span><span class="p">)</span>
   <span class="nx">flag</span><span class="p">.</span><span class="nf">BoolVar</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">isMemPprof</span><span class="p">,</span><span class="s">&#34;mem&#34;</span><span class="p">,</span><span class="kc">false</span><span class="p">,</span><span class="s">&#34;turn mem pprof on&#34;</span><span class="p">)</span>
   <span class="nx">flag</span><span class="p">.</span><span class="nf">Parse</span><span class="p">()</span>

   <span class="k">if</span> <span class="nx">isCPUPprof</span> <span class="p">{</span>
      <span class="nx">create</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">&#34;./cpu.pprof&#34;</span><span class="p">)</span>
      <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
         <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;create file failed , error : &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
         <span class="k">return</span>
      <span class="p">}</span>
      <span class="nx">pprof</span><span class="p">.</span><span class="nf">StartCPUProfile</span><span class="p">(</span><span class="nx">create</span><span class="p">)</span>  <span class="c1">//å¾€æ–‡ä»¶ä¸­è®°å½•cpu profileä¿¡æ¯
</span><span class="c1"></span>      <span class="k">defer</span> <span class="nx">create</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
      <span class="k">defer</span> <span class="nx">pprof</span><span class="p">.</span><span class="nf">StopCPUProfile</span><span class="p">()</span>
   <span class="p">}</span>

   <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">6</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
      <span class="k">go</span> <span class="nf">logicCode</span><span class="p">()</span>
   <span class="p">}</span>

   <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">20</span><span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">isMemPprof</span><span class="p">{</span>
      <span class="nx">create</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">&#34;./mem.pprof&#34;</span><span class="p">)</span>
      <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
         <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;create file failed , error : &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
         <span class="k">return</span>
      <span class="p">}</span>
      <span class="nx">pprof</span><span class="p">.</span><span class="nf">WriteHeapProfile</span><span class="p">(</span><span class="nx">create</span><span class="p">)</span>
      <span class="k">defer</span> <span class="nx">create</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
   <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">logicCode</span><span class="p">()</span> <span class="p">{</span>
   <span class="kd">var</span> <span class="nx">c</span> <span class="kd">chan</span> <span class="kt">int</span> <span class="c1">//nil
</span><span class="c1"></span>   <span class="k">for</span> <span class="p">{</span>
      <span class="k">select</span> <span class="p">{</span>
         <span class="k">case</span> <span class="nx">v</span><span class="o">:=&lt;-</span><span class="nx">c</span><span class="p">:</span> <span class="c1">//é˜»å¡
</span><span class="c1"></span>            <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;received from chan , value : %v\n&#34;</span><span class="p">,</span><span class="nx">v</span><span class="p">)</span>
      <span class="k">default</span><span class="p">:</span>
            <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Millisecond</span><span class="o">*</span><span class="mi">500</span><span class="p">)</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h5 id="å‘½ä»¤è¡Œäº¤äº’ç•Œé¢">å‘½ä»¤è¡Œäº¤äº’ç•Œé¢</h5>
<p>ä½¿ç”¨goå·¥å…·é“¾é‡Œçš„pprofæ¥åˆ†æä¸€ä¸‹</p>
<h5 id="æœåŠ¡å‹åº”ç”¨">æœåŠ¡å‹åº”ç”¨</h5>
<h5 id="flag">flag</h5>
<p>é€šè¿‡flag.string or flag.stringvar å®šä¹‰å¥½å‘½ä»¤è¡Œflagå‚æ•°åï¼Œéœ€è¦é€šè¿‡è°ƒç”¨flag.parse()æ¥å¯¹å‘½ä»¤è¡Œå‚æ•°è¿›è¡Œè§£æ</p>
<p>æ”¯æŒçš„å‘½ä»¤è¡Œå‚æ•°æ ¼å¼æœ‰ä»¥ä¸‹å‡ ç§</p>
<ul>
<li>-flage xxx</li>
<li>&ndash;flag xxx</li>
<li>-flag=xxx</li>
<li>&ndash;flag=xxx</li>
</ul>
<p>å…¶ä¸­ï¼Œå¸ƒå°”ç±»å‹çš„å‚æ•°å¿…é¡»ä½¿ç”¨ç­‰å·æ–¹å¼æŒ‡å®š</p>
<p>flagè§£æåœ¨ç¬¬ä¸€ä¸ªéflagå‚æ•°ä¹‹å‰åœæ­¢ æˆ–è€…åœ¨ç»ˆæ­¢ç¬¦-ä¹‹ååœæ­¢</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;flag&#34;</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;time&#34;</span>
<span class="p">)</span>

<span class="c1">//flag è·å–å‘½ä»¤è¡Œå‚æ•°
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">//åˆ›å»ºä¸€ä¸ªæ ‡å¿—ä½å‚æ•°flag
</span><span class="c1"></span>   <span class="nx">name</span> <span class="o">:=</span><span class="nx">flag</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">,</span><span class="s">&#34;ljs&#34;</span><span class="p">,</span><span class="s">&#34;è¯·è¾“å…¥åå­—&#34;</span><span class="p">)</span>
   <span class="nx">age</span> <span class="o">:=</span><span class="nx">flag</span><span class="p">.</span><span class="nf">Int</span><span class="p">(</span><span class="s">&#34;age&#34;</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="s">&#34;è¯·è¾“å…¥å¹´é¾„&#34;</span><span class="p">)</span>
   <span class="nx">married</span> <span class="o">:=</span><span class="nx">flag</span><span class="p">.</span><span class="nf">Bool</span><span class="p">(</span><span class="s">&#34;married&#34;</span><span class="p">,</span><span class="kc">false</span><span class="p">,</span><span class="s">&#34;ç»“å©šäº†ä¹ˆ&#34;</span><span class="p">)</span>
   <span class="nx">cTime</span><span class="o">:=</span><span class="nx">flag</span><span class="p">.</span><span class="nf">Duration</span><span class="p">(</span><span class="s">&#34;duration&#34;</span><span class="p">,</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">,</span><span class="s">&#34;æœ‰å¤šå¿«&#34;</span><span class="p">)</span>
   <span class="c1">//ä½¿ç”¨flag
</span><span class="c1"></span>   <span class="c1">//flag.Parse()
</span><span class="c1"></span>   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="o">*</span><span class="nx">name</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="o">*</span><span class="nx">age</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="o">*</span><span class="nx">married</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="o">*</span><span class="nx">cTime</span><span class="p">)</span>

   <span class="kd">var</span> <span class="nx">name1</span> <span class="kt">string</span>
   <span class="nx">flag</span><span class="p">.</span><span class="nf">StringVar</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">name1</span><span class="p">,</span><span class="s">&#34;name1&#34;</span><span class="p">,</span><span class="s">&#34;name1&#34;</span><span class="p">,</span><span class="s">&#34;è¯·è¾“å…¥name1&#34;</span><span class="p">)</span>
   <span class="nx">flag</span><span class="p">.</span><span class="nf">Parse</span><span class="p">()</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">name1</span><span class="p">)</span>

   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">flag</span><span class="p">.</span><span class="nf">NArg</span><span class="p">())</span>  <span class="c1">//è¿”å›é™¤äº†è§„å®šçš„å‚æ•°ä¹‹å¤–çš„å‘½ä»¤è¡Œå‚æ•°æœ‰å‡ ä¸ª
</span><span class="c1"></span>   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">flag</span><span class="p">.</span><span class="nf">NFlag</span><span class="p">())</span>  <span class="c1">//è¿”å›è§„å®šçš„flagå‘½ä»¤è¡Œå‚æ•°æœ‰å‡ ä¸ª
</span><span class="c1"></span>   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">flag</span><span class="p">.</span><span class="nf">Args</span><span class="p">())</span>   <span class="c1">//è¿”å›é™¤äº†è§„å®šçš„å‚æ•°ä¹‹å¤–çš„å‘½ä»¤è¡Œå‚æ•°å…·ä½“æ˜¯
</span><span class="c1"></span>
<span class="p">}</span>
</code></pre></div><h5 id="é¢è¯•é¢˜">é¢è¯•é¢˜</h5>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210819001237778.png" >
		<img src="/GoLearning.assets/image-20210819001237778.png"
			
			
			
			loading="lazy"
			alt="image-20210819001237778">
	</a>
	
	<figcaption>image-20210819001237778</figcaption>
	
</figure></p>
<h5 id="æœ¬å‘¨å¤ä¹ ">æœ¬å‘¨å¤ä¹ </h5>
<p>ä¸¤ä¸ªé¢è¯•é¢˜</p>
<p>leetcodeåˆ·é¢˜æ¯å¤©ä¸€é“é¢˜</p>
<p>æ•°æ®ç»“æ„å’Œç®—æ³•å¾ˆé‡è¦ï¼Œè¦æ‰¾æœºä¼šæŠ“ç´§è¡¥ä¸Š</p>
<h5 id="å†…å®¹å›é¡¾-6">å†…å®¹å›é¡¾</h5>
<h5 id="nethttpåŒ…çš„ç”¨æ³•">net/httpåŒ…çš„ç”¨æ³•</h5>
<p>å¦‚ä½•å‘è¯·æ±‚</p>
<p>å½“éœ€è¦é¢‘ç¹å‘é€è¯·æ±‚çš„æ—¶å€™ï¼ˆæ¯5sä»é˜¿é‡Œäº‘æ¥å£åŒæ­¥æ•°æ®ï¼‰ï¼šå®šä¹‰ä¸€ä¸ªå…¨å±€çš„clientï¼Œåç»­å‘è¯·æ±‚çš„æ“ä½œéƒ½ä½¿ç”¨è¿™ä¸ªå…¨å±€çš„client</p>
<h5 id="å•å…ƒæµ‹è¯•-1">å•å…ƒæµ‹è¯•</h5>
<p>xxx/ccc.go</p>
<p>å•å…ƒæµ‹è¯•çš„æ–‡ä»¶åå¿…é¡»æ˜¯xxx/ccc_test.go</p>
<p>goå†…ç½®çš„å•å…ƒæµ‹è¯•å·¥å…·ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="k">go</span> <span class="nx">test</span>
</code></pre></div><p>å•å…ƒæµ‹è¯•å‡½æ•°</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="c1">//Testå¼€å¤´åæ¥å‡½æ•°å
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">TestSplit</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span>
<span class="p">{</span>
    
<span class="p">}</span>
</code></pre></div><h5 id="æ€§èƒ½æµ‹è¯•åŸºå‡†æµ‹è¯•">æ€§èƒ½æµ‹è¯•/åŸºå‡†æµ‹è¯•</h5>
<p>å‡½æ•°æ ¼å¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">BenchmarkSplit</span><span class="p">(</span><span class="nx">b</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">B</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//b.N:è¢«æµ‹è¯•å‡½æ•°æ‰§è¡Œçš„æ¬¡æ•°
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><p>æ‰§è¡Œå‘½ä»¤ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="k">go</span> <span class="nx">test</span> <span class="o">-</span><span class="nx">bench</span><span class="p">=</span><span class="nx">Split</span> <span class="o">-</span><span class="nx">v</span>
</code></pre></div><h5 id="å¹¶è¡Œæµ‹è¯•-1">å¹¶è¡Œæµ‹è¯•</h5>
<h5 id="setupå’Œteardown-1">setupå’Œteardown</h5>
<h5 id="pprof">pprof</h5>
<p>è®°å½•cpuå’Œå†…å­˜çš„å¿«ç…§ä¿¡æ¯</p>
<h5 id="flagæ ‡å‡†åº“">flagæ ‡å‡†åº“</h5>
<p>os.Args</p>
<p>flag.stringvar()è¿”å›çš„æ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡</p>
<p>å¿…é¡»è°ƒç”¨flag.parse()</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">./xxx -name <span class="o">=</span> <span class="s2">&#34;lsj&#34;</span> -age<span class="o">=</span><span class="m">90</span>
</code></pre></div><p>flag.args</p>
<p>flag.nargs</p>
<p>flag.nflag</p>
<h4 id="ä»Šæ—¥å†…å®¹-5">ä»Šæ—¥å†…å®¹</h4>
<p>Mysqlï¼šä¸»æµçš„å…³ç³»å‹æ•°æ®åº“ ç±»ä¼¼çš„è¿˜æœ‰postgreSQL</p>
<p>redisï¼škvæ•°æ®åº“</p>
<p>nsq:goè¯­è¨€å¼€å‘çš„åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—</p>
<p>åŒ…çš„ä¾èµ–ç®¡ç†go module     go1.1ä¹‹åå®˜æ–¹å‡ºçš„ä¾èµ–ç®¡ç†å·¥å…·</p>
<h5 id="mysql">MySql</h5>
<p>æ•°æ®åº“</p>
<p>å¸¸è§çš„æ•°æ®åº“ï¼šoracle sqliteæ–‡ä»¶æ•°æ®åº“ mysql sqlserver</p>
<p>å…³ç³»å‹æ•°æ®åº“ï¼šç”¨è¡¨æ¥å­˜ä¸€ç±»æ•°æ®</p>
<p>è¡¨ç»“æ„è®¾è®¡çš„ä¸‰å¤§èŒƒå¼ã€Šæ¼«ç”»æ•°æ®åº“ã€‹</p>
<p>mysqlçŸ¥è¯†ç‚¹</p>
<p>sqlè¯­å¥ï¼šç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€</p>
<h5 id="å­˜å‚¨å¼•æ“">å­˜å‚¨å¼•æ“</h5>
<p>mysqlæ”¯æŒæ’ä»¶å¼çš„å­˜å‚¨å¼•æ“</p>
<p>å¸¸è§çš„å­˜å‚¨å¼•æ“ï¼šmyisamã€innodb</p>
<p>myisamï¼š</p>
<ul>
<li>æŸ¥è¯¢é€Ÿåº¦å¿«</li>
<li>åªæ”¯æŒè¡¨é”</li>
<li>ä¸æ”¯æŒäº‹åŠ¡</li>
</ul>
<p>innodbï¼š</p>
<ul>
<li>æ•´ä½“é€Ÿåº¦å¿«</li>
<li>æ”¯æŒè¡¨é”å’Œè¡Œé”</li>
<li>æ”¯æŒäº‹åŠ¡</li>
</ul>
<p>äº‹åŠ¡ï¼šæŠŠå¤šä¸ªæ“ä½œå½“æˆä¸€ä¸ªæ•´ä½“</p>
<p>äº‹åŠ¡çš„ç‰¹ç‚¹ï¼š</p>
<p>ACID</p>
<ul>
<li>åŸå­æ€§ï¼šäº‹åŠ¡è¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥ï¼Œæ²¡æœ‰ä¸­é—´çŠ¶æ€</li>
<li>ä¸€è‡´æ€§ï¼šæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´å</li>
<li>æŒä¹…æ€§ï¼šäº‹åŠ¡æ“ä½œçš„ç»“æœæ˜¯ä¸ä¼šè¢«ä¸¢å¤±çš„</li>
<li>éš”ç¦»æ€§ï¼šäº‹åŠ¡ä¹‹é—´æ˜¯ç›¸äº’éš”ç¦»çš„
<ul>
<li>éš”ç¦»çº§åˆ«
<ul>
<li>è¯»æœªæäº¤</li>
<li>è¯»æäº¤</li>
<li>å¯é‡å¤è¯»</li>
<li>ä¸²è¡ŒåŒ–</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="ç´¢å¼•">ç´¢å¼•</h5>
<p>ç´¢å¼•çš„åŸç†æ˜¯ï¼šBæ ‘å’ŒB+æ ‘</p>
<p>ç´¢å¼•ç±»å‹ï¼š</p>
<p>ç´¢å¼•çš„å‘½ä¸­</p>
<p>åˆ†åº“åˆ†è¡¨</p>
<p>SQLæ³¨å…¥</p>
<p>SQLæ…¢æŸ¥è¯¢ä¼˜åŒ–</p>
<p>Mysqlä¸»ä»ï¼šbinlog</p>
<p>Mysqlè¯»å†™åˆ†ç¦»</p>
<h5 id="goæ“ä½œmysql">Goæ“ä½œMySql</h5>
<h5 id="è¿æ¥">è¿æ¥</h5>
<p>goè¯­è¨€ä¸­çš„database/sqlåŒ…æä¾›äº†ä¿è¯SQLæˆ–ç±»SQLæ•°æ®åº“çš„æ³›ç”¨æ¥å£ï¼Œå¹¶ä¸æä¾›å…·ä½“çš„æ•°æ®åº“é©±åŠ¨ã€‚ä½¿ç”¨database/sqlåŒ…æ—¶å¿…é¡»æ³¨å…¥è‡³å°‘ä¸€ä¸ªæ•°æ®åº“é©±åŠ¨ã€‚</p>
<p>æˆ‘ä»¬å¸¸ç”¨çš„æ•°æ®åº“åŸºæœ¬ä¸Šéƒ½æœ‰å®Œæ•´çš„ç¬¬ä¸‰æ–¹å®ç°ã€‚</p>
<h5 id="databasesql">database/sql</h5>
<p>åŸç”Ÿæ”¯æŒè¿æ¥æ± ï¼Œæ˜¯å¹¶å‘å®‰å…¨çš„</p>
<p>è¿™ä¸ªæ ‡å‡†åº“æ²¡æœ‰å…·ä½“å®ç°ï¼Œåªæ˜¯åˆ—å‡ºäº†ä¸€äº›éœ€è¦ç¬¬ä¸‰æ–¹åº“å®ç°çš„å…·ä½“å†…å®¹ã€‚</p>
<h5 id="ä¸‹è½½ä¾èµ–">ä¸‹è½½ä¾èµ–</h5>
<p>go get -u github.com/go-sql-driver/mysql</p>
<h5 id="ä½¿ç”¨mysqlé©±åŠ¨">ä½¿ç”¨Mysqlé©±åŠ¨</h5>
<p>func Open(driverName , dataSourceName string)(*DB , error)</p>
<p>openä¸€ä¸ªdrivernameæŒ‡å®šçš„æ•°æ®åº“ï¼ŒdatasourcenameæŒ‡å®šæ•°æ®æºï¼Œä¸€èˆ¬åŒ…è‡³å°‘åŒ…æ‹¬</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210820105514841.png" >
		<img src="/GoLearning.assets/image-20210820105514841.png"
			
			
			
			loading="lazy"
			alt="image-20210820105514841">
	</a>
	
	<figcaption>image-20210820105514841</figcaption>
	
</figure></p>
<p>go getåŒ…çš„è·¯å¾„å°±æ˜¯ä¸‹è½½ç¬¬ä¸‰æ–¹çš„ä¾èµ–</p>
<p>å°†ç¬¬ä¸‰æ–¹çš„ä¾èµ–é»˜è®¤ä¿å­˜åœ¨$gopath/src/</p>
<h5 id="ä½¿ç”¨é©±åŠ¨">ä½¿ç”¨é©±åŠ¨</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;database/sql&#34;</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="nx">_</span> <span class="s">&#34;github.com/go-sql-driver/mysql&#34;</span>
   <span class="s">&#34;log&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">//goè¿æ¥mysqlå®ä¾‹
</span><span class="c1"></span>   <span class="c1">//æ•°æ®åº“æºä¿¡æ¯
</span><span class="c1"></span>   <span class="nx">dsn</span><span class="o">:=</span><span class="s">&#34;root:123456@tcp(127.0.0.1:3306)/tset&#34;</span>
   <span class="c1">//è¿æ¥æ•°æ®åº“
</span><span class="c1"></span>   <span class="nx">db</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">sql</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="s">&#34;mysql&#34;</span><span class="p">,</span> <span class="nx">dsn</span><span class="p">)</span> <span class="c1">//ä¸ä¼šæ ¡éªŒç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®
</span><span class="c1"></span>   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">log</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;dsn %s invalid , err : %v\n&#34;</span><span class="p">,</span><span class="nx">dsn</span><span class="p">,</span><span class="nx">db</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="nx">err</span> <span class="p">=</span> <span class="nx">db</span><span class="p">.</span><span class="nf">Ping</span><span class="p">()</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">log</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;open %s failed , err : %v\n&#34;</span><span class="p">,</span><span class="nx">dsn</span> <span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span> 
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">db</span><span class="p">,</span><span class="s">&#34;è¿æ¥æ•°æ®åº“æˆåŠŸ!&#34;</span><span class="p">)</span>

<span class="p">}</span>
</code></pre></div><p>githubä¸Šçš„mysqlé©±åŠ¨å¦‚ä½•å…³è”åˆ°database/sqlè¿™ä¸ªåŒ…é‡Œå‘¢ï¼Ÿ</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210820123021805.png" >
		<img src="/GoLearning.assets/image-20210820123021805.png"
			
			
			
			loading="lazy"
			alt="image-20210820123021805">
	</a>
	
	<figcaption>image-20210820123021805</figcaption>
	
</figure></p>
<h5 id="å•è¡ŒæŸ¥è¯¢">å•è¡ŒæŸ¥è¯¢</h5>
<p>å•è¡ŒæŸ¥è¯¢db.queryrow()æ‰§è¡Œä¸€æ¬¡æŸ¥è¯¢ï¼Œå¹¶æœŸæœ›è¿”å›æœ€å¤šä¸€è¡Œç»“æœrowã€‚queryrowæ€»æ˜¯è¿”å›énilå€¼ï¼Œç›´åˆ°è¿”å›å€¼çš„scanæ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œæ‰ä¼šè¿”å›è¢«å»¶è¿Ÿçš„é”™è¯¯ï¼ˆå¦‚æœªæ‰¾åˆ°ï¼‰</p>
<h5 id="setmaxopenconnsæ–¹æ³•">setmaxopenconnsæ–¹æ³•</h5>
<p>è®¾ç½®ä¸æ•°æ®åº“è¿æ¥æ± çš„æœ€å¤§è¿æ¥æ•°</p>
<h5 id="setmaxidleconnsæ–¹æ³•">setmaxidleconnsæ–¹æ³•</h5>
<p>setmaxidleconnesè®¾ç½®è¿æ¥æ± ä¸­çš„æœ€å¤§é—²ç½®è¿æ¥æ•°ã€‚å¦‚æœnå¤§äºæœ€å¤§å¼€å¯è¿æ¥æ•°ï¼Œåˆ™æ–°çš„æœ€å¤§é—²ç½®è¿æ¥æ•°ä¼šå‡å°åˆ°åŒ¹é…æœ€å¤§å¼€å¯è¿æ¥æ•°çš„é™åˆ¶ã€‚å¦‚æœn&lt;=0 ä¸ä¼šä¿ç•™é—²ç½®è¿æ¥</p>
<h5 id="å¤šè¡ŒæŸ¥è¯¢">å¤šè¡ŒæŸ¥è¯¢</h5>
<p>å¤šè¡ŒæŸ¥è¯¢db.query()æ‰§è¡Œä¸€æ¬¡æŸ¥è¯¢ï¼Œè¿”å›å¤šè¡Œç»“æœï¼ˆrowsï¼‰ï¼Œä¸€èˆ¬ç”¨äºæ‰§è¡Œselectå‘½ä»¤ã€‚å‚æ•°argsè¡¨ç¤ºqueryä¸­çš„å ä½å‚æ•°</p>
<h5 id="æ’å…¥æ•°æ®">æ’å…¥æ•°æ®</h5>
<p>æ’å…¥ã€æ›´æ–°å’Œåˆ é™¤æ“ä½œéƒ½ä½¿ç”¨æ–¹æ³• Exec</p>
<p>åˆ é™¤ä¹Ÿæ˜¯ä¸€æ ·çš„</p>
<h5 id="mysqlé¢„å¤„ç†">MySQLé¢„å¤„ç†</h5>
<h5 id="ä»€ä¹ˆæ˜¯é¢„å¤„ç†">ä»€ä¹ˆæ˜¯é¢„å¤„ç†</h5>
<p>æ™®é€šsqlè¯­å¥æ‰§è¡Œè¿‡ç¨‹:</p>
<ol>
<li>å®¢æˆ·ç«¯å¯¹SQLè¯­å¥è¿›è¡Œå ä½ç¬¦æ›¿æ¢å¾—åˆ°å®Œæ•´çš„SQLè¯­å¥</li>
<li>å®¢æˆ·ç«¯å‘é€å®Œæ•´çš„SQLè¯­å¥åˆ°MySQLæœåŠ¡ç«¯</li>
<li>mysqlæœåŠ¡ç«¯æ‰§è¡Œå®Œæ•´çš„sqlè¯­å¥å¹¶å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯</li>
</ol>
<p>é¢„å¤„ç†æ‰§è¡Œè¿‡ç¨‹:</p>
<ol>
<li>æŠŠsqlè¯­å¥åˆ†æˆä¸¤éƒ¨åˆ†,å‘½ä»¤éƒ¨åˆ†ä¸æ•°æ®éƒ¨åˆ†</li>
<li>å…ˆæŠŠå‘½ä»¤éƒ¨åˆ†å‘é€ç»™mysqlæœåŠ¡ç«¯,mysqlæœåŠ¡ç«¯è¿›è¡Œsqlé¢„å¤„ç†</li>
<li>ç„¶åå§æ•°æ®éƒ¨åˆ†å‘é€ç»™mysqlæœåŠ¡ç«¯,mysqlæœåŠ¡ç«¯å¯¹sqlè¯­å¥è¿›è¡Œå ä½ç¬¦æ›¿æ¢</li>
<li>mysqlæœåŠ¡ç«¯æ‰§è¡Œå®Œæ•´çš„sqlè¯­å¥å¹¶å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯</li>
</ol>
<h5 id="ä¸ºä»€ä¹ˆè¦é¢„å¤„ç†">ä¸ºä»€ä¹ˆè¦é¢„å¤„ç†</h5>
<p>1.ä¼˜åŒ–mysqlæœåŠ¡å™¨é‡å¤æ‰§è¡Œsqlçš„æ–¹æ³•,å¯ä»¥æå‡æœåŠ¡å™¨æ€§èƒ½,æå‰è®©æœåŠ¡å™¨ç¼–è¯‘,ä¸€æ¬¡ç¼–è¯‘å¤šæ¬¡æ‰§è¡Œ,èŠ‚çœåç»­ç¼–è¯‘çš„æˆæœ¬</p>
<p>2.é¿å…sqlæ³¨å…¥çš„é—®é¢˜</p>
<h5 id="goå®ç°mysqlé¢„å¤„ç†">goå®ç°mysqlé¢„å¤„ç†</h5>
<p>prepareæ–¹æ³•ä¼šå…ˆå°†sqlè¯­å¥å‘é€ç»™mysqlæœåŠ¡ç«¯,è¿”å›ä¸€ä¸ªå‡†å¤‡å¥½çš„çŠ¶æ€ç”¨äºä¹‹åçš„æŸ¥è¯¢å’Œå‘½ä»¤.è¿”å›å€¼å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªæŸ¥è¯¢å’Œå‘½ä»¤</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;database/sql&#34;</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="nx">_</span> <span class="s">&#34;github.com/go-sql-driver/mysql&#34;</span>
   <span class="s">&#34;log&#34;</span>
<span class="p">)</span>

<span class="kd">type</span> <span class="nx">student</span> <span class="kd">struct</span> <span class="p">{</span>
   <span class="nx">sno</span> <span class="p">,</span><span class="nx">sname</span><span class="p">,</span><span class="nx">ssex</span> <span class="kt">string</span>
   <span class="nx">sage</span> <span class="kt">int</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">db</span> <span class="o">*</span><span class="nx">sql</span><span class="p">.</span><span class="nx">DB</span> <span class="c1">//æ˜¯ä¸€ä¸ªè¿æ¥æ± å¯¹è±¡
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>

   <span class="nf">initDB</span><span class="p">()</span>
   <span class="c1">//queryOne(&#34;2016210867&#34;)
</span><span class="c1"></span>   <span class="c1">//queryMany()
</span><span class="c1"></span>   <span class="c1">//insert()
</span><span class="c1"></span>   <span class="c1">//update()
</span><span class="c1"></span>   <span class="nf">prepareSelect</span><span class="p">()</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">initDB</span><span class="p">()</span> <span class="p">(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">dsn</span><span class="o">:=</span><span class="s">&#34;root:123456@tcp(127.0.0.1:3306)/tset&#34;</span>
   <span class="nx">db</span><span class="p">,</span><span class="nx">err</span> <span class="p">=</span><span class="nx">sql</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="s">&#34;mysql&#34;</span><span class="p">,</span><span class="nx">dsn</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">log</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;dsn %s is invalid , error : %v\n&#34;</span><span class="p">,</span><span class="nx">dsn</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
   <span class="p">}</span>

   <span class="nx">err</span> <span class="p">=</span> <span class="nx">db</span><span class="p">.</span><span class="nf">Ping</span><span class="p">()</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">log</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;open %s failed , err : %v\n&#34;</span><span class="p">,</span><span class="nx">dsn</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span> <span class="nx">err</span>
   <span class="p">}</span>
   <span class="c1">//è®¾ç½®æ•°æ®åº“è¿æ¥æ± æœ€å¤§è¿æ¥æ•°  å¦‚æœè¶…è¿‡äº†å°±ä¼šé˜»å¡ç­‰å¾…å…¶ä»–çš„ç¨‹åº
</span><span class="c1"></span>   <span class="nx">db</span><span class="p">.</span><span class="nf">SetMaxOpenConns</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
   <span class="c1">//æœ€å¤§ç©ºé—²è¿æ¥æ•°
</span><span class="c1"></span>   <span class="nx">db</span><span class="p">.</span><span class="nf">SetMaxIdleConns</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
   <span class="k">return</span> <span class="kc">nil</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">queryOne</span><span class="p">(</span><span class="nx">sno</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
   <span class="kd">var</span> <span class="nx">s</span> <span class="nx">student</span>
   <span class="c1">//æŸ¥æ‰¾
</span><span class="c1"></span>   <span class="nx">row</span> <span class="o">:=</span> <span class="nx">db</span><span class="p">.</span><span class="nf">QueryRow</span><span class="p">(</span><span class="s">&#34;select * from student where sno = ?&#34;</span><span class="p">,</span><span class="nx">sno</span><span class="p">)</span> <span class="c1">//ä»è¿æ¥æ± ä¸­æ‹¿ä¸€ä¸ªè¿æ¥å‡ºæ¥å»æ•°æ®åº“æŸ¥è¯¢å•æŒ‘è®°å½•
</span><span class="c1"></span>   <span class="c1">//æ‰«æ+é‡Šæ”¾è¿æ¥  å¿…é¡»å¯¹rowobjè°ƒç”¨scanæ–¹æ³•
</span><span class="c1"></span>   <span class="nx">row</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">s</span><span class="p">.</span><span class="nx">sno</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">s</span><span class="p">.</span><span class="nx">sname</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">s</span><span class="p">.</span><span class="nx">ssex</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">s</span><span class="p">.</span><span class="nx">sage</span><span class="p">)</span>

   <span class="kd">var</span> <span class="nx">sname</span> <span class="kt">string</span>
   <span class="nx">db</span><span class="p">.</span><span class="nf">QueryRow</span><span class="p">(</span><span class="s">&#34;select sname from student where sno = ?&#34;</span><span class="p">,</span><span class="nx">sno</span><span class="p">).</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">sname</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;student: %v \n&#34;</span><span class="p">,</span><span class="nx">s</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">sname</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">queryMany</span><span class="p">()</span>  <span class="p">{</span>
   <span class="nx">rows</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">db</span><span class="p">.</span><span class="nf">Query</span><span class="p">(</span><span class="s">&#34;select sno , sname , ssex , sage from student &#34;</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;db query failed , error : %v\n&#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="c1">//éå¸¸é‡è¦ ä¸€å®šè¦å…³é—­rows
</span><span class="c1"></span>   <span class="k">defer</span> <span class="nx">rows</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
   <span class="c1">//å¾ªç¯å–å€¼
</span><span class="c1"></span>   <span class="k">for</span> <span class="nx">rows</span><span class="p">.</span><span class="nf">Next</span><span class="p">(){</span>
      <span class="kd">var</span> <span class="nx">s</span> <span class="nx">student</span>
      <span class="nx">rows</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">s</span><span class="p">.</span><span class="nx">sno</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">s</span><span class="p">.</span><span class="nx">sname</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">s</span><span class="p">.</span><span class="nx">ssex</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">s</span><span class="p">.</span><span class="nx">sage</span><span class="p">)</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
   <span class="p">}</span>

<span class="p">}</span>

<span class="kd">func</span> <span class="nf">insert</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">sql</span><span class="o">:=</span><span class="s">&#34;insert into student values (&#39;2020170281&#39;,&#39;ljs&#39;,&#39;man&#39;,23)&#34;</span>
   <span class="nx">exec</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">db</span><span class="p">.</span><span class="nf">Exec</span><span class="p">(</span><span class="nx">sql</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;exec insert %s failed , err : %v\n&#34;</span><span class="p">,</span><span class="nx">sql</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="c1">//å¦‚æœæ˜¯æ’å…¥æ•°æ®çš„æ“ä½œ,èƒ½å¤Ÿæ‹¿åˆ°æ’å…¥æ•°æ®çš„id
</span><span class="c1"></span>   <span class="nx">id</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">exec</span><span class="p">.</span><span class="nf">LastInsertId</span><span class="p">()</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;get id failed ,err : %v\n&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;id:&#34;</span><span class="p">,</span><span class="nx">id</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">update</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">exec</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">db</span><span class="p">.</span><span class="nf">Exec</span><span class="p">(</span><span class="s">&#34;update student set sname = &#39;ljsnew&#39; where sno=&#39;2020170281&#39; &#34;</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">exec</span><span class="p">.</span><span class="nf">RowsAffected</span><span class="p">())</span>
<span class="p">}</span>

<span class="c1">//é¢„å¤„ç†æ–¹å¼selectå¤šæ¡æ•°æ®
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">prepareSelect</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">prepare</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">db</span><span class="p">.</span><span class="nf">Prepare</span><span class="p">(</span><span class="s">&#34;select * from student where sno like ? &#34;</span><span class="p">)</span><span class="c1">//å§sqlè¯­å¥å…ˆå‘ç»™mysqlé¢„å¤„ç†ä¸€ä¸‹
</span><span class="c1"></span>   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="k">return</span>
   <span class="p">}</span>

   <span class="nx">rows</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">prepare</span><span class="p">.</span><span class="nf">Query</span><span class="p">(</span><span class="s">&#34;%2016%&#34;</span><span class="p">)</span> <span class="c1">//åç»­åªéœ€è¦ä¼ å€¼å°±è¡Œäº†
</span><span class="c1"></span>   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="k">return</span>
   <span class="p">}</span>

   <span class="k">defer</span> <span class="nx">prepare</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
   <span class="k">defer</span> <span class="nx">rows</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
   <span class="k">for</span> <span class="nx">rows</span><span class="p">.</span><span class="nf">Next</span>
    <span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">s</span> <span class="nx">student</span>
      <span class="nx">rows</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">s</span><span class="p">.</span><span class="nx">sno</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">s</span><span class="p">.</span><span class="nx">sname</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">s</span><span class="p">.</span><span class="nx">ssex</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">s</span><span class="p">.</span><span class="nx">sage</span><span class="p">)</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h5 id="goè¯­è¨€å®ç°mysqläº‹åŠ¡">goè¯­è¨€å®ç°mysqläº‹åŠ¡</h5>
<p>äº‹åŠ¡ç›¸å…³æ–¹æ³•:begin / commit /  rollback</p>
<h5 id="sqlxä½¿ç”¨">sqlxä½¿ç”¨</h5>
<p>ç¬¬ä¸‰æ–¹åº“ sqlx èƒ½å¤Ÿç®€åŒ–æ“ä½œ,æé«˜å¼€å‘æ•ˆç‡</p>
<p>å®‰è£… go get github.com/jmoiron/sqlx</p>
<h5 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h5>
<h5 id="sqlä¸­çš„å ä½ç¬¦">SQLä¸­çš„å ä½ç¬¦</h5>
<p>ä¸åŒæ•°æ®åº“ä¸­,SQLè¯­å¥ä½¿ç”¨çš„å ä½ç¬¦è¯­æ³•ä¸å°½ç›¸åŒ</p>
<table>
<thead>
<tr>
<th>æ•°æ®åº“</th>
<th>å ä½ç¬¦è¯­æ³•</th>
</tr>
</thead>
<tbody>
<tr>
<td>Mysql</td>
<td>?</td>
</tr>
<tr>
<td>postgresql</td>
<td>$1,$2</td>
</tr>
<tr>
<td>sqlite</td>
<td>?å’Œ$1</td>
</tr>
<tr>
<td>oracle</td>
<td>:name</td>
</tr>
</tbody>
</table>
<h5 id="sqlæ³¨å…¥">sqlæ³¨å…¥</h5>
<p>æˆ‘ä»¬ä»»ä½•æ—¶å€™éƒ½ä¸åº”è¯¥è‡ªå·±æ‹¼æ¥sqlè¯­å¥</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="nx">_</span><span class="s">&#34;github.com/go-sql-driver/mysql&#34;</span>
   <span class="s">&#34;github.com/jmoiron/sqlx&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nf">sqlInjectDemo</span><span class="p">(</span><span class="s">&#34;xxx&#39;or 1=1#&#34;</span><span class="p">)</span>
   <span class="nf">sqlInjectDemo</span><span class="p">(</span><span class="s">&#34;xxx&#39; union select * from student #&#34;</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">db</span> <span class="o">*</span><span class="nx">sqlx</span><span class="p">.</span><span class="nx">DB</span>
<span class="kd">type</span> <span class="nx">student</span> <span class="kd">struct</span> <span class="p">{</span>
   <span class="nx">SNO</span> <span class="p">,</span> <span class="nx">SNAME</span> <span class="p">,</span> <span class="nx">SSEX</span> <span class="kt">string</span>
   <span class="nx">SAGE</span> <span class="kt">int</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">sqlInjectDemo</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">//è‡ªå·±æ‹¼æ¥sqlè¯­å¥
</span><span class="c1"></span>   <span class="nx">sqlStr</span><span class="o">:=</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;select * from student where sname =&#39;%s&#39;&#34;</span><span class="p">,</span><span class="nx">name</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">sqlStr</span><span class="p">)</span>

   <span class="kd">var</span> <span class="nx">err</span> <span class="kt">error</span>
   <span class="nx">db</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">sqlx</span><span class="p">.</span><span class="nf">Connect</span><span class="p">(</span><span class="s">&#34;mysql&#34;</span><span class="p">,</span> <span class="s">&#34;root:123456@tcp(127.0.0.1:3306)/tset&#34;</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>

   <span class="nx">err</span> <span class="p">=</span> <span class="nx">db</span><span class="p">.</span><span class="nf">Ping</span><span class="p">()</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>

   <span class="kd">var</span> <span class="nx">s</span> <span class="p">[]</span><span class="nx">student</span>
   <span class="nx">err</span> <span class="p">=</span> <span class="nx">db</span><span class="p">.</span><span class="nf">Select</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">s</span><span class="p">,</span> <span class="nx">sqlStr</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>

   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><p><figure 
	>
	<a href="/GoLearning.assets/image-20210820163242826.png" >
		<img src="/GoLearning.assets/image-20210820163242826.png"
			
			
			
			loading="lazy"
			alt="image-20210820163242826">
	</a>
	
	<figcaption>image-20210820163242826</figcaption>
	
</figure></p>
<h5 id="redis">redis</h5>
<p>kvæ•°æ®åº“</p>
<p>redisçš„ç”¨å¤„</p>
<ol>
<li>cacheç¼“å­˜</li>
<li>ç®€å•çš„é˜Ÿåˆ—</li>
<li>æ’è¡Œæ¦œ</li>
</ol>
<p>redisæ˜¯ä¸€ä¸ªå¼€æºçš„å†…å­˜æ•°æ®åº“,redisæä¾›äº†å¤šç§ä¸åŒç±»å‹çš„æ•°æ®ç»“æ„,å¾ˆå¤šä¸šåŠ¡åœºæ™¯ä¸‹çš„é—®é¢˜éƒ½å¯ä»¥å¾ˆè‡ªç„¶åœ°æ˜ å°„åˆ°è¿™äº›æ•°æ®ç»“æ„ä¸Š.é™¤æ­¤ä¹‹å¤–,é€šè¿‡å¤åˆ¶/æŒä¹…åŒ–å’Œå®¢æˆ·ç«¯åˆ†ç‰‡ç­‰ç‰¹æ€§,æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†redisæ‰©å±•æˆä¸ºä¸€ä¸ªèƒ½å¤ŸåŒ…å«æ•°ç™¾GBæ•°æ®/æ¯ç§’å¤„ç†ä¸Šç™¾ä¸‡æ¬¡è¯·æ±‚çš„ç³»ç»Ÿ</p>
<h5 id="redisæ”¯æŒçš„æ•°æ®ç»“æ„">redisæ”¯æŒçš„æ•°æ®ç»“æ„</h5>
<p>redisæ”¯æŒè¯¸å¦‚å­—ç¬¦ä¸²strings å“ˆå¸Œhashes åˆ—è¡¨lists é›†åˆsets å¸¦èŒƒå›´æŸ¥è¯¢çš„æ’åºé›†åˆ sorted sets ä½å›¾bitmaps hyperloglogs å¸¦åŠå¾„æŸ¥è¯¢å’Œæµçš„åœ°ç†ç©ºé—´ç´¢å¼•ç­‰æ•°æ®ç»“æ„ geospatial indexes</p>
<h5 id="redisåº”ç”¨åœºæ™¯">redisåº”ç”¨åœºæ™¯</h5>
<ul>
<li>ç¼“å­˜ç³»ç»Ÿ,å‡è½»ä¸»æ•°æ®åº“mysqlçš„å‹åŠ›</li>
<li>è®¡æ•°åœºæ™¯,æ¯”å¦‚å¾®åš/æŠ–éŸ³ä¸­çš„å…³æ³¨æ•°å’Œç²‰ä¸æ•°</li>
<li>çƒ­é—¨æ’è¡Œæ¦œ,éœ€è¦æ’åºçš„åœºæ™¯ç‰¹åˆ«é€‚åˆä½¿ç”¨zset</li>
<li>åˆ©ç”¨listå¯ä»¥å®ç°é˜Ÿåˆ—çš„åŠŸèƒ½</li>
</ul>
<h5 id="redisä¸memcachedæ¯”è¾ƒ">redisä¸memcachedæ¯”è¾ƒ</h5>
<p>memcacheä¸­çš„å€¼åªæ”¯æŒç®€å•çš„å­—ç¬¦ä¸²,redisæ”¯æŒæ›´ä¸°å¯Œçš„5ç§æ•°æ®ç»“æ„ç±»å‹.redisçš„æ€§èƒ½æ¯”memcacheå¥½å¾ˆå¤š.redisæ”¯æŒrdbæŒä¹…åŒ–å’ŒaofæŒä¹…åŒ–.redisæ”¯æŒmaster/slaveæ¨¡å¼</p>
<h5 id="å®‰è£…">å®‰è£…</h5>
<p>goè¯­è¨€ä¸­ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“è¿æ¥redisæ•°æ®åº“å¹¶è¿›è¡Œæ“ä½œ.ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¸‹è½½å¹¶å®‰è£…</p>
<p>go get -u github.com/go-redis/redis</p>
<h5 id="getå’Œset">getå’Œset</h5>
<h5 id="zset">zset</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;github.com/go-redis/redis&#34;</span>
<span class="p">)</span>

<span class="kd">var</span> <span class="nx">redisDb</span> <span class="o">*</span><span class="nx">redis</span><span class="p">.</span><span class="nx">Client</span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">err</span> <span class="o">:=</span> <span class="nf">initRedis</span><span class="p">()</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>

   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;è¿æ¥redisæˆåŠŸ&#34;</span><span class="p">)</span>

   <span class="nf">redisExample</span><span class="p">()</span>
   <span class="nf">redisExample2</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">initRedis</span><span class="p">()</span> <span class="p">(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">redisDb</span> <span class="p">=</span> <span class="nx">redis</span><span class="p">.</span><span class="nf">NewClient</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">redis</span><span class="p">.</span><span class="nx">Options</span><span class="p">{</span>
      <span class="nx">Addr</span><span class="p">:</span>     <span class="s">&#34;127.0.0.1:6379&#34;</span><span class="p">,</span>
      <span class="nx">Password</span><span class="p">:</span> <span class="s">&#34;&#34;</span><span class="p">,</span>
      <span class="nx">DB</span><span class="p">:</span>       <span class="mi">0</span><span class="p">,</span>
   <span class="p">})</span>

   <span class="nx">result</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">redisDb</span><span class="p">.</span><span class="nf">Ping</span><span class="p">().</span><span class="nf">Result</span><span class="p">()</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">err</span>
   <span class="p">}</span>

   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span>
   <span class="k">return</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">redisExample</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">err</span> <span class="o">:=</span> <span class="nx">redisDb</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;score&#34;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">).</span><span class="nf">Err</span><span class="p">()</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>

   <span class="nx">val1</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">redisDb</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="s">&#34;score&#34;</span><span class="p">).</span><span class="nf">Result</span><span class="p">()</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="k">return</span>
   <span class="p">}</span>

   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;scoer&#34;</span><span class="p">,</span><span class="nx">val1</span><span class="p">)</span>

   <span class="nx">val2</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">redisDb</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">).</span><span class="nf">Result</span><span class="p">()</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">==</span> <span class="nx">redis</span><span class="p">.</span><span class="nx">Nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;name does not exist&#34;</span><span class="p">)</span>
   <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span> 
   <span class="p">}</span><span class="k">else</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">val2</span><span class="p">)</span>
   <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">redisExample2</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">//zset
</span><span class="c1"></span>   <span class="nx">key</span><span class="o">:=</span><span class="s">&#34;rank&#34;</span>
   <span class="nx">items</span><span class="o">:=</span><span class="p">[]</span><span class="nx">redis</span><span class="p">.</span><span class="nx">Z</span><span class="p">{</span>
      <span class="nx">redis</span><span class="p">.</span><span class="nx">Z</span><span class="p">{</span>
         <span class="nx">Score</span><span class="p">:</span>  <span class="mi">99</span><span class="p">,</span>
         <span class="nx">Member</span><span class="p">:</span> <span class="s">&#34;php&#34;</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="nx">redis</span><span class="p">.</span><span class="nx">Z</span><span class="p">{</span>
         <span class="nx">Score</span><span class="p">:</span>  <span class="mi">96</span><span class="p">,</span>
         <span class="nx">Member</span><span class="p">:</span> <span class="s">&#34;golang&#34;</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="nx">redis</span><span class="p">.</span><span class="nx">Z</span><span class="p">{</span>
         <span class="nx">Score</span><span class="p">:</span> <span class="mi">97</span><span class="p">,</span>
         <span class="nx">Member</span><span class="p">:</span> <span class="s">&#34;python&#34;</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="nx">redis</span><span class="p">.</span><span class="nx">Z</span><span class="p">{</span>
         <span class="nx">Score</span><span class="p">:</span>  <span class="mi">99</span><span class="p">,</span>
         <span class="nx">Member</span><span class="p">:</span> <span class="s">&#34;java&#34;</span><span class="p">,</span>
      <span class="p">},</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">items</span><span class="p">)</span>
   <span class="c1">//æŠŠå…ƒç´ éƒ½è¿½åŠ åˆ°keyä¸­
</span><span class="c1"></span>   <span class="nx">num</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">redisDb</span><span class="p">.</span><span class="nf">ZAdd</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span><span class="nx">items</span><span class="o">...</span><span class="p">).</span><span class="nf">Result</span><span class="p">()</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span>

   <span class="c1">//åŠ åˆ†æ•°
</span><span class="c1"></span>   <span class="nx">newScore</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">redisDb</span><span class="p">.</span><span class="nf">ZIncrBy</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#34;java&#34;</span><span class="p">).</span><span class="nf">Result</span><span class="p">()</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">newScore</span><span class="p">)</span>


   <span class="c1">//å–åˆ†æ•°æœ€é«˜çš„
</span><span class="c1"></span>   <span class="nx">scoreList</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">redisDb</span><span class="p">.</span><span class="nf">ZRevRangeWithScores</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">).</span><span class="nf">Result</span><span class="p">()</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">z</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">scoreList</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">z</span><span class="p">.</span><span class="nx">Member</span><span class="p">,</span><span class="nx">z</span><span class="p">.</span><span class="nx">Score</span><span class="p">)</span>
   <span class="p">}</span>

   <span class="c1">//å–95åˆ°100åˆ†çš„
</span><span class="c1"></span>   <span class="nx">option</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">redis</span><span class="p">.</span><span class="nx">ZRangeBy</span><span class="p">{</span>
      <span class="nx">Min</span><span class="p">:</span> <span class="s">&#34;95&#34;</span><span class="p">,</span>
      <span class="nx">Max</span><span class="p">:</span> <span class="s">&#34;100&#34;</span><span class="p">,</span>
   <span class="p">}</span>
   <span class="nx">ret</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">redisDb</span><span class="p">.</span><span class="nf">ZRangeByScoreWithScores</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span><span class="o">*</span><span class="nx">option</span><span class="p">).</span><span class="nf">Result</span><span class="p">()</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="k">return</span> 
   <span class="p">}</span>
   <span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">z</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">ret</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">z</span><span class="p">.</span><span class="nx">Member</span><span class="p">,</span><span class="nx">z</span><span class="p">.</span><span class="nx">Score</span><span class="p">)</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h5 id="nsq">NSQ</h5>
<p>NSQæ˜¯ç›®å‰æ¯”è¾ƒæµè¡Œçš„ä¸€ä¸ªåˆ†å¸ƒå¼çš„æ¶ˆæ¯é˜Ÿåˆ—,æœ¬æ–‡ä¸»è¦ä»‹ç»äº†NSQåŠgoè¯­è¨€å¦‚ä½•æ“ä½œNSQ</p>
<h5 id="nsqä»‹ç»">NSQä»‹ç»</h5>
<p>NSQæ˜¯goè¯­è¨€ç¼–å†™çš„ä¸€ä¸ªå¼€æºçš„å®æ—¶åˆ†å¸ƒå¼å†…å­˜æ¶ˆæ¯é˜Ÿåˆ—,å…¶æ€§èƒ½ååˆ†ä¼˜å¼‚.NSQçš„ä¼˜åŠ¿æœ‰:</p>
<ol>
<li>NSQæå€¡åˆ†å¸ƒå¼å’Œåˆ†æ•£çš„æ‹“æ‰‘,æ²¡æœ‰å•ç‚¹æ•…éšœ,æ”¯æŒå®¹é”™å’Œé«˜å¯ç”¨æ€§,å¹¶æä¾›å¯é çš„æ¶ˆæ¯äº¤ä»˜ä¿è¯</li>
<li>NSQæ”¯æŒæ¨ªå‘æ‰©å±•,æ²¡æœ‰ä»»ä½•é›†ä¸­å¼ä»£ç†</li>
<li>NSQæ˜“äºé…ç½®å’Œéƒ¨ç½²,å¹¶ä¸”å†…ç½®äº†ç®¡ç†ç•Œé¢</li>
</ol>
<h5 id="nsqçš„åº”ç”¨åœºæ™¯">NSQçš„åº”ç”¨åœºæ™¯</h5>
<p>é€šå¸¸æ¥è¯´,æ¶ˆæ¯é˜Ÿåˆ—éƒ½é€‚ç”¨äºä»¥ä¸‹åœºæ™¯</p>
<h5 id="å¼‚æ­¥å¤„ç†">å¼‚æ­¥å¤„ç†</h5>
<p>åˆ©ç”¨æ¶ˆæ¯é˜Ÿåˆ—æŠŠä¸šåŠ¡æµç¨‹ä¸­çš„éå…³é”®æµç¨‹å¼‚æ­¥åŒ–,ä»è€Œæ˜¾è‘—é™ä½ä¸šåŠ¡è¯·æ±‚çš„å“åº”æ—¶é—´</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210820235216910.png" >
		<img src="/GoLearning.assets/image-20210820235216910.png"
			
			
			
			loading="lazy"
			alt="image-20210820235216910">
	</a>
	
	<figcaption>image-20210820235216910</figcaption>
	
</figure></p>
<h5 id="åº”ç”¨è§£è€¦">åº”ç”¨è§£è€¦</h5>
<p>é€šè¿‡ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å°†ä¸åŒçš„ä¸šåŠ¡é€»è¾‘è§£è€¦,é™ä½ç³»ç»Ÿé—´çš„è€¦åˆ,æé«˜ç³»ç»Ÿçš„å¥å£®æ€§.åç»­æœ‰å…¶ä»–ä¸šåŠ¡è¦ä½¿ç”¨è®¢å•æ•°æ®å¯ç›´æ¥è®¢é˜…æ¶ˆæ¯é˜Ÿåˆ—,æé«˜ç³»ç»Ÿçš„çµæ´»æ€§</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210820235428939.png" >
		<img src="/GoLearning.assets/image-20210820235428939.png"
			
			
			
			loading="lazy"
			alt="image-20210820235428939">
	</a>
	
	<figcaption>image-20210820235428939</figcaption>
	
</figure></p>
<h5 id="æµé‡å‰Šå³°">æµé‡å‰Šå³°</h5>
<p>ç±»ä¼¼ç§’æ€ç­‰åœºæ™¯ä¸‹,æŸä¸€æ—¶é—´å¯èƒ½ä¼šäº§ç”Ÿå¤§é‡çš„è¯·æ±‚,ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—èƒ½å¤Ÿä¸ºåç«¯å¤„ç†è¯·æ±‚æä¾›ä¸€å®šçš„ç¼“å†²åŒº,ä¿è¯åç«¯æœåŠ¡çš„ç¨³å®šæ€§</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210820235659875.png" >
		<img src="/GoLearning.assets/image-20210820235659875.png"
			
			
			
			loading="lazy"
			alt="image-20210820235659875">
	</a>
	
	<figcaption>image-20210820235659875</figcaption>
	
</figure></p>
<h5 id="nsqç»„ä»¶">NSQç»„ä»¶</h5>
<h5 id="nsqd">nsqd</h5>
<p>nsqdæ˜¯ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹,å®ƒæ¥æ”¶/æ’é˜Ÿå¹¶å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯</p>
<p>å¯åŠ¨nsqd,æŒ‡å®š-broadcast-address=127.0.0.1æ¥é…ç½®å¹¿æ’­åœ°å€</p>
<p>å¦‚æœæ˜¯åœ¨æ­é…nsqdlookupdä½¿ç”¨çš„æ¨¡å¼ä¸‹è¿˜éœ€è¦æŒ‡å®šnsqdlookupdåœ°å€</p>
<p>å¦‚æœæ˜¯éƒ¨ç½²äº†å¤šä¸ªnsqlookupdèŠ‚ç‚¹çš„é›†ç¾¤,é‚£è¿˜å¯ä»¥æŒ‡å®šå¤šä¸ª-lookupd-tcp-address</p>
<h5 id="nsqlookupd">nsqlookupd</h5>
<p>nsqlookupdæ˜¯ç»´æŠ¤æ‰€æœ‰nsqdçŠ¶æ€/æä¾›æœåŠ¡å‘ç°çš„å®ˆæŠ¤è¿›ç¨‹.ä»–èƒ½ä¸ºæ¶ˆè´¹è€…æŸ¥æ‰¾ç‰¹å®štopicä¸‹çš„nsqdæä¾›äº†è¿è¡Œæ—¶çš„è‡ªåŠ¨å‘ç°æœåŠ¡.ä»–ä¸æ˜¯ç»´æŒæŒä¹…çŠ¶æ€,ä¹Ÿä¸éœ€è¦ä¸ä»»ä½•å…¶ä»–çš„nsqdlookupdå®ä¾‹åè°ƒä»¥æ»¡è¶³æŸ¥è¯¢.å› æ­¤æ ¹æ®ç³»ç»Ÿçš„å†—ä½™è¦æ±‚å°½å¯èƒ½å¤šåœ°éƒ¨ç½²nsqlookupdèŠ‚ç‚¹.å¥¹ä»¬æ¶ˆè€—çš„èµ„æºå¾ˆå°‘,å¯ä»¥ä¸å…¶ä»–æœåŠ¡å…±å­˜,æˆ‘ä»¬çš„å»ºè®®æ˜¯ä¸ºæ¯ä¸ªæ•°æ®ä¸­å¿ƒè¿è¡Œè‡³å°‘ä¸‰ä¸ªé›†ç¾¤</p>
<p>nsqadmin</p>
<p>ä¸€ä¸ªå®æ—¶ç›‘æ§é›†ç¾¤çŠ¶æ€/æ‰§è¡Œå„ç§ç®¡ç†ä»»åŠ¡çš„webç®¡ç†å¹³å°,å¯åŠ¨nsqdadmin,æŒ‡å®šnsqlookupdåœ°å€</p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€http://127.0.0.1:4171è®¿é—®ç®¡ç†ç•Œé¢</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210821104437565.png" >
		<img src="/GoLearning.assets/image-20210821104437565.png"
			
			
			
			loading="lazy"
			alt="image-20210821104437565">
	</a>
	
	<figcaption>image-20210821104437565</figcaption>
	
</figure></p>
<h5 id="topicå’Œchannel">topicå’Œchannel</h5>
<p>æ¯ä¸ªnsqdå®ä¾‹æ—¨åœ¨ä¸€æ¬¡å¤„ç†å¤šä¸ªæ•°æ®æµ.è¿™äº›æ•°æ®æµæˆä¸ºtopics,ä¸€ä¸ªtopicå…·æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªchannels,æ¯ä¸ªchanneléƒ½ä¼šæ”¶åˆ°topicæ‰€æœ‰æ¶ˆæ¯çš„å‰¯æœ¬,å®é™…ä¸Šä¸Šä¸‹æ¸¸çš„æœåŠ¡æ˜¯é€šè¿‡å¯¹åº”çš„channelæ¥æ¶ˆè´¹topicæ¶ˆæ¯</p>
<p>topicå’Œchannelä¸æ˜¯é¢„å…ˆè®¾ç½®çš„.topicåœ¨é¦–æ¬¡ä½¿ç”¨æ—¶åˆ›å»º,æ–¹æ³•æ˜¯å°†å…¶å‘å¸ƒåˆ°æŒ‡å®štopic,æˆ–è€…è®¢é˜…æŒ‡å®štopicä¸Šçš„channel. channelæ˜¯é€šè¿‡è®¢é˜…æŒ‡å®šçš„channelåœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶åˆ›å»ºçš„</p>
<p>topicå’Œchanneléƒ½äº’ç›¸ç‹¬ç«‹åœ°ç¼“å†²æ•°æ®,é˜²æ­¢ç¼“æ…¢çš„æ¶ˆè´¹è€…å¯¼è‡´å…¶ä»–channelçš„ç§¯å‹(åŒæ ·é€‚ç”¨äºtopicçº§åˆ«)</p>
<p>channelå¯ä»¥å¹¶ä¸”é€šå¸¸ä¼šè¿æ¥å¤šä¸ªå®¢æˆ·ç«¯.å‡è®¾æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯éƒ½å¤„äºå‡†å¤‡æ¥æ”¶æ¶ˆæ¯çš„çŠ¶æ€,åˆ™æ¯æ¡æ¶ˆæ¯å°†è¢«ä¼ é€’åˆ°éšæœºå®¢æˆ·ç«¯</p>
<p>æ€»è€Œè¨€ä¹‹,æ¶ˆæ¯æ˜¯ä»topic-&gt;channel(æ¯ä¸ªchannelæ¥æ”¶è¯¥topicçš„æ‰€æœ‰æ¶ˆæ¯çš„å‰¯æœ¬) å¤šæ’­çš„,ä½†æ˜¯ä»channel-&gt;consumerså‡åŒ€åˆ†å¸ƒ(æ¯ä¸ªæ¶ˆè´¹è€…æ¥æ”¶åˆ°è¯¥channelçš„ä¸€éƒ¨åˆ†æ¶ˆæ¯)</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210821105522944.png" >
		<img src="/GoLearning.assets/image-20210821105522944.png"
			
			
			
			loading="lazy"
			alt="image-20210821105522944">
	</a>
	
	<figcaption>image-20210821105522944</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210821105528935.png" >
		<img src="/GoLearning.assets/image-20210821105528935.png"
			
			
			
			loading="lazy"
			alt="image-20210821105528935">
	</a>
	
	<figcaption>image-20210821105528935</figcaption>
	
</figure></p>
<h5 id="nsqç‰¹æ€§">NSQç‰¹æ€§</h5>
<ul>
<li>æ¶ˆæ¯é»˜è®¤ä¸æŒä¹…åŒ–,å¯ä»¥é…ç½®æˆæŒä¹…åŒ–æ¨¡å¼. nsqé‡‡ç”¨çš„æ–¹å¼æ˜¯å†…å­˜+ç¡¬ç›˜çš„æ¨¡å¼,å½“å†…å­˜è¾¾åˆ°ä¸€å®šç¨‹åº¦æ—¶å°±ä¼šå°†æ•°æ®æŒä¹…åŒ–åˆ°ç¡¬ç›˜ä¸Š.
<ul>
<li>å¦‚æœå°† &ndash;mem-queue-size è®¾ç½®ä¸º0</li>
<li>æœåŠ¡å™¨é‡å¯æ—¶ä¹Ÿä¼šå°†å½“æ—¶åœ¨å†…å­˜ä¸­çš„æ¶ˆæ¯æŒä¹…åŒ–</li>
</ul>
</li>
<li>æ¯æ¡æ¶ˆæ¯è‡³å°‘ä¼ é€’ä¸€æ¬¡</li>
<li>æ¶ˆæ¯ä¸ä¿è¯æœ‰åº</li>
</ul>
<h5 id="goæ“ä½œnsq">goæ“ä½œnsq</h5>
<h5 id="day11è¯¾ä¸Šç¬”è®°">day11è¯¾ä¸Šç¬”è®°</h5>
<h5 id="ä»Šæ—¥å†…å®¹-6">ä»Šæ—¥å†…å®¹</h5>
<h5 id="ä¾èµ–ç®¡ç†go-module">ä¾èµ–ç®¡ç†go module</h5>
<h5 id="context">context</h5>
<h5 id="æœåŠ¡ç«¯agentå¼€å‘">æœåŠ¡ç«¯agentå¼€å‘</h5>
<h5 id="æ—¥å¿—é¡¹ç›®æ¶æ„è®¾è®¡">æ—¥å¿—é¡¹ç›®æ¶æ„è®¾è®¡</h5>
<h5 id="kafkaå’Œzookeeper">kafkaå’Œzookeeper</h5>
<h5 id="tailfä»‹ç»">tailfä»‹ç»</h5>
<h5 id="ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–ç®¡ç†">ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–ç®¡ç†</h5>
<p>æœ€æ—©çš„æ—¶å€™,goæ‰€ä¾èµ–çš„æ‰€æœ‰ç¬¬ä¸‰æ–¹åº“ æ”¾åœ¨gopathè¿™ä¸ªç›®å½•ä¸‹é¢.è¿™å°±å¯¼è‡´äº†åŒä¸€ä¸ªåº“åªèƒ½ä¿å­˜ä¸€ä¸ªç‰ˆæœ¬çš„ä»£ç .å¦‚æœä¸åŒçš„é¡¹ç›®ä¾èµ–åŒä¸€ä¸ªç¬¬ä¸‰æ–¹çš„åº“çš„ä¸åŒç‰ˆæœ¬,åº”è¯¥æ€ä¹ˆè§£å†³</p>
<h5 id="godep">godep</h5>
<p>goè¯­è¨€ä»v1.5å¼€å§‹å¼•å…¥vendoræ¨¡å¼,å¦‚æœé¡¹ç›®ç›®å½•ä¸‹æœ‰vendorç›®å½•,é‚£ä¹ˆgoå·¥å…·é“¾ä¼šä¼˜å…ˆä½¿ç”¨vendorå†…çš„åŒ…è¿›è¡Œç¼–è¯‘/æµ‹è¯• ç­‰ç­‰</p>
<p>godepæ˜¯ä¸€ä¸ªé€šè¿‡vendoræ¨¡å¼å®ç°çš„goè¯­è¨€çš„ç¬¬ä¸‰æ–¹ä¾èµ–ç®¡ç†å·¥å…·,ç±»ä¼¼çš„è¿˜æœ‰ç”±ç¤¾åŒºç»´æŠ¤å‡†å®˜æ–¹åŒ…ç®¡ç†å·¥å…·dep</p>
<h5 id="go-module">go module</h5>
<p>go1.11ä¹‹åé€€å‡ºçš„å®˜æ–¹ç‰ˆæœ¬ç®¡ç†å·¥å…·,ä»go1.13ç‰ˆæœ¬å¼€å§‹,go moduleå°†æ˜¯goè¯­è¨€é»˜è®¤çš„ä¾èµ–ç®¡ç†å·¥å…·</p>
<p>go111module</p>
<p>è¦å¯ç”¨go module æ”¯æŒé¦–å…ˆè¦è®¾ç½®ç¯å¢ƒå˜é‡ go111module,é€šè¿‡ä»–å¯ä»¥å¼€å¯å’Œå…³é—­æ¨¡å—æ”¯æŒ,ä»–å¯ä»¥æœ‰ä¸‰ä¸ªå¯é€‰å€¼:</p>
<p>off on auto é»˜è®¤å€¼æ˜¯auto</p>
<p>offå°±æ˜¯ç¦ç”¨æ¨¡å—æ”¯æŒ,ç¼–è¯‘æ—¶ä¼šä»gopathå’Œvendoræ–‡ä»¶å¤¹ä¸­æŸ¥æ‰¾åŒ…</p>
<p>onå°±æ˜¯å¯ç”¨æ¨¡å—æ”¯æŒ,ç¼–è¯‘æ—¶ä¼šå¿½ç•¥gopathå’Œvendoræ–‡ä»¶å¤¹,åªæ ¹æ®go.modä¸‹è½½ä¾èµ–</p>
<p>autoå°±æ˜¯å½“gopathå¤–æœ‰go.modæ–‡ä»¶æ—¶,å¼€å¯æ¨¡å—æ”¯æŒ</p>
<p>ç®€å•æ¥è¯´,è®¾ç½®onä¹‹åå°±å¯ä»¥ä½¿ç”¨go moduleäº†</p>
<p>ä½¿ç”¨go moduleç®¡ç†ä¾èµ–åä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶go.modå’Œgo.sum</p>
<h5 id="goproxy">goproxy</h5>
<p>go1.11ä¹‹åè®¾ç½®goproxyå‘½ä»¤,ç”±äºå›½å†…æ— æ³•è®¿é—®,æ‰€ä»¥å»ºè®®è®¾ç½®goproxy</p>
<h5 id="go-modå‘½ä»¤">go modå‘½ä»¤</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="k">go</span> <span class="nx">mod</span> <span class="nx">download</span>
<span class="k">go</span> <span class="nx">mod</span> <span class="nx">edit</span>
<span class="k">go</span> <span class="nx">mod</span> <span class="nx">graph</span> 
<span class="k">go</span> <span class="nx">mod</span> <span class="nx">init</span>
<span class="k">go</span> <span class="nx">mod</span> <span class="nx">tidy</span>
<span class="k">go</span> <span class="nx">mod</span> <span class="nx">vendor</span>
<span class="k">go</span> <span class="nx">mod</span> <span class="nx">verify</span>
<span class="k">go</span> <span class="nx">mod</span> <span class="nx">why</span>
</code></pre></div><h5 id="gomod">go.mod</h5>
<p>go.modæ–‡ä»¶è®°å½•äº†é¡¹ç›®æ‰€æœ‰çš„ä¾èµ–ä¿¡æ¯,å…¶ç»“æ„å¤§è‡´å¦‚ä¸‹</p>
<p>å…¶ä¸­:</p>
<ul>
<li>moduleç”¨æ¥å®šä¹‰åŒ…å</li>
<li>requireç”¨æ¥å®šä¹‰ä¾èµ–åŒ…åŠç‰ˆæœ¬</li>
<li>indirectè¡¨ç¤ºç®€ä»‹å¼•ç”¨</li>
</ul>
<h5 id="gosum">go.sum</h5>
<p>è¯¦ç»†åŒ…å’Œç‰ˆæœ¬ä¿¡æ¯</p>
<h5 id="go-get">go get</h5>
<p>ä¸‹è½½ä¾èµ–åŒ…,å¹¶ä¸”è¿˜å¯ä»¥æŒ‡å®šä¸‹è½½çš„ç‰ˆæœ¬</p>
<h5 id="go-mod-edit">go mod edit</h5>
<p>å› ä¸ºæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹go.modæ–‡ä»¶,æ‰€ä»¥æœ‰æ—¶å€™éœ€è¦æ ¼å¼åŒ–è¯¥æ–‡ä»¶/æ·»åŠ ä¾èµ–é¡¹/ç§»é™¤ä¾èµ–é¡¹</p>
<h5 id="åœ¨é¡¹ç›®ä¸­ä½¿ç”¨go-module">åœ¨é¡¹ç›®ä¸­ä½¿ç”¨go module</h5>
<h5 id="æ—¢æœ‰é¡¹ç›®">æ—¢æœ‰é¡¹ç›®</h5>
<p>å¦‚æœéœ€è¦å¯¹ä¸€ä¸ªå·²ç»å­˜åœ¨çš„é¡¹ç›®å¯ç”¨go module,å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤</p>
<ol>
<li>åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œgo mod init , ç”Ÿæˆä¸€ä¸ªgo.modæ–‡ä»¶</li>
<li>æ‰§è¡Œgo get , æŸ¥æ‰¾å¹¶è®°å½•å½“å‰é¡¹ç›®çš„ä¾èµ–,åŒæ—¶ç”Ÿæˆä¸€ä¸ªgo. sumè®°å½•æ¯ä¸ªä¾èµ–åº“çš„ç‰ˆæœ¬å’Œå“ˆå¸Œå€¼</li>
</ol>
<h5 id="æ–°é¡¹ç›®">æ–°é¡¹ç›®</h5>
<ol>
<li>æ‰§è¡Œgo mod init é¡¹ç›®å , åœ¨å½“å‰é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªgo.modæ–‡ä»¶</li>
<li>æ‰‹åŠ¨ç¼–è¾‘go.modä¸­çš„requireä¾èµ–é¡¹æˆ–æ‰§è¡Œgo getè‡ªåŠ¨å‘ç°/ç»´æŠ¤ä¾èµ–</li>
</ol>
<h5 id="context-1">context</h5>
<p>éå¸¸é‡è¦!!!</p>
<p>å¦‚ä½•ä¼˜é›…çš„æ§åˆ¶å­goroutineé€€å‡º</p>
<p>åœ¨go httpåŒ…çš„serverä¸­,æ¯ä¸€ä¸ªè¯·æ±‚åœ¨éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„goroutineå»å¤„ç†,è¯·æ±‚å¤„ç†å‡½æ•°é€šå¸¸ä¼šå¯åŠ¨é¢å¤–çš„goroutineç”¨æ¥è®¿é—®åç«¯æœåŠ¡,æ¯”å¦‚æ•°æ®åº“å’ŒrpcæœåŠ¡.ç”¨æ¥å¤„ç†ä¸€ä¸ªè¯·æ±‚çš„goroutine,é€šå¸¸éœ€è¦è®¿é—®ä¸€äº›ä¸è¯·æ±‚ç‰¹å®šçš„æ•°æ®,æ¯”å¦‚ç»ˆç«¯ç”¨æˆ·çš„èº«ä»½è®¤è¯ä¿¡æ¯/éªŒè¯ç›¸å…³çš„token/è¯·æ±‚çš„æˆªæ­¢æ—¶é—´.å½“ä¸€ä¸ªè¯·æ±‚è¢«å–æ¶ˆæˆ–è¶…æ—¶æ—¶,æ‰€æœ‰ç”¨æ¥å¤„ç†è¯¥è¯·æ±‚çš„goroutineéƒ½åº”è¯¥è¿…é€Ÿé€€å‡º,ç„¶åç³»ç»Ÿæ‰èƒ½é‡Šæ”¾è¿™äº›goroutineå ç”¨çš„èµ„æº</p>
<h5 id="ä½¿ç”¨å…¨å±€å˜é‡">ä½¿ç”¨å…¨å±€å˜é‡</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;sync&#34;</span>
   <span class="s">&#34;time&#34;</span>
<span class="p">)</span>
<span class="c1">//ç¬¬ä¸€ç§å°±æ˜¯é€šè¿‡å…¨å±€å˜é‡ æ¥æ§åˆ¶goroutineé€€å‡º
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">notify</span> <span class="kt">bool</span>
<span class="kd">var</span> <span class="nx">wg</span> <span class="nx">sync</span><span class="p">.</span><span class="nx">WaitGroup</span>
<span class="c1">//ä¸ºä»€ä¹ˆéœ€è¦context
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">wg</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
   <span class="k">go</span> <span class="nf">f</span><span class="p">()</span>
   <span class="c1">//å¦‚ä½•é€šçŸ¥å­goroutineé€€å‡º
</span><span class="c1"></span>   <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
   <span class="nx">notify</span><span class="p">=</span><span class="kc">true</span>
   <span class="nx">wg</span><span class="p">.</span><span class="nf">Wait</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f</span><span class="p">()</span> <span class="p">{</span>
   <span class="k">defer</span> <span class="nx">wg</span><span class="p">.</span><span class="nf">Done</span><span class="p">()</span>
   <span class="k">for</span> <span class="p">!</span><span class="nx">notify</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ljs&#34;</span><span class="p">)</span>
      <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Millisecond</span><span class="o">*</span><span class="mi">500</span><span class="p">)</span>
   <span class="p">}</span>

<span class="p">}</span>
</code></pre></div><h5 id="ä½¿ç”¨é€šé“">ä½¿ç”¨é€šé“</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;sync&#34;</span>
   <span class="s">&#34;time&#34;</span>
<span class="p">)</span>
<span class="kd">var</span> <span class="nx">i</span>  <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">bool</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">wg</span> <span class="nx">sync</span><span class="p">.</span><span class="nx">WaitGroup</span>
<span class="c1">//ä¸ºä»€ä¹ˆéœ€è¦context
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">wg</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
   <span class="k">go</span> <span class="nf">f</span><span class="p">()</span>
   <span class="c1">//å¦‚ä½•é€šçŸ¥å­goroutineé€€å‡º
</span><span class="c1"></span>   <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
   <span class="nx">i</span><span class="o">&lt;-</span><span class="kc">true</span>
   <span class="nx">wg</span><span class="p">.</span><span class="nf">Wait</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f</span><span class="p">()</span> <span class="p">{</span>
   <span class="k">defer</span> <span class="nx">wg</span><span class="p">.</span><span class="nf">Done</span><span class="p">()</span>
   <span class="nx">LOOP</span><span class="p">:</span>
   <span class="k">for</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ljs&#34;</span><span class="p">)</span>
      <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Millisecond</span><span class="o">*</span><span class="mi">500</span><span class="p">)</span>
      <span class="k">select</span> <span class="p">{</span>
         <span class="k">case</span> <span class="o">&lt;-</span><span class="nx">i</span><span class="p">:</span>
            <span class="k">break</span> <span class="nx">LOOP</span>
      <span class="k">default</span><span class="p">:</span>

      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h5 id="ä½¿ç”¨context">ä½¿ç”¨context</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;context&#34;</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;sync&#34;</span>
   <span class="s">&#34;time&#34;</span>
<span class="p">)</span>
<span class="kd">var</span> <span class="nx">wg</span> <span class="nx">sync</span><span class="p">.</span><span class="nx">WaitGroup</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>

   <span class="nx">ctx</span><span class="p">,</span> <span class="nx">cancel</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">WithCancel</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">())</span>
   <span class="nx">wg</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
   <span class="k">go</span> <span class="nf">f</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span>
   <span class="c1">//å¦‚ä½•é€šçŸ¥å­goroutineé€€å‡º
</span><span class="c1"></span>   <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
   <span class="c1">//é€šçŸ¥å­goroutineé€€å‡º
</span><span class="c1"></span>   <span class="nf">cancel</span><span class="p">()</span>
   <span class="nx">wg</span><span class="p">.</span><span class="nf">Wait</span><span class="p">()</span>

<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">defer</span> <span class="nx">wg</span><span class="p">.</span><span class="nf">Done</span><span class="p">()</span>
   <span class="k">go</span> <span class="nf">f2</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span>
   <span class="nx">LOOP</span><span class="p">:</span>
   <span class="k">for</span>  <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ljs&#34;</span><span class="p">)</span>
      <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Millisecond</span><span class="o">*</span><span class="mi">500</span><span class="p">)</span>
      <span class="k">select</span> <span class="p">{</span>
         <span class="k">case</span> <span class="o">&lt;-</span><span class="nx">ctx</span><span class="p">.</span><span class="nf">Done</span><span class="p">():</span>
            <span class="k">break</span> <span class="nx">LOOP</span>
      <span class="k">default</span><span class="p">:</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">f2</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">defer</span> <span class="nx">wg</span><span class="p">.</span><span class="nf">Done</span><span class="p">()</span>
   <span class="nx">LOOP</span><span class="p">:</span>
   <span class="k">for</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;jwt&#34;</span><span class="p">)</span>
      <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Millisecond</span><span class="o">*</span><span class="mi">250</span><span class="p">)</span>
      <span class="k">select</span> <span class="p">{</span>
         <span class="k">case</span><span class="o">&lt;-</span><span class="nx">ctx</span><span class="p">.</span><span class="nf">Done</span><span class="p">():</span>
            <span class="k">break</span> <span class="nx">LOOP</span>
      <span class="k">default</span><span class="p">:</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h5 id="contextåˆè¯†">contextåˆè¯†</h5>
<p>go1.7åŠ å…¥äº†ä¸€ä¸ªæ–°çš„æ ‡å‡†åº“context,ä»–å®šä¹‰äº†contextç±»å‹,ä¸“é—¨ç”¨æ¥ç®€åŒ–å¯¹äºå¤„ç†å•ä¸ªè¯·æ±‚çš„å¤šä¸ªgoroutineä¹‹é—´ä¸è¯·æ±‚åŸŸçš„æ•°æ®/å–æ¶ˆä¿¡å·/æˆªæ­¢æ—¶é—´ç­‰ç›¸å…³æ“ä½œ,è¿™äº›æ“ä½œå¯èƒ½æ¶‰åŠå¤šä¸ªapiè°ƒç”¨</p>
<p>å¯¹æœåŠ¡å™¨ä¼ å…¥çš„è¯·æ±‚åº”è¯¥åˆ›å»ºä¸Šä¸‹æ–‡,è€Œå¯¹æœåŠ¡å™¨çš„ä¼ å‡ºè°ƒç”¨åº”è¯¥æ¥å—ä¸Šä¸‹æ–‡.å¥¹ä»¬ä¹‹é—´çš„å‡½æ•°è°ƒç”¨é“¾å¿…é¡»ä¼ é€’ä¸Šä¸‹æ–‡,æˆ–è€…å¯ä»¥ä½¿ç”¨withcancle/withdeadline/withtimeoutæˆ–withvalueåˆ›å»ºçš„æ´¾ç”Ÿä¸Šä¸‹æ–‡,å½“ä¸€ä¸ªä¸Šä¸‹æ–‡è¢«å–æ¶ˆæ—¶,ä»–æ´¾ç”Ÿçš„æ‰€æœ‰ä¸Šä¸‹æ–‡ä¹Ÿè¢«å–æ¶ˆ</p>
<p>å…¶ä¸­:</p>
<ul>
<li>deadlineæ–¹æ³•éœ€è¦è¿”å›å½“å‰contextè¢«å–æ¶ˆçš„æ—¶é—´,ä¹Ÿå°±æ˜¯å®Œæˆå·¥ä½œçš„æˆªè‡³æ—¶é—´(deadline)</li>
<li>doneæ–¹æ³•éœ€è¦è¿”å›ä¸€ä¸ªchannel,è¿™ä¸ªchannelä¼šåœ¨å½“å‰å·¥ä½œå®Œæˆæˆ–è€…ä¸Šä¸‹æ–‡è¢«å–æ¶ˆä¹‹åå…³é—­,å¤šæ¬¡è°ƒç”¨doneæ–¹æ³•ä¼šè¿”å›åŒä¸€ä¸ªchannel</li>
<li>erræ–¹æ³•ä¼šè¿”å›å½“å‰contextç»“æŸçš„åŸå› ,ä»–åªä¼šåœ¨doneè¿”å›çš„channelè¢«å…³é—­æ—¶æ‰ä¼šè¿”å›éç©ºçš„å€¼
<ul>
<li>å¦‚æœå½“å‰contextè¢«å–æ¶ˆå°±ä¼šè¿”å›canceledé”™è¯¯</li>
<li>å¦‚æœå½“å‰contextè¶…å¸‚å°±ä¼šè¿”å›deadlineexceeded</li>
</ul>
</li>
<li>valueæ–¹æ³•ä¼šä»contextä¸­è¿”å›é”®å¯¹åº”çš„å€¼,å¯¹äºåŒä¸€ä¸ªä¸Šä¸‹æ–‡æ¥è¯´,å¤šæ¬¡è°ƒç”¨valueå¹¶ä¼ å…¥ç›¸åŒçš„keyä¼šè¿”å›ç›¸åŒçš„ç»“æœ,è¯¥æ–¹æ³•ä»…ç”¨äºä¼ é€’è·¨apiå’Œè¿›ç¨‹é—´è·Ÿè¯·æ±‚åŸŸçš„æ•°æ®</li>
</ul>
<h5 id="backgroundå’Œtodo">backgroundå’Œtodo</h5>
<p>goå†…ç½®ä¸¤ä¸ªå‡½æ•°:backgroundå’Œtodo,è¿™ä¸¤ä¸ªå‡½æ•°åˆ†åˆ«è¿”å›äº†ä¸€ä¸ªå®ç°äº†contextæ¥å£çš„backgroundå’Œtodo.æˆ‘ä»¬ä»£ç ä¸­æœ€å¼€å§‹éƒ½æ˜¯ä»¥è¿™ä¸¤ä¸ªå†…ç½®çš„ä¸Šä¸‹æ–‡å¯¹è±¡ä½œä¸ºæœ€é¡¶å±‚çš„parent context,è¡ç”Ÿå‡ºæ›´å¤šçš„å­ä¸Šä¸‹æ–‡å¯¹è±¡</p>
<p>backgroundä¸»è¦ç”¨äºmainå‡½æ•°/åˆå§‹åŒ–ä»¥åŠæµ‹è¯•ä»£ç ä¸­,ä½œä¸ºcontextè¿™ä¸ªæ ‘ç»“æ„çš„æœ€é¡¶å±‚çš„context,ä¹Ÿå°±æ˜¯æ ¹çš„context</p>
<p>todo,å®ƒç›®å‰è¿˜ä¸çŸ¥é“å…·ä½“çš„ä½¿ç”¨åœºæ™¯,å¦‚æœæˆ‘ä»¬ä¸çŸ¥é“è¯¥ä½¿ç”¨ä»€ä¹ˆcontextçš„æ—¶å€™,å¯ä»¥ä½¿ç”¨è¿™ä¸ª</p>
<p>backgroundå’Œtodoæœ¬è´¨ä¸Šéƒ½æ˜¯emptyctxç»“æ„ä½“ç±»å‹,æ˜¯ä¸€ä¸ªä¸å¯å–æ¶ˆ,æ²¡æœ‰è®¾ç½®æˆªæ­¢æ—¶é—´,æ²¡æœ‰æºå¸¦ä»»ä½•å€¼çš„context</p>
<h5 id="withç³»åˆ—å‡½æ•°">withç³»åˆ—å‡½æ•°</h5>
<h5 id="withcancel">withcancel</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">withcancel</span> <span class="p">(</span><span class="nx">parent</span> <span class="nx">context</span><span class="p">)</span> <span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span> <span class="p">,</span> <span class="nx">cancel</span> <span class="nx">cancelFunc</span><span class="p">)</span>
</code></pre></div><p>withcancelè¿”å›å¸¦æœ‰æ–°doneé€šé“çš„çˆ¶èŠ‚ç‚¹çš„å‰¯æœ¬.å½“è°ƒç”¨è¿”å›çš„cancelå‡½æ•°æˆ–å½“å…³é—­çˆ¶ä¸Šä¸‹æ–‡çš„doneé€šé“æ—¶,å°†å…³é—­è¿”å›ä¸Šä¸‹æ–‡çš„doneé€šé“,æ— è®ºå…ˆå‘ç”Ÿä»€ä¹ˆæƒ…å†µ.</p>
<p>å–æ¶ˆæ­¤ä¸Šä¸‹æ–‡å°†é‡Šæ”¾ä¸å…¶å…³è”çš„èµ„æº</p>
<h5 id="withdeadline">withdeadline</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">withdeadline</span><span class="p">(</span><span class="nx">parent</span> <span class="nx">context</span> <span class="p">,</span> <span class="nx">deadline</span> <span class="nx">time</span><span class="p">.</span><span class="nx">time</span><span class="p">)</span> <span class="p">(</span><span class="nx">context</span> <span class="p">,</span> <span class="nx">cancelfunc</span><span class="p">)</span>
</code></pre></div><p>è¿”å›çˆ¶ä¸Šä¸‹æ–‡çš„å‰¯æœ¬,å¹¶å°†deadlineè°ƒæ•´ä¸ºä¸è¿Ÿäºd.å¦‚æœçˆ¶ä¸Šä¸‹æ–‡çš„deadlineå·²ç»æ—©äºd,åˆ™withdeadline(parent,d)åœ¨è¯­ä¹‰ä¸Šç­‰åŒäºçˆ¶ä¸Šä¸‹æ–‡,å½“æˆªæ­¢æ—¥è¿‡æœŸæ—¶,å½“è°ƒç”¨è¿”å›çš„cancelå‡½æ•°æ—¶,æˆ–è€…å½“çˆ¶ä¸Šä¸‹æ–‡çš„doneé€šé“å…³é—­æ—¶,è¿”å›ä¸Šä¸‹æ–‡çš„doneé€šé“å°†è¢«å…³é—­,ä»¥æœ€å…ˆå‘ç”Ÿçš„æƒ…å†µä¸ºå‡†</p>
<p>å–æ¶ˆæ­¤ä¸Šä¸‹æ–‡å°†é‡Šæ”¾ä¸å…¶å…³è”çš„èµ„æº,å› æ­¤ä»£ç åº”è¯¥åœ¨æ­¤ä¸Šä¸‹æ–‡ä¸­è¿è¡Œçš„æ“ä½œå®Œæˆåç«‹å³è°ƒç”¨cancel</p>
<h5 id="withtimeout">withtimeout</h5>
<p>withtimeoutçš„å‡½æ•°ç­¾åå¦‚ä¸‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">WithTimeout</span> <span class="p">(</span><span class="nx">parent</span> <span class="nx">context</span> <span class="p">,</span><span class="nx">timeout</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Duration</span><span class="p">)</span> <span class="p">(</span><span class="nx">context</span> <span class="p">,</span> <span class="nx">cancelfunc</span><span class="p">)</span>
</code></pre></div><p>withtimeoutè¿”å›withdeadline(parent,time.now().add(timeout))</p>
<p>å–æ¶ˆæ­¤ä¸Šä¸‹æ–‡å°†é‡Šæ”¾ä¸å…¶ç›¸å…³çš„èµ„æº,å› æ­¤ä»£ç åº”è¯¥åœ¨æ­¤ä¸Šä¸‹æ–‡ä¸­è¿è¡Œçš„æ“ä½œå®Œæˆåç«‹å³è°ƒç”¨cancel,é€šå¸¸ç”¨äºæ•°æ®åº“æˆ–è€…ç½‘ç»œè¿æ¥çš„è¶…æ—¶æ§åˆ¶</p>
<h5 id="withvalue">withvalue</h5>
<p>withvalueå‡½æ•°èƒ½å¤Ÿå°†è¯·æ±‚ä½œç”¨åŸŸçš„æ•°æ®ä¸contextå¯¹è±¡å»ºç«‹å…³ç³»</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">WithValue</span><span class="p">(</span><span class="nx">parent</span> <span class="nx">context</span> <span class="p">,</span> <span class="nx">key</span> <span class="p">,</span> <span class="nx">val</span> <span class="kd">interface</span><span class="p">{})</span> <span class="nx">context</span>
</code></pre></div><p>withvalue è¿”å›çˆ¶èŠ‚ç‚¹çš„å‰¯æœ¬,å…¶ä¸­ä¸keyå…³è”çš„å€¼ä¸ºval</p>
<p>ä»…å¯¹apiå’Œè¿›ç¨‹é—´ä¼ é€’è¯·æ±‚åŸŸçš„æ•°æ®ä½¿ç”¨ä¸Šä¸‹æ–‡å€¼,è€Œä¸æ˜¯ä½¿ç”¨ä»–æ¥ä¼ é€’å¯é€‰å‚æ•°ç»™å‡½æ•°</p>
<p>æ‰€æä¾›çš„é”®å¿…é¡»æ˜¯å¯æ¯”è¾ƒçš„,å¹¶ä¸”ä¸åº”è¯¥æ˜¯stringç±»å‹æˆ–ä»»ä½•å…¶ä»–å†…ç½®ç±»å‹,ä»¥é¿å…ä½¿ç”¨ä¸Šä¸‹æ–‡åœ¨åŒ…ä¹‹é—´å‘ç”Ÿå†²çª.withvalueçš„ç”¨æˆ·åº”è¯¥ä¸ºé”®è‡ªå·±å®šä¹‰è‡ªå·±çš„ç±»å‹.ä¸ºäº†é¿å…åœ¨åˆ†é…ç»™interface{}æ—¶è¿›è¡Œåˆ†é…,ä¸Šä¸‹æ–‡é”®é€šå¸¸ä½¿ç”¨å…·ä½“ç±»å‹struct{}.æˆ–è€…å¯¼å‡ºçš„ä¸Šä¸‹æ–‡å…³é”®å˜é‡çš„é™æ€ç±»å‹åº”è¯¥æ˜¯æŒ‡é’ˆæˆ–æ¥å£</p>
<h5 id="gosumæ–‡ä»¶">go.sumæ–‡ä»¶</h5>
<p>è¯¦ç»†çš„åŒ…åå’Œç‰ˆæœ¬ä¿¡æ¯</p>
<h5 id="å¸¸è§çš„å‘½ä»¤">å¸¸è§çš„å‘½ä»¤</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="k">go</span> <span class="nx">mod</span> <span class="nx">init</span> <span class="c1">//åˆå§‹åŒ–é¡¹ç›®
</span><span class="c1"></span><span class="k">go</span> <span class="nx">mod</span> <span class="nx">tidy</span> <span class="c1">//æ£€æŸ¥ä»£ç é‡Œçš„ä¾èµ–å»æ›´æ–°go.modæ–‡ä»¶ä¸­çš„ä¾èµ–
</span><span class="c1"></span><span class="k">go</span> <span class="nx">get</span> 
<span class="k">go</span> <span class="nx">mod</span> <span class="nx">download</span>
</code></pre></div><h5 id="æ—¥å¿—æ”¶é›†é¡¹ç›®">æ—¥å¿—æ”¶é›†é¡¹ç›®</h5>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210823155422863.png" >
		<img src="/GoLearning.assets/image-20210823155422863.png"
			
			
			
			loading="lazy"
			alt="image-20210823155422863">
	</a>
	
	<figcaption>image-20210823155422863</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210823155631862.png" >
		<img src="/GoLearning.assets/image-20210823155631862.png"
			
			
			
			loading="lazy"
			alt="image-20210823155631862">
	</a>
	
	<figcaption>image-20210823155631862</figcaption>
	
</figure></p>
<h5 id="ç»„ä»¶ä»‹ç»">ç»„ä»¶ä»‹ç»ï¼š</h5>
<p>logagentï¼šæ—¥å¿—æ”¶é›†å®¢æˆ·ç«¯ï¼Œç”¨æ¥æ”¶é›†æœåŠ¡å™¨ä¸Šçš„æ—¥å¿—</p>
<p>kafkaï¼šé«˜ååé‡çš„åˆ†å¸ƒå¼é˜Ÿåˆ—ï¼ˆlinkinå¼€å‘ï¼Œapacheé¡¶çº§å¼€æºé¡¹ç›®ï¼‰</p>
<p>ElasticSearchï¼šå¼€æºçš„æœç´¢å¼•æ“ï¼Œæä¾›åŸºäºhttp restful çš„webæ¥å£</p>
<p>kibanaï¼šå¼€æºçš„ESæ•°æ®åˆ†æå’Œå¯è§†åŒ–å·¥å…·</p>
<p>hadoopï¼šåˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶ï¼Œèƒ½å¤Ÿå¯¹å¤§é‡æ•°æ®è¿›è¡Œåˆ†å¸ƒå¼å¤„ç†çš„å¹³å°</p>
<p>stormï¼šä¸€ä¸ªå…è´¹å¹¶å¼€æºçš„åˆ†å¸ƒå¼å®æ—¶è®¡ç®—ç³»ç»Ÿ</p>
<h5 id="æ¶ˆæ¯é˜Ÿåˆ—çš„é€šä¿¡æ¨¡å¼">æ¶ˆæ¯é˜Ÿåˆ—çš„é€šä¿¡æ¨¡å¼</h5>
<h5 id="ç‚¹å¯¹ç‚¹æ¨¡å¼queue">ç‚¹å¯¹ç‚¹æ¨¡å¼queue</h5>
<p>æ¶ˆæ¯ç”Ÿäº§è€…ç”Ÿäº§æ¶ˆæ¯å‘é€åˆ°queueä¸­ï¼Œç„¶åæ¶ˆæ¯æ¶ˆè´¹è€…ä»queueä¸­å–å‡ºå¹¶æ¶ˆè´¹æ¶ˆæ¯ã€‚ä¸€æ¡æ¶ˆæ¯è¢«æ¶ˆè´¹ä»¥åï¼Œqueueä¸­å°±æ²¡æœ‰äº†ï¼Œä¸å­˜åœ¨é‡å¤æ¶ˆè´¹ã€‚</p>
<h5 id="å‘å¸ƒè®¢é˜…topic">å‘å¸ƒ/è®¢é˜…topic</h5>
<p>æ¶ˆæ¯ç”Ÿäº§è€…ï¼ˆå‘å¸ƒï¼‰å°†æ¶ˆæ¯å‘å¸ƒåˆ°topicä¸­ï¼ŒåŒæ—¶ æœ‰å¤šä¸ªæ¶ˆæ¯æ¶ˆè´¹è€…ï¼ˆè®¢é˜…ï¼‰æ¶ˆè´¹è¯¥æ¶ˆæ¯ã€‚å’Œç‚¹å¯¹ç‚¹æ¨¡å¼ä¸åŒï¼Œå‘å¸ƒåˆ°topicçš„æ¶ˆæ¯ä¼šè¢«æ‰€æœ‰è®¢é˜…è€…æ¶ˆè´¹ï¼ˆç±»ä¼¼äºå…³æ³¨äº†å¾®ä¿¡å…¬ä¼—å·çš„äººéƒ½èƒ½æ”¶åˆ°æ¨é€çš„æ–‡ç« ï¼‰</p>
<p>è¡¥å……ï¼šå‘å¸ƒè®¢é˜…æ¨¡å¼ä¸‹ï¼Œå½“å‘å¸ƒè€…æ¶ˆæ¯é‡å¾ˆå¤§æ—¶ï¼Œæ˜¾ç„¶å•ä¸ªè®¢é˜…è€…çš„å¤„ç†èƒ½åŠ›æ˜¯ä¸è¶³çš„ã€‚å®é™…ä¸Šç°å®åœºæ™¯ä¸­æ˜¯å¤šä¸ªè®¢é˜…è€…èŠ‚ç‚¹ç»„æˆä¸€ä¸ªè®¢é˜…ç»„è´Ÿè½½å‡è¡¡æ¶ˆè´¹topicæ¶ˆæ¯å³åˆ†ç»„è®¢é˜…ï¼Œè¿™æ ·è®¢é˜…è€…å¾ˆå®¹æ˜“å®ç°æ¶ˆè´¹èƒ½åŠ›çš„çº¿æ€§æ‰©å±•ã€‚å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªtopicä¸‹æœ‰å¤šä¸ªqueueï¼Œæ¯ä¸ªqueueæ˜¯ç‚¹å¯¹ç‚¹çš„æ–¹å¼ï¼Œqueueä¹‹é—´æ˜¯å‘å¸ƒè®¢é˜…æ–¹å¼</p>
<h5 id="kafka">kafka</h5>
<p>apache kafkaæœ€åˆç”¨æ¥è®¾è®¡è§£å†³æµ·é‡æ—¥å¿—ä¼ è¾“ç­‰é—®é¢˜ã€‚kafkaä½¿ç”¨scalaç¼–å†™ã€‚æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®æµå¹³å°ï¼Œå¯ä»¥è¿è¡Œåœ¨å•å°æœåŠ¡å™¨ä¸Šï¼Œä¹Ÿå¯ä»¥åœ¨å¤šå°æœåŠ¡å™¨ä¸Šéƒ¨ç½²å½¢æˆé›†ç¾¤ã€‚å®ƒæä¾›äº†å‘å¸ƒå’Œè®¢é˜…åŠŸèƒ½ï¼Œä½¿ç”¨è€…å¯ä»¥å‘é€æ•°æ®åˆ°kafkaä¸­ï¼Œä¹Ÿå¯ä»¥ä»kafkaä¸­è¯»å–æ•°æ®ï¼ˆä»¥ä¾¿è¿›è¡Œåç»­çš„å¤„ç†ï¼‰ã€‚kafkaå…·æœ‰é«˜ååé‡ã€ä½å»¶è¿Ÿã€é«˜å®¹é”™ç­‰ç‰¹ç‚¹ã€‚</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210823161642535.png" >
		<img src="/GoLearning.assets/image-20210823161642535.png"
			
			
			
			loading="lazy"
			alt="image-20210823161642535">
	</a>
	
	<figcaption>image-20210823161642535</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210823161731945.png" >
		<img src="/GoLearning.assets/image-20210823161731945.png"
			
			
			
			loading="lazy"
			alt="image-20210823161731945">
	</a>
	
	<figcaption>image-20210823161731945</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210823161916638.png" >
		<img src="/GoLearning.assets/image-20210823161916638.png"
			
			
			
			loading="lazy"
			alt="image-20210823161916638">
	</a>
	
	<figcaption>image-20210823161916638</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210823162018291.png" >
		<img src="/GoLearning.assets/image-20210823162018291.png"
			
			
			
			loading="lazy"
			alt="image-20210823162018291">
	</a>
	
	<figcaption>image-20210823162018291</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210823162112407.png" >
		<img src="/GoLearning.assets/image-20210823162112407.png"
			
			
			
			loading="lazy"
			alt="image-20210823162112407">
	</a>
	
	<figcaption>image-20210823162112407</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210823162150526.png" >
		<img src="/GoLearning.assets/image-20210823162150526.png"
			
			
			
			loading="lazy"
			alt="image-20210823162150526">
	</a>
	
	<figcaption>image-20210823162150526</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210823162256871.png" >
		<img src="/GoLearning.assets/image-20210823162256871.png"
			
			
			
			loading="lazy"
			alt="image-20210823162256871">
	</a>
	
	<figcaption>image-20210823162256871</figcaption>
	
</figure></p>
<h5 id="kafka-1">kafka</h5>
<ol>
<li>kafkaé›†ç¾¤çš„æ¶æ„
<ol>
<li>broker</li>
<li>topic</li>
<li>partitionåˆ†åŒºï¼ŒæŠŠåŒä¸€ä¸ªtopicåˆ†æˆä¸åŒçš„åˆ†åŒºï¼Œæé«˜è´Ÿè½½
<ol>
<li>leaderï¼šåˆ†åŒºçš„ä¸»èŠ‚ç‚¹ï¼Œboss</li>
<li>flowerï¼šåˆ†åŒºçš„ä»èŠ‚ç‚¹</li>
</ol>
</li>
<li>consumer group</li>
</ol>
</li>
<li>ç”Ÿäº§è€…å¾€kafkaå‘é€æ•°æ®çš„æµç¨‹
<ol>
<li>è·å–é›†ç¾¤çš„leader</li>
<li>ç”Ÿäº§è€…å‘é€ç»™leader</li>
<li>leaderè½ç›˜</li>
<li>followerä»leaderæ‹‰å–</li>
<li>followerè½ç›˜å›å¤ack</li>
<li>leaderå›å¤ç”Ÿäº§è€…</li>
</ol>
</li>
<li>kafkaé€‰æ‹©åˆ†åŒºçš„æ¨¡å¼
<ol>
<li>æŒ‡å®šå¾€å“ªä¸ªåˆ†åŒºå†™</li>
<li>æŒ‡å®škeyï¼Œkafkaæ ¹æ®keyåšhashç„¶åå†³å®šå†™å“ªä¸ªåˆ†åŒº</li>
<li>è½®è¯¢</li>
</ol>
</li>
<li>ç”Ÿäº§è€…å¾€kafkaå‘é€æ•°æ®çš„æ¨¡å¼
<ol>
<li>0 æŠŠæ•°æ®å‘ç»™leaderå°±æˆåŠŸï¼Œæ•ˆç‡æœ€é«˜ã€å®‰å…¨æ€§æœ€ä½</li>
<li>1 æŠŠæ•°æ®å‘ç»™leaderï¼Œç­‰å¾…leaderå›ack</li>
<li>all æŠŠæ•°æ®å‘ç»™leaderï¼Œfolloweræ‹‰å–åå›ackï¼Œleaderå†å›ackï¼Œå®‰å…¨æ€§æœ€é«˜</li>
</ol>
</li>
<li>ä¸ºä»€ä¹ˆå¿«ï¼Ÿ è½ç›˜çš„æ—¶å€™ä¸æ˜¯éšæœºçš„è€Œæ˜¯é¡ºåºçš„</li>
</ol>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210823163451045.png" >
		<img src="/GoLearning.assets/image-20210823163451045.png"
			
			
			
			loading="lazy"
			alt="image-20210823163451045">
	</a>
	
	<figcaption>image-20210823163451045</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210823163547230.png" >
		<img src="/GoLearning.assets/image-20210823163547230.png"
			
			
			
			loading="lazy"
			alt="image-20210823163547230">
	</a>
	
	<figcaption>image-20210823163547230</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210823163621907.png" >
		<img src="/GoLearning.assets/image-20210823163621907.png"
			
			
			
			loading="lazy"
			alt="image-20210823163621907">
	</a>
	
	<figcaption>image-20210823163621907</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210823163708974.png" >
		<img src="/GoLearning.assets/image-20210823163708974.png"
			
			
			
			loading="lazy"
			alt="image-20210823163708974">
	</a>
	
	<figcaption>image-20210823163708974</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210823163926776.png" >
		<img src="/GoLearning.assets/image-20210823163926776.png"
			
			
			
			loading="lazy"
			alt="image-20210823163926776">
	</a>
	
	<figcaption>image-20210823163926776</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210823164008727.png" >
		<img src="/GoLearning.assets/image-20210823164008727.png"
			
			
			
			loading="lazy"
			alt="image-20210823164008727">
	</a>
	
	<figcaption>image-20210823164008727</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210823164021727.png" >
		<img src="/GoLearning.assets/image-20210823164021727.png"
			
			
			
			loading="lazy"
			alt="image-20210823164021727">
	</a>
	
	<figcaption>image-20210823164021727</figcaption>
	
</figure></p>
<h5 id="å¯åŠ¨zookeeper">å¯åŠ¨zookeeper</h5>
<ol>
<li>
<p>ä¸‹è½½kafka</p>
</li>
<li>
<p>kafkaå†…ç½®zookeeper</p>
</li>
<li>
<p>ä¿®æ”¹configä¸‹zookeeper.propertiesé…ç½®æ–‡ä»¶<figure 
	>
	<a href="/GoLearning.assets/image-20210823191107893.png" >
		<img src="/GoLearning.assets/image-20210823191107893.png"
			
			
			
			loading="lazy"
			alt="image-20210823191107893">
	</a>
	
	<figcaption>image-20210823191107893</figcaption>
	
</figure></p>
</li>
<li>
<p>å‘½ä»¤è¡Œå¯åŠ¨zookeeper</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">D:<span class="se">\S</span>oftwares<span class="se">\k</span>afka_2.12-2.8.0&gt;bin<span class="se">\w</span>indows<span class="se">\z</span>ookeeper-server-start.bat config<span class="se">\z</span>ookeeper.properties
</code></pre></div></li>
<li>
<p>ä¿®æ”¹configä¸‹kafka.propertiesé…ç½®æ–‡ä»¶<figure 
	>
	<a href="/GoLearning.assets/image-20210823192529505.png" >
		<img src="/GoLearning.assets/image-20210823192529505.png"
			
			
			
			loading="lazy"
			alt="image-20210823192529505">
	</a>
	
	<figcaption>image-20210823192529505</figcaption>
	
</figure></p>
</li>
<li>
<p>å‘½ä»¤è¡Œå¯åŠ¨kafka</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">D</span><span class="p">:</span><span class="err">\</span><span class="nx">Softwares</span><span class="err">\</span><span class="nx">kafka_2</span><span class="mf">.12</span><span class="o">-</span><span class="mf">2.8.0</span><span class="p">&gt;</span><span class="nx">bin</span><span class="err">\</span><span class="nx">windows</span><span class="err">\</span><span class="nx">kafka</span><span class="o">-</span><span class="nx">server</span><span class="o">-</span><span class="nx">start</span><span class="p">.</span><span class="nx">bat</span> <span class="nx">config</span><span class="err">\</span><span class="nx">server</span><span class="p">.</span><span class="nx">properties</span>
</code></pre></div><p><strong>è¦ç”¨ç®¡ç†å‘˜èº«ä»½æ‰“å¼€å‘½ä»¤è¡Œ</strong></p>
</li>
</ol>
<h5 id="zookeeper">zookeeper</h5>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210823192857710.png" >
		<img src="/GoLearning.assets/image-20210823192857710.png"
			
			
			
			loading="lazy"
			alt="image-20210823192857710">
	</a>
	
	<figcaption>image-20210823192857710</figcaption>
	
</figure></p>
<p>ç±»ä¼¼äºconsul æœåŠ¡æ³¨å†Œä¸å‘ç°</p>
<h5 id="tailç¬¬ä¸‰æ–¹æ—¥å¿—åº“demo">tailç¬¬ä¸‰æ–¹æ—¥å¿—åº“demo</h5>
<p>tailä½œç”¨ å°è¯•è¯»å–æŸä¸ªlogæ—¥å¿—æ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;github.com/nxadm/tail&#34;</span>
   <span class="s">&#34;time&#34;</span>
<span class="p">)</span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">//tailç”¨æ³•
</span><span class="c1"></span>   <span class="nx">fileName</span><span class="o">:=</span><span class="s">&#34;./my.log&#34;</span>
   <span class="nx">config</span><span class="o">:=</span><span class="nx">tail</span><span class="p">.</span><span class="nx">Config</span><span class="p">{</span>
      <span class="nx">Location</span><span class="p">:</span>    <span class="o">&amp;</span><span class="nx">tail</span><span class="p">.</span><span class="nx">SeekInfo</span><span class="p">{</span><span class="nx">Offset</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span><span class="nx">Whence</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="c1">//ä»æ–‡ä»¶çš„é‚£ä¸ªåœ°æ–¹å¼€å§‹è¯»
</span><span class="c1"></span>      <span class="nx">ReOpen</span><span class="p">:</span>      <span class="kc">true</span><span class="p">,</span> <span class="c1">//é‡æ–°æ‰“å¼€
</span><span class="c1"></span>      <span class="nx">MustExist</span><span class="p">:</span>   <span class="kc">false</span><span class="p">,</span>    <span class="c1">//æ–‡ä»¶ä¸å­˜åœ¨ä¸æŠ¥é”™
</span><span class="c1"></span>      <span class="nx">Poll</span><span class="p">:</span>        <span class="kc">true</span><span class="p">,</span>
      <span class="nx">Pipe</span><span class="p">:</span>        <span class="kc">false</span><span class="p">,</span>
      <span class="nx">Follow</span><span class="p">:</span>      <span class="kc">true</span><span class="p">,</span> <span class="c1">//æ˜¯å¦è·Ÿéš
</span><span class="c1"></span>      <span class="nx">MaxLineSize</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">RateLimiter</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span>
      <span class="nx">Logger</span><span class="p">:</span>      <span class="kc">nil</span><span class="p">,</span>
   <span class="p">}</span>
   <span class="nx">tails</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">tail</span><span class="p">.</span><span class="nf">TailFile</span><span class="p">(</span><span class="nx">fileName</span><span class="p">,</span> <span class="nx">config</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;tail file failed , err: &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="kd">var</span> <span class="p">(</span>
      <span class="nx">line</span> <span class="o">*</span><span class="nx">tail</span><span class="p">.</span><span class="nx">Line</span>
      <span class="nx">ok</span> <span class="kt">bool</span>
   <span class="p">)</span>

   <span class="k">for</span> <span class="p">{</span>
      <span class="nx">line</span><span class="p">,</span> <span class="nx">ok</span> <span class="p">=</span><span class="o">&lt;-</span><span class="nx">tails</span><span class="p">.</span><span class="nx">Lines</span>
      <span class="k">if</span> <span class="p">!</span><span class="nx">ok</span> <span class="p">{</span>
         <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;tail file close reopen , filename :%s\n&#34;</span><span class="p">,</span><span class="nx">tails</span><span class="p">.</span><span class="nx">Filename</span><span class="p">)</span>
         <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
         <span class="k">continue</span>
      <span class="p">}</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;msg: &#34;</span><span class="p">,</span><span class="nx">line</span><span class="p">.</span><span class="nx">Text</span><span class="p">)</span>
   <span class="p">}</span>

<span class="p">}</span>
</code></pre></div><h5 id="saramaç¬¬ä¸‰æ–¹åº“demo">saramaç¬¬ä¸‰æ–¹åº“demo</h5>
<p>ä½œç”¨:å‘kafkaå‘é€æ¶ˆæ¯</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;github.com/Shopify/sarama&#34;</span>
<span class="p">)</span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">config</span> <span class="o">:=</span> <span class="nx">sarama</span><span class="p">.</span><span class="nf">NewConfig</span><span class="p">()</span>
   <span class="c1">//tailfåŒ…ä½¿ç”¨
</span><span class="c1"></span>   <span class="nx">config</span><span class="p">.</span><span class="nx">Producer</span><span class="p">.</span><span class="nx">RequiredAcks</span><span class="p">=</span> <span class="nx">sarama</span><span class="p">.</span><span class="nx">WaitForAll</span>  <span class="c1">//å‘é€å®Œæ•°æ®éœ€è¦ leader å’Œ follower éƒ½ç¡®è®¤
</span><span class="c1"></span>   <span class="nx">config</span><span class="p">.</span><span class="nx">Producer</span><span class="p">.</span><span class="nx">Partitioner</span> <span class="p">=</span> <span class="nx">sarama</span><span class="p">.</span><span class="nx">NewRandomPartitioner</span>  <span class="c1">//æ–°é€‰å‡ºä¸€ä¸ª partitioner
</span><span class="c1"></span>   <span class="nx">config</span><span class="p">.</span><span class="nx">Producer</span><span class="p">.</span><span class="nx">Return</span><span class="p">.</span><span class="nx">Successes</span> <span class="p">=</span> <span class="kc">true</span> <span class="c1">//æˆåŠŸäº¤ä»˜çš„æ¶ˆæ¯å°†åœ¨success channel è¿”å›
</span><span class="c1"></span>   <span class="c1">//æ„é€ ä¸€ä¸ªæ¶ˆæ¯
</span><span class="c1"></span>   <span class="nx">msg</span><span class="o">:=</span> <span class="o">&amp;</span><span class="nx">sarama</span><span class="p">.</span><span class="nx">ProducerMessage</span><span class="p">{}</span>
   <span class="nx">msg</span><span class="p">.</span><span class="nx">Topic</span> <span class="p">=</span> <span class="s">&#34;web_log&#34;</span>
   <span class="nx">msg</span><span class="p">.</span><span class="nx">Value</span> <span class="p">=</span> <span class="nx">sarama</span><span class="p">.</span><span class="nf">StringEncoder</span><span class="p">(</span><span class="s">&#34;this is a test blog&#34;</span><span class="p">)</span>
   <span class="c1">//è¿æ¥kafka
</span><span class="c1"></span>   <span class="nx">client</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">sarama</span><span class="p">.</span><span class="nf">NewSyncProducer</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;127.0.0.1:9092&#34;</span><span class="p">},</span> <span class="nx">config</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;producer closed, err : &#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="k">defer</span> <span class="nx">client</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
   <span class="c1">//å‘é€æ¶ˆæ¯
</span><span class="c1"></span>   <span class="nx">pid</span><span class="p">,</span> <span class="nx">offSet</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">client</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;send msg failed , err : &#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;pid:%v offSet:%v\n&#34;</span><span class="p">,</span><span class="nx">pid</span><span class="p">,</span><span class="nx">offSet</span><span class="p">)</span>

<span class="p">}</span>
</code></pre></div><p><figure 
	>
	<a href="/GoLearning.assets/image-20210823202230801.png" >
		<img src="/GoLearning.assets/image-20210823202230801.png"
			
			
			
			loading="lazy"
			alt="image-20210823202230801">
	</a>
	
	<figcaption>image-20210823202230801</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210823202240537.png" >
		<img src="/GoLearning.assets/image-20210823202240537.png"
			
			
			
			loading="lazy"
			alt="image-20210823202240537">
	</a>
	
	<figcaption>image-20210823202240537</figcaption>
	
</figure></p>
<p>ç´¢å¼•</p>
<h5 id="æ¥ä¸‹æ¥å°±æ˜¯æ—¥å¿—æ”¶é›†é¡¹ç›®">æ¥ä¸‹æ¥å°±æ˜¯æ—¥å¿—æ”¶é›†é¡¹ç›®</h5>
<ul>
<li>åˆå§‹åŒ–sarama è®©ä»–è¿æ¥ä¸Škafka ä»¥ä¾¿ç»™kafkaå‘é€æ¶ˆæ¯</li>
<li>åˆå§‹åŒ–tail è®©ä»–èƒ½å¤Ÿè¯»å–æ—¥å¿—æ–‡ä»¶</li>
<li>ä½¿ç”¨åˆå§‹åŒ–å¥½çš„sarama å°†tailè¯»å–åˆ°çš„ä¸œè¥¿å‘é€ç»™kafka</li>
</ul>
<p>kafkaæ¨¡å—ä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">kafka</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;github.com/Shopify/sarama&#34;</span>
<span class="p">)</span>
<span class="c1">//ä¸“é—¨å¾€kafkaå†™æ—¥å¿—çš„æ¨¡å—
</span><span class="c1"></span><span class="kd">var</span> <span class="p">(</span>
   <span class="nx">client</span> <span class="nx">sarama</span><span class="p">.</span><span class="nx">SyncProducer</span>  <span class="c1">//å£°æ˜ä¸€ä¸ªå…¨å±€çš„è¿æ¥kafkaçš„ç”Ÿäº§è€…client
</span><span class="c1"></span><span class="p">)</span>

<span class="c1">//Init åˆå§‹åŒ–client
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">Init</span><span class="p">(</span><span class="nx">address</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">config</span> <span class="o">:=</span> <span class="nx">sarama</span><span class="p">.</span><span class="nf">NewConfig</span><span class="p">()</span>
   <span class="c1">//tailfåŒ…ä½¿ç”¨
</span><span class="c1"></span>   <span class="nx">config</span><span class="p">.</span><span class="nx">Producer</span><span class="p">.</span><span class="nx">RequiredAcks</span><span class="p">=</span> <span class="nx">sarama</span><span class="p">.</span><span class="nx">WaitForAll</span>  <span class="c1">//å‘é€å®Œæ•°æ®éœ€è¦ leader å’Œ follower éƒ½ç¡®è®¤
</span><span class="c1"></span>   <span class="nx">config</span><span class="p">.</span><span class="nx">Producer</span><span class="p">.</span><span class="nx">Partitioner</span> <span class="p">=</span> <span class="nx">sarama</span><span class="p">.</span><span class="nx">NewRandomPartitioner</span>  <span class="c1">//æ–°é€‰å‡ºä¸€ä¸ª partitioner
</span><span class="c1"></span>   <span class="nx">config</span><span class="p">.</span><span class="nx">Producer</span><span class="p">.</span><span class="nx">Return</span><span class="p">.</span><span class="nx">Successes</span> <span class="p">=</span> <span class="kc">true</span> <span class="c1">//æˆåŠŸäº¤ä»˜çš„æ¶ˆæ¯å°†åœ¨success channel è¿”å›
</span><span class="c1"></span>   <span class="c1">//è¿æ¥kafka
</span><span class="c1"></span>   <span class="nx">client</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">sarama</span><span class="p">.</span><span class="nf">NewSyncProducer</span><span class="p">(</span><span class="nx">address</span><span class="p">,</span> <span class="nx">config</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;producer closed, err : &#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="k">return</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">SendToKafka</span><span class="p">(</span><span class="nx">topic</span><span class="p">,</span> <span class="nx">msg</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">//æ„é€ ä¸€ä¸ªæ¶ˆæ¯
</span><span class="c1"></span>   <span class="nx">saramaMsg</span><span class="o">:=</span> <span class="o">&amp;</span><span class="nx">sarama</span><span class="p">.</span><span class="nx">ProducerMessage</span><span class="p">{}</span>
   <span class="nx">saramaMsg</span><span class="p">.</span><span class="nx">Topic</span> <span class="p">=</span> <span class="nx">topic</span>
   <span class="nx">saramaMsg</span><span class="p">.</span><span class="nx">Value</span> <span class="p">=</span> <span class="nx">sarama</span><span class="p">.</span><span class="nf">StringEncoder</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span>
   <span class="c1">//å‘é€æ¶ˆæ¯
</span><span class="c1"></span>   <span class="nx">pid</span><span class="p">,</span> <span class="nx">offSet</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">client</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="nx">saramaMsg</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;send msg failed , err : &#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;pid:%v offSet:%v\n&#34;</span><span class="p">,</span><span class="nx">pid</span><span class="p">,</span><span class="nx">offSet</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><p>tailæ¨¡å—ä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">tail</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;github.com/nxadm/tail&#34;</span>
<span class="p">)</span>
<span class="kd">var</span> <span class="nx">tails</span> <span class="o">*</span><span class="nx">tail</span><span class="p">.</span><span class="nx">Tail</span>
<span class="c1">//Init ä¸“é—¨æ”¶é›†æ—¥å¿—
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">Init</span><span class="p">(</span><span class="nx">address</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">){</span>
   <span class="c1">//tailç”¨æ³•
</span><span class="c1"></span>   <span class="nx">fileName</span><span class="o">:=</span><span class="nx">address</span>
   <span class="nx">config</span><span class="o">:=</span><span class="nx">tail</span><span class="p">.</span><span class="nx">Config</span><span class="p">{</span>
      <span class="nx">Location</span><span class="p">:</span>    <span class="o">&amp;</span><span class="nx">tail</span><span class="p">.</span><span class="nx">SeekInfo</span><span class="p">{</span><span class="nx">Offset</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span><span class="nx">Whence</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="c1">//ä»æ–‡ä»¶çš„é‚£ä¸ªåœ°æ–¹å¼€å§‹è¯»
</span><span class="c1"></span>      <span class="nx">ReOpen</span><span class="p">:</span>      <span class="kc">true</span><span class="p">,</span> <span class="c1">//é‡æ–°æ‰“å¼€
</span><span class="c1"></span>      <span class="nx">MustExist</span><span class="p">:</span>   <span class="kc">false</span><span class="p">,</span>    <span class="c1">//æ–‡ä»¶ä¸å­˜åœ¨ä¸æŠ¥é”™
</span><span class="c1"></span>      <span class="nx">Poll</span><span class="p">:</span>        <span class="kc">true</span><span class="p">,</span>
      <span class="nx">Pipe</span><span class="p">:</span>        <span class="kc">false</span><span class="p">,</span>
      <span class="nx">Follow</span><span class="p">:</span>      <span class="kc">true</span><span class="p">,</span> <span class="c1">//æ˜¯å¦è·Ÿéš
</span><span class="c1"></span>      <span class="nx">MaxLineSize</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">RateLimiter</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span>
      <span class="nx">Logger</span><span class="p">:</span>      <span class="kc">nil</span><span class="p">,</span>
   <span class="p">}</span>
   <span class="nx">tails</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">tail</span><span class="p">.</span><span class="nf">TailFile</span><span class="p">(</span><span class="nx">fileName</span><span class="p">,</span> <span class="nx">config</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;tail file failed , err: &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="k">return</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">ReadLog</span><span class="p">()</span> <span class="o">&lt;-</span><span class="kd">chan</span> <span class="o">*</span><span class="nx">tail</span><span class="p">.</span><span class="nx">Line</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">tails</span><span class="p">.</span><span class="nx">Lines</span>
<span class="p">}</span>
</code></pre></div><p>mainæ¨¡å—ä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;src/code.oldboyedu.com/logAgent/kafka&#34;</span>
   <span class="nx">tail</span> <span class="s">&#34;src/code.oldboyedu.com/logAgent/tail_log&#34;</span>
   <span class="s">&#34;time&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>

   <span class="c1">//1.åˆå§‹åŒ–kafkaè¿æ¥
</span><span class="c1"></span>   <span class="nx">err</span> <span class="o">:=</span> <span class="nx">kafka</span><span class="p">.</span><span class="nf">Init</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;127.0.0.1:9092&#34;</span><span class="p">})</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;init kafka failed, err : &#34;</span> <span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;init kafka success!&#34;</span><span class="p">)</span>
   <span class="c1">//2.æ‰“å¼€æ—¥å¿—æ–‡ä»¶å‡†å¤‡æ”¶é›†æ—¥å¿—
</span><span class="c1"></span>   <span class="nx">err</span> <span class="p">=</span> <span class="nx">tail</span><span class="p">.</span><span class="nf">Init</span><span class="p">(</span><span class="s">&#34;./my.log&#34;</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;init taillog failed, err : &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;init tail success!&#34;</span><span class="p">)</span>

   <span class="nf">run</span><span class="p">()</span>

<span class="p">}</span>

<span class="kd">func</span> <span class="nf">run</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">//1.æ”¶é›†æ—¥å¿—
</span><span class="c1"></span>   <span class="k">for</span>  <span class="p">{</span>
      <span class="k">select</span> <span class="p">{</span>
      <span class="k">case</span> <span class="nx">line</span><span class="o">:=&lt;-</span><span class="nx">tail</span><span class="p">.</span><span class="nf">ReadLog</span><span class="p">():</span>
         <span class="c1">//2.å‘é€ç»™kafka
</span><span class="c1"></span>         <span class="nx">kafka</span><span class="p">.</span><span class="nf">SendToKafka</span><span class="p">(</span><span class="s">&#34;web_log&#34;</span><span class="p">,</span><span class="nx">line</span><span class="p">.</span><span class="nx">Text</span><span class="p">)</span>
      <span class="k">default</span><span class="p">:</span>
         <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
      <span class="p">}</span>
   <span class="p">}</span>

<span class="p">}</span>
</code></pre></div><p>å®šä¹‰æ¶ˆè´¹è€…</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">bin<span class="se">\w</span>indows<span class="se">\k</span>afka-console-consumer.bat --bootstrap-server<span class="o">=</span>127.0.0.1:9092 --topic<span class="o">=</span>web_log --from-beginning
</code></pre></div><p><figure 
	>
	<a href="/GoLearning.assets/image-20210823210549292.png" >
		<img src="/GoLearning.assets/image-20210823210549292.png"
			
			
			
			loading="lazy"
			alt="image-20210823210549292">
	</a>
	
	<figcaption>image-20210823210549292</figcaption>
	
</figure></p>
<p>ä¼˜åŒ–ç‰ˆé…ç½®æ–‡ä»¶ä¸­è¯»å–</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;gopkg.in/ini.v1&#34;</span>
   <span class="s">&#34;src/code.oldboyedu.com/logAgent/kafka&#34;</span>
   <span class="nx">tail</span> <span class="s">&#34;src/code.oldboyedu.com/logAgent/tail_log&#34;</span>
   <span class="s">&#34;time&#34;</span>
<span class="p">)</span>

<span class="kd">type</span> <span class="nx">appConf</span> <span class="kd">struct</span> <span class="p">{</span>
   <span class="nx">KafkaConf</span> <span class="s">`ini:&#34;Kafka&#34;`</span>
   <span class="nx">TailLogConf</span> <span class="s">`ini:&#34;Taillog&#34;`</span>
<span class="p">}</span>
<span class="kd">type</span> <span class="nx">KafkaConf</span> <span class="kd">struct</span> <span class="p">{</span>
   <span class="nx">Address</span> <span class="kt">string</span> <span class="s">`ini:&#34;Address&#34;`</span>
   <span class="nx">Topic</span> <span class="kt">string</span> <span class="s">`ini:&#34;Topic&#34;`</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">TailLogConf</span> <span class="kd">struct</span> <span class="p">{</span>
   <span class="nx">FileName</span> <span class="kt">string</span> <span class="s">`ini:&#34;Filename&#34;`</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">appCfg</span> <span class="p">=</span><span class="nb">new</span><span class="p">(</span><span class="nx">appConf</span><span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">//0.åŠ è½½é…ç½®æ–‡ä»¶ è·å–ip:ç«¯å£ æ—¥å¿—æ–‡ä»¶ å‘é€çš„topic
</span><span class="c1"></span>   <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ini</span><span class="p">.</span><span class="nf">MapTo</span><span class="p">(</span><span class="nx">appCfg</span><span class="p">,</span> <span class="s">&#34;./config.ini&#34;</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;config init failed, err : &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>

   <span class="c1">//1.åˆå§‹åŒ–kafkaè¿æ¥
</span><span class="c1"></span>   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">appCfg</span><span class="p">.</span><span class="nx">KafkaConf</span><span class="p">.</span><span class="nx">Address</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">appCfg</span><span class="p">.</span><span class="nx">KafkaConf</span><span class="p">.</span><span class="nx">Topic</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">appCfg</span><span class="p">.</span><span class="nx">TailLogConf</span><span class="p">.</span><span class="nx">FileName</span><span class="p">)</span>
   <span class="nx">err</span> <span class="p">=</span> <span class="nx">kafka</span><span class="p">.</span><span class="nf">Init</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span><span class="nx">appCfg</span><span class="p">.</span><span class="nx">KafkaConf</span><span class="p">.</span><span class="nx">Address</span><span class="p">})</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;init kafka failed, err : &#34;</span> <span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;init kafka success!&#34;</span><span class="p">)</span>
   <span class="c1">//2.æ‰“å¼€æ—¥å¿—æ–‡ä»¶å‡†å¤‡æ”¶é›†æ—¥å¿—
</span><span class="c1"></span>   <span class="nx">err</span> <span class="p">=</span> <span class="nx">tail</span><span class="p">.</span><span class="nf">Init</span><span class="p">(</span><span class="nx">appCfg</span><span class="p">.</span><span class="nx">TailLogConf</span><span class="p">.</span><span class="nx">FileName</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;init taillog failed, err : &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;init tail success!&#34;</span><span class="p">)</span>

   <span class="nf">run</span><span class="p">()</span>

<span class="p">}</span>


<span class="kd">func</span> <span class="nf">run</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">//1.æ”¶é›†æ—¥å¿—
</span><span class="c1"></span>   <span class="k">for</span>  <span class="p">{</span>
      <span class="k">select</span> <span class="p">{</span>
      <span class="k">case</span> <span class="nx">line</span><span class="o">:=&lt;-</span><span class="nx">tail</span><span class="p">.</span><span class="nf">ReadLog</span><span class="p">():</span>
         <span class="c1">//2.å‘é€ç»™kafka
</span><span class="c1"></span>         <span class="nx">kafka</span><span class="p">.</span><span class="nf">SendToKafka</span><span class="p">(</span><span class="nx">appCfg</span><span class="p">.</span><span class="nx">KafkaConf</span><span class="p">.</span><span class="nx">Topic</span><span class="p">,</span><span class="nx">line</span><span class="p">.</span><span class="nx">Text</span><span class="p">)</span>
      <span class="k">default</span><span class="p">:</span>
         <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
      <span class="p">}</span>
   <span class="p">}</span>

<span class="p">}</span>
</code></pre></div><h5 id="å†…å®¹å¤ä¹ ">å†…å®¹å¤ä¹ </h5>
<h5 id="go-module-1">go module</h5>
<p>ä¾èµ–ç®¡ç†å·¥å…·</p>
<h5 id="context-2">context</h5>
<p>goroutineç®¡ç†</p>
<p><code>context.Context</code></p>
<p>ä¸¤ä¸ªæ ¹èŠ‚ç‚¹ context.todo context.background</p>
<p>å››ä¸ªæ–¹æ³• context.withTimeout() context.withCancel() context.withdeadline() context.withvalue()</p>
<h5 id="æ—¥å¿—æ”¶é›†é¡¹ç›®-1">æ—¥å¿—æ”¶é›†é¡¹ç›®</h5>
<p>ELK:éƒ¨ç½²çš„æ—¶å€™éº»çƒ¦,æ¯ä¸€ä¸ªfilebeatéƒ½éœ€è¦é…ç½®ä¸€ä¸ªé…ç½®æ–‡ä»¶</p>
<p>ä½¿ç”¨etcdæ¥ç®¡ç†è¢«æ”¶é›†çš„æ—¥å¿—é¡¹</p>
<h5 id="é¡¹ç›®çš„æ¶æ„">é¡¹ç›®çš„æ¶æ„</h5>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210824195131980.png" >
		<img src="/GoLearning.assets/image-20210824195131980.png"
			
			
			
			loading="lazy"
			alt="image-20210824195131980">
	</a>
	
	<figcaption>image-20210824195131980</figcaption>
	
</figure></p>
<h5 id="ä¸ŠèŠ‚è¯¾é¡¹ç›®è¿›åº¦">ä¸ŠèŠ‚è¯¾é¡¹ç›®è¿›åº¦</h5>
<ol>
<li>kafka:æ¶ˆæ¯é˜Ÿåˆ—</li>
<li>tailf:ä»æ–‡ä»¶é‡Œè¯»æ—¥å¿—</li>
<li>sarama:å‘kafkaå‘é€æ•°æ®</li>
<li>go-ini:è§£æé…ç½®æ–‡ä»¶</li>
</ol>
<h5 id="ä»Šæ—¥å†…å®¹-7">ä»Šæ—¥å†…å®¹</h5>
<h5 id="etcd">etcd</h5>
<h5 id="ä½¿ç”¨etcdä¼˜åŒ–æ—¥å¿—æ”¶é›†é¡¹ç›®">ä½¿ç”¨etcdä¼˜åŒ–æ—¥å¿—æ”¶é›†é¡¹ç›®</h5>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210824195924259.png" >
		<img src="/GoLearning.assets/image-20210824195924259.png"
			
			
			
			loading="lazy"
			alt="image-20210824195924259">
	</a>
	
	<figcaption>image-20210824195924259</figcaption>
	
</figure></p>
<p>raftåè®®</p>
<ul>
<li>é€‰ä¸¾</li>
<li>æ—¥å¿—å¤åˆ¶æœºåˆ¶</li>
<li>å¼‚å¸¸å¤„ç†</li>
</ul>
<p>zookeeperçš„zadåè®®å’Œraftåè®®çš„åŒºåˆ«</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210824201151410.png" >
		<img src="/GoLearning.assets/image-20210824201151410.png"
			
			
			
			loading="lazy"
			alt="image-20210824201151410">
	</a>
	
	<figcaption>image-20210824201151410</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210824201255712.png" >
		<img src="/GoLearning.assets/image-20210824201255712.png"
			
			
			
			loading="lazy"
			alt="image-20210824201255712">
	</a>
	
	<figcaption>image-20210824201255712</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210824201531623.png" >
		<img src="/GoLearning.assets/image-20210824201531623.png"
			
			
			
			loading="lazy"
			alt="image-20210824201531623">
	</a>
	
	<figcaption>image-20210824201531623</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210824201641847.png" >
		<img src="/GoLearning.assets/image-20210824201641847.png"
			
			
			
			loading="lazy"
			alt="image-20210824201641847">
	</a>
	
	<figcaption>image-20210824201641847</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210824201859917.png" >
		<img src="/GoLearning.assets/image-20210824201859917.png"
			
			
			
			loading="lazy"
			alt="image-20210824201859917">
	</a>
	
	<figcaption>image-20210824201859917</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210824201921279.png" >
		<img src="/GoLearning.assets/image-20210824201921279.png"
			
			
			
			loading="lazy"
			alt="image-20210824201921279">
	</a>
	
	<figcaption>image-20210824201921279</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210824202013396.png" >
		<img src="/GoLearning.assets/image-20210824202013396.png"
			
			
			
			loading="lazy"
			alt="image-20210824202013396">
	</a>
	
	<figcaption>image-20210824202013396</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210824202041613.png" >
		<img src="/GoLearning.assets/image-20210824202041613.png"
			
			
			
			loading="lazy"
			alt="image-20210824202041613">
	</a>
	
	<figcaption>image-20210824202041613</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210824202051395.png" >
		<img src="/GoLearning.assets/image-20210824202051395.png"
			
			
			
			loading="lazy"
			alt="image-20210824202051395">
	</a>
	
	<figcaption>image-20210824202051395</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210824202203749.png" >
		<img src="/GoLearning.assets/image-20210824202203749.png"
			
			
			
			loading="lazy"
			alt="image-20210824202203749">
	</a>
	
	<figcaption>image-20210824202203749</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210824202403398.png" >
		<img src="/GoLearning.assets/image-20210824202403398.png"
			
			
			
			loading="lazy"
			alt="image-20210824202403398">
	</a>
	
	<figcaption>image-20210824202403398</figcaption>
	
</figure></p>
<p>æ¸…åå­¦ç¥å°¹æˆ</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210826231049867.png" >
		<img src="/GoLearning.assets/image-20210826231049867.png"
			
			
			
			loading="lazy"
			alt="image-20210826231049867">
	</a>
	
	<figcaption>image-20210826231049867</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210826231828312.png" >
		<img src="/GoLearning.assets/image-20210826231828312.png"
			
			
			
			loading="lazy"
			alt="image-20210826231828312">
	</a>
	
	<figcaption>image-20210826231828312</figcaption>
	
</figure></p>
<h4 id="logtransfer">LogTransfer</h4>
<p>ä»kafkaé‡Œé¢æŠŠæ—¥å¿—å–å‡ºæ¥,å†™å…¥ES</p>
<h5 id="elastic-search">Elastic Search</h5>
<p>ESæ˜¯ä¸€ä¸ªåŸºäºluceneæ„å»ºçš„å¼€æºçš„/åˆ†å¸ƒå¼/restfulæ¥å£çš„å…¨æ–‡æœç´¢å¼•æ“.elastic searchè¿˜æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ–‡æ¡£æ•°æ®åº“,å…¶ä¸­æ¯ä¸ªå­—æ®µå‡å¯è¢«ç´¢å¼•,è€Œä¸”æ¯ä¸ªå­—æ®µçš„æ•°æ®å‡å¯è¢«æœç´¢,ESèƒ½å¤Ÿæ¨ªå‘æ‰©å±•è‡³æ•°ä»¥ç™¾è®¡çš„æœåŠ¡å™¨å­˜å‚¨ä»¥åŠå¤„ç†PBçº§çš„æ•°æ®.å¯ä»¥åœ¨æçŸ­çš„æ—¶é—´å†…å­˜å‚¨/æœç´¢å’Œåˆ†æå¤§é‡çš„æ•°æ®.é€šå¸¸ä½œä¸ºå…·æœ‰å¤æ‚æœç´¢åœºæ™¯æƒ…å†µä¸‹çš„æ ¸å¿ƒå‘åŠ¨æœº.</p>
<h5 id="elasticsearchèƒ½åšä»€ä¹ˆ">ElasticSearchèƒ½åšä»€ä¹ˆ</h5>
<ol>
<li>å½“ä½ ç»è¥ä¸€å®¶ç½‘ä¸Šå•†åº—,ä½ å¯ä»¥è®©ä½ çš„å®¢æˆ·æœç´¢ä½ å–çš„å•†å“.åœ¨è¿™ç§æƒ…å†µä¸‹,ä½ å¯ä»¥ä½¿ç”¨Elastic searchæ¥å­˜å‚¨ä½ çš„æ•´ä¸ªäº§å“ç›®å½•å’Œåº“å­˜ä¿¡æ¯,ä¸ºå®¢æˆ·æä¾›ç²¾å‡†æœç´¢,å¯ä»¥ä¸ºå®¢æˆ·æ¨èç›¸å…³å•†å“.</li>
<li>å½“ä½ æƒ³æ”¶é›†æ—¥å¿—æˆ–è€…äº¤æ˜“æ•°æ®çš„æ—¶å€™,éœ€è¦åˆ†æå’ŒæŒ–æ˜è¿™äº›æ•°æ®,å¯»æ‰¾è¶‹åŠ¿,è¿›è¡Œç»Ÿè®¡,æ€»ç»“,æˆ–è€…å‘ç°å¼‚å¸¸.åœ¨è¿™ç§æƒ…å†µä¸‹,ä½ å¯ä»¥ä½¿ç”¨logstashæˆ–è€…å…¶ä»–å·¥å…·æ¥è¿›è¡Œæ”¶é›†æ•°æ®,å½“è¿™å¼•èµ·æ•°æ®å­˜å‚¨åˆ°elastic searchä¸­.ä½ å¯ä»¥æœç´¢å’Œæ±‡æ€»è¿™äº›æ•°æ®,æ‰¾åˆ°ä»»ä½•ä½ æ„Ÿå…´è¶£çš„ä¿¡æ¯</li>
<li>å¯¹äºç¨‹åºå‘˜æ¥è¯´,æ¯”è¾ƒæœ‰åçš„æ¡ˆä¾‹æ˜¯github.githubçš„æœç´¢æ˜¯åŸºäºelasticsearchæ„å»ºçš„,åœ¨github.com/searché¡µé¢,ä½ å¯ä»¥æœç´¢é¡¹ç›®,ç”¨æˆ·/issue/pull request,è¿˜æœ‰ä»£ç .å…¬æœ‰40-50ä¸ªç´¢å¼•åº“,åˆ†åˆ«ç”¨äºç´¢å¼•ç½‘ç«™éœ€è¦è·Ÿè¸ªçš„å„ç§æ•°æ®,è™½ç„¶åªç´¢å¼•é¡¹ç›®çš„ä¸»åˆ†æ”¯master,ä½†è¿™ä¸ªæ•°æ®é‡ä¾ç„¶å·¨å¤§,åŒ…æ‹¬20äº¿ä¸ªç´¢å¼•æ–‡æ¡£,30TBçš„ç´¢å¼•æ–‡ä»¶.</li>
</ol>
<h5 id="elasticsearchåŸºæœ¬æ¦‚å¿µ">ElasticSearchåŸºæœ¬æ¦‚å¿µ</h5>
<h5 id="near-realtime-å‡ ä¹å®æ—¶">near realtime å‡ ä¹å®æ—¶</h5>
<p>elasticsearchæ˜¯ä¸€ä¸ªå‡ ä¹å®æ—¶çš„æœç´¢å‡­æ¡,æ„æ€æ˜¯,ä»ç´¢å¼•ä¸€ä¸ªæ–‡æ¡£åˆ°è¿™ä¸ªæ–‡æ¡£å¯ä»¥è¢«æœç´¢åªéœ€è¦ä¸€ç‚¹ç‚¹çš„å»¶è¿Ÿ,è¿™ä¸ªæ—¶é—´ä¸€åŠä¸ºæ¯«ç§’çº§</p>
<h5 id="clusteré›†ç¾¤">clusteré›†ç¾¤</h5>
<p>é›†ç¾¤æ˜¯ä¸€ä¸ªæˆ–è€…å¤šä¸ªèŠ‚ç‚¹æœåŠ¡å™¨çš„é›†åˆ,è¿™äº›èŠ‚ç‚¹å…±åŒä¿å­˜æ•´ä¸ªæ•°æ®,å¹¶åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šæä¾›è”åˆç´¢å¼•å’Œæœç´¢åŠŸèƒ½.ä¸€ä¸ªé›†ç¾¤ç”±ä¸€ä¸ªå”¯ä¸€é›†ç¾¤IDç¡®å®š,å¹¶æŒ‡å®šä¸€ä¸ªé›†ç¾¤å(é»˜è®¤ä¸ºelasticsearch).è¯¥é›†ç¾¤åéå¸¸é‡è¦,å› ä¸ºèŠ‚ç‚¹å¯ä»¥é€šè¿‡è¿™ä¸ªé›†ç¾¤ååŠ å…¥é›†ç¾¤,ä¸€ä¸ªèŠ‚ç‚¹åªèƒ½æ˜¯é›†ç¾¤çš„ä¸€éƒ¨åˆ†.</p>
<p>ç¡®ä¿åœ¨ä¸åŒçš„ç¯å¢ƒä¸­ä¸è¦ä½¿ç”¨ç›¸åŒçš„é›†ç¾¤åç§°,å¦åˆ™å¯èƒ½ä¼šå¯¼è‡´è¿æ¥é”™è¯¯çš„é›†ç¾¤èŠ‚ç‚¹,ä¾‹å¦‚ä½ å¯ä»¥ä½¿ç”¨logging&ndash;dev/ logging-stage/ logging-prod åˆ†åˆ«ä¸ºå¼€å‘/é˜¶æ®µäº§å“/ç”Ÿäº§é›†ç¾¤åšè®°å½•.</p>
<h5 id="nodeèŠ‚ç‚¹">nodeèŠ‚ç‚¹</h5>
<p>èŠ‚ç‚¹æ˜¯å•ä¸ªæœåŠ¡å™¨å®ä¾‹</p>
<h5 id="indexç´¢å¼•">indexç´¢å¼•</h5>
<p>ç´¢å¼•æ˜¯å…·æœ‰ç›¸ä¼¼ç‰¹æ€§çš„æ–‡æ¡£é›†åˆ</p>
<h5 id="typeç±»å‹">typeç±»å‹</h5>
<p>åœ¨ç´¢å¼•ä¸­,å¯ä»¥å®šä¹‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªç±»å‹,ç±»å‹æ˜¯ç´¢å¼•çš„é€»è¾‘ç±»åˆ«/åˆ†åŒº,å…¶è¯­ä¹‰å®Œå…¨å–å†³äºä½ .</p>
<h5 id="documentæ–‡æ¡£">documentæ–‡æ¡£</h5>
<p>æ–‡æ¡£æ˜¯å¯ä»¥è¢«ç´¢å¼•çš„ä¿¡æ¯çš„åŸºæœ¬å•ä½.ä¾‹å¦‚,ä½ å¯ä»¥ä¸ºå•ä¸ªå®¢æˆ·æä¾›ä¸€ä¸ªæ–‡æ¡£,å•ä¸ªäº§å“æä¾›å¦ä¸€ä¸ªæ–‡æ¡£,ä»¥åŠå•ä¸ªè®¢å•æä¾›å¦ä¸€ä¸ªæ–‡æ¡£.</p>
<h5 id="shardsreplicasåˆ†ç‰‡ä¸å‰¯æœ¬">shards&amp;replicasåˆ†ç‰‡ä¸å‰¯æœ¬</h5>
<h5 id="esåŸºæœ¬æ¦‚å¿µä¸å…³ç³»å‹æ•°æ®åº“çš„æ¯”è¾ƒ">ESåŸºæœ¬æ¦‚å¿µä¸å…³ç³»å‹æ•°æ®åº“çš„æ¯”è¾ƒ</h5>
<table>
<thead>
<tr>
<th>ESæ¦‚å¿µ</th>
<th>å…³ç³»å‹æ•°æ®åº“</th>
</tr>
</thead>
<tbody>
<tr>
<td>indexç´¢å¼•æ”¯æŒå…¨æ–‡æ£€ç´¢</td>
<td>databaseæ•°æ®åº“</td>
</tr>
<tr>
<td>typeç±»å‹</td>
<td>tableè¡¨</td>
</tr>
<tr>
<td>documentæ–‡æ¡£,ä¸åŒæ–‡æ¡£å¯ä»¥æœ‰ä¸åŒçš„å­—æ®µé›†åˆ</td>
<td>rowæ•°æ®è¡Œ</td>
</tr>
<tr>
<td>fieldå­—æ®µ</td>
<td>columnæ•°æ®åˆ—</td>
</tr>
<tr>
<td>mappingæ˜ å°„</td>
<td>schemaæ¨¡å¼</td>
</tr>
</tbody>
</table>
<h5 id="es-api">ES API</h5>
<p>ä¸‹è½½å®‰è£…</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210902001925922.png" >
		<img src="/GoLearning.assets/image-20210902001925922.png"
			
			
			
			loading="lazy"
			alt="image-20210902001925922">
	</a>
	
	<figcaption>image-20210902001925922</figcaption>
	
</figure></p>
<p>æŸ¥çœ‹</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210902001948107.png" >
		<img src="/GoLearning.assets/image-20210902001948107.png"
			
			
			
			loading="lazy"
			alt="image-20210902001948107">
	</a>
	
	<figcaption>image-20210902001948107</figcaption>
	
</figure></p>
<p>æŸ¥çœ‹å¿ƒè·³</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210902002107349.png" >
		<img src="/GoLearning.assets/image-20210902002107349.png"
			
			
			
			loading="lazy"
			alt="image-20210902002107349">
	</a>
	
	<figcaption>image-20210902002107349</figcaption>
	
</figure></p>
<p>æŸ¥è¯¢å½“å‰esé›†ç¾¤ä¸­æ‰€æœ‰çš„indices</p>
<p>curl -X get 127.0.0.1:9200/_cat/indices?v</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210902002202915.png" >
		<img src="/GoLearning.assets/image-20210902002202915.png"
			
			
			
			loading="lazy"
			alt="image-20210902002202915">
	</a>
	
	<figcaption>image-20210902002202915</figcaption>
	
</figure></p>
<h4 id="ginå­¦ä¹ ">ginå­¦ä¹ </h4>
<p>hello world demo</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;github.com/gin-gonic/gin&#34;</span>
   <span class="s">&#34;net/http&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">//1.åˆ›å»ºè·¯ç”±
</span><span class="c1"></span>   <span class="nx">engine</span> <span class="o">:=</span> <span class="nx">gin</span><span class="p">.</span><span class="nf">Default</span><span class="p">()</span>
   <span class="c1">//2.ç»‘å®šè·¯ç”±è§„åˆ™,æ‰§è¡Œçš„å‡½æ•°
</span><span class="c1"></span>   <span class="c1">//gin.context , å°è£…äº†requestå’Œresponse
</span><span class="c1"></span>   <span class="nx">engine</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">c</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusOK</span><span class="p">,</span><span class="s">&#34;hello world!!!&#34;</span><span class="p">)</span>
   <span class="p">})</span>
   <span class="c1">//3.ç›‘å¬ç«¯å£ é»˜è®¤åœ¨8080ç«¯å£
</span><span class="c1"></span>   <span class="nx">engine</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s">&#34;:8000&#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h4 id="ginè·¯ç”±">ginè·¯ç”±</h4>
<h5 id="åŸºæœ¬è·¯ç”±">åŸºæœ¬è·¯ç”±</h5>
<ul>
<li>ginæ¡†æ¶ä¸­é‡‡ç”¨çš„è·¯ç”±åº“æ˜¯åŸºäºtprouteråšçš„</li>
<li>åœ°å€ä¸º:https://github.com/julienschmidt/httprouter</li>
</ul>
<h5 id="restfulé£æ ¼çš„api">restfulé£æ ¼çš„API</h5>
<ul>
<li>ginæ”¯æŒrestfulé£æ ¼çš„API</li>
<li>å³representational state transfer çš„ç¼©å†™ ç›´æ¥ç¿»è¯‘æ˜¯è¡¨ç°å±‚çŠ¶æ€è½¬åŒ–,æ˜¯ä¸€ç§äº’è”ç½‘åº”ç”¨ç¨‹åºçš„apiè®¾è®¡ç†å¿µ,urlå®šä½èµ„æº,ç”¨httpæè¿°æ“ä½œ</li>
</ul>
<p>è·å–æ–‡ç«  /blog/getxxx   get blog/xxx</p>
<p>æ·»åŠ  /blog/addxxx		post blog/xxx</p>
<p>ä¿®æ”¹ /blog/updatexxx  put  blog/xxx</p>
<p>åˆ é™¤ /blog/delxxx  		delete blog/xxx</p>
<h5 id="apiå‚æ•°">APIå‚æ•°</h5>
<ul>
<li>å¯ä»¥é€šè¿‡contextçš„paramæ–¹æ³•æ¥è·å–apiå‚æ•°</li>
<li>localhost:8000/xxx/zhangsan</li>
</ul>
<p><a class="link" href="http://localhost:8000/user/zhangsan/lisi"  target="_blank" rel="noopener"
    >localhost:8000/user/zhangsan/lisi</a></p>
<h5 id="urlå‚æ•°">URLå‚æ•°</h5>
<ul>
<li>URLå‚æ•°å¯ä»¥é€šè¿‡defaultquery()æˆ–è€…query()æ–¹æ³•æ¥å–</li>
<li>defaultquery()è‹¥å‚æ•°ä¸å­˜åœ¨,è¿”å›é»˜è®¤å€¼ query()è‹¥å‚æ•°ä¸å­˜åœ¨,è¿”å›ç©ºå­—ç¬¦ä¸²</li>
</ul>
<p><a class="link" href="http://localhost:8000/welcome?name=yourtreedad"  target="_blank" rel="noopener"
    >localhost:8000/welcome?name=yourtreedad</a></p>
<h5 id="è¡¨å•å‚æ•°">è¡¨å•å‚æ•°</h5>
<ul>
<li>è¡¨å•ä¼ è¾“ä¸ºpostè¯·æ±‚,httpå¸¸è§çš„ä¼ è¾“æ ¼å¼åŒ–ä¸ºå››ç§
<ul>
<li>application/json  jsonä¼ å‚</li>
<li>application/x-www-urlencoded  è¡¨å•ä¼ å‚</li>
<li>application/xml  xmlä¼ å‚</li>
<li>multipart/form-data  è¡¨å•ä¸Šä¼ æ–‡ä»¶</li>
</ul>
</li>
<li>è¡¨å•å‚æ•°å¯ä»¥é€šè¿‡postform()æ–¹æ³•è·å–,è¯¥æ–¹æ³•é»˜è®¤è§£æçš„æ˜¯x-www-form-urlencoded æˆ– from-dataæ ¼å¼çš„å‚æ•°</li>
</ul>
<h5 id="ä¸Šä¼ å•ä¸ªæ–‡ä»¶">ä¸Šä¼ å•ä¸ªæ–‡ä»¶</h5>
<ul>
<li>multipart/form-dataæ ¼å¼ç”¨äºæ–‡ä»¶ä¸Šä¼ </li>
<li>gin æ–‡ä»¶ä¸Šä¼ ä¸åŸç”Ÿçš„net/http æ–¹æ³•ç±»ä¼¼,ä¸åŒåœ¨äºginæŠŠåŸç”Ÿçš„requestå°è£…åˆ°äº†c.Requestä¸­</li>
</ul>
<h5 id="ä¸Šä¼ å¤šä¸ªæ–‡ä»¶">ä¸Šä¼ å¤šä¸ªæ–‡ä»¶</h5>
<p>MultipartFormä½¿ç”¨è¿™ä¸ªæ–¹æ³•è·å¾—æ‰€æœ‰æ–‡ä»¶çš„</p>
<p>ä½¿ç”¨multipartForm.File[&ldquo;files&rdquo;]æ¥å–æ‰€æœ‰æ–‡ä»¶æŒ‡é’ˆ</p>
<p>éå†, ç„¶åå­˜ç€å°±è¡Œäº†</p>
<h5 id="routes-group">routes Group</h5>
<ul>
<li>routes Group  æ˜¯ä¸ºäº†ç®¡ç†ä¸€äº›ç›¸åŒçš„URL</li>
</ul>
<h5 id="è·¯ç”±åŸç†">è·¯ç”±åŸç†</h5>
<ul>
<li>httprouter ä¼šå°†æ‰€æœ‰è·¯ç”±è§„åˆ™æ„é€ æˆä¸€ä¸ªå‰ç¼€æ ‘</li>
</ul>
<p>å‘½ä»¤è¡Œä¹Ÿå¯ä»¥å°è¯•ä¼ postå’ŒgetæŒ‡ä»¤</p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210828214026568.png" >
		<img src="/GoLearning.assets/image-20210828214026568.png"
			
			
			
			loading="lazy"
			alt="image-20210828214026568">
	</a>
	
	<figcaption>image-20210828214026568</figcaption>
	
</figure></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;github.com/gin-gonic/gin&#34;</span>
   <span class="s">&#34;log&#34;</span>
   <span class="s">&#34;net/http&#34;</span>
<span class="p">)</span>



<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">//1.åˆ›å»ºè·¯ç”±
</span><span class="c1"></span>   <span class="c1">//é»˜è®¤ä½¿ç”¨äº†2ä¸ªä¸­é—´ä»¶ Logger(), Recovery()
</span><span class="c1"></span>   <span class="nx">engine</span> <span class="o">:=</span> <span class="nx">gin</span><span class="p">.</span><span class="nf">Default</span><span class="p">()</span>
   <span class="c1">//engine:=gin.New()ä¹Ÿå¯ä»¥çš„
</span><span class="c1"></span>   <span class="c1">//2.ç»‘å®šè·¯ç”±è§„åˆ™,æ‰§è¡Œçš„å‡½æ•°
</span><span class="c1"></span>   <span class="c1">//gin.context , å°è£…äº†requestå’Œresponse
</span><span class="c1"></span>
   <span class="c1">//è·¯ç”±ç»„ å®é™…ä¸Šå°±æ˜¯ä¾¿äºç®¡ç† å°‘å†™ç‚¹ä¸œè¥¿
</span><span class="c1"></span>   <span class="nx">routerGroup</span> <span class="o">:=</span> <span class="nx">engine</span><span class="p">.</span><span class="nf">Group</span><span class="p">(</span><span class="s">&#34;/Get&#34;</span><span class="p">)</span>
   <span class="nx">routerGroup</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/v1&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">query</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">DefaultQuery</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">,</span> <span class="s">&#34;getParam&#34;</span><span class="p">)</span>
      <span class="nx">context</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusOK</span><span class="p">,</span><span class="nx">query</span><span class="p">)</span>

   <span class="p">})</span>

   <span class="nx">group</span> <span class="o">:=</span> <span class="nx">engine</span><span class="p">.</span><span class="nf">Group</span><span class="p">(</span><span class="s">&#34;/Post&#34;</span><span class="p">)</span>
   <span class="nx">group</span><span class="p">.</span><span class="nf">POST</span><span class="p">(</span><span class="s">&#34;/v1&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">postParam</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">DefaultPostForm</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">,</span> <span class="s">&#34;postParam&#34;</span><span class="p">)</span>
      <span class="nx">context</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusOK</span><span class="p">,</span><span class="nx">postParam</span><span class="p">)</span>
   <span class="p">})</span>

   <span class="c1">//index ç•Œé¢
</span><span class="c1"></span>   <span class="nx">engine</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">c</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusOK</span><span class="p">,</span><span class="s">&#34;hello world!!!&#34;</span><span class="p">)</span>
   <span class="p">})</span>

   <span class="c1">//apiå‚æ•° ç”¨ : æ¥å–
</span><span class="c1"></span>   <span class="nx">engine</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/user/:name/*action&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">//
</span><span class="c1"></span>      <span class="nx">name</span><span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">Param</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">)</span>
      <span class="nx">action</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">Param</span><span class="p">(</span><span class="s">&#34;action&#34;</span><span class="p">)</span>
      <span class="nx">context</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusOK</span><span class="p">,</span><span class="nx">name</span><span class="o">+</span><span class="s">&#34; is &#34;</span><span class="o">+</span><span class="nx">action</span><span class="p">)</span>
   <span class="p">})</span>

   <span class="c1">//urlå‚æ•° ?name=&#34;xxx&#34;
</span><span class="c1"></span>   <span class="nx">engine</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/welcome&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">query</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">DefaultQuery</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">,</span> <span class="s">&#34;Jack&#34;</span><span class="p">)</span>
      <span class="nx">context</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusOK</span><span class="p">,</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;Hello %s !&#34;</span><span class="p">,</span><span class="nx">query</span><span class="p">))</span>
   <span class="p">})</span>

   <span class="c1">//formè¡¨å•ä¼ å‚
</span><span class="c1"></span>   <span class="nx">engine</span><span class="p">.</span><span class="nf">POST</span><span class="p">(</span><span class="s">&#34;/PostForm&#34;</span><span class="p">,</span> <span class="nx">PostFormParams</span><span class="p">)</span>
   <span class="c1">//fromä¸Šä¼ å•ä¸ªæ–‡ä»¶
</span><span class="c1"></span>   <span class="nx">engine</span><span class="p">.</span><span class="nf">POST</span><span class="p">(</span><span class="s">&#34;/Upload&#34;</span><span class="p">,</span><span class="nx">UploadFile</span><span class="p">)</span>
   <span class="c1">//é™åˆ¶è¡¨å•ä¸Šä¼ å¤§å° 8mb,é»˜è®¤å€¼ä¸º32mb
</span><span class="c1"></span>   <span class="nx">engine</span><span class="p">.</span><span class="nx">MaxMultipartMemory</span> <span class="p">=</span> <span class="mi">8</span><span class="o">&lt;&lt;</span><span class="mi">20</span>
   <span class="c1">//formä¸Šä¼ å¤šä¸ªæ–‡ä»¶
</span><span class="c1"></span>   <span class="nx">engine</span><span class="p">.</span><span class="nf">POST</span><span class="p">(</span><span class="s">&#34;UploadFiles&#34;</span><span class="p">,</span><span class="nx">UploadFiles</span><span class="p">)</span>
   <span class="nx">engine</span><span class="p">.</span><span class="nf">PUT</span><span class="p">(</span><span class="s">&#34;/xxxput&#34;</span><span class="p">)</span>
   <span class="c1">//3.ç›‘å¬ç«¯å£ é»˜è®¤åœ¨8080ç«¯å£
</span><span class="c1"></span>   <span class="nx">engine</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s">&#34;:8000&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">UploadFiles</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">multipartForm</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">MultipartForm</span><span class="p">()</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;received multiple files failed , err :&#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
       <span class="nx">context</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusBadRequest</span><span class="p">,</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;get err %s &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">()))</span>
      <span class="k">return</span>
   <span class="p">}</span>

   <span class="c1">//è·å–æ‰€æœ‰æ–‡ä»¶
</span><span class="c1"></span>   <span class="nx">files</span> <span class="o">:=</span> <span class="nx">multipartForm</span><span class="p">.</span><span class="nx">File</span><span class="p">[</span><span class="s">&#34;files&#34;</span><span class="p">]</span>
   <span class="c1">//éå†æ‰€æœ‰files
</span><span class="c1"></span>   <span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">file</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">files</span> <span class="p">{</span>
      <span class="c1">//é€ä¸ªå­˜
</span><span class="c1"></span>      <span class="nx">err</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">SaveUploadedFile</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">file</span><span class="p">.</span><span class="nx">Filename</span><span class="p">)</span>
      <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
         <span class="nx">context</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusBadRequest</span><span class="p">,</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;upload err %s &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">()))</span>
         <span class="k">return</span>
      <span class="p">}</span>
   <span class="p">}</span>

   <span class="nx">context</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;upload ok %d files!&#34;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">files</span><span class="p">)))</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">UploadFile</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">//ä»è¡¨å•ä¸­å–æ–‡ä»¶
</span><span class="c1"></span>   <span class="nx">file</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">FormFile</span><span class="p">(</span><span class="s">&#34;file&#34;</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;receive file error, cause : &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="nx">log</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">Filename</span><span class="p">)</span>
   <span class="c1">//ä¼ åˆ°é¡¹ç›®çš„æ ¹ç›®å½•, åå­—å°±ç”¨æœ¬èº«çš„å°±å¥½
</span><span class="c1"></span>   <span class="nx">err</span> <span class="p">=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">SaveUploadedFile</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">file</span><span class="p">.</span><span class="nx">Filename</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;file save failed , error : &#34;</span><span class="p">,</span><span class="nx">err</span><span class="p">)</span>
      <span class="k">return</span>
   <span class="p">}</span>

   <span class="c1">//æ‰“å°ä¿¡æ¯
</span><span class="c1"></span>   <span class="nx">context</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;&#39;%s&#39; has already uploaded!&#34;</span><span class="p">,</span><span class="nx">file</span><span class="p">.</span><span class="nx">Filename</span><span class="p">))</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">PostFormParams</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">//è¡¨å•å‚æ•° è®¾ç½®é»˜è®¤å€¼
</span><span class="c1"></span>   <span class="nx">type1</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">DefaultPostForm</span><span class="p">(</span><span class="s">&#34;type&#34;</span><span class="p">,</span> <span class="s">&#34;alert&#34;</span><span class="p">)</span>
   <span class="c1">//æ¥æ”¶å…¶ä»–çš„
</span><span class="c1"></span>   <span class="nx">userName</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">PostForm</span><span class="p">(</span><span class="s">&#34;username&#34;</span><span class="p">)</span>
   <span class="nx">password</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">PostForm</span><span class="p">(</span><span class="s">&#34;password&#34;</span><span class="p">)</span>
   <span class="c1">//å¤šé€‰æ¡†
</span><span class="c1"></span>   <span class="nx">hobbys</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">PostFormArray</span><span class="p">(</span><span class="s">&#34;hobby&#34;</span><span class="p">)</span>

   <span class="nx">context</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusOK</span><span class="p">,</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;type is %s, username is %s, password is %s , hobbys is %v&#34;</span><span class="p">,</span><span class="nx">type1</span><span class="p">,</span><span class="nx">userName</span><span class="p">,</span><span class="nx">password</span><span class="p">,</span><span class="nx">hobbys</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><p>htmlå‰ç«¯ç•Œé¢</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>ç™»é™†<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&#34;http://127.0.0.1:8000/PostForm&#34;</span> <span class="na">method</span><span class="o">=</span><span class="s">&#34;post&#34;</span> <span class="na">enctype</span><span class="o">=</span><span class="s">&#34;application/x-www-form-urlencoded&#34;</span><span class="p">&gt;</span>
    ç”¨æˆ·å:<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;username&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
    å¯†<span class="err">&amp;</span>nbsp<span class="err">&amp;</span>nbspç : <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;password&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;password&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
    å…´<span class="err">&amp;</span>nbsp<span class="err">&amp;</span>nbspè¶£:
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;checkbox&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;run&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;hobby&#34;</span><span class="p">&gt;</span>è·‘æ­¥
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;checkbox&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;game&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;hobby&#34;</span><span class="p">&gt;</span>æ¸¸æˆ
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;checkbox&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;money&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;hobby&#34;</span><span class="p">&gt;</span>é‡‘é’±
    <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;ç™»é™†&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>


<span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&#34;http://127.0.0.1:8000/Upload&#34;</span> <span class="na">method</span><span class="o">=</span><span class="s">&#34;post&#34;</span> <span class="na">enctype</span><span class="o">=</span><span class="s">&#34;multipart/form-data&#34;</span><span class="p">&gt;</span>
    å¤´åƒ:
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;file&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;file&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;æäº¤&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&#34;http://127.0.0.1:8000/UploadFiles&#34;</span> <span class="na">method</span><span class="o">=</span><span class="s">&#34;post&#34;</span> <span class="na">enctype</span><span class="o">=</span><span class="s">&#34;multipart/form-data&#34;</span><span class="p">&gt;</span>
    ä¸Šä¼ å¤šä¸ªæ–‡ä»¶:
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;file&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;files&#34;</span> <span class="na">multiple</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;æäº¤&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
    
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div><h4 id="ginæ•°æ®è§£æå’Œç»‘å®š">ginæ•°æ®è§£æå’Œç»‘å®š</h4>
<h5 id="jsonæ•°æ®è§£æå’Œç»‘å®š">jsonæ•°æ®è§£æå’Œç»‘å®š</h5>
<ul>
<li>å®¢æˆ·ç«¯ä¼ å‚,åç«¯æ¥æ”¶å¹¶è§£æåˆ°ç»“æ„ä½“</li>
</ul>
<p>ä½¿ç”¨ShouldBindJSONæ¥è§£æåˆ°ç»“æ„ä½“</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">engine</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;loginJSON&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">//å£°æ˜æ¥æ”¶çš„å˜é‡
</span><span class="c1"></span>   <span class="kd">var</span> <span class="nx">json</span> <span class="nx">Login</span>
   <span class="c1">//å°†requestçš„bodyä¸­çš„æ•°æ®,è‡ªåŠ¨æŒ‰ç…§jsonæ ¼å¼è§£æåˆ°ç»“æ„ä½“
</span><span class="c1"></span>   <span class="nx">err</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">ShouldBindJSON</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">json</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="c1">//è¿”å›é”™è¯¯ä¿¡æ¯
</span><span class="c1"></span>      <span class="c1">//gin.H å°è£…äº†ç”Ÿæˆjsonæ•°æ®çš„å·¥å…·
</span><span class="c1"></span>      <span class="nx">context</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusBadRequest</span><span class="p">,</span><span class="nx">gin</span><span class="p">.</span><span class="nx">H</span><span class="p">{</span><span class="s">&#34;error &#34;</span><span class="p">:</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">()})</span>
      <span class="k">return</span>
   <span class="p">}</span>

   <span class="c1">//åˆ¤æ–­ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®
</span><span class="c1"></span>   <span class="k">if</span> <span class="nx">json</span><span class="p">.</span><span class="nx">User</span><span class="o">!=</span><span class="s">&#34;2020170281&#34;</span><span class="o">||</span><span class="nx">json</span><span class="p">.</span><span class="nx">Password</span><span class="o">!=</span><span class="s">&#34;lalala123&#34;</span> <span class="p">{</span>
      <span class="nx">context</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusBadRequest</span><span class="p">,</span><span class="nx">gin</span><span class="p">.</span><span class="nx">H</span><span class="p">{</span><span class="s">&#34;status&#34;</span><span class="p">:</span><span class="s">&#34;304&#34;</span><span class="p">})</span>
      <span class="k">return</span>
   <span class="p">}</span>

   <span class="nx">context</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusOK</span><span class="p">,</span><span class="nx">gin</span><span class="p">.</span><span class="nx">H</span><span class="p">{</span><span class="s">&#34;status&#34;</span><span class="p">:</span><span class="s">&#34;200&#34;</span><span class="p">})</span>
<span class="p">})</span>
</code></pre></div><p><figure 
	>
	<a href="/GoLearning.assets/image-20210828224803650.png" >
		<img src="/GoLearning.assets/image-20210828224803650.png"
			
			
			
			loading="lazy"
			alt="image-20210828224803650">
	</a>
	
	<figcaption>image-20210828224803650</figcaption>
	
</figure></p>
<h5 id="è¡¨å•æ•°æ®è§£æå’Œç»‘å®š">è¡¨å•æ•°æ®è§£æå’Œç»‘å®š</h5>
<p>ä½¿ç”¨Bindæ¥è§£æç»“æ„ä½“</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">engine</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;loginForm&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
   <span class="kd">var</span> <span class="nx">form</span> <span class="nx">Login</span>
   <span class="c1">//bind()é»˜è®¤è§£æå¹¶ç»‘å®šformæ ¼å¼
</span><span class="c1"></span>   <span class="c1">//æ ¹æ®è¯·æ±‚å¤´ä¸­çš„content-typeè‡ªåŠ¨æ¨æ–­
</span><span class="c1"></span>   <span class="nx">err</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">Bind</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">form</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">context</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusBadRequest</span><span class="p">,</span><span class="nx">gin</span><span class="p">.</span><span class="nx">H</span><span class="p">{</span><span class="s">&#34;error&#34;</span><span class="p">:</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">()})</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="k">if</span> <span class="nx">form</span><span class="p">.</span><span class="nx">User</span><span class="o">!=</span><span class="s">&#34;2020170281&#34;</span><span class="o">||</span><span class="nx">form</span><span class="p">.</span><span class="nx">Password</span><span class="o">!=</span><span class="s">&#34;lalala123&#34;</span><span class="p">{</span>
      <span class="nx">context</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusBadRequest</span><span class="p">,</span><span class="nx">gin</span><span class="p">.</span><span class="nx">H</span><span class="p">{</span><span class="s">&#34;status&#34;</span><span class="p">:</span><span class="s">&#34;304&#34;</span><span class="p">})</span>
      <span class="k">return</span>
   <span class="p">}</span>

   <span class="nx">context</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusOK</span><span class="p">,</span><span class="nx">gin</span><span class="p">.</span><span class="nx">H</span><span class="p">{</span><span class="s">&#34;status&#34;</span><span class="p">:</span><span class="s">&#34;200&#34;</span><span class="p">})</span>
<span class="p">})</span>
</code></pre></div><p>htmlç•Œé¢</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>ç™»é™†<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&#34;http://127.0.0.1:8000/loginForm&#34;</span> <span class="na">method</span><span class="o">=</span><span class="s">&#34;get&#34;</span> <span class="na">enctype</span><span class="o">=</span><span class="s">&#34;application/x-www-form-urlencoded&#34;</span><span class="p">&gt;</span>
    ç”¨æˆ·å:<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;username&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
    å¯†<span class="err">&amp;</span>nbsp<span class="err">&amp;</span>nbspç : <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;password&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;password&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;ç™»é™†&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div><h5 id="uriæ•°æ®è§£æå’Œç»‘å®š">URIæ•°æ®è§£æå’Œç»‘å®š</h5>
<p>ä½¿ç”¨shouldbinduriæ–¹æ³•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">engine</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;loginURI/:user/:password&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
   <span class="kd">var</span> <span class="nx">URI</span> <span class="nx">Login</span>
   <span class="nx">err</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">ShouldBindUri</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">URI</span><span class="p">)</span>
   <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
      <span class="nx">context</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusBadRequest</span><span class="p">,</span><span class="nx">gin</span><span class="p">.</span><span class="nx">H</span><span class="p">{</span><span class="s">&#34;error&#34;</span><span class="p">:</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">()})</span>
      <span class="k">return</span>
   <span class="p">}</span>

   <span class="k">if</span> <span class="nx">URI</span><span class="p">.</span><span class="nx">User</span><span class="o">!=</span><span class="s">&#34;2020170281&#34;</span><span class="o">||</span><span class="nx">URI</span><span class="p">.</span><span class="nx">Password</span><span class="o">!=</span><span class="s">&#34;lalala123&#34;</span> <span class="p">{</span>
      <span class="nx">context</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusBadRequest</span><span class="p">,</span><span class="nx">gin</span><span class="p">.</span><span class="nx">H</span><span class="p">{</span><span class="s">&#34;status&#34;</span><span class="p">:</span><span class="mi">304</span><span class="p">})</span>
      <span class="k">return</span>
   <span class="p">}</span>
   <span class="nx">context</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusOK</span><span class="p">,</span><span class="nx">gin</span><span class="p">.</span><span class="nx">H</span><span class="p">{</span><span class="s">&#34;status&#34;</span><span class="p">:</span><span class="mi">200</span><span class="p">})</span>
<span class="p">})</span>
</code></pre></div><p><figure 
	>
	<a href="/GoLearning.assets/image-20210828231200951.png" >
		<img src="/GoLearning.assets/image-20210828231200951.png"
			
			
			
			loading="lazy"
			alt="image-20210828231200951">
	</a>
	
	<figcaption>image-20210828231200951</figcaption>
	
</figure></p>
<h5 id="å“åº”ç±»å‹">å“åº”ç±»å‹</h5>
<ul>
<li>xml</li>
<li>json</li>
<li>protobuf</li>
<li>yaml</li>
</ul>
<pre><code class="language-go'" data-lang="go'">package main

import (
   &quot;github.com/gin-gonic/gin&quot;
   &quot;github.com/gin-gonic/gin/testdata/protoexample&quot;
   &quot;net/http&quot;
)

//å¤šç§å“åº”æ–¹å¼
func main() {
   //1.åˆ›å»ºè·¯ç”±
   //2.é»˜è®¤ä½¿ç”¨äº†2ä¸ªä¸­é—´ä»¶logger recovery
   engine := gin.Default()


   //1.json
   engine.GET(&quot;/someJson&quot;, func(context *gin.Context) {
      context.JSON(http.StatusOK,gin.H{&quot;message&quot;:&quot;someJson&quot;,&quot;Status&quot;:200})
   })

   //2.ç»“æ„ä½“å“åº”
   engine.GET(&quot;someStruct&quot;, func(context *gin.Context) {
      context.JSON(http.StatusOK, struct {
         Name , Message string
         Number int
      }{&quot;root&quot;,&quot;message&quot;,123})
   })

   //3.XMLå“åº”
   engine.GET(&quot;/someXML&quot;, func(context *gin.Context) {
      context.XML(http.StatusOK,gin.H{&quot;message&quot;:&quot;xml&quot;})
   })

   //4.yamlå“åº”
   engine.GET(&quot;/someYaml&quot;, func(context *gin.Context) {
      context.YAML(http.StatusOK,gin.H{&quot;name&quot;:&quot;YAML&quot;})
   })

   //5.protobufæ ¼å¼ å‰¯æ­Œå¼€å‘çš„é«˜æ ¡å­˜å‚¨è¯»å–çš„å·¥å…·
   engine.GET(&quot;/someProtoBuf&quot;, func(context *gin.Context) {
       reps:=[]int64{1,2}
       //å®šä¹‰è¿”å›æ•°æ®
       label:=&quot;protobuf&quot;
       data:=&amp;protoexample.Test{
          Label: &amp;label,
          Reps: reps,
       }
       context.ProtoBuf(http.StatusOK,data)
   })

   engine.Run(&quot;:8000&quot;)
}
</code></pre><h5 id="html-æ¨¡ç‰ˆæ¸²æŸ“">HTML æ¨¡ç‰ˆæ¸²æŸ“</h5>
<ul>
<li>ginæ”¯æŒåŠ è½½htmlæ¨¡ç‰ˆ,ç„¶åæ ¹æ®æ¨¡ç‰ˆå‚æ•°è¿›è¡Œé…ç½®å¹¶è¿”å›ç›¸åº”çš„æ•°æ®,æœ¬è´¨ä¸Šå°±æ˜¯å­—ç¬¦ä¸²çš„æ›¿æ¢</li>
<li>loadhtmlglob()æ–¹æ³•å¯ä»¥åŠ è½½æ¨¡ç‰ˆæ–‡ä»¶</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">engine</span><span class="o">:=</span> <span class="nx">gin</span><span class="p">.</span><span class="nf">Default</span><span class="p">()</span>

   <span class="c1">//åŠ è½½æ¨¡ç‰ˆæ–‡ä»¶
</span><span class="c1"></span>   <span class="nx">engine</span><span class="p">.</span><span class="nf">LoadHTMLGlob</span><span class="p">(</span><span class="s">&#34;templates/*&#34;</span><span class="p">)</span>
   <span class="c1">//ä»¥ä¸‹è¿™ç§æ–¹å¼ä¹Ÿå¯ä»¥å•¦
</span><span class="c1"></span>   <span class="c1">//engine.LoadHTMLFiles(&#34;templates/index.tmpl&#34;)
</span><span class="c1"></span>   <span class="nx">engine</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/index&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">//æ ¹æ®æ–‡ä»¶åæ¸²æŸ“
</span><span class="c1"></span>      <span class="c1">//æœ€ç»ˆjsonå°†titleæ›¿æ¢
</span><span class="c1"></span>      <span class="nx">context</span><span class="p">.</span><span class="nf">HTML</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusOK</span><span class="p">,</span><span class="s">&#34;index.tmpl&#34;</span><span class="p">,</span><span class="nx">gin</span><span class="p">.</span><span class="nx">H</span><span class="p">{</span><span class="s">&#34;title&#34;</span><span class="p">:</span><span class="s">&#34;æˆ‘çš„æ ‡é¢˜&#34;</span><span class="p">})</span>
   <span class="p">})</span>
   <span class="nx">engine</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s">&#34;:8000&#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><p><figure 
	>
	<a href="/GoLearning.assets/image-20210828234359001.png" >
		<img src="/GoLearning.assets/image-20210828234359001.png"
			
			
			
			loading="lazy"
			alt="image-20210828234359001">
	</a>
	
	<figcaption>image-20210828234359001</figcaption>
	
</figure></p>
<h5 id="é‡å®šå‘">é‡å®šå‘</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">engine</span> <span class="o">:=</span> <span class="nx">gin</span><span class="p">.</span><span class="nf">Default</span><span class="p">()</span>
   <span class="nx">engine</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/redirect&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">//æ”¯æŒå†…éƒ¨å’Œå¤–éƒ¨çš„é‡å®šå‘
</span><span class="c1"></span>      <span class="nx">context</span><span class="p">.</span><span class="nf">Redirect</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusMovedPermanently</span><span class="p">,</span><span class="s">&#34;http://www.baidu.com&#34;</span><span class="p">)</span>
   <span class="p">})</span>

   <span class="nx">engine</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s">&#34;:8000&#34;</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div><h5 id="åŒæ­¥å¼‚æ­¥">åŒæ­¥å¼‚æ­¥</h5>
<ul>
<li>goroutineæœºåˆ¶å¯ä»¥æ–¹ä¾¿åœ°å®ç°å¼‚æ­¥å¤„ç†</li>
<li>å¦å¤–,åœ¨å¯åŠ¨æ–°çš„goroutineæ—¶,<strong>ä¸åº”è¯¥ä½¿ç”¨åŸå§‹ä¸Šä¸‹æ–‡,å¿…é¡»ä½¿ç”¨ä»–çš„åªè¯»å‰¯æœ¬</strong></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">unc</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">engine</span> <span class="o">:=</span> <span class="nx">gin</span><span class="p">.</span><span class="nf">Default</span><span class="p">()</span>
   <span class="c1">//1.å¼‚æ­¥
</span><span class="c1"></span>   <span class="nx">engine</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/long_async&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">//éœ€è¦æä¸€ä¸ªåªè¯»çš„å‰¯æœ¬
</span><span class="c1"></span>      <span class="nx">copyContext</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">Copy</span><span class="p">()</span>
      <span class="c1">//æ¨¡ä»¿å¼‚æ­¥å¤„ç†
</span><span class="c1"></span>      <span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
         <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
         <span class="nx">log</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;å¼‚æ­¥æ‰§è¡Œ...&#34;</span><span class="o">+</span><span class="nx">copyContext</span><span class="p">.</span><span class="nx">Request</span><span class="p">.</span><span class="nx">URL</span><span class="p">.</span><span class="nx">Path</span><span class="p">)</span>
      <span class="p">}()</span>
   <span class="p">})</span>

   <span class="c1">//2.åŒæ­¥
</span><span class="c1"></span>   <span class="nx">engine</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/long_sync&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
      <span class="nx">log</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;åŒæ­¥æ‰§è¡Œ...&#34;</span><span class="o">+</span><span class="nx">context</span><span class="p">.</span><span class="nx">Request</span><span class="p">.</span><span class="nx">URL</span><span class="p">.</span><span class="nx">Path</span><span class="p">)</span>
   <span class="p">})</span>
   <span class="nx">engine</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s">&#34;:8000&#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h4 id="ginä¸­é—´ä»¶">ginä¸­é—´ä»¶</h4>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210828235642323.png" >
		<img src="/GoLearning.assets/image-20210828235642323.png"
			
			
			
			loading="lazy"
			alt="image-20210828235642323">
	</a>
	
	<figcaption>image-20210828235642323</figcaption>
	
</figure></p>
<ul>
<li>ginå¯ä»¥æ„å»ºä¸­é—´ä»¶,ä½†å®ƒåªå¯¹æ³¨å†Œè¿‡çš„è·¯ç”±å‡½æ•°èµ·ä½œç”¨</li>
<li>å¯¹äºåˆ†ç»„è·¯ç”±,åµŒå¥—ä½¿ç”¨ä¸­é—´ä»¶,å¯ä»¥é™å®šä¸­é—´ä»¶çš„ä½œç”¨èŒƒå›´</li>
<li>ä¸­é—´ä»¶åˆ†ä¸ºå…¨å±€ä¸­é—´ä»¶,å•ä¸ªè·¯ç”±ä¸­é—´ä»¶å’Œç¾¤ç»„ä¸­é—´ä»¶</li>
<li>ginä¸­é—´ä»¶å¿…é¡»æ˜¯ä¸€ä¸ªgin.handlerfuncç±»å‹</li>
</ul>
<h5 id="å…¨å±€ä¸­é—´ä»¶">å…¨å±€ä¸­é—´ä»¶</h5>
<ul>
<li>æ‰€æœ‰è¯·æ±‚éƒ½ç»è¿‡æ­¤ä¸­é—´ä»¶</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;github.com/gin-gonic/gin&#34;</span>
   <span class="s">&#34;net/http&#34;</span>
   <span class="s">&#34;time&#34;</span>
<span class="p">)</span>

<span class="c1">//å®šä¹‰å…¨å±€ä¸­é—´ä»¶
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">MiddleWare</span><span class="p">()</span> <span class="nx">gin</span><span class="p">.</span><span class="nx">HandlerFunc</span> <span class="p">{</span>
   <span class="k">return</span> <span class="kd">func</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">t</span><span class="o">:=</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">()</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ä¸­é—´ä»¶å¼€å§‹æ‰§è¡Œäº†...&#34;</span><span class="p">)</span>
      <span class="c1">//è®¾ç½®å˜é‡åˆ°contextçš„keyä¸­,å¯ä»¥é€šè¿‡getå–
</span><span class="c1"></span>      <span class="nx">context</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;request&#34;</span><span class="p">,</span><span class="s">&#34;ä¸­é—´ä»¶&#34;</span><span class="p">)</span>
      <span class="c1">//æ‰§è¡Œå‡½æ•°
</span><span class="c1"></span>      <span class="nx">context</span><span class="p">.</span><span class="nf">Next</span><span class="p">()</span>
      <span class="c1">//ä¸­é—´ä»¶æ‰§è¡Œå®Œåç»­çš„ä¸€äº›äº‹æƒ…
</span><span class="c1"></span>      <span class="nx">status</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Writer</span><span class="p">.</span><span class="nf">Status</span><span class="p">()</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ä¸­é—´ä»¶æ‰§è¡Œå®Œæ¯•&#34;</span><span class="p">,</span><span class="nx">status</span><span class="p">)</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ç”¨æ—¶ : &#34;</span><span class="p">,</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Sub</span><span class="p">(</span><span class="nx">t</span><span class="p">))</span>
   <span class="p">}</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">engine</span><span class="o">:=</span> <span class="nx">gin</span><span class="p">.</span><span class="nf">Default</span><span class="p">()</span>

   <span class="c1">//æ³¨å†Œä¸­é—´ä»¶
</span><span class="c1"></span>   <span class="nx">engine</span><span class="p">.</span><span class="nf">Use</span><span class="p">(</span><span class="nf">MiddleWare</span><span class="p">())</span>
   <span class="p">{</span>
      <span class="nx">engine</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/middleware&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
         <span class="c1">//å–å€¼
</span><span class="c1"></span>         <span class="nx">request</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="s">&#34;request&#34;</span><span class="p">)</span>
         <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span>
         <span class="c1">//é¡µé¢æ¥æ”¶
</span><span class="c1"></span>         <span class="nx">context</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusOK</span><span class="p">,</span><span class="nx">gin</span><span class="p">.</span><span class="nx">H</span><span class="p">{</span><span class="s">&#34;request&#34;</span><span class="p">:</span><span class="nx">request</span><span class="p">})</span>
      <span class="p">})</span>
   <span class="p">}</span>
   <span class="nx">engine</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s">&#34;:8000&#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h5 id="nextæ–¹æ³•">next()æ–¹æ³•</h5>
<p>çœ‹åŸç  å®é™…ä¸Šå°±æ˜¯éå†äº†æ³¨å†Œçš„æ‰€æœ‰ä¸­é—´ä»¶çš„ä¸ªæ•°,</p>
<h5 id="å±€éƒ¨ä¸­é—´ä»¶">å±€éƒ¨ä¸­é—´ä»¶</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="c1">//å¦‚æ­¤å°±æ˜¯åœ¨è¿™ä¸ªè·¯ç”±ä¹‹ä¸‹å®šä¹‰äº†æ–°çš„ä¸­é—´ä»¶,å¯ä»¥è§†ä¸ºå•ä¸ªä¸­é—´ä»¶
</span><span class="c1"></span><span class="nx">engine</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/middlewareDouble&#34;</span><span class="p">,</span><span class="nf">MiddleWare</span><span class="p">(),</span> <span class="kd">func</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">//å–å€¼
</span><span class="c1"></span>   <span class="nx">request</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="s">&#34;request&#34;</span><span class="p">)</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span>
   <span class="c1">//é¡µé¢æ¥æ”¶
</span><span class="c1"></span>   <span class="nx">context</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusOK</span><span class="p">,</span><span class="nx">gin</span><span class="p">.</span><span class="nx">H</span><span class="p">{</span><span class="s">&#34;request&#34;</span><span class="p">:</span><span class="nx">request</span><span class="p">})</span>
<span class="p">})</span>
</code></pre></div><h5 id="ç»ƒä¹ -1">ç»ƒä¹ </h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;fmt&#34;</span>
   <span class="s">&#34;github.com/gin-gonic/gin&#34;</span>
   <span class="s">&#34;time&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">middleTimer</span><span class="p">()</span> <span class="nx">gin</span><span class="p">.</span><span class="nx">HandlerFunc</span> <span class="p">{</span>
   <span class="k">return</span> <span class="kd">func</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">now</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">()</span>
      <span class="nx">context</span><span class="p">.</span><span class="nf">Next</span><span class="p">()</span>
      <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ç”¨æ—¶: &#34;</span><span class="p">,</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Sub</span><span class="p">(</span><span class="nx">now</span><span class="p">))</span>
   <span class="p">}</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">engine</span> <span class="o">:=</span> <span class="nx">gin</span><span class="p">.</span><span class="nf">Default</span><span class="p">()</span>
   <span class="nx">engine</span><span class="p">.</span><span class="nf">Use</span><span class="p">(</span><span class="nf">middleTimer</span><span class="p">())</span>
   <span class="nx">group</span> <span class="o">:=</span> <span class="nx">engine</span><span class="p">.</span><span class="nf">Group</span><span class="p">(</span><span class="s">&#34;/timer&#34;</span><span class="p">)</span>
   <span class="nx">group</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/countTimer&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
   <span class="p">})</span>
   <span class="nx">group</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/counTimer1&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
   <span class="p">})</span>
   <span class="nx">engine</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s">&#34;:8000&#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h4 id="ä¼šè¯æ§åˆ¶">ä¼šè¯æ§åˆ¶</h4>
<h5 id="cookieæ˜¯ä»€ä¹ˆ">cookieæ˜¯ä»€ä¹ˆ</h5>
<ul>
<li>httpæ˜¯æ— çŠ¶æ€åè®®,æœåŠ¡å™¨ä¸èƒ½è®°å½•é‡Œæµè§ˆå™¨çš„è®¿é—®çŠ¶æ€,ä¹Ÿå°±æ˜¯è¯´æœåŠ¡å™¨ä¸èƒ½åŒºåˆ†ä¸¤æ¬¡è¯·æ±‚æ˜¯å¦æ˜¯ç”±åŒä¸€ä¸ªå®¢æˆ·ç«¯å‘å‡ºçš„</li>
<li>cookieå°±æ˜¯è§£å†³httpåè®®æ— çŠ¶æ€çš„æ–¹æ¡ˆä¹‹ä¸€,ä¸­æ–‡æ˜¯å°ç”œé¥¼çš„æ„æ€</li>
<li>cookieå®é™…ä¸Šå°±æ˜¯æœåŠ¡å™¨ä¿å­˜åœ¨æµè§ˆå™¨ä¸Šçš„ä¸€æ®µä¿¡æ¯,æµè§ˆå™¨æœ‰äº†cookieä¹‹å,æ¯æ¬¡å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶éƒ½ä¼šåŒæ—¶å°†è¯¥ä¿¡æ¯å‘é€ç»™æœåŠ¡å™¨,æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚å,å°±å¯ä»¥æ ¹æ®è¯¥ä¿¡æ¯å¤„ç†è¯·æ±‚</li>
<li>cookieç”±æœåŠ¡å™¨åˆ›å»º,å¹¶å‘é€ç»™æµè§ˆå™¨,æœ€ç»ˆç”±æµè§ˆå™¨ä¿å­˜</li>
</ul>
<h5 id="cookieç”¨é€”">cookieç”¨é€”</h5>
<ul>
<li>ä¿æŒç™»é™†çŠ¶æ€</li>
<li>äº¬ä¸œè´­ç‰©è½¦</li>
</ul>
<h5 id="cookieçš„ä½¿ç”¨">cookieçš„ä½¿ç”¨</h5>
<ul>
<li>æœåŠ¡ç«¯å‘é€cookieid</li>
</ul>
<h5 id="cookieç»ƒä¹ ">cookieç»ƒä¹ </h5>
<ul>
<li>æ¨¡æ‹Ÿå®ç°æƒé™éªŒè¯ä¸­é—´ä»¶
<ul>
<li>æœ‰ä¸¤ä¸ªè·¯ç”±,loginç”¨æ¥è®¾ç½®cookie</li>
<li>homeç”¨æ¥è®¿é—®</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
   <span class="s">&#34;github.com/gin-gonic/gin&#34;</span>
   <span class="s">&#34;net/http&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">MiddleWareAuth</span><span class="p">()</span> <span class="nx">gin</span><span class="p">.</span><span class="nx">HandlerFunc</span> <span class="p">{</span>
   <span class="k">return</span> <span class="kd">func</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">cookie</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">Cookie</span><span class="p">(</span><span class="s">&#34;loginToken&#34;</span><span class="p">)</span>
      <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
         <span class="c1">//è¿”å›é”™è¯¯
</span><span class="c1"></span>         <span class="nx">context</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusOK</span><span class="p">,</span> <span class="nx">gin</span><span class="p">.</span><span class="nx">H</span><span class="p">{</span><span class="s">&#34;error&#34;</span><span class="p">:</span> <span class="s">&#34;StatusUnauthorized&#34;</span><span class="p">})</span>
         <span class="nx">context</span><span class="p">.</span><span class="nf">Abort</span><span class="p">()</span>
         <span class="k">return</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="nx">cookie</span> <span class="o">==</span> <span class="s">&#34;true&#34;</span> <span class="p">{</span>
         <span class="nx">context</span><span class="p">.</span><span class="nf">Next</span><span class="p">()</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">engine</span> <span class="o">:=</span> <span class="nx">gin</span><span class="p">.</span><span class="nf">Default</span><span class="p">()</span>

   <span class="nx">engine</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/login&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">http</span><span class="p">.</span><span class="nf">SetCookie</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">Writer</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">http</span><span class="p">.</span><span class="nx">Cookie</span><span class="p">{</span>
         <span class="nx">Name</span><span class="p">:</span>  <span class="s">&#34;loginToken&#34;</span><span class="p">,</span>
         <span class="nx">Value</span><span class="p">:</span> <span class="s">&#34;true&#34;</span><span class="p">,</span>
      <span class="p">})</span>
      <span class="nx">context</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusOK</span><span class="p">,</span> <span class="s">&#34;Login successful&#34;</span><span class="p">)</span>
   <span class="p">})</span>

   <span class="nx">engine</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/home&#34;</span><span class="p">,</span> <span class="nf">MiddleWareAuth</span><span class="p">(),</span> <span class="kd">func</span><span class="p">(</span><span class="nx">context</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">context</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusOK</span><span class="p">,</span> <span class="nx">gin</span><span class="p">.</span><span class="nx">H</span><span class="p">{</span><span class="s">&#34;data&#34;</span><span class="p">:</span> <span class="s">&#34;home&#34;</span><span class="p">})</span>
   <span class="p">})</span>
   <span class="nx">engine</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s">&#34;:8000&#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h5 id="cookieçš„ç¼ºç‚¹">cookieçš„ç¼ºç‚¹</h5>
<ul>
<li>ä¸å®‰å…¨ æ˜æ–‡</li>
<li>å¢åŠ å¸¦å®½æ¶ˆè€—</li>
<li>å¯ä»¥è¢«ç¦ç”¨</li>
<li>cookieæœ‰ä¸Šé™</li>
</ul>
<h5 id="sessionæ˜¯ä»€ä¹ˆ">sessionæ˜¯ä»€ä¹ˆ</h5>
<ul>
<li>sessionå¯ä»¥å¼¥è¡¥cookieçš„ä¸è¶³,sessionå¿…é¡»ä¾èµ–äºcookieæ‰èƒ½ä½¿ç”¨,ç”Ÿæˆä¸€ä¸ªsessionidæ”¾åœ¨cookieé‡Œä¼ ç»™å®¢æˆ·ç«¯å°±å¯ä»¥äº†</li>
</ul>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210829104620811.png" >
		<img src="/GoLearning.assets/image-20210829104620811.png"
			
			
			
			loading="lazy"
			alt="image-20210829104620811">
	</a>
	
	<figcaption>image-20210829104620811</figcaption>
	
</figure></p>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210829104914310.png" >
		<img src="/GoLearning.assets/image-20210829104914310.png"
			
			
			
			loading="lazy"
			alt="image-20210829104914310">
	</a>
	
	<figcaption>image-20210829104914310</figcaption>
	
</figure></p>
<p>sessionå­˜åœ¨æœåŠ¡ç«¯ä¸­</p>
<h5 id="sessionä¸­é—´ä»¶å¼€å‘">sessionä¸­é—´ä»¶å¼€å‘</h5>
<ul>
<li>
<p>è®¾è®¡ä¸€ä¸ªé€šç”¨çš„sessionæœåŠ¡,æ”¯æŒå†…å­˜å­˜å‚¨å’Œrediså­˜å‚¨</p>
</li>
<li>
<p>sessionæ¨¡å—è®¾è®¡</p>
<ul>
<li>æœ¬è´¨ä¸Šæ˜¯k-vç³»ç»Ÿ,é€šè¿‡keyæ¥è¿›è¡Œå¢åˆ æ”¹æŸ¥</li>
<li>sessionå¯ä»¥å­˜å‚¨åœ¨å†…å­˜æˆ–è€…redis(2ä¸ªç‰ˆæœ¬)</li>
</ul>
</li>
</ul>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210829105225472.png" >
		<img src="/GoLearning.assets/image-20210829105225472.png"
			
			
			
			loading="lazy"
			alt="image-20210829105225472">
	</a>
	
	<figcaption>image-20210829105225472</figcaption>
	
</figure></p>
<ul>
<li>sessionæ¥å£è®¾è®¡
<ul>
<li>set</li>
<li>get</li>
<li>del</li>
<li>save   sessionå­˜å‚¨,redisçš„å®ç°å»¶è¿ŸåŠ è½½</li>
</ul>
</li>
<li>sessionmgræ¥å£è®¾è®¡
<ul>
<li>init åˆå§‹åŒ– åŠ è½½redisåœ°å€</li>
<li>createsession åˆ›å»ºä¸€ä¸ªæ–°çš„session</li>
<li>getsession é€šè¿‡sessionidè·å–å¯¹åº”çš„sessionå¯¹è±¡</li>
</ul>
</li>
<li>memorysessionè®¾è®¡
<ul>
<li>å®šä¹‰memorysessionå¯¹è±¡ å­—æ®µsessionid  å­˜kvçš„map è¯»å†™é”</li>
<li>æ„é€ å‡½æ•° ä¸ºäº†è·å–å¯¹è±¡</li>
</ul>
</li>
<li>sessionmgrè®¾è®¡
<ul>
<li>å®šä¹‰memorysessionmgrå¯¹è±¡ å­—æ®µå­˜æ”¾æ‰€æœ‰çš„sessionçš„map,è¯»å†™é”</li>
<li>æ„é€ å‡½æ•°</li>
<li>init</li>
<li>cretesession</li>
<li>getsession</li>
</ul>
</li>
<li>redisressionè®¾è®¡
<ul>
<li>å®šä¹‰redissessionå¯¹è±¡ ssionidå­—æ®µ å­˜kvçš„map è¯»å†™é” redisè¿æ¥æ±  è®°å½•å†…å­˜ä¸­mapå¦è¢«ä¿®æ”¹çš„æ ‡è®°</li>
<li>æ„é€ å‡½æ•°</li>
<li>setå°†sessionå­˜åˆ°å†…å­˜ä¸­çš„map</li>
<li>getå–æ•°æ®å®ç°å»¶è¿ŸåŠ è½½</li>
<li>del</li>
<li>save å°†sessionå­˜åˆ°redis</li>
</ul>
</li>
<li>redissessionmgrè®¾è®¡
<ul>
<li>å®šä¹‰redissessionmgrå¯¹è±¡</li>
</ul>
</li>
</ul>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210829110208079.png" >
		<img src="/GoLearning.assets/image-20210829110208079.png"
			
			
			
			loading="lazy"
			alt="image-20210829110208079">
	</a>
	
	<figcaption>image-20210829110208079</figcaption>
	
</figure></p>
<p>è¿™é‡Œè¿˜æ˜¯è¦é‡ç”³ä¸€ä¸‹ httpä¼ å‚å•Š</p>
<p>é¦–å…ˆ ä¼ å‚å¯ä»¥åˆ†ä¸ºç½‘å€ä¼ å‚å’Œè¡¨å•ä¼ å‚</p>
<p>ç½‘å€ä¼ å‚åˆåˆ†ä¸ºapiä¼ å‚å’Œurlä¼ å‚</p>
<p>apiä¼ å‚ä½¿ç”¨/book/:name</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">name</span><span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">Param</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">)</span>
</code></pre></div><p>urlä¼ å‚ä½¿ç”¨/book</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">query</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">Query</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">)</span>
</code></pre></div><p>è¡¨å•ä¼ å‚</p>
<p>åˆ†ä¸ºgetå’Œpost  getçš„è¯æˆ‘ä»¬å‘ç° getçš„methodæœ€ç»ˆä¼šå˜æˆurl</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">query</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">Query</span><span class="p">(</span><span class="s">&#34;searchThing&#34;</span><span class="p">)</span>
</code></pre></div><p>postå°±ä½¿ç”¨</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">searchThing</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">GetPostForm</span><span class="p">(</span><span class="s">&#34;searchThing&#34;</span><span class="p">)</span>
<span class="nx">form</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">PostForm</span><span class="p">(</span><span class="s">&#34;searchThing&#34;</span><span class="p">)</span>
</code></pre></div><h4 id="elastic-search-1">Elastic Search</h4>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210903210305686.png" >
		<img src="/GoLearning.assets/image-20210903210305686.png"
			
			
			
			loading="lazy"
			alt="image-20210903210305686">
	</a>
	
	<figcaption>image-20210903210305686</figcaption>
	
</figure></p>
<h5 id="æŸ¥çœ‹å¥åº·">æŸ¥çœ‹å¥åº·</h5>
<p>curl -X GET127.0.0.1:9200/_cat/health?v</p>
<h5 id="åˆ›å»ºç´¢å¼•">åˆ›å»ºç´¢å¼•</h5>
<p>curl -X PUT 127.0.0.1:9200/www</p>
<h5 id="åˆ é™¤ç´¢å¼•">åˆ é™¤ç´¢å¼•</h5>
<p>curl -X DELETE 127.0.0.1:9200/www</p>
<h5 id="æ’å…¥æ•°æ®-1">æ’å…¥æ•°æ®</h5>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210903210614663.png" >
		<img src="/GoLearning.assets/image-20210903210614663.png"
			
			
			
			loading="lazy"
			alt="image-20210903210614663">
	</a>
	
	<figcaption>image-20210903210614663</figcaption>
	
</figure></p>
<h5 id="æ£€ç´¢æ•°æ®">æ£€ç´¢æ•°æ®</h5>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210903211123288.png" >
		<img src="/GoLearning.assets/image-20210903211123288.png"
			
			
			
			loading="lazy"
			alt="image-20210903211123288">
	</a>
	
	<figcaption>image-20210903211123288</figcaption>
	
</figure></p>
<h5 id="goæ“ä½œes">goæ“ä½œES</h5>
<h4 id="å¾®æœåŠ¡">å¾®æœåŠ¡</h4>
<h5 id="æ³¨å†Œä¸­å¿ƒé€‰å‹">æ³¨å†Œä¸­å¿ƒé€‰å‹</h5>
<p>consul / zookeeper / etcd / euerka</p>
<h5 id="é€‰é¡¹è®¾è®¡æ¨¡å¼">é€‰é¡¹è®¾è®¡æ¨¡å¼</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="nf">newOptions</span><span class="p">(</span><span class="s">&#34;str1&#34;</span><span class="p">,</span> <span class="s">&#34;str2&#34;</span><span class="p">,</span> <span class="s">&#34;str3&#34;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
   <span class="nf">newOptionsNew</span><span class="p">(</span><span class="nf">WithStrOption</span><span class="p">(</span><span class="s">&#34;str1&#34;</span><span class="p">))</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">OptionsNew</span> <span class="kd">struct</span> <span class="p">{</span>
   <span class="nx">strOption1</span> <span class="kt">string</span>
   <span class="nx">strOption2</span> <span class="kt">string</span>
   <span class="nx">strOption3</span> <span class="kt">string</span>
   <span class="nx">intOption1</span> <span class="kt">int</span>
   <span class="nx">intOption2</span> <span class="kt">int</span>
   <span class="nx">intOption3</span> <span class="kt">int</span>
<span class="p">}</span>

<span class="c1">// Option å…ˆå£°æ˜ä¸€ä¸ªå‡½æ•°ç±»å‹,ç”¨äºä¼ å‚
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">Option</span> <span class="kd">func</span><span class="p">(</span><span class="nx">option</span> <span class="o">*</span><span class="nx">OptionsNew</span><span class="p">)</span>

<span class="c1">// WithStrOption å®šä¹‰å…·ä½“ç»™æŸä¸ªå­—æ®µèµ‹å€¼çš„æ–¹æ³• è¿”å›ä¸€ä¸ªæ–¹æ³• é€šè¿‡è¿™ä¸ªæ–¹æ³•ç»™ç»“æ„ä½“èµ‹å€¼
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">WithStrOption</span><span class="p">(</span><span class="nx">str</span> <span class="kt">string</span><span class="p">)</span> <span class="nx">Option</span> <span class="p">{</span>
   <span class="k">return</span> <span class="kd">func</span><span class="p">(</span><span class="nx">option</span> <span class="o">*</span><span class="nx">OptionsNew</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">option</span><span class="p">.</span><span class="nx">strOption1</span> <span class="p">=</span> <span class="nx">str</span>
   <span class="p">}</span>
<span class="p">}</span>
<span class="c1">//åˆå§‹åŒ–ç»“æ„ä½“
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">newOptionsNew</span><span class="p">(</span><span class="nx">otions</span> <span class="o">...</span><span class="nx">Option</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">options</span> <span class="o">:=&amp;</span><span class="nx">OptionsNew</span><span class="p">{}</span>
   <span class="c1">//éå†otions,å¾—åˆ°æ¯ä¸€ä¸ªå‡½æ•°
</span><span class="c1"></span>   <span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">fun</span><span class="o">:=</span> <span class="k">range</span> <span class="nx">otions</span> <span class="p">{</span>
      <span class="c1">//è°ƒç”¨å‡½æ•°, åœ¨å‡½æ•°é‡Œ,ç»™ä¼ è¿›å»çš„å¯¹è±¡èµ‹å€¼
</span><span class="c1"></span>      <span class="nf">fun</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span>
   <span class="p">}</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;init options %#v\n&#34;</span><span class="p">,</span><span class="nx">options</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">Options</span> <span class="kd">struct</span> <span class="p">{</span>
   <span class="nx">strOption1</span> <span class="kt">string</span>
   <span class="nx">strOption2</span> <span class="kt">string</span>
   <span class="nx">strOption3</span> <span class="kt">string</span>
   <span class="nx">intOption1</span> <span class="kt">int</span>
   <span class="nx">intOption2</span> <span class="kt">int</span>
   <span class="nx">intOption3</span> <span class="kt">int</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">newOptions</span><span class="p">(</span><span class="nx">strOption1</span><span class="p">,</span> <span class="nx">strOption2</span><span class="p">,</span> <span class="nx">strOption3</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">intOption1</span><span class="p">,</span> <span class="nx">intOption2</span><span class="p">,</span> <span class="nx">intOption3</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">options</span> <span class="o">:=</span> <span class="nx">Options</span><span class="p">{</span>
      <span class="nx">strOption1</span><span class="p">:</span> <span class="nx">strOption1</span><span class="p">,</span>
      <span class="nx">strOption2</span><span class="p">:</span> <span class="nx">strOption2</span><span class="p">,</span>
      <span class="nx">strOption3</span><span class="p">:</span> <span class="nx">strOption3</span><span class="p">,</span>
      <span class="nx">intOption1</span><span class="p">:</span> <span class="nx">intOption1</span><span class="p">,</span>
      <span class="nx">intOption2</span><span class="p">:</span> <span class="nx">intOption2</span><span class="p">,</span>
      <span class="nx">intOption3</span><span class="p">:</span> <span class="nx">intOption3</span><span class="p">,</span>
   <span class="p">}</span>

   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;init option %#v\n&#34;</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h5 id="æ³¨å†Œç»„ä»¶æ¥å£å¼€å‘">æ³¨å†Œç»„ä»¶æ¥å£å¼€å‘</h5>
<ul>
<li>ç›®æ ‡
<ul>
<li>æ”¯æŒå¤šæ³¨å†Œä¸­å¿ƒ,æ—¢æ”¯æŒconsulåˆæ”¯æŒetcd</li>
<li>æ”¯æŒå¯æ‰©å±•</li>
<li>æä¾›åŸºäºåå­—çš„æ’ä»¶ç®¡ç†å‡½æ•°,ç”¨æ¥æ³¨å†Œæ’ä»¶</li>
</ul>
</li>
</ul>
<p><figure 
	>
	<a href="/GoLearning.assets/image-20210903224236637.png" >
		<img src="/GoLearning.assets/image-20210903224236637.png"
			
			
			
			loading="lazy"
			alt="image-20210903224236637">
	</a>
	
	<figcaption>image-20210903224236637</figcaption>
	
</figure></p>
<h5 id="æµè¡Œrpcæ¡†æ¶çš„å¯¹æ¯”">æµè¡ŒRPCæ¡†æ¶çš„å¯¹æ¯”</h5>
<p>dubbo / motan / thrift / grpc</p>
<h5 id="grpcç®€ä»‹">gRPCç®€ä»‹</h5>
<ul>
<li>pcè¯­è¨€ä¸­ç«‹/å¹³å°ä¸­ç«‹/å¼€æºçš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ç³»ç»Ÿ</li>
<li>grpcç”±å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å¯ä»¥åœ¨å¤šç§ç¯å¢ƒä¸­è¿è¡Œå’Œäº¤äº’,ä¾‹å¦‚å†™ä¸€ä¸ªjavaæœåŠ¡ç«¯,å¯ä»¥ç”¨goè¯­è¨€å†™å®¢æˆ·ç«¯è°ƒç”¨</li>
</ul>
<h5 id="grpcä¸protobufä»‹ç»">grpcä¸protobufä»‹ç»</h5>
<ul>
<li>å¾®æœåŠ¡æ¶æ„ä¸­,ç”±äºæ¯ä¸ªæœåŠ¡å¯¹åº”çš„ä»£ç åº“æ˜¯ç‹¬ç«‹è¿è¡Œçš„,æ— æ³•ç›´æ¥è°ƒç”¨,å½¼æ­¤é—´çš„é€šä¿¡å°±æ˜¯ä¸ªå¤§é—®é¢˜</li>
<li>grpcå¯ä»¥å®ç°å¾®æœåŠ¡,å°†å¤§çš„é¡¹ç›®æ‹†åˆ†ä¸ºå¤šä¸ªå°ä¸”ç‹¬ç«‹çš„ä¸šåŠ¡æ¨¡å—,ä¹Ÿå°±æ˜¯æœåŠ¡,å„æœåŠ¡ä¹‹é—´ä½¿ç”¨é«˜æ ¡çš„protobufåè®®è¿›è¡Œrpcè°ƒç”¨,grpcé»˜è®¤ä½¿ç”¨protocol buffers,è¿™ä¸ªgoogleå¼€æºçš„ä¸€å¥—æˆç†Ÿçš„ç»“æ„æ•°æ®åºåˆ—åŒ–æœºåˆ¶(å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–æ•°æ®æ ¼å¼å¦‚json)</li>
<li>å¯ä»¥ç”¨proto files åˆ›å»ºgrpcæœåŠ¡,ç”¨messageç±»å‹æ¥å®šä¹‰æ–¹æ³•å‚æ•°å’Œè¿”å›ç±»å‹</li>
</ul>
<h5 id="å®‰è£…grpcå’Œprotubuf">å®‰è£…grpcå’Œprotubuf</h5>
<p>git clone <a class="link" href="https://github.com/grpc/grpc-go.git"  target="_blank" rel="noopener"
    >https://github.com/grpc/grpc-go.git</a> $GOPATH/src/google.golang.org/grpc</p>
<p>git clone <a class="link" href="https://github.com/golang/net.git"  target="_blank" rel="noopener"
    >https://github.com/golang/net.git</a> $GOPATH/src/golang.org/x/net</p>
<p>git clone <a class="link" href="https://github.com/golang/text.git"  target="_blank" rel="noopener"
    >https://github.com/golang/text.git</a> $GOPATH/src/golang.org/x/text</p>
<p>go get -u github.com/golang/protobuf/{proto,protoc-gen-go}</p>
<p>git clone <a class="link" href="https://github.com/google/go-genproto.git"  target="_blank" rel="noopener"
    >https://github.com/google/go-genproto.git</a> $GOPATH/src/google.golang.org/genproto</p>
<h5 id="è¿›å…¥srcå¹¶install">è¿›å…¥src,å¹¶install</h5>
<p>cd $GOPATH/src/</p>
<p>go install google.golang.org/grpc</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/go/">GO</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    <aside class="related-contents--wrapper">
    
    
</aside>

     
     
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugo-theme-stack" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (DISQUS) {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2021 think hy how to learn
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.2.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer="true"
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer="true"
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    

        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                defer="false"
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
